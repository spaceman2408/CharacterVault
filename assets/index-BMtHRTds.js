import{r as tw,g as Sd,a as nw,c as s4}from"./ui-C6Febm84.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var zm={exports:{}},nc={};var zb;function o4(){if(zb)return nc;zb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:n,type:r,key:o,ref:a!==void 0?a:null,props:s}}return nc.Fragment=e,nc.jsx=t,nc.jsxs=t,nc}var Ib;function u4(){return Ib||(Ib=1,zm.exports=o4()),zm.exports}var k=u4(),q=tw();const Zi=Sd(q);var Im={exports:{}},rc={},Pm={exports:{}},Hm={};var Pb;function c4(){return Pb||(Pb=1,(function(n){function e(te,xe){var Ce=te.length;te.push(xe);e:for(;0<Ce;){var Ae=Ce-1>>>1,D=te[Ae];if(0<a(D,xe))te[Ae]=xe,te[Ce]=D,Ce=Ae;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var xe=te[0],Ce=te.pop();if(Ce!==xe){te[0]=Ce;e:for(var Ae=0,D=te.length,Te=D>>>1;Ae<Te;){var Ee=2*(Ae+1)-1,P=te[Ee],Qe=Ee+1,ct=te[Qe];if(0>a(P,Ce))Qe<D&&0>a(ct,P)?(te[Ae]=ct,te[Qe]=Ce,Ae=Qe):(te[Ae]=P,te[Ee]=Ce,Ae=Ee);else if(Qe<D&&0>a(ct,Ce))te[Ae]=ct,te[Qe]=Ce,Ae=Qe;else break e}}return xe}function a(te,xe){var Ce=te.sortIndex-xe.sortIndex;return Ce!==0?Ce:te.id-xe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var h=[],d=[],p=1,g=null,b=3,w=!1,A=!1,N=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function ee(te){for(var xe=t(d);xe!==null;){if(xe.callback===null)r(d);else if(xe.startTime<=te)r(d),xe.sortIndex=xe.expirationTime,e(h,xe);else break;xe=t(d)}}function Z(te){if(N=!1,ee(te),!A)if(t(h)!==null)A=!0,I||(I=!0,ne());else{var xe=t(d);xe!==null&&se(Z,xe.startTime-te)}}var I=!1,U=-1,ye=5,fe=-1;function L(){return _?!0:!(n.unstable_now()-fe<ye)}function J(){if(_=!1,I){var te=n.unstable_now();fe=te;var xe=!0;try{e:{A=!1,N&&(N=!1,H(U),U=-1),w=!0;var Ce=b;try{t:{for(ee(te),g=t(h);g!==null&&!(g.expirationTime>te&&L());){var Ae=g.callback;if(typeof Ae=="function"){g.callback=null,b=g.priorityLevel;var D=Ae(g.expirationTime<=te);if(te=n.unstable_now(),typeof D=="function"){g.callback=D,ee(te),xe=!0;break t}g===t(h)&&r(h),ee(te)}else r(h);g=t(h)}if(g!==null)xe=!0;else{var Te=t(d);Te!==null&&se(Z,Te.startTime-te),xe=!1}}break e}finally{g=null,b=Ce,w=!1}xe=void 0}}finally{xe?ne():I=!1}}}var ne;if(typeof R=="function")ne=function(){R(J)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,he=me.port2;me.port1.onmessage=J,ne=function(){he.postMessage(null)}}else ne=function(){O(J,0)};function se(te,xe){U=O(function(){te(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(te){switch(b){case 1:case 2:case 3:var xe=3;break;default:xe=b}var Ce=b;b=xe;try{return te()}finally{b=Ce}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(te,xe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ce=b;b=te;try{return xe()}finally{b=Ce}},n.unstable_scheduleCallback=function(te,xe,Ce){var Ae=n.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Ae+Ce:Ae):Ce=Ae,te){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Ce+D,te={id:p++,callback:xe,priorityLevel:te,startTime:Ce,expirationTime:D,sortIndex:-1},Ce>Ae?(te.sortIndex=Ce,e(d,te),t(h)===null&&te===t(d)&&(N?(H(U),U=-1):N=!0,se(Z,Ce-Ae))):(te.sortIndex=D,e(h,te),A||w||(A=!0,I||(I=!0,ne()))),te},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(te){var xe=b;return function(){var Ce=b;b=xe;try{return te.apply(this,arguments)}finally{b=Ce}}}})(Hm)),Hm}var Hb;function h4(){return Hb||(Hb=1,Pm.exports=c4()),Pm.exports}var qb;function f4(){if(qb)return rc;qb=1;var n=h4(),e=tw(),t=nw();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function o(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function c(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(s(i)!==i)throw Error(r(188))}function d(i){var l=i.alternate;if(!l){if(l=s(i),l===null)throw Error(r(188));return l!==i?null:i}for(var u=i,f=l;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return h(y),i;if(x===f)return h(y),l;x=x.sibling}throw Error(r(188))}if(u.return!==f.return)u=y,f=x;else{for(var T=!1,j=y.child;j;){if(j===u){T=!0,u=y,f=x;break}if(j===f){T=!0,f=y,u=x;break}j=j.sibling}if(!T){for(j=x.child;j;){if(j===u){T=!0,u=x,f=y;break}if(j===f){T=!0,f=x,u=y;break}j=j.sibling}if(!T)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:l}function p(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=p(i),l!==null)return l;i=i.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),R=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var me=Symbol.for("react.client.reference");function he(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===me?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case Z:return"Suspense";case I:return"SuspenseList";case fe:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case R:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case ee:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return l=i.displayName||null,l!==null?l:he(i.type)||"Memo";case ye:l=i._payload,i=i._init;try{return he(i(l))}catch{}}return null}var se=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Ae=[],D=-1;function Te(i){return{current:i}}function Ee(i){0>D||(i.current=Ae[D],Ae[D]=null,D--)}function P(i,l){D++,Ae[D]=i.current,i.current=l}var Qe=Te(null),ct=Te(null),et=Te(null),jt=Te(null);function ft(i,l){switch(P(et,l),P(ct,i),P(Qe,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?lb(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=lb(l),i=sb(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ee(Qe),P(Qe,i)}function Qt(){Ee(Qe),Ee(ct),Ee(et)}function Fe(i){i.memoizedState!==null&&P(jt,i);var l=Qe.current,u=sb(l,i.type);l!==u&&(P(ct,i),P(Qe,u))}function Ye(i){ct.current===i&&(Ee(Qe),Ee(ct)),jt.current===i&&(Ee(jt),Zu._currentValue=Ce)}var Pe,De;function lt(i){if(Pe===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Pe=l&&l[1]||"",De=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+i+De}var tt=!1;function Tt(i,l){if(!i||tt)return"";tt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ge){var pe=ge}Reflect.construct(i,[],Se)}else{try{Se.call()}catch(ge){pe=ge}i.call(Se.prototype)}}else{try{throw Error()}catch(ge){pe=ge}(Se=i())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ge){if(ge&&pe&&typeof ge.stack=="string")return[ge.stack,pe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=f.DetermineComponentFrameRoot(),T=x[0],j=x[1];if(T&&j){var F=T.split(`
`),ce=j.split(`
`);for(y=f=0;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;for(;y<ce.length&&!ce[y].includes("DetermineComponentFrameRoot");)y++;if(f===F.length||y===ce.length)for(f=F.length-1,y=ce.length-1;1<=f&&0<=y&&F[f]!==ce[y];)y--;for(;1<=f&&0<=y;f--,y--)if(F[f]!==ce[y]){if(f!==1||y!==1)do if(f--,y--,0>y||F[f]!==ce[y]){var ke=`
`+F[f].replace(" at new "," at ");return i.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",i.displayName)),ke}while(1<=f&&0<=y);break}}}finally{tt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?lt(u):""}function kt(i,l){switch(i.tag){case 26:case 27:case 5:return lt(i.type);case 16:return lt("Lazy");case 13:return i.child!==l&&l!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return Tt(i.type,!1);case 11:return Tt(i.type.render,!1);case 1:return Tt(i.type,!0);case 31:return lt("Activity");default:return""}}function vt(i){try{var l="",u=null;do l+=kt(i,u),u=i,i=i.return;while(i);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var kn=Object.prototype.hasOwnProperty,rn=n.unstable_scheduleCallback,je=n.unstable_cancelCallback,bt=n.unstable_shouldYield,Ot=n.unstable_requestPaint,Lt=n.unstable_now,An=n.unstable_getCurrentPriorityLevel,re=n.unstable_ImmediatePriority,ve=n.unstable_UserBlockingPriority,Ve=n.unstable_NormalPriority,Ze=n.unstable_LowPriority,at=n.unstable_IdlePriority,un=n.log,zt=n.unstable_setDisableYieldValue,It=null,Pt=null;function wt(i){if(typeof un=="function"&&zt(i),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(It,i)}catch{}}var Re=Math.clz32?Math.clz32:Es,Gn=Math.log,pn=Math.LN2;function Es(i){return i>>>=0,i===0?32:31-(Gn(i)/pn|0)|0}var He=256,za=262144,zl=4194304;function mi(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Il(i,l,u){var f=i.pendingLanes;if(f===0)return 0;var y=0,x=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var j=f&134217727;return j!==0?(f=j&~x,f!==0?y=mi(f):(T&=j,T!==0?y=mi(T):u||(u=j&~i,u!==0&&(y=mi(u))))):(j=f&~x,j!==0?y=mi(j):T!==0?y=mi(T):u||(u=f&~i,u!==0&&(y=mi(u)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,u=l&-l,x>=u||x===32&&(u&4194048)!==0)?l:y}function na(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Vd(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jc(){var i=zl;return zl<<=1,(zl&62914560)===0&&(zl=4194304),i}function Ni(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function Yr(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nu(i,l,u,f,y,x){var T=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var j=i.entanglements,F=i.expirationTimes,ce=i.hiddenUpdates;for(u=T&~u;0<u;){var ke=31-Re(u),Se=1<<ke;j[ke]=0,F[ke]=-1;var pe=ce[ke];if(pe!==null)for(ce[ke]=null,ke=0;ke<pe.length;ke++){var ge=pe[ke];ge!==null&&(ge.lane&=-536870913)}u&=~Se}f!==0&&Pl(i,f,0),x!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=x&~(T&~l))}function Pl(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var f=31-Re(l);i.entangledLanes|=l,i.entanglements[f]=i.entanglements[f]|1073741824|u&261930}function an(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var f=31-Re(u),y=1<<f;y&l|i[f]&l&&(i[f]|=l),u&=~y}}function Tn(i,l){var u=l&-l;return u=(u&42)!==0?1:ru(u),(u&(i.suspendedLanes|l))!==0?0:u}function ru(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ia(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hl(){var i=xe.p;return i!==0?i:(i=window.event,i===void 0?32:_b(i.type))}function ql(i,l){var u=xe.p;try{return xe.p=i,l()}finally{xe.p=u}}var Mi=Math.random().toString(36).slice(2),cn="__reactFiber$"+Mi,En="__reactProps$"+Mi,gr="__reactContainer$"+Mi,Pa="__reactEvents$"+Mi,Kd="__reactListeners$"+Mi,_i="__reactHandles$"+Mi,iu="__reactResources$"+Mi,Or="__reactMarker$"+Mi;function Ns(i){delete i[cn],delete i[En],delete i[Pa],delete i[Kd],delete i[_i]}function Di(i){var l=i[cn];if(l)return l;for(var u=i.parentNode;u;){if(l=u[gr]||u[cn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=pb(i);i!==null;){if(u=i[cn])return u;i=pb(i)}return l}i=u,u=i.parentNode}return null}function Zt(i){if(i=i[cn]||i[gr]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Rr(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function or(i){var l=i[iu];return l||(l=i[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(i){i[Or]=!0}var ra=new Set,Ul={};function gi(i,l){ji(i,l),ji(i+"Capture",l)}function ji(i,l){for(Ul[i]=l,i=0;i<l.length;i++)ra.add(l[i])}var ia=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),au={},Fl={};function eh(i){return kn.call(Fl,i)?!0:kn.call(au,i)?!1:ia.test(i)?Fl[i]=!0:(au[i]=!0,!1)}function yt(i,l,u){if(eh(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function Vl(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function Qr(i,l,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+f)}}function Wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ha(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function th(i,l,u){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,x=f.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){u=""+T,x.call(this,T)}}),Object.defineProperty(i,l,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ms(i){if(!i._valueTracker){var l=Ha(i)?"checked":"value";i._valueTracker=th(i,l,""+i[l])}}function lu(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return i&&(f=Ha(i)?i.checked?"true":"false":i.value),i=f,i!==u?(l.setValue(i),!0):!1}function Ft(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Kl=/[\n"\\]/g;function Yn(i){return i.replace(Kl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Oi(i,l,u,f,y,x,T,j){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),l!=null?T==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+Wn(l)):i.value!==""+Wn(l)&&(i.value=""+Wn(l)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),l!=null?Gl(i,T,Wn(l)):u!=null?Gl(i,T,Wn(u)):f!=null&&i.removeAttribute("value"),y==null&&x!=null&&(i.defaultChecked=!!x),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+Wn(j):i.removeAttribute("name")}function _s(i,l,u,f,y,x,T,j){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),l!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){Ms(i);return}u=u!=null?""+Wn(u):"",l=l!=null?""+Wn(l):u,j||l===i.value||(i.value=l),i.defaultValue=l}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=j?i.checked:!!f,i.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Ms(i)}function Gl(i,l,u){l==="number"&&Ft(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function yi(i,l,u,f){if(i=i.options,l){l={};for(var y=0;y<u.length;y++)l["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=l.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Wn(u),l=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}l!==null||i[y].disabled||(l=i[y])}l!==null&&(l.selected=!0)}}function su(i,l,u){if(l!=null&&(l=""+Wn(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+Wn(u):""}function Yl(i,l,u,f){if(l==null){if(f!=null){if(u!=null)throw Error(r(92));if(se(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),l=u}u=Wn(l),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f),Ms(i)}function aa(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var Gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(i,l,u){var f=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":f?i.setProperty(l,u):typeof u!="number"||u===0||Gd.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function ou(i,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var y in l)f=l[y],l.hasOwnProperty(y)&&u[y]!==f&&_t(i,y,f)}else for(var x in l)l.hasOwnProperty(x)&&_t(i,x,l[x])}function uu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xi(i){return yr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Sr(){}var Xr=null;function Ds(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var la=null,mn=null;function Br(i){var l=Zt(i);if(l&&(i=l.stateNode)){var u=i[En]||null;e:switch(i=l.stateNode,l.type){case"input":if(Oi(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Yn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==i&&f.form===i.form){var y=f[En]||null;if(!y)throw Error(r(90));Oi(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<u.length;l++)f=u[l],f.form===i.form&&lu(f)}break e;case"textarea":su(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&yi(i,!!u.multiple,l,!1)}}}var sa=!1;function qa(i,l,u){if(sa)return i(l,u);sa=!0;try{var f=i(l);return f}finally{if(sa=!1,(la!==null||mn!==null)&&(Vh(),la&&(l=la,i=mn,mn=la=null,Br(l),i)))for(l=0;l<i.length;l++)Br(i[l])}}function oa(i,l){var u=i.stateNode;if(u===null)return null;var f=u[En]||null;if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cu=!1;if(Qn)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){cu=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{cu=!1}var $r=null,js=null,Ua=null;function Fa(){if(Ua)return Ua;var i,l=js,u=l.length,f,y="value"in $r?$r.value:$r.textContent,x=y.length;for(i=0;i<u&&l[i]===y[i];i++);var T=u-i;for(f=1;f<=T&&l[u-f]===y[x-f];f++);return Ua=y.slice(i,1<f?1-f:void 0)}function Va(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Ql(){return!0}function nh(){return!1}function Rn(i){function l(u,f,y,x,T){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(u=i[j],this[j]=u?u(x):x[j]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ql:nh,this.isPropagationStopped=nh,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),l}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Rn(ua),Ri=g({},ua,{view:0,detail:0}),Rs=Rn(Ri),Xl,hu,$l,Bs=g({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$l&&($l&&i.type==="mousemove"?(Xl=i.screenX-$l.screenX,hu=i.screenY-$l.screenY):hu=Xl=0,$l=i),Xl)},movementY:function(i){return"movementY"in i?i.movementY:hu}}),Ls=Rn(Bs),fu=g({},Bs,{dataTransfer:0}),rh=Rn(fu),zs=g({},Ri,{relatedTarget:0}),Ka=Rn(zs),Is=g({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=Rn(Is),Qd=g({},ua,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ga=Rn(Qd),du=g({},ua,{data:0}),Ps=Rn(du),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Xn[i])?!!l[i]:!1}function ca(){return Wl}var ah=g({},Ri,{key:function(i){if(i.key){var l=pu[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Va(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?mu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(i){return i.type==="keypress"?Va(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Va(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Hs=Rn(ah),lh=g({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=Rn(lh),qs=g({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),yu=Rn(qs),ha=g({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Rn(ha),vu=g({},Bs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Us=Rn(vu),bu=g({},ua,{newState:0,oldState:0}),sh=Rn(bu),Xd=[9,13,27,32],Zl=Qn&&"CompositionEvent"in window,Bi=null;Qn&&"documentMode"in document&&(Bi=document.documentMode);var $d=Qn&&"TextEvent"in window&&!Bi,Fs=Qn&&(!Zl||Bi&&8<Bi&&11>=Bi),Vs=" ",oh=!1;function ku(i,l){switch(i){case"keyup":return Xd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uh(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fa=!1;function ch(i,l){switch(i){case"compositionend":return uh(l);case"keypress":return l.which!==32?null:(oh=!0,Vs);case"textInput":return i=l.data,i===Vs&&oh?null:i;default:return null}}function Wd(i,l){if(fa)return i==="compositionend"||!Zl&&ku(i,l)?(i=Fa(),Ua=js=$r=null,fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Fs&&l.locale!=="ko"?null:l.data;default:return null}}var hh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ks(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!hh[i.type]:l==="textarea"}function wu(i,l,u,f){la?mn?mn.push(f):mn=[f]:la=f,l=Wh(l,"onChange"),0<l.length&&(u=new Os("onChange","change",null,u,f),i.push({event:u,listeners:l}))}var Ya=null,Jl=null;function Zd(i){eb(i,0)}function Gs(i){var l=Rr(i);if(lu(l))return i}function es(i,l){if(i==="change")return l}var Wr=!1;if(Qn){var gn;if(Qn){var Qa="oninput"in document;if(!Qa){var da=document.createElement("div");da.setAttribute("oninput","return;"),Qa=typeof da.oninput=="function"}gn=Qa}else gn=!1;Wr=gn&&(!document.documentMode||9<document.documentMode)}function fh(){Ya&&(Ya.detachEvent("onpropertychange",Ys),Jl=Ya=null)}function Ys(i){if(i.propertyName==="value"&&Gs(Jl)){var l=[];wu(l,Jl,i,Ds(i)),qa(Zd,l)}}function dh(i,l,u){i==="focusin"?(fh(),Ya=l,Jl=u,Ya.attachEvent("onpropertychange",Ys)):i==="focusout"&&fh()}function pa(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Gs(Jl)}function Su(i,l){if(i==="click")return Gs(l)}function Xa(i,l){if(i==="input"||i==="change")return Gs(l)}function Li(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var cr=typeof Object.is=="function"?Object.is:Li;function m(i,l){if(cr(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var y=u[f];if(!kn.call(l,y)||!cr(i[y],l[y]))return!1}return!0}function v(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function S(i,l){var u=v(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=l&&f>=l)return{node:u,offset:l-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=v(u)}}function C(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?C(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function E(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Ft(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=Ft(i.document)}return l}function M(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var B=Qn&&"documentMode"in document&&11>=document.documentMode,z=null,K=null,ae=null,G=!1;function V(i,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;G||z==null||z!==Ft(f)||(f=z,"selectionStart"in f&&M(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ae&&m(ae,f)||(ae=f,f=Wh(K,"onSelect"),0<f.length&&(l=new Os("onSelect","select",null,l,u),i.push({event:l,listeners:f}),l.target=z)))}function X(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var W={animationend:X("Animation","AnimationEnd"),animationiteration:X("Animation","AnimationIteration"),animationstart:X("Animation","AnimationStart"),transitionrun:X("Transition","TransitionRun"),transitionstart:X("Transition","TransitionStart"),transitioncancel:X("Transition","TransitionCancel"),transitionend:X("Transition","TransitionEnd")},Y={},Q={};Qn&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete W.animationend.animation,delete W.animationiteration.animation,delete W.animationstart.animation),"TransitionEvent"in window||delete W.transitionend.transition);function oe(i){if(Y[i])return Y[i];if(!W[i])return i;var l=W[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in Q)return Y[i]=l[u];return i}var de=oe("animationend"),le=oe("animationiteration"),be=oe("animationstart"),Ne=oe("transitionrun"),ze=oe("transitionstart"),Ie=oe("transitioncancel"),Me=oe("transitionend"),Ke=new Map,Ue="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ue.push("scrollEnd");function _e(i,l){Ke.set(i,l),gi(l,[i])}var Ge=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ht=[],xt=0,nt=0;function dt(){for(var i=xt,l=nt=xt=0;l<i;){var u=ht[l];ht[l++]=null;var f=ht[l];ht[l++]=null;var y=ht[l];ht[l++]=null;var x=ht[l];if(ht[l++]=null,f!==null&&y!==null){var T=f.pending;T===null?y.next=y:(y.next=T.next,T.next=y),f.pending=y}x!==0&&zi(u,y,x)}}function Jt(i,l,u,f){ht[xt++]=i,ht[xt++]=l,ht[xt++]=u,ht[xt++]=f,nt|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function hr(i,l,u,f){return Jt(i,l,u,f),$a(i)}function Gt(i,l){return Jt(i,null,null,l),$a(i)}function zi(i,l,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var y=!1,x=i.return;x!==null;)x.childLanes|=u,f=x.alternate,f!==null&&(f.childLanes|=u),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(y=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,y&&l!==null&&(y=31-Re(u),i=x.hiddenUpdates,f=i[y],f===null?i[y]=[l]:f.push(l),l.lane=u|536870912),x):null}function $a(i){if(50<Ku)throw Ku=0,sm=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Qs={};function VC(i,l,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(i,l,u,f){return new VC(i,l,u,f)}function Jd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ma(i,l){var u=i.alternate;return u===null?(u=Lr(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Ly(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function ph(i,l,u,f,y,x){var T=0;if(f=i,typeof i=="function")Jd(i)&&(T=1);else if(typeof i=="string")T=XA(i,u,Qe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case fe:return i=Lr(31,u,l,y),i.elementType=fe,i.lanes=x,i;case N:return ts(u.children,y,x,l);case _:T=8,y|=24;break;case O:return i=Lr(12,u,l,y|2),i.elementType=O,i.lanes=x,i;case Z:return i=Lr(13,u,l,y),i.elementType=Z,i.lanes=x,i;case I:return i=Lr(19,u,l,y),i.elementType=I,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:T=10;break e;case H:T=9;break e;case ee:T=11;break e;case U:T=14;break e;case ye:T=16,f=null;break e}T=29,u=Error(r(130,i===null?"null":typeof i,"")),f=null}return l=Lr(T,u,l,y),l.elementType=i,l.type=f,l.lanes=x,l}function ts(i,l,u,f){return i=Lr(7,i,f,l),i.lanes=u,i}function ep(i,l,u){return i=Lr(6,i,null,l),i.lanes=u,i}function zy(i){var l=Lr(18,null,null,0);return l.stateNode=i,l}function tp(i,l,u){return l=Lr(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Iy=new WeakMap;function Zr(i,l){if(typeof i=="object"&&i!==null){var u=Iy.get(i);return u!==void 0?u:(l={value:i,source:l,stack:vt(l)},Iy.set(i,l),l)}return{value:i,source:l,stack:vt(l)}}var Xs=[],$s=0,mh=null,Cu=0,Jr=[],ei=0,Wa=null,Ii=1,Pi="";function ga(i,l){Xs[$s++]=Cu,Xs[$s++]=mh,mh=i,Cu=l}function Py(i,l,u){Jr[ei++]=Ii,Jr[ei++]=Pi,Jr[ei++]=Wa,Wa=i;var f=Ii;i=Pi;var y=32-Re(f)-1;f&=~(1<<y),u+=1;var x=32-Re(l)+y;if(30<x){var T=y-y%5;x=(f&(1<<T)-1).toString(32),f>>=T,y-=T,Ii=1<<32-Re(l)+y|u<<y|f,Pi=x+i}else Ii=1<<x|u<<y|f,Pi=i}function np(i){i.return!==null&&(ga(i,1),Py(i,1,0))}function rp(i){for(;i===mh;)mh=Xs[--$s],Xs[$s]=null,Cu=Xs[--$s],Xs[$s]=null;for(;i===Wa;)Wa=Jr[--ei],Jr[ei]=null,Pi=Jr[--ei],Jr[ei]=null,Ii=Jr[--ei],Jr[ei]=null}function Hy(i,l){Jr[ei++]=Ii,Jr[ei++]=Pi,Jr[ei++]=Wa,Ii=l.id,Pi=l.overflow,Wa=i}var Zn=null,yn=null,Dt=!1,Za=null,ti=!1,ip=Error(r(519));function Ja(i){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Au(Zr(l,i)),ip}function qy(i){var l=i.stateNode,u=i.type,f=i.memoizedProps;switch(l[cn]=i,l[En]=f,u){case"dialog":Ct("cancel",l),Ct("close",l);break;case"iframe":case"object":case"embed":Ct("load",l);break;case"video":case"audio":for(u=0;u<Yu.length;u++)Ct(Yu[u],l);break;case"source":Ct("error",l);break;case"img":case"image":case"link":Ct("error",l),Ct("load",l);break;case"details":Ct("toggle",l);break;case"input":Ct("invalid",l),_s(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Ct("invalid",l);break;case"textarea":Ct("invalid",l),Yl(l,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||f.suppressHydrationWarning===!0||ib(l.textContent,u)?(f.popover!=null&&(Ct("beforetoggle",l),Ct("toggle",l)),f.onScroll!=null&&Ct("scroll",l),f.onScrollEnd!=null&&Ct("scrollend",l),f.onClick!=null&&(l.onclick=Sr),l=!0):l=!1,l||Ja(i,!0)}function Uy(i){for(Zn=i.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Zn=Zn.return}}function Ws(i){if(i!==Zn)return!1;if(!Dt)return Uy(i),Dt=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||wm(i.type,i.memoizedProps)),u=!u),u&&yn&&Ja(i),Uy(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yn=db(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));yn=db(i)}else l===27?(l=yn,dl(i.type)?(i=Em,Em=null,yn=i):yn=l):yn=Zn?ri(i.stateNode.nextSibling):null;return!0}function ns(){yn=Zn=null,Dt=!1}function ap(){var i=Za;return i!==null&&(Er===null?Er=i:Er.push.apply(Er,i),Za=null),i}function Au(i){Za===null?Za=[i]:Za.push(i)}var lp=Te(null),rs=null,ya=null;function el(i,l,u){P(lp,l._currentValue),l._currentValue=u}function xa(i){i._currentValue=lp.current,Ee(lp)}function sp(i,l,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),i===u)break;i=i.return}}function op(i,l,u,f){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var x=y.dependencies;if(x!==null){var T=y.child;x=x.firstContext;e:for(;x!==null;){var j=x;x=y;for(var F=0;F<l.length;F++)if(j.context===l[F]){x.lanes|=u,j=x.alternate,j!==null&&(j.lanes|=u),sp(x.return,u,i),f||(T=null);break e}x=j.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=u,x=T.alternate,x!==null&&(x.lanes|=u),sp(T,u,i),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===i){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Zs(i,l,u,f){i=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var j=y.type;cr(y.pendingProps.value,T.value)||(i!==null?i.push(j):i=[j])}}else if(y===jt.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Zu):i=[Zu])}y=y.return}i!==null&&op(l,i,u,f),l.flags|=262144}function gh(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function is(i){rs=i,ya=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jn(i){return Fy(rs,i)}function yh(i,l){return rs===null&&is(i),Fy(i,l)}function Fy(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},ya===null){if(i===null)throw Error(r(308));ya=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else ya=ya.next=l;return u}var KC=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},GC=n.unstable_scheduleCallback,YC=n.unstable_NormalPriority,Bn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function up(){return{controller:new KC,data:new Map,refCount:0}}function Tu(i){i.refCount--,i.refCount===0&&GC(YC,function(){i.controller.abort()})}var Eu=null,cp=0,Js=0,eo=null;function QC(i,l){if(Eu===null){var u=Eu=[];cp=0,Js=dm(),eo={status:"pending",value:void 0,then:function(f){u.push(f)}}}return cp++,l.then(Vy,Vy),l}function Vy(){if(--cp===0&&Eu!==null){eo!==null&&(eo.status="fulfilled");var i=Eu;Eu=null,Js=0,eo=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function XC(i,l){var u=[],f={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return i.then(function(){f.status="fulfilled",f.value=l;for(var y=0;y<u.length;y++)(0,u[y])(l)},function(y){for(f.status="rejected",f.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),f}var Ky=te.S;te.S=function(i,l){Nv=Lt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&QC(i,l),Ky!==null&&Ky(i,l)};var as=Te(null);function hp(){var i=as.current;return i!==null?i:ln.pooledCache}function xh(i,l){l===null?P(as,as.current):P(as,l.pool)}function Gy(){var i=hp();return i===null?null:{parent:Bn._currentValue,pool:i}}var to=Error(r(460)),fp=Error(r(474)),vh=Error(r(542)),bh={then:function(){}};function Yy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qy(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(Sr,Sr),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,$y(i),i;default:if(typeof l.status=="string")l.then(Sr,Sr);else{if(i=ln,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(f){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=f}},function(f){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,$y(i),i}throw ss=l,to}}function ls(i){try{var l=i._init;return l(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ss=u,to):u}}var ss=null;function Xy(){if(ss===null)throw Error(r(459));var i=ss;return ss=null,i}function $y(i){if(i===to||i===vh)throw Error(r(483))}var no=null,Nu=0;function kh(i){var l=Nu;return Nu+=1,no===null&&(no=[]),Qy(no,i,l)}function Mu(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function wh(i,l){throw l.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function Wy(i){function l(ie,$){if(i){var ue=ie.deletions;ue===null?(ie.deletions=[$],ie.flags|=16):ue.push($)}}function u(ie,$){if(!i)return null;for(;$!==null;)l(ie,$),$=$.sibling;return null}function f(ie){for(var $=new Map;ie!==null;)ie.key!==null?$.set(ie.key,ie):$.set(ie.index,ie),ie=ie.sibling;return $}function y(ie,$){return ie=ma(ie,$),ie.index=0,ie.sibling=null,ie}function x(ie,$,ue){return ie.index=ue,i?(ue=ie.alternate,ue!==null?(ue=ue.index,ue<$?(ie.flags|=67108866,$):ue):(ie.flags|=67108866,$)):(ie.flags|=1048576,$)}function T(ie){return i&&ie.alternate===null&&(ie.flags|=67108866),ie}function j(ie,$,ue,we){return $===null||$.tag!==6?($=ep(ue,ie.mode,we),$.return=ie,$):($=y($,ue),$.return=ie,$)}function F(ie,$,ue,we){var it=ue.type;return it===N?ke(ie,$,ue.props.children,we,ue.key):$!==null&&($.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===ye&&ls(it)===$.type)?($=y($,ue.props),Mu($,ue),$.return=ie,$):($=ph(ue.type,ue.key,ue.props,null,ie.mode,we),Mu($,ue),$.return=ie,$)}function ce(ie,$,ue,we){return $===null||$.tag!==4||$.stateNode.containerInfo!==ue.containerInfo||$.stateNode.implementation!==ue.implementation?($=tp(ue,ie.mode,we),$.return=ie,$):($=y($,ue.children||[]),$.return=ie,$)}function ke(ie,$,ue,we,it){return $===null||$.tag!==7?($=ts(ue,ie.mode,we,it),$.return=ie,$):($=y($,ue),$.return=ie,$)}function Se(ie,$,ue){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=ep(""+$,ie.mode,ue),$.return=ie,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return ue=ph($.type,$.key,$.props,null,ie.mode,ue),Mu(ue,$),ue.return=ie,ue;case A:return $=tp($,ie.mode,ue),$.return=ie,$;case ye:return $=ls($),Se(ie,$,ue)}if(se($)||ne($))return $=ts($,ie.mode,ue,null),$.return=ie,$;if(typeof $.then=="function")return Se(ie,kh($),ue);if($.$$typeof===R)return Se(ie,yh(ie,$),ue);wh(ie,$)}return null}function pe(ie,$,ue,we){var it=$!==null?$.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return it!==null?null:j(ie,$,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case w:return ue.key===it?F(ie,$,ue,we):null;case A:return ue.key===it?ce(ie,$,ue,we):null;case ye:return ue=ls(ue),pe(ie,$,ue,we)}if(se(ue)||ne(ue))return it!==null?null:ke(ie,$,ue,we,null);if(typeof ue.then=="function")return pe(ie,$,kh(ue),we);if(ue.$$typeof===R)return pe(ie,$,yh(ie,ue),we);wh(ie,ue)}return null}function ge(ie,$,ue,we,it){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ie=ie.get(ue)||null,j($,ie,""+we,it);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case w:return ie=ie.get(we.key===null?ue:we.key)||null,F($,ie,we,it);case A:return ie=ie.get(we.key===null?ue:we.key)||null,ce($,ie,we,it);case ye:return we=ls(we),ge(ie,$,ue,we,it)}if(se(we)||ne(we))return ie=ie.get(ue)||null,ke($,ie,we,it,null);if(typeof we.then=="function")return ge(ie,$,ue,kh(we),it);if(we.$$typeof===R)return ge(ie,$,ue,yh($,we),it);wh($,we)}return null}function We(ie,$,ue,we){for(var it=null,Ht=null,Je=$,mt=$=0,Nt=null;Je!==null&&mt<ue.length;mt++){Je.index>mt?(Nt=Je,Je=null):Nt=Je.sibling;var qt=pe(ie,Je,ue[mt],we);if(qt===null){Je===null&&(Je=Nt);break}i&&Je&&qt.alternate===null&&l(ie,Je),$=x(qt,$,mt),Ht===null?it=qt:Ht.sibling=qt,Ht=qt,Je=Nt}if(mt===ue.length)return u(ie,Je),Dt&&ga(ie,mt),it;if(Je===null){for(;mt<ue.length;mt++)Je=Se(ie,ue[mt],we),Je!==null&&($=x(Je,$,mt),Ht===null?it=Je:Ht.sibling=Je,Ht=Je);return Dt&&ga(ie,mt),it}for(Je=f(Je);mt<ue.length;mt++)Nt=ge(Je,ie,mt,ue[mt],we),Nt!==null&&(i&&Nt.alternate!==null&&Je.delete(Nt.key===null?mt:Nt.key),$=x(Nt,$,mt),Ht===null?it=Nt:Ht.sibling=Nt,Ht=Nt);return i&&Je.forEach(function(xl){return l(ie,xl)}),Dt&&ga(ie,mt),it}function ut(ie,$,ue,we){if(ue==null)throw Error(r(151));for(var it=null,Ht=null,Je=$,mt=$=0,Nt=null,qt=ue.next();Je!==null&&!qt.done;mt++,qt=ue.next()){Je.index>mt?(Nt=Je,Je=null):Nt=Je.sibling;var xl=pe(ie,Je,qt.value,we);if(xl===null){Je===null&&(Je=Nt);break}i&&Je&&xl.alternate===null&&l(ie,Je),$=x(xl,$,mt),Ht===null?it=xl:Ht.sibling=xl,Ht=xl,Je=Nt}if(qt.done)return u(ie,Je),Dt&&ga(ie,mt),it;if(Je===null){for(;!qt.done;mt++,qt=ue.next())qt=Se(ie,qt.value,we),qt!==null&&($=x(qt,$,mt),Ht===null?it=qt:Ht.sibling=qt,Ht=qt);return Dt&&ga(ie,mt),it}for(Je=f(Je);!qt.done;mt++,qt=ue.next())qt=ge(Je,ie,mt,qt.value,we),qt!==null&&(i&&qt.alternate!==null&&Je.delete(qt.key===null?mt:qt.key),$=x(qt,$,mt),Ht===null?it=qt:Ht.sibling=qt,Ht=qt);return i&&Je.forEach(function(l4){return l(ie,l4)}),Dt&&ga(ie,mt),it}function nn(ie,$,ue,we){if(typeof ue=="object"&&ue!==null&&ue.type===N&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case w:e:{for(var it=ue.key;$!==null;){if($.key===it){if(it=ue.type,it===N){if($.tag===7){u(ie,$.sibling),we=y($,ue.props.children),we.return=ie,ie=we;break e}}else if($.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===ye&&ls(it)===$.type){u(ie,$.sibling),we=y($,ue.props),Mu(we,ue),we.return=ie,ie=we;break e}u(ie,$);break}else l(ie,$);$=$.sibling}ue.type===N?(we=ts(ue.props.children,ie.mode,we,ue.key),we.return=ie,ie=we):(we=ph(ue.type,ue.key,ue.props,null,ie.mode,we),Mu(we,ue),we.return=ie,ie=we)}return T(ie);case A:e:{for(it=ue.key;$!==null;){if($.key===it)if($.tag===4&&$.stateNode.containerInfo===ue.containerInfo&&$.stateNode.implementation===ue.implementation){u(ie,$.sibling),we=y($,ue.children||[]),we.return=ie,ie=we;break e}else{u(ie,$);break}else l(ie,$);$=$.sibling}we=tp(ue,ie.mode,we),we.return=ie,ie=we}return T(ie);case ye:return ue=ls(ue),nn(ie,$,ue,we)}if(se(ue))return We(ie,$,ue,we);if(ne(ue)){if(it=ne(ue),typeof it!="function")throw Error(r(150));return ue=it.call(ue),ut(ie,$,ue,we)}if(typeof ue.then=="function")return nn(ie,$,kh(ue),we);if(ue.$$typeof===R)return nn(ie,$,yh(ie,ue),we);wh(ie,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,$!==null&&$.tag===6?(u(ie,$.sibling),we=y($,ue),we.return=ie,ie=we):(u(ie,$),we=ep(ue,ie.mode,we),we.return=ie,ie=we),T(ie)):u(ie,$)}return function(ie,$,ue,we){try{Nu=0;var it=nn(ie,$,ue,we);return no=null,it}catch(Je){if(Je===to||Je===vh)throw Je;var Ht=Lr(29,Je,null,ie.mode);return Ht.lanes=we,Ht.return=ie,Ht}}}var os=Wy(!0),Zy=Wy(!1),tl=!1;function dp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pp(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function nl(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rl(i,l,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Vt&2)!==0){var y=f.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),f.pending=l,l=$a(i),zi(i,null,u),l}return Jt(i,f,l,u),$a(i)}function _u(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,an(i,u)}}function mp(i,l){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=T:x=x.next=T,u=u.next}while(u!==null);x===null?y=x=l:x=x.next=l}else y=x=l;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var gp=!1;function Du(){if(gp){var i=eo;if(i!==null)throw i}}function ju(i,l,u,f){gp=!1;var y=i.updateQueue;tl=!1;var x=y.firstBaseUpdate,T=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var F=j,ce=F.next;F.next=null,T===null?x=ce:T.next=ce,T=F;var ke=i.alternate;ke!==null&&(ke=ke.updateQueue,j=ke.lastBaseUpdate,j!==T&&(j===null?ke.firstBaseUpdate=ce:j.next=ce,ke.lastBaseUpdate=F))}if(x!==null){var Se=y.baseState;T=0,ke=ce=F=null,j=x;do{var pe=j.lane&-536870913,ge=pe!==j.lane;if(ge?(Et&pe)===pe:(f&pe)===pe){pe!==0&&pe===Js&&(gp=!0),ke!==null&&(ke=ke.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var We=i,ut=j;pe=l;var nn=u;switch(ut.tag){case 1:if(We=ut.payload,typeof We=="function"){Se=We.call(nn,Se,pe);break e}Se=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ut.payload,pe=typeof We=="function"?We.call(nn,Se,pe):We,pe==null)break e;Se=g({},Se,pe);break e;case 2:tl=!0}}pe=j.callback,pe!==null&&(i.flags|=64,ge&&(i.flags|=8192),ge=y.callbacks,ge===null?y.callbacks=[pe]:ge.push(pe))}else ge={lane:pe,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ke===null?(ce=ke=ge,F=Se):ke=ke.next=ge,T|=pe;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;ge=j,j=ge.next,ge.next=null,y.lastBaseUpdate=ge,y.shared.pending=null}}while(!0);ke===null&&(F=Se),y.baseState=F,y.firstBaseUpdate=ce,y.lastBaseUpdate=ke,x===null&&(y.shared.lanes=0),ol|=T,i.lanes=T,i.memoizedState=Se}}function Jy(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function ex(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Jy(u[i],l)}var ro=Te(null),Sh=Te(0);function tx(i,l){i=Ea,P(Sh,i),P(ro,l),Ea=i|l.baseLanes}function yp(){P(Sh,Ea),P(ro,ro.current)}function xp(){Ea=Sh.current,Ee(ro),Ee(Sh)}var zr=Te(null),ni=null;function il(i){var l=i.alternate;P(Mn,Mn.current&1),P(zr,i),ni===null&&(l===null||ro.current!==null||l.memoizedState!==null)&&(ni=i)}function vp(i){P(Mn,Mn.current),P(zr,i),ni===null&&(ni=i)}function nx(i){i.tag===22?(P(Mn,Mn.current),P(zr,i),ni===null&&(ni=i)):al()}function al(){P(Mn,Mn.current),P(zr,zr.current)}function Ir(i){Ee(zr),ni===i&&(ni=null),Ee(Mn)}var Mn=Te(0);function Ch(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Am(u)||Tm(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var va=0,pt=null,en=null,Ln=null,Ah=!1,io=!1,us=!1,Th=0,Ou=0,ao=null,$C=0;function Sn(){throw Error(r(321))}function bp(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!cr(i[u],l[u]))return!1;return!0}function kp(i,l,u,f,y,x){return va=x,pt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,te.H=i===null||i.memoizedState===null?Px:Lp,us=!1,x=u(f,y),us=!1,io&&(x=ix(l,u,f,y)),rx(i),x}function rx(i){te.H=Lu;var l=en!==null&&en.next!==null;if(va=0,Ln=en=pt=null,Ah=!1,Ou=0,ao=null,l)throw Error(r(300));i===null||zn||(i=i.dependencies,i!==null&&gh(i)&&(zn=!0))}function ix(i,l,u,f){pt=i;var y=0;do{if(io&&(ao=null),Ou=0,io=!1,25<=y)throw Error(r(301));if(y+=1,Ln=en=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}te.H=Hx,x=l(u,f)}while(io);return x}function WC(){var i=te.H,l=i.useState()[0];return l=typeof l.then=="function"?Ru(l):l,i=i.useState()[0],(en!==null?en.memoizedState:null)!==i&&(pt.flags|=1024),l}function wp(){var i=Th!==0;return Th=0,i}function Sp(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function Cp(i){if(Ah){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Ah=!1}va=0,Ln=en=pt=null,io=!1,Ou=Th=0,ao=null}function xr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?pt.memoizedState=Ln=i:Ln=Ln.next=i,Ln}function _n(){if(en===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=en.next;var l=Ln===null?pt.memoizedState:Ln.next;if(l!==null)Ln=l,en=i;else{if(i===null)throw pt.alternate===null?Error(r(467)):Error(r(310));en=i,i={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Ln===null?pt.memoizedState=Ln=i:Ln=Ln.next=i}return Ln}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(i){var l=Ou;return Ou+=1,ao===null&&(ao=[]),i=Qy(ao,i,l),l=pt,(Ln===null?l.memoizedState:Ln.next)===null&&(l=l.alternate,te.H=l===null||l.memoizedState===null?Px:Lp),i}function Nh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ru(i);if(i.$$typeof===R)return Jn(i)}throw Error(r(438,String(i)))}function Ap(i){var l=null,u=pt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var f=pt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Eh(),pt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),f=0;f<i;f++)u[f]=L;return l.index++,u}function ba(i,l){return typeof l=="function"?l(i):l}function Mh(i){var l=_n();return Tp(l,en,i)}function Tp(i,l,u){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var y=i.baseQueue,x=f.pending;if(x!==null){if(y!==null){var T=y.next;y.next=x.next,x.next=T}l.baseQueue=y=x,f.pending=null}if(x=i.baseState,y===null)i.memoizedState=x;else{l=y.next;var j=T=null,F=null,ce=l,ke=!1;do{var Se=ce.lane&-536870913;if(Se!==ce.lane?(Et&Se)===Se:(va&Se)===Se){var pe=ce.revertLane;if(pe===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Se===Js&&(ke=!0);else if((va&pe)===pe){ce=ce.next,pe===Js&&(ke=!0);continue}else Se={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},F===null?(j=F=Se,T=x):F=F.next=Se,pt.lanes|=pe,ol|=pe;Se=ce.action,us&&u(x,Se),x=ce.hasEagerState?ce.eagerState:u(x,Se)}else pe={lane:Se,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},F===null?(j=F=pe,T=x):F=F.next=pe,pt.lanes|=Se,ol|=Se;ce=ce.next}while(ce!==null&&ce!==l);if(F===null?T=x:F.next=j,!cr(x,i.memoizedState)&&(zn=!0,ke&&(u=eo,u!==null)))throw u;i.memoizedState=x,i.baseState=T,i.baseQueue=F,f.lastRenderedState=x}return y===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Ep(i){var l=_n(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var f=u.dispatch,y=u.pending,x=l.memoizedState;if(y!==null){u.pending=null;var T=y=y.next;do x=i(x,T.action),T=T.next;while(T!==y);cr(x,l.memoizedState)||(zn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),u.lastRenderedState=x}return[x,f]}function ax(i,l,u){var f=pt,y=_n(),x=Dt;if(x){if(u===void 0)throw Error(r(407));u=u()}else u=l();var T=!cr((en||y).memoizedState,u);if(T&&(y.memoizedState=u,zn=!0),y=y.queue,_p(ox.bind(null,f,y,i),[i]),y.getSnapshot!==l||T||Ln!==null&&Ln.memoizedState.tag&1){if(f.flags|=2048,lo(9,{destroy:void 0},sx.bind(null,f,y,u,l),null),ln===null)throw Error(r(349));x||(va&127)!==0||lx(f,l,u)}return u}function lx(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=pt.updateQueue,l===null?(l=Eh(),pt.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function sx(i,l,u,f){l.value=u,l.getSnapshot=f,ux(l)&&cx(i)}function ox(i,l,u){return u(function(){ux(l)&&cx(i)})}function ux(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!cr(i,u)}catch{return!0}}function cx(i){var l=Gt(i,2);l!==null&&Nr(l,i,2)}function Np(i){var l=xr();if(typeof i=="function"){var u=i;if(i=u(),us){wt(!0);try{u()}finally{wt(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:i},l}function hx(i,l,u,f){return i.baseState=u,Tp(i,en,typeof f=="function"?f:ba)}function ZC(i,l,u,f,y){if(jh(i))throw Error(r(485));if(i=l.action,i!==null){var x={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};te.T!==null?u(!0):x.isTransition=!1,f(x),u=l.pending,u===null?(x.next=l.pending=x,fx(l,x)):(x.next=u.next,l.pending=u.next=x)}}function fx(i,l){var u=l.action,f=l.payload,y=i.state;if(l.isTransition){var x=te.T,T={};te.T=T;try{var j=u(y,f),F=te.S;F!==null&&F(T,j),dx(i,l,j)}catch(ce){Mp(i,l,ce)}finally{x!==null&&T.types!==null&&(x.types=T.types),te.T=x}}else try{x=u(y,f),dx(i,l,x)}catch(ce){Mp(i,l,ce)}}function dx(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){px(i,l,f)},function(f){return Mp(i,l,f)}):px(i,l,u)}function px(i,l,u){l.status="fulfilled",l.value=u,mx(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,fx(i,u)))}function Mp(i,l,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=u,mx(l),l=l.next;while(l!==f)}i.action=null}function mx(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function gx(i,l){return l}function yx(i,l){if(Dt){var u=ln.formState;if(u!==null){e:{var f=pt;if(Dt){if(yn){t:{for(var y=yn,x=ti;y.nodeType!==8;){if(!x){y=null;break t}if(y=ri(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){yn=ri(y.nextSibling),f=y.data==="F!";break e}}Ja(f)}f=!1}f&&(l=u[0])}}return u=xr(),u.memoizedState=u.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gx,lastRenderedState:l},u.queue=f,u=Lx.bind(null,pt,f),f.dispatch=u,f=Np(!1),x=Bp.bind(null,pt,!1,f.queue),f=xr(),y={state:l,dispatch:null,action:i,pending:null},f.queue=y,u=ZC.bind(null,pt,y,x,u),y.dispatch=u,f.memoizedState=i,[l,u,!1]}function xx(i){var l=_n();return vx(l,en,i)}function vx(i,l,u){if(l=Tp(i,l,gx)[0],i=Mh(ba)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=Ru(l)}catch(T){throw T===to?vh:T}else f=l;l=_n();var y=l.queue,x=y.dispatch;return u!==l.memoizedState&&(pt.flags|=2048,lo(9,{destroy:void 0},JC.bind(null,y,u),null)),[f,x,i]}function JC(i,l){i.action=l}function bx(i){var l=_n(),u=en;if(u!==null)return vx(l,u,i);_n(),l=l.memoizedState,u=_n();var f=u.queue.dispatch;return u.memoizedState=i,[l,f,!1]}function lo(i,l,u,f){return i={tag:i,create:u,deps:f,inst:l,next:null},l=pt.updateQueue,l===null&&(l=Eh(),pt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,l.lastEffect=i),i}function kx(){return _n().memoizedState}function _h(i,l,u,f){var y=xr();pt.flags|=i,y.memoizedState=lo(1|l,{destroy:void 0},u,f===void 0?null:f)}function Dh(i,l,u,f){var y=_n();f=f===void 0?null:f;var x=y.memoizedState.inst;en!==null&&f!==null&&bp(f,en.memoizedState.deps)?y.memoizedState=lo(l,x,u,f):(pt.flags|=i,y.memoizedState=lo(1|l,x,u,f))}function wx(i,l){_h(8390656,8,i,l)}function _p(i,l){Dh(2048,8,i,l)}function eA(i){pt.flags|=4;var l=pt.updateQueue;if(l===null)l=Eh(),pt.updateQueue=l,l.events=[i];else{var u=l.events;u===null?l.events=[i]:u.push(i)}}function Sx(i){var l=_n().memoizedState;return eA({ref:l,nextImpl:i}),function(){if((Vt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Cx(i,l){return Dh(4,2,i,l)}function Ax(i,l){return Dh(4,4,i,l)}function Tx(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Ex(i,l,u){u=u!=null?u.concat([i]):null,Dh(4,4,Tx.bind(null,l,i),u)}function Dp(){}function Nx(i,l){var u=_n();l=l===void 0?null:l;var f=u.memoizedState;return l!==null&&bp(l,f[1])?f[0]:(u.memoizedState=[i,l],i)}function Mx(i,l){var u=_n();l=l===void 0?null:l;var f=u.memoizedState;if(l!==null&&bp(l,f[1]))return f[0];if(f=i(),us){wt(!0);try{i()}finally{wt(!1)}}return u.memoizedState=[f,l],f}function jp(i,l,u){return u===void 0||(va&1073741824)!==0&&(Et&261930)===0?i.memoizedState=l:(i.memoizedState=u,i=_v(),pt.lanes|=i,ol|=i,u)}function _x(i,l,u,f){return cr(u,l)?u:ro.current!==null?(i=jp(i,u,f),cr(i,l)||(zn=!0),i):(va&42)===0||(va&1073741824)!==0&&(Et&261930)===0?(zn=!0,i.memoizedState=u):(i=_v(),pt.lanes|=i,ol|=i,l)}function Dx(i,l,u,f,y){var x=xe.p;xe.p=x!==0&&8>x?x:8;var T=te.T,j={};te.T=j,Bp(i,!1,l,u);try{var F=y(),ce=te.S;if(ce!==null&&ce(j,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ke=XC(F,f);Bu(i,l,ke,qr(i))}else Bu(i,l,f,qr(i))}catch(Se){Bu(i,l,{then:function(){},status:"rejected",reason:Se},qr())}finally{xe.p=x,T!==null&&j.types!==null&&(T.types=j.types),te.T=T}}function tA(){}function Op(i,l,u,f){if(i.tag!==5)throw Error(r(476));var y=jx(i).queue;Dx(i,y,l,Ce,u===null?tA:function(){return Ox(i),u(f)})}function jx(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:Ce},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Ox(i){var l=jx(i);l.next===null&&(l=i.alternate.memoizedState),Bu(i,l.next.queue,{},qr())}function Rp(){return Jn(Zu)}function Rx(){return _n().memoizedState}function Bx(){return _n().memoizedState}function nA(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=qr();i=nl(u);var f=rl(l,i,u);f!==null&&(Nr(f,l,u),_u(f,l,u)),l={cache:up()},i.payload=l;return}l=l.return}}function rA(i,l,u){var f=qr();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},jh(i)?zx(l,u):(u=hr(i,l,u,f),u!==null&&(Nr(u,i,f),Ix(u,l,f)))}function Lx(i,l,u){var f=qr();Bu(i,l,u,f)}function Bu(i,l,u,f){var y={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(jh(i))zx(l,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var T=l.lastRenderedState,j=x(T,u);if(y.hasEagerState=!0,y.eagerState=j,cr(j,T))return Jt(i,l,y,0),ln===null&&dt(),!1}catch{}if(u=hr(i,l,y,f),u!==null)return Nr(u,i,f),Ix(u,l,f),!0}return!1}function Bp(i,l,u,f){if(f={lane:2,revertLane:dm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},jh(i)){if(l)throw Error(r(479))}else l=hr(i,u,f,2),l!==null&&Nr(l,i,2)}function jh(i){var l=i.alternate;return i===pt||l!==null&&l===pt}function zx(i,l){io=Ah=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function Ix(i,l,u){if((u&4194048)!==0){var f=l.lanes;f&=i.pendingLanes,u|=f,l.lanes=u,an(i,u)}}var Lu={readContext:Jn,use:Nh,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn};Lu.useEffectEvent=Sn;var Px={readContext:Jn,use:Nh,useCallback:function(i,l){return xr().memoizedState=[i,l===void 0?null:l],i},useContext:Jn,useEffect:wx,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,_h(4194308,4,Tx.bind(null,l,i),u)},useLayoutEffect:function(i,l){return _h(4194308,4,i,l)},useInsertionEffect:function(i,l){_h(4,2,i,l)},useMemo:function(i,l){var u=xr();l=l===void 0?null:l;var f=i();if(us){wt(!0);try{i()}finally{wt(!1)}}return u.memoizedState=[f,l],f},useReducer:function(i,l,u){var f=xr();if(u!==void 0){var y=u(l);if(us){wt(!0);try{u(l)}finally{wt(!1)}}}else y=l;return f.memoizedState=f.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},f.queue=i,i=i.dispatch=rA.bind(null,pt,i),[f.memoizedState,i]},useRef:function(i){var l=xr();return i={current:i},l.memoizedState=i},useState:function(i){i=Np(i);var l=i.queue,u=Lx.bind(null,pt,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:Dp,useDeferredValue:function(i,l){var u=xr();return jp(u,i,l)},useTransition:function(){var i=Np(!1);return i=Dx.bind(null,pt,i.queue,!0,!1),xr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var f=pt,y=xr();if(Dt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),ln===null)throw Error(r(349));(Et&127)!==0||lx(f,l,u)}y.memoizedState=u;var x={value:u,getSnapshot:l};return y.queue=x,wx(ox.bind(null,f,x,i),[i]),f.flags|=2048,lo(9,{destroy:void 0},sx.bind(null,f,x,u,l),null),u},useId:function(){var i=xr(),l=ln.identifierPrefix;if(Dt){var u=Pi,f=Ii;u=(f&~(1<<32-Re(f)-1)).toString(32)+u,l="_"+l+"R_"+u,u=Th++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=$C++,l="_"+l+"r_"+u.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:Rp,useFormState:yx,useActionState:yx,useOptimistic:function(i){var l=xr();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Bp.bind(null,pt,!0,u),u.dispatch=l,[i,l]},useMemoCache:Ap,useCacheRefresh:function(){return xr().memoizedState=nA.bind(null,pt)},useEffectEvent:function(i){var l=xr(),u={impl:i};return l.memoizedState=u,function(){if((Vt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Lp={readContext:Jn,use:Nh,useCallback:Nx,useContext:Jn,useEffect:_p,useImperativeHandle:Ex,useInsertionEffect:Cx,useLayoutEffect:Ax,useMemo:Mx,useReducer:Mh,useRef:kx,useState:function(){return Mh(ba)},useDebugValue:Dp,useDeferredValue:function(i,l){var u=_n();return _x(u,en.memoizedState,i,l)},useTransition:function(){var i=Mh(ba)[0],l=_n().memoizedState;return[typeof i=="boolean"?i:Ru(i),l]},useSyncExternalStore:ax,useId:Rx,useHostTransitionStatus:Rp,useFormState:xx,useActionState:xx,useOptimistic:function(i,l){var u=_n();return hx(u,en,i,l)},useMemoCache:Ap,useCacheRefresh:Bx};Lp.useEffectEvent=Sx;var Hx={readContext:Jn,use:Nh,useCallback:Nx,useContext:Jn,useEffect:_p,useImperativeHandle:Ex,useInsertionEffect:Cx,useLayoutEffect:Ax,useMemo:Mx,useReducer:Ep,useRef:kx,useState:function(){return Ep(ba)},useDebugValue:Dp,useDeferredValue:function(i,l){var u=_n();return en===null?jp(u,i,l):_x(u,en.memoizedState,i,l)},useTransition:function(){var i=Ep(ba)[0],l=_n().memoizedState;return[typeof i=="boolean"?i:Ru(i),l]},useSyncExternalStore:ax,useId:Rx,useHostTransitionStatus:Rp,useFormState:bx,useActionState:bx,useOptimistic:function(i,l){var u=_n();return en!==null?hx(u,en,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:Bx};Hx.useEffectEvent=Sx;function zp(i,l,u,f){l=i.memoizedState,u=u(f,l),u=u==null?l:g({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Ip={enqueueSetState:function(i,l,u){i=i._reactInternals;var f=qr(),y=nl(f);y.payload=l,u!=null&&(y.callback=u),l=rl(i,y,f),l!==null&&(Nr(l,i,f),_u(l,i,f))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var f=qr(),y=nl(f);y.tag=1,y.payload=l,u!=null&&(y.callback=u),l=rl(i,y,f),l!==null&&(Nr(l,i,f),_u(l,i,f))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=qr(),f=nl(u);f.tag=2,l!=null&&(f.callback=l),l=rl(i,f,u),l!==null&&(Nr(l,i,u),_u(l,i,u))}};function qx(i,l,u,f,y,x,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,x,T):l.prototype&&l.prototype.isPureReactComponent?!m(u,f)||!m(y,x):!0}function Ux(i,l,u,f){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==i&&Ip.enqueueReplaceState(l,l.state,null)}function cs(i,l){var u=l;if("ref"in l){u={};for(var f in l)f!=="ref"&&(u[f]=l[f])}if(i=i.defaultProps){u===l&&(u=g({},u));for(var y in i)u[y]===void 0&&(u[y]=i[y])}return u}function Fx(i){Ge(i)}function Vx(i){console.error(i)}function Kx(i){Ge(i)}function Oh(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function Gx(i,l,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Pp(i,l,u){return u=nl(u),u.tag=3,u.payload={element:null},u.callback=function(){Oh(i,l)},u}function Yx(i){return i=nl(i),i.tag=3,i}function Qx(i,l,u,f){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=f.value;i.payload=function(){return y(x)},i.callback=function(){Gx(l,u,f)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Gx(l,u,f),typeof y!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var j=f.stack;this.componentDidCatch(f.value,{componentStack:j!==null?j:""})})}function iA(i,l,u,f,y){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=u.alternate,l!==null&&Zs(l,u,y,!0),u=zr.current,u!==null){switch(u.tag){case 31:case 13:return ni===null?Kh():u.alternate===null&&Cn===0&&(Cn=3),u.flags&=-257,u.flags|=65536,u.lanes=y,f===bh?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([f]):l.add(f),cm(i,f,y)),!1;case 22:return u.flags|=65536,f===bh?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([f]):u.add(f)),cm(i,f,y)),!1}throw Error(r(435,u.tag))}return cm(i,f,y),Kh(),!1}if(Dt)return l=zr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,f!==ip&&(i=Error(r(422),{cause:f}),Au(Zr(i,u)))):(f!==ip&&(l=Error(r(423),{cause:f}),Au(Zr(l,u))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,f=Zr(f,u),y=Pp(i.stateNode,f,y),mp(i,y),Cn!==4&&(Cn=2)),!1;var x=Error(r(520),{cause:f});if(x=Zr(x,u),Vu===null?Vu=[x]:Vu.push(x),Cn!==4&&(Cn=2),l===null)return!0;f=Zr(f,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=y&-y,u.lanes|=i,i=Pp(u.stateNode,f,i),mp(u,i),!1;case 1:if(l=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ul===null||!ul.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Yx(y),Qx(y,i,u,f),mp(u,y),!1}u=u.return}while(u!==null);return!1}var Hp=Error(r(461)),zn=!1;function er(i,l,u,f){l.child=i===null?Zy(l,null,u,f):os(l,i.child,u,f)}function Xx(i,l,u,f,y){u=u.render;var x=l.ref;if("ref"in f){var T={};for(var j in f)j!=="ref"&&(T[j]=f[j])}else T=f;return is(l),f=kp(i,l,u,T,x,y),j=wp(),i!==null&&!zn?(Sp(i,l,y),ka(i,l,y)):(Dt&&j&&np(l),l.flags|=1,er(i,l,f,y),l.child)}function $x(i,l,u,f,y){if(i===null){var x=u.type;return typeof x=="function"&&!Jd(x)&&x.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=x,Wx(i,l,x,f,y)):(i=ph(u.type,null,f,l,l.mode,y),i.ref=l.ref,i.return=l,l.child=i)}if(x=i.child,!Qp(i,y)){var T=x.memoizedProps;if(u=u.compare,u=u!==null?u:m,u(T,f)&&i.ref===l.ref)return ka(i,l,y)}return l.flags|=1,i=ma(x,f),i.ref=l.ref,i.return=l,l.child=i}function Wx(i,l,u,f,y){if(i!==null){var x=i.memoizedProps;if(m(x,f)&&i.ref===l.ref)if(zn=!1,l.pendingProps=f=x,Qp(i,y))(i.flags&131072)!==0&&(zn=!0);else return l.lanes=i.lanes,ka(i,l,y)}return qp(i,l,u,f,y)}function Zx(i,l,u,f){var y=f.children,x=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,i!==null){for(f=l.child=i.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~x}else f=0,l.child=null;return Jx(i,l,x,u,f)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&xh(l,x!==null?x.cachePool:null),x!==null?tx(l,x):yp(),nx(l);else return f=l.lanes=536870912,Jx(i,l,x!==null?x.baseLanes|u:u,u,f)}else x!==null?(xh(l,x.cachePool),tx(l,x),al(),l.memoizedState=null):(i!==null&&xh(l,null),yp(),al());return er(i,l,y,u),l.child}function zu(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Jx(i,l,u,f,y){var x=hp();return x=x===null?null:{parent:Bn._currentValue,pool:x},l.memoizedState={baseLanes:u,cachePool:x},i!==null&&xh(l,null),yp(),nx(l),i!==null&&Zs(i,l,f,!0),l.childLanes=y,null}function Rh(i,l){return l=Lh({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function ev(i,l,u){return os(l,i.child,null,u),i=Rh(l,l.pendingProps),i.flags|=2,Ir(l),l.memoizedState=null,i}function aA(i,l,u){var f=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Dt){if(f.mode==="hidden")return i=Rh(l,f),l.lanes=536870912,zu(null,i);if(vp(l),(i=yn)?(i=fb(i,ti),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Wa!==null?{id:Ii,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},u=zy(i),u.return=l,l.child=u,Zn=l,yn=null)):i=null,i===null)throw Ja(l);return l.lanes=536870912,null}return Rh(l,f)}var x=i.memoizedState;if(x!==null){var T=x.dehydrated;if(vp(l),y)if(l.flags&256)l.flags&=-257,l=ev(i,l,u);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(r(558));else if(zn||Zs(i,l,u,!1),y=(u&i.childLanes)!==0,zn||y){if(f=ln,f!==null&&(T=Tn(f,u),T!==0&&T!==x.retryLane))throw x.retryLane=T,Gt(i,T),Nr(f,i,T),Hp;Kh(),l=ev(i,l,u)}else i=x.treeContext,yn=ri(T.nextSibling),Zn=l,Dt=!0,Za=null,ti=!1,i!==null&&Hy(l,i),l=Rh(l,f),l.flags|=4096;return l}return i=ma(i.child,{mode:f.mode,children:f.children}),i.ref=l.ref,l.child=i,i.return=l,i}function Bh(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function qp(i,l,u,f,y){return is(l),u=kp(i,l,u,f,void 0,y),f=wp(),i!==null&&!zn?(Sp(i,l,y),ka(i,l,y)):(Dt&&f&&np(l),l.flags|=1,er(i,l,u,y),l.child)}function tv(i,l,u,f,y,x){return is(l),l.updateQueue=null,u=ix(l,f,u,y),rx(i),f=wp(),i!==null&&!zn?(Sp(i,l,x),ka(i,l,x)):(Dt&&f&&np(l),l.flags|=1,er(i,l,u,x),l.child)}function nv(i,l,u,f,y){if(is(l),l.stateNode===null){var x=Qs,T=u.contextType;typeof T=="object"&&T!==null&&(x=Jn(T)),x=new u(f,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ip,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=f,x.state=l.memoizedState,x.refs={},dp(l),T=u.contextType,x.context=typeof T=="object"&&T!==null?Jn(T):Qs,x.state=l.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(zp(l,u,T,f),x.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&Ip.enqueueReplaceState(x,x.state,null),ju(l,f,x,y),Du(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(i===null){x=l.stateNode;var j=l.memoizedProps,F=cs(u,j);x.props=F;var ce=x.context,ke=u.contextType;T=Qs,typeof ke=="object"&&ke!==null&&(T=Jn(ke));var Se=u.getDerivedStateFromProps;ke=typeof Se=="function"||typeof x.getSnapshotBeforeUpdate=="function",j=l.pendingProps!==j,ke||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j||ce!==T)&&Ux(l,x,f,T),tl=!1;var pe=l.memoizedState;x.state=pe,ju(l,f,x,y),Du(),ce=l.memoizedState,j||pe!==ce||tl?(typeof Se=="function"&&(zp(l,u,Se,f),ce=l.memoizedState),(F=tl||qx(l,u,F,f,pe,ce,T))?(ke||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=ce),x.props=f,x.state=ce,x.context=T,f=F):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{x=l.stateNode,pp(i,l),T=l.memoizedProps,ke=cs(u,T),x.props=ke,Se=l.pendingProps,pe=x.context,ce=u.contextType,F=Qs,typeof ce=="object"&&ce!==null&&(F=Jn(ce)),j=u.getDerivedStateFromProps,(ce=typeof j=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==Se||pe!==F)&&Ux(l,x,f,F),tl=!1,pe=l.memoizedState,x.state=pe,ju(l,f,x,y),Du();var ge=l.memoizedState;T!==Se||pe!==ge||tl||i!==null&&i.dependencies!==null&&gh(i.dependencies)?(typeof j=="function"&&(zp(l,u,j,f),ge=l.memoizedState),(ke=tl||qx(l,u,ke,f,pe,ge,F)||i!==null&&i.dependencies!==null&&gh(i.dependencies))?(ce||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,ge,F),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,ge,F)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===i.memoizedProps&&pe===i.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&pe===i.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=ge),x.props=f,x.state=ge,x.context=F,f=ke):(typeof x.componentDidUpdate!="function"||T===i.memoizedProps&&pe===i.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&pe===i.memoizedState||(l.flags|=1024),f=!1)}return x=f,Bh(i,l),f=(l.flags&128)!==0,x||f?(x=l.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,i!==null&&f?(l.child=os(l,i.child,null,y),l.child=os(l,null,u,y)):er(i,l,u,y),l.memoizedState=x.state,i=l.child):i=ka(i,l,y),i}function rv(i,l,u,f){return ns(),l.flags|=256,er(i,l,u,f),l.child}var Up={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fp(i){return{baseLanes:i,cachePool:Gy()}}function Vp(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=Hr),i}function iv(i,l,u){var f=l.pendingProps,y=!1,x=(l.flags&128)!==0,T;if((T=x)||(T=i!==null&&i.memoizedState===null?!1:(Mn.current&2)!==0),T&&(y=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,i===null){if(Dt){if(y?il(l):al(),(i=yn)?(i=fb(i,ti),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Wa!==null?{id:Ii,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},u=zy(i),u.return=l,l.child=u,Zn=l,yn=null)):i=null,i===null)throw Ja(l);return Tm(i)?l.lanes=32:l.lanes=536870912,null}var j=f.children;return f=f.fallback,y?(al(),y=l.mode,j=Lh({mode:"hidden",children:j},y),f=ts(f,y,u,null),j.return=l,f.return=l,j.sibling=f,l.child=j,f=l.child,f.memoizedState=Fp(u),f.childLanes=Vp(i,T,u),l.memoizedState=Up,zu(null,f)):(il(l),Kp(l,j))}var F=i.memoizedState;if(F!==null&&(j=F.dehydrated,j!==null)){if(x)l.flags&256?(il(l),l.flags&=-257,l=Gp(i,l,u)):l.memoizedState!==null?(al(),l.child=i.child,l.flags|=128,l=null):(al(),j=f.fallback,y=l.mode,f=Lh({mode:"visible",children:f.children},y),j=ts(j,y,u,null),j.flags|=2,f.return=l,j.return=l,f.sibling=j,l.child=f,os(l,i.child,null,u),f=l.child,f.memoizedState=Fp(u),f.childLanes=Vp(i,T,u),l.memoizedState=Up,l=zu(null,f));else if(il(l),Tm(j)){if(T=j.nextSibling&&j.nextSibling.dataset,T)var ce=T.dgst;T=ce,f=Error(r(419)),f.stack="",f.digest=T,Au({value:f,source:null,stack:null}),l=Gp(i,l,u)}else if(zn||Zs(i,l,u,!1),T=(u&i.childLanes)!==0,zn||T){if(T=ln,T!==null&&(f=Tn(T,u),f!==0&&f!==F.retryLane))throw F.retryLane=f,Gt(i,f),Nr(T,i,f),Hp;Am(j)||Kh(),l=Gp(i,l,u)}else Am(j)?(l.flags|=192,l.child=i.child,l=null):(i=F.treeContext,yn=ri(j.nextSibling),Zn=l,Dt=!0,Za=null,ti=!1,i!==null&&Hy(l,i),l=Kp(l,f.children),l.flags|=4096);return l}return y?(al(),j=f.fallback,y=l.mode,F=i.child,ce=F.sibling,f=ma(F,{mode:"hidden",children:f.children}),f.subtreeFlags=F.subtreeFlags&65011712,ce!==null?j=ma(ce,j):(j=ts(j,y,u,null),j.flags|=2),j.return=l,f.return=l,f.sibling=j,l.child=f,zu(null,f),f=l.child,j=i.child.memoizedState,j===null?j=Fp(u):(y=j.cachePool,y!==null?(F=Bn._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=Gy(),j={baseLanes:j.baseLanes|u,cachePool:y}),f.memoizedState=j,f.childLanes=Vp(i,T,u),l.memoizedState=Up,zu(i.child,f)):(il(l),u=i.child,i=u.sibling,u=ma(u,{mode:"visible",children:f.children}),u.return=l,u.sibling=null,i!==null&&(T=l.deletions,T===null?(l.deletions=[i],l.flags|=16):T.push(i)),l.child=u,l.memoizedState=null,u)}function Kp(i,l){return l=Lh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Lh(i,l){return i=Lr(22,i,null,l),i.lanes=0,i}function Gp(i,l,u){return os(l,i.child,null,u),i=Kp(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function av(i,l,u){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l),sp(i.return,l,u)}function Yp(i,l,u,f,y,x){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y,treeForkCount:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=u,T.tailMode=y,T.treeForkCount=x)}function lv(i,l,u){var f=l.pendingProps,y=f.revealOrder,x=f.tail;f=f.children;var T=Mn.current,j=(T&2)!==0;if(j?(T=T&1|2,l.flags|=128):T&=1,P(Mn,T),er(i,l,f,u),f=Dt?Cu:0,!j&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&av(i,u,l);else if(i.tag===19)av(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(u=l.child,y=null;u!==null;)i=u.alternate,i!==null&&Ch(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=l.child,l.child=null):(y=u.sibling,u.sibling=null),Yp(l,!1,y,u,x,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=l.child,l.child=null;y!==null;){if(i=y.alternate,i!==null&&Ch(i)===null){l.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}Yp(l,!0,u,null,x,f);break;case"together":Yp(l,!1,null,null,void 0,f);break;default:l.memoizedState=null}return l.child}function ka(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),ol|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(Zs(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,u=ma(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=ma(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function Qp(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&gh(i)))}function lA(i,l,u){switch(l.tag){case 3:ft(l,l.stateNode.containerInfo),el(l,Bn,i.memoizedState.cache),ns();break;case 27:case 5:Fe(l);break;case 4:ft(l,l.stateNode.containerInfo);break;case 10:el(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,vp(l),null;break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(il(l),l.flags|=128,null):(u&l.child.childLanes)!==0?iv(i,l,u):(il(l),i=ka(i,l,u),i!==null?i.sibling:null);il(l);break;case 19:var y=(i.flags&128)!==0;if(f=(u&l.childLanes)!==0,f||(Zs(i,l,u,!1),f=(u&l.childLanes)!==0),y){if(f)return lv(i,l,u);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),P(Mn,Mn.current),f)break;return null;case 22:return l.lanes=0,Zx(i,l,u,l.pendingProps);case 24:el(l,Bn,i.memoizedState.cache)}return ka(i,l,u)}function sv(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)zn=!0;else{if(!Qp(i,u)&&(l.flags&128)===0)return zn=!1,lA(i,l,u);zn=(i.flags&131072)!==0}else zn=!1,Dt&&(l.flags&1048576)!==0&&Py(l,Cu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var f=l.pendingProps;if(i=ls(l.elementType),l.type=i,typeof i=="function")Jd(i)?(f=cs(i,f),l.tag=1,l=nv(null,l,i,f,u)):(l.tag=0,l=qp(null,l,i,f,u));else{if(i!=null){var y=i.$$typeof;if(y===ee){l.tag=11,l=Xx(null,l,i,f,u);break e}else if(y===U){l.tag=14,l=$x(null,l,i,f,u);break e}}throw l=he(i)||i,Error(r(306,l,""))}}return l;case 0:return qp(i,l,l.type,l.pendingProps,u);case 1:return f=l.type,y=cs(f,l.pendingProps),nv(i,l,f,y,u);case 3:e:{if(ft(l,l.stateNode.containerInfo),i===null)throw Error(r(387));f=l.pendingProps;var x=l.memoizedState;y=x.element,pp(i,l),ju(l,f,null,u);var T=l.memoizedState;if(f=T.cache,el(l,Bn,f),f!==x.cache&&op(l,[Bn],u,!0),Du(),f=T.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=rv(i,l,f,u);break e}else if(f!==y){y=Zr(Error(r(424)),l),Au(y),l=rv(i,l,f,u);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yn=ri(i.firstChild),Zn=l,Dt=!0,Za=null,ti=!0,u=Zy(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ns(),f===y){l=ka(i,l,u);break e}er(i,l,f,u)}l=l.child}return l;case 26:return Bh(i,l),i===null?(u=xb(l.type,null,l.pendingProps,null))?l.memoizedState=u:Dt||(u=l.type,i=l.pendingProps,f=Zh(et.current).createElement(u),f[cn]=l,f[En]=i,tr(f,u,i),Nn(f),l.stateNode=f):l.memoizedState=xb(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return Fe(l),i===null&&Dt&&(f=l.stateNode=mb(l.type,l.pendingProps,et.current),Zn=l,ti=!0,y=yn,dl(l.type)?(Em=y,yn=ri(f.firstChild)):yn=y),er(i,l,l.pendingProps.children,u),Bh(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Dt&&((y=f=yn)&&(f=LA(f,l.type,l.pendingProps,ti),f!==null?(l.stateNode=f,Zn=l,yn=ri(f.firstChild),ti=!1,y=!0):y=!1),y||Ja(l)),Fe(l),y=l.type,x=l.pendingProps,T=i!==null?i.memoizedProps:null,f=x.children,wm(y,x)?f=null:T!==null&&wm(y,T)&&(l.flags|=32),l.memoizedState!==null&&(y=kp(i,l,WC,null,null,u),Zu._currentValue=y),Bh(i,l),er(i,l,f,u),l.child;case 6:return i===null&&Dt&&((i=u=yn)&&(u=zA(u,l.pendingProps,ti),u!==null?(l.stateNode=u,Zn=l,yn=null,i=!0):i=!1),i||Ja(l)),null;case 13:return iv(i,l,u);case 4:return ft(l,l.stateNode.containerInfo),f=l.pendingProps,i===null?l.child=os(l,null,f,u):er(i,l,f,u),l.child;case 11:return Xx(i,l,l.type,l.pendingProps,u);case 7:return er(i,l,l.pendingProps,u),l.child;case 8:return er(i,l,l.pendingProps.children,u),l.child;case 12:return er(i,l,l.pendingProps.children,u),l.child;case 10:return f=l.pendingProps,el(l,l.type,f.value),er(i,l,f.children,u),l.child;case 9:return y=l.type._context,f=l.pendingProps.children,is(l),y=Jn(y),f=f(y),l.flags|=1,er(i,l,f,u),l.child;case 14:return $x(i,l,l.type,l.pendingProps,u);case 15:return Wx(i,l,l.type,l.pendingProps,u);case 19:return lv(i,l,u);case 31:return aA(i,l,u);case 22:return Zx(i,l,u,l.pendingProps);case 24:return is(l),f=Jn(Bn),i===null?(y=hp(),y===null&&(y=ln,x=up(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),l.memoizedState={parent:f,cache:y},dp(l),el(l,Bn,y)):((i.lanes&u)!==0&&(pp(i,l),ju(l,null,null,u),Du()),y=i.memoizedState,x=l.memoizedState,y.parent!==f?(y={parent:f,cache:f},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),el(l,Bn,f)):(f=x.cache,el(l,Bn,f),f!==y.cache&&op(l,[Bn],u,!0))),er(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function wa(i){i.flags|=4}function Xp(i,l,u,f,y){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Rv())i.flags|=8192;else throw ss=bh,fp}else i.flags&=-16777217}function ov(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Sb(l))if(Rv())i.flags|=8192;else throw ss=bh,fp}function zh(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Jc():536870912,i.lanes|=l,co|=l)}function Iu(i,l){if(!Dt)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function xn(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(l)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=u,l}function sA(i,l,u){var f=l.pendingProps;switch(rp(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(l),null;case 1:return xn(l),null;case 3:return u=l.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),xa(Bn),Qt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Ws(l)?wa(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ap())),xn(l),null;case 26:var y=l.type,x=l.memoizedState;return i===null?(wa(l),x!==null?(xn(l),ov(l,x)):(xn(l),Xp(l,y,null,f,u))):x?x!==i.memoizedState?(wa(l),xn(l),ov(l,x)):(xn(l),l.flags&=-16777217):(i=i.memoizedProps,i!==f&&wa(l),xn(l),Xp(l,y,i,f,u)),null;case 27:if(Ye(l),u=et.current,y=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==f&&wa(l);else{if(!f){if(l.stateNode===null)throw Error(r(166));return xn(l),null}i=Qe.current,Ws(l)?qy(l):(i=mb(y,f,u),l.stateNode=i,wa(l))}return xn(l),null;case 5:if(Ye(l),y=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==f&&wa(l);else{if(!f){if(l.stateNode===null)throw Error(r(166));return xn(l),null}if(x=Qe.current,Ws(l))qy(l);else{var T=Zh(et.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?x.multiple=!0:f.size&&(x.size=f.size);break;default:x=typeof f.is=="string"?T.createElement(y,{is:f.is}):T.createElement(y)}}x[cn]=l,x[En]=f;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=x;e:switch(tr(x,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&wa(l)}}return xn(l),Xp(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,u),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==f&&wa(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(r(166));if(i=et.current,Ws(l)){if(i=l.stateNode,u=l.memoizedProps,f=null,y=Zn,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}i[cn]=l,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||ib(i.nodeValue,u)),i||Ja(l,!0)}else i=Zh(i).createTextNode(f),i[cn]=l,l.stateNode=i}return xn(l),null;case 31:if(u=l.memoizedState,i===null||i.memoizedState!==null){if(f=Ws(l),u!==null){if(i===null){if(!f)throw Error(r(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[cn]=l}else ns(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xn(l),i=!1}else u=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return l.flags&256?(Ir(l),l):(Ir(l),null);if((l.flags&128)!==0)throw Error(r(558))}return xn(l),null;case 13:if(f=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Ws(l),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[cn]=l}else ns(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xn(l),y=!1}else y=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Ir(l),l):(Ir(l),null)}return Ir(l),(l.flags&128)!==0?(l.lanes=u,l):(u=f!==null,i=i!==null&&i.memoizedState!==null,u&&(f=l.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),x=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),x!==y&&(f.flags|=2048)),u!==i&&u&&(l.child.flags|=8192),zh(l,l.updateQueue),xn(l),null);case 4:return Qt(),i===null&&ym(l.stateNode.containerInfo),xn(l),null;case 10:return xa(l.type),xn(l),null;case 19:if(Ee(Mn),f=l.memoizedState,f===null)return xn(l),null;if(y=(l.flags&128)!==0,x=f.rendering,x===null)if(y)Iu(f,!1);else{if(Cn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(x=Ch(i),x!==null){for(l.flags|=128,Iu(f,!1),i=x.updateQueue,l.updateQueue=i,zh(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)Ly(u,i),u=u.sibling;return P(Mn,Mn.current&1|2),Dt&&ga(l,f.treeForkCount),l.child}i=i.sibling}f.tail!==null&&Lt()>Uh&&(l.flags|=128,y=!0,Iu(f,!1),l.lanes=4194304)}else{if(!y)if(i=Ch(x),i!==null){if(l.flags|=128,y=!0,i=i.updateQueue,l.updateQueue=i,zh(l,i),Iu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!Dt)return xn(l),null}else 2*Lt()-f.renderingStartTime>Uh&&u!==536870912&&(l.flags|=128,y=!0,Iu(f,!1),l.lanes=4194304);f.isBackwards?(x.sibling=l.child,l.child=x):(i=f.last,i!==null?i.sibling=x:l.child=x,f.last=x)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Lt(),i.sibling=null,u=Mn.current,P(Mn,y?u&1|2:u&1),Dt&&ga(l,f.treeForkCount),i):(xn(l),null);case 22:case 23:return Ir(l),xp(),f=l.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(u&536870912)!==0&&(l.flags&128)===0&&(xn(l),l.subtreeFlags&6&&(l.flags|=8192)):xn(l),u=l.updateQueue,u!==null&&zh(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048),i!==null&&Ee(as),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),xa(Bn),xn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function oA(i,l){switch(rp(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return xa(Bn),Qt(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Ye(l),null;case 31:if(l.memoizedState!==null){if(Ir(l),l.alternate===null)throw Error(r(340));ns()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(Ir(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ns()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ee(Mn),null;case 4:return Qt(),null;case 10:return xa(l.type),null;case 22:case 23:return Ir(l),xp(),i!==null&&Ee(as),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return xa(Bn),null;case 25:return null;default:return null}}function uv(i,l){switch(rp(l),l.tag){case 3:xa(Bn),Qt();break;case 26:case 27:case 5:Ye(l);break;case 4:Qt();break;case 31:l.memoizedState!==null&&Ir(l);break;case 13:Ir(l);break;case 19:Ee(Mn);break;case 10:xa(l.type);break;case 22:case 23:Ir(l),xp(),i!==null&&Ee(as);break;case 24:xa(Bn)}}function Pu(i,l){try{var u=l.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&i)===i){f=void 0;var x=u.create,T=u.inst;f=x(),T.destroy=f}u=u.next}while(u!==y)}}catch(j){$t(l,l.return,j)}}function ll(i,l,u){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var x=y.next;f=x;do{if((f.tag&i)===i){var T=f.inst,j=T.destroy;if(j!==void 0){T.destroy=void 0,y=l;var F=u,ce=j;try{ce()}catch(ke){$t(y,F,ke)}}}f=f.next}while(f!==x)}}catch(ke){$t(l,l.return,ke)}}function cv(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{ex(l,u)}catch(f){$t(i,i.return,f)}}}function hv(i,l,u){u.props=cs(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){$t(i,l,f)}}function Hu(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(y){$t(i,l,y)}}function Hi(i,l){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(y){$t(i,l,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){$t(i,l,y)}else u.current=null}function fv(i){var l=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(y){$t(i,i.return,y)}}function $p(i,l,u){try{var f=i.stateNode;_A(f,i.type,u,l),f[En]=l}catch(y){$t(i,i.return,y)}}function dv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&dl(i.type)||i.tag===4}function Wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&dl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zp(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Sr));else if(f!==4&&(f===27&&dl(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(Zp(i,l,u),i=i.sibling;i!==null;)Zp(i,l,u),i=i.sibling}function Ih(i,l,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(f!==4&&(f===27&&dl(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Ih(i,l,u),i=i.sibling;i!==null;)Ih(i,l,u),i=i.sibling}function pv(i){var l=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);tr(l,f,u),l[cn]=i,l[En]=u}catch(x){$t(i,i.return,x)}}var Sa=!1,In=!1,Jp=!1,mv=typeof WeakSet=="function"?WeakSet:Set,$n=null;function uA(i,l){if(i=i.containerInfo,bm=lf,i=E(i),M(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var y=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var T=0,j=-1,F=-1,ce=0,ke=0,Se=i,pe=null;t:for(;;){for(var ge;Se!==u||y!==0&&Se.nodeType!==3||(j=T+y),Se!==x||f!==0&&Se.nodeType!==3||(F=T+f),Se.nodeType===3&&(T+=Se.nodeValue.length),(ge=Se.firstChild)!==null;)pe=Se,Se=ge;for(;;){if(Se===i)break t;if(pe===u&&++ce===y&&(j=T),pe===x&&++ke===f&&(F=T),(ge=Se.nextSibling)!==null)break;Se=pe,pe=Se.parentNode}Se=ge}u=j===-1||F===-1?null:{start:j,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(km={focusedElem:i,selectionRange:u},lf=!1,$n=l;$n!==null;)if(l=$n,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,$n=i;else for(;$n!==null;){switch(l=$n,x=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)y=i[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,u=l,y=x.memoizedProps,x=x.memoizedState,f=u.stateNode;try{var We=cs(u.type,y);i=f.getSnapshotBeforeUpdate(We,x),f.__reactInternalSnapshotBeforeUpdate=i}catch(ut){$t(u,u.return,ut)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)Cm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Cm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,$n=i;break}$n=l.return}}function gv(i,l,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Aa(i,u),f&4&&Pu(5,u);break;case 1:if(Aa(i,u),f&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(T){$t(u,u.return,T)}else{var y=cs(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(y,l,i.__reactInternalSnapshotBeforeUpdate)}catch(T){$t(u,u.return,T)}}f&64&&cv(u),f&512&&Hu(u,u.return);break;case 3:if(Aa(i,u),f&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{ex(i,l)}catch(T){$t(u,u.return,T)}}break;case 27:l===null&&f&4&&pv(u);case 26:case 5:Aa(i,u),l===null&&f&4&&fv(u),f&512&&Hu(u,u.return);break;case 12:Aa(i,u);break;case 31:Aa(i,u),f&4&&vv(i,u);break;case 13:Aa(i,u),f&4&&bv(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=xA.bind(null,u),IA(i,u))));break;case 22:if(f=u.memoizedState!==null||Sa,!f){l=l!==null&&l.memoizedState!==null||In,y=Sa;var x=In;Sa=f,(In=l)&&!x?Ta(i,u,(u.subtreeFlags&8772)!==0):Aa(i,u),Sa=y,In=x}break;case 30:break;default:Aa(i,u)}}function yv(i){var l=i.alternate;l!==null&&(i.alternate=null,yv(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Ns(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bn=null,Cr=!1;function Ca(i,l,u){for(u=u.child;u!==null;)xv(i,l,u),u=u.sibling}function xv(i,l,u){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(It,u)}catch{}switch(u.tag){case 26:In||Hi(u,l),Ca(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:In||Hi(u,l);var f=bn,y=Cr;dl(u.type)&&(bn=u.stateNode,Cr=!1),Ca(i,l,u),Xu(u.stateNode),bn=f,Cr=y;break;case 5:In||Hi(u,l);case 6:if(f=bn,y=Cr,bn=null,Ca(i,l,u),bn=f,Cr=y,bn!==null)if(Cr)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(u.stateNode)}catch(x){$t(u,l,x)}else try{bn.removeChild(u.stateNode)}catch(x){$t(u,l,x)}break;case 18:bn!==null&&(Cr?(i=bn,cb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),vo(i)):cb(bn,u.stateNode));break;case 4:f=bn,y=Cr,bn=u.stateNode.containerInfo,Cr=!0,Ca(i,l,u),bn=f,Cr=y;break;case 0:case 11:case 14:case 15:ll(2,u,l),In||ll(4,u,l),Ca(i,l,u);break;case 1:In||(Hi(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"&&hv(u,l,f)),Ca(i,l,u);break;case 21:Ca(i,l,u);break;case 22:In=(f=In)||u.memoizedState!==null,Ca(i,l,u),In=f;break;default:Ca(i,l,u)}}function vv(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{vo(i)}catch(u){$t(l,l.return,u)}}}function bv(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vo(i)}catch(u){$t(l,l.return,u)}}function cA(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new mv),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new mv),l;default:throw Error(r(435,i.tag))}}function Ph(i,l){var u=cA(i);l.forEach(function(f){if(!u.has(f)){u.add(f);var y=vA.bind(null,i,f);f.then(y,y)}})}function Ar(i,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var y=u[f],x=i,T=l,j=T;e:for(;j!==null;){switch(j.tag){case 27:if(dl(j.type)){bn=j.stateNode,Cr=!1;break e}break;case 5:bn=j.stateNode,Cr=!1;break e;case 3:case 4:bn=j.stateNode.containerInfo,Cr=!0;break e}j=j.return}if(bn===null)throw Error(r(160));xv(x,T,y),bn=null,Cr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)kv(l,i),l=l.sibling}var vi=null;function kv(i,l){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ar(l,i),Tr(i),f&4&&(ll(3,i,i.return),Pu(3,i),ll(5,i,i.return));break;case 1:Ar(l,i),Tr(i),f&512&&(In||u===null||Hi(u,u.return)),f&64&&Sa&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var y=vi;if(Ar(l,i),Tr(i),f&512&&(In||u===null||Hi(u,u.return)),f&4){var x=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Or]||x[cn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(f),y.head.insertBefore(x,y.querySelector("head > title"))),tr(x,f,u),x[cn]=i,Nn(x),f=x;break e;case"link":var T=kb("link","href",y).get(f+(u.href||""));if(T){for(var j=0;j<T.length;j++)if(x=T[j],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(j,1);break t}}x=y.createElement(f),tr(x,f,u),y.head.appendChild(x);break;case"meta":if(T=kb("meta","content",y).get(f+(u.content||""))){for(j=0;j<T.length;j++)if(x=T[j],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(j,1);break t}}x=y.createElement(f),tr(x,f,u),y.head.appendChild(x);break;default:throw Error(r(468,f))}x[cn]=i,Nn(x),f=x}i.stateNode=f}else wb(y,i.type,i.stateNode);else i.stateNode=bb(y,f,i.memoizedProps);else x!==f?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,f===null?wb(y,i.type,i.stateNode):bb(y,f,i.memoizedProps)):f===null&&i.stateNode!==null&&$p(i,i.memoizedProps,u.memoizedProps)}break;case 27:Ar(l,i),Tr(i),f&512&&(In||u===null||Hi(u,u.return)),u!==null&&f&4&&$p(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Ar(l,i),Tr(i),f&512&&(In||u===null||Hi(u,u.return)),i.flags&32){y=i.stateNode;try{aa(y,"")}catch(We){$t(i,i.return,We)}}f&4&&i.stateNode!=null&&(y=i.memoizedProps,$p(i,y,u!==null?u.memoizedProps:y)),f&1024&&(Jp=!0);break;case 6:if(Ar(l,i),Tr(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(We){$t(i,i.return,We)}}break;case 3:if(tf=null,y=vi,vi=Jh(l.containerInfo),Ar(l,i),vi=y,Tr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{vo(l.containerInfo)}catch(We){$t(i,i.return,We)}Jp&&(Jp=!1,wv(i));break;case 4:f=vi,vi=Jh(i.stateNode.containerInfo),Ar(l,i),Tr(i),vi=f;break;case 12:Ar(l,i),Tr(i);break;case 31:Ar(l,i),Tr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ph(i,f)));break;case 13:Ar(l,i),Tr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(qh=Lt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ph(i,f)));break;case 22:y=i.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,ce=Sa,ke=In;if(Sa=ce||y,In=ke||F,Ar(l,i),In=ke,Sa=ce,Tr(i),f&8192)e:for(l=i.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(u===null||F||Sa||In||hs(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){F=u=l;try{if(x=F.stateNode,y)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{j=F.stateNode;var Se=F.memoizedProps.style,pe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;j.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(We){$t(F,F.return,We)}}}else if(l.tag===6){if(u===null){F=l;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(We){$t(F,F.return,We)}}}else if(l.tag===18){if(u===null){F=l;try{var ge=F.stateNode;y?hb(ge,!0):hb(F.stateNode,!1)}catch(We){$t(F,F.return,We)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Ph(i,u))));break;case 19:Ar(l,i),Tr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ph(i,f)));break;case 30:break;case 21:break;default:Ar(l,i),Tr(i)}}function Tr(i){var l=i.flags;if(l&2){try{for(var u,f=i.return;f!==null;){if(dv(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,x=Wp(i);Ih(i,x,y);break;case 5:var T=u.stateNode;u.flags&32&&(aa(T,""),u.flags&=-33);var j=Wp(i);Ih(i,j,T);break;case 3:case 4:var F=u.stateNode.containerInfo,ce=Wp(i);Zp(i,ce,F);break;default:throw Error(r(161))}}catch(ke){$t(i,i.return,ke)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function wv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;wv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Aa(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)gv(i,l.alternate,l),l=l.sibling}function hs(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:ll(4,l,l.return),hs(l);break;case 1:Hi(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&hv(l,l.return,u),hs(l);break;case 27:Xu(l.stateNode);case 26:case 5:Hi(l,l.return),hs(l);break;case 22:l.memoizedState===null&&hs(l);break;case 30:hs(l);break;default:hs(l)}i=i.sibling}}function Ta(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,y=i,x=l,T=x.flags;switch(x.tag){case 0:case 11:case 15:Ta(y,x,u),Pu(4,x);break;case 1:if(Ta(y,x,u),f=x,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ce){$t(f,f.return,ce)}if(f=x,y=f.updateQueue,y!==null){var j=f.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Jy(F[y],j)}catch(ce){$t(f,f.return,ce)}}u&&T&64&&cv(x),Hu(x,x.return);break;case 27:pv(x);case 26:case 5:Ta(y,x,u),u&&f===null&&T&4&&fv(x),Hu(x,x.return);break;case 12:Ta(y,x,u);break;case 31:Ta(y,x,u),u&&T&4&&vv(y,x);break;case 13:Ta(y,x,u),u&&T&4&&bv(y,x);break;case 22:x.memoizedState===null&&Ta(y,x,u),Hu(x,x.return);break;case 30:break;default:Ta(y,x,u)}l=l.sibling}}function em(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Tu(u))}function tm(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Tu(i))}function bi(i,l,u,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Sv(i,l,u,f),l=l.sibling}function Sv(i,l,u,f){var y=l.flags;switch(l.tag){case 0:case 11:case 15:bi(i,l,u,f),y&2048&&Pu(9,l);break;case 1:bi(i,l,u,f);break;case 3:bi(i,l,u,f),y&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Tu(i)));break;case 12:if(y&2048){bi(i,l,u,f),i=l.stateNode;try{var x=l.memoizedProps,T=x.id,j=x.onPostCommit;typeof j=="function"&&j(T,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){$t(l,l.return,F)}}else bi(i,l,u,f);break;case 31:bi(i,l,u,f);break;case 13:bi(i,l,u,f);break;case 23:break;case 22:x=l.stateNode,T=l.alternate,l.memoizedState!==null?x._visibility&2?bi(i,l,u,f):qu(i,l):x._visibility&2?bi(i,l,u,f):(x._visibility|=2,so(i,l,u,f,(l.subtreeFlags&10256)!==0||!1)),y&2048&&em(T,l);break;case 24:bi(i,l,u,f),y&2048&&tm(l.alternate,l);break;default:bi(i,l,u,f)}}function so(i,l,u,f,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=i,T=l,j=u,F=f,ce=T.flags;switch(T.tag){case 0:case 11:case 15:so(x,T,j,F,y),Pu(8,T);break;case 23:break;case 22:var ke=T.stateNode;T.memoizedState!==null?ke._visibility&2?so(x,T,j,F,y):qu(x,T):(ke._visibility|=2,so(x,T,j,F,y)),y&&ce&2048&&em(T.alternate,T);break;case 24:so(x,T,j,F,y),y&&ce&2048&&tm(T.alternate,T);break;default:so(x,T,j,F,y)}l=l.sibling}}function qu(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,f=l,y=f.flags;switch(f.tag){case 22:qu(u,f),y&2048&&em(f.alternate,f);break;case 24:qu(u,f),y&2048&&tm(f.alternate,f);break;default:qu(u,f)}l=l.sibling}}var Uu=8192;function oo(i,l,u){if(i.subtreeFlags&Uu)for(i=i.child;i!==null;)Cv(i,l,u),i=i.sibling}function Cv(i,l,u){switch(i.tag){case 26:oo(i,l,u),i.flags&Uu&&i.memoizedState!==null&&$A(u,vi,i.memoizedState,i.memoizedProps);break;case 5:oo(i,l,u);break;case 3:case 4:var f=vi;vi=Jh(i.stateNode.containerInfo),oo(i,l,u),vi=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Uu,Uu=16777216,oo(i,l,u),Uu=f):oo(i,l,u));break;default:oo(i,l,u)}}function Av(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Fu(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];$n=f,Ev(f,i)}Av(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tv(i),i=i.sibling}function Tv(i){switch(i.tag){case 0:case 11:case 15:Fu(i),i.flags&2048&&ll(9,i,i.return);break;case 3:Fu(i);break;case 12:Fu(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Hh(i)):Fu(i);break;default:Fu(i)}}function Hh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];$n=f,Ev(f,i)}Av(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:ll(8,l,l.return),Hh(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Hh(l));break;default:Hh(l)}i=i.sibling}}function Ev(i,l){for(;$n!==null;){var u=$n;switch(u.tag){case 0:case 11:case 15:ll(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Tu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,$n=f;else e:for(u=i;$n!==null;){f=$n;var y=f.sibling,x=f.return;if(yv(f),f===u){$n=null;break e}if(y!==null){y.return=x,$n=y;break e}$n=x}}}var hA={getCacheForType:function(i){var l=Jn(Bn),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u},cacheSignal:function(){return Jn(Bn).controller.signal}},fA=typeof WeakMap=="function"?WeakMap:Map,Vt=0,ln=null,St=null,Et=0,Xt=0,Pr=null,sl=!1,uo=!1,nm=!1,Ea=0,Cn=0,ol=0,fs=0,rm=0,Hr=0,co=0,Vu=null,Er=null,im=!1,qh=0,Nv=0,Uh=1/0,Fh=null,ul=null,Un=0,cl=null,ho=null,Na=0,am=0,lm=null,Mv=null,Ku=0,sm=null;function qr(){return(Vt&2)!==0&&Et!==0?Et&-Et:te.T!==null?dm():Hl()}function _v(){if(Hr===0)if((Et&536870912)===0||Dt){var i=za;za<<=1,(za&3932160)===0&&(za=262144),Hr=i}else Hr=536870912;return i=zr.current,i!==null&&(i.flags|=32),Hr}function Nr(i,l,u){(i===ln&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)&&(fo(i,0),hl(i,Et,Hr,!1)),Yr(i,u),((Vt&2)===0||i!==ln)&&(i===ln&&((Vt&2)===0&&(fs|=u),Cn===4&&hl(i,Et,Hr,!1)),qi(i))}function Dv(i,l,u){if((Vt&6)!==0)throw Error(r(327));var f=!u&&(l&127)===0&&(l&i.expiredLanes)===0||na(i,l),y=f?mA(i,l):um(i,l,!0),x=f;do{if(y===0){uo&&!f&&hl(i,l,0,!1);break}else{if(u=i.current.alternate,x&&!dA(u)){y=um(i,l,!1),x=!1;continue}if(y===2){if(x=l,i.errorRecoveryDisabledLanes&x)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var j=i;y=Vu;var F=j.current.memoizedState.isDehydrated;if(F&&(fo(j,T).flags|=256),T=um(j,T,!1),T!==2){if(nm&&!F){j.errorRecoveryDisabledLanes|=x,fs|=x,y=4;break e}x=Er,Er=y,x!==null&&(Er===null?Er=x:Er.push.apply(Er,x))}y=T}if(x=!1,y!==2)continue}}if(y===1){fo(i,0),hl(i,l,0,!0);break}e:{switch(f=i,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:hl(f,l,Hr,!sl);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=qh+300-Lt(),10<y)){if(hl(f,l,Hr,!sl),Il(f,0,!0)!==0)break e;Na=l,f.timeoutHandle=ob(jv.bind(null,f,u,Er,Fh,im,l,Hr,fs,co,sl,x,"Throttled",-0,0),y);break e}jv(f,u,Er,Fh,im,l,Hr,fs,co,sl,x,null,-0,0)}}break}while(!0);qi(i)}function jv(i,l,u,f,y,x,T,j,F,ce,ke,Se,pe,ge){if(i.timeoutHandle=-1,Se=l.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},Cv(l,x,Se);var We=(x&62914560)===x?qh-Lt():(x&4194048)===x?Nv-Lt():0;if(We=WA(Se,We),We!==null){Na=x,i.cancelPendingCommit=We(Hv.bind(null,i,l,x,u,f,y,T,j,F,ke,Se,null,pe,ge)),hl(i,x,T,!ce);return}}Hv(i,l,x,u,f,y,T,j,F)}function dA(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var y=u[f],x=y.getSnapshot;y=y.value;try{if(!cr(x(),y))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hl(i,l,u,f){l&=~rm,l&=~fs,i.suspendedLanes|=l,i.pingedLanes&=~l,f&&(i.warmLanes|=l),f=i.expirationTimes;for(var y=l;0<y;){var x=31-Re(y),T=1<<x;f[x]=-1,y&=~T}u!==0&&Pl(i,u,l)}function Vh(){return(Vt&6)===0?(Gu(0),!1):!0}function om(){if(St!==null){if(Xt===0)var i=St.return;else i=St,ya=rs=null,Cp(i),no=null,Nu=0,i=St;for(;i!==null;)uv(i.alternate,i),i=i.return;St=null}}function fo(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,OA(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Na=0,om(),ln=i,St=u=ma(i.current,null),Et=l,Xt=0,Pr=null,sl=!1,uo=na(i,l),nm=!1,co=Hr=rm=fs=ol=Cn=0,Er=Vu=null,im=!1,(l&8)!==0&&(l|=l&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=l;0<f;){var y=31-Re(f),x=1<<y;l|=i[y],f&=~x}return Ea=l,dt(),u}function Ov(i,l){pt=null,te.H=Lu,l===to||l===vh?(l=Xy(),Xt=3):l===fp?(l=Xy(),Xt=4):Xt=l===Hp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Pr=l,St===null&&(Cn=1,Oh(i,Zr(l,i.current)))}function Rv(){var i=zr.current;return i===null?!0:(Et&4194048)===Et?ni===null:(Et&62914560)===Et||(Et&536870912)!==0?i===ni:!1}function Bv(){var i=te.H;return te.H=Lu,i===null?Lu:i}function Lv(){var i=te.A;return te.A=hA,i}function Kh(){Cn=4,sl||(Et&4194048)!==Et&&zr.current!==null||(uo=!0),(ol&134217727)===0&&(fs&134217727)===0||ln===null||hl(ln,Et,Hr,!1)}function um(i,l,u){var f=Vt;Vt|=2;var y=Bv(),x=Lv();(ln!==i||Et!==l)&&(Fh=null,fo(i,l)),l=!1;var T=Cn;e:do try{if(Xt!==0&&St!==null){var j=St,F=Pr;switch(Xt){case 8:om(),T=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(l=!0);var ce=Xt;if(Xt=0,Pr=null,po(i,j,F,ce),u&&uo){T=0;break e}break;default:ce=Xt,Xt=0,Pr=null,po(i,j,F,ce)}}pA(),T=Cn;break}catch(ke){Ov(i,ke)}while(!0);return l&&i.shellSuspendCounter++,ya=rs=null,Vt=f,te.H=y,te.A=x,St===null&&(ln=null,Et=0,dt()),T}function pA(){for(;St!==null;)zv(St)}function mA(i,l){var u=Vt;Vt|=2;var f=Bv(),y=Lv();ln!==i||Et!==l?(Fh=null,Uh=Lt()+500,fo(i,l)):uo=na(i,l);e:do try{if(Xt!==0&&St!==null){l=St;var x=Pr;t:switch(Xt){case 1:Xt=0,Pr=null,po(i,l,x,1);break;case 2:case 9:if(Yy(x)){Xt=0,Pr=null,Iv(l);break}l=function(){Xt!==2&&Xt!==9||ln!==i||(Xt=7),qi(i)},x.then(l,l);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:Yy(x)?(Xt=0,Pr=null,Iv(l)):(Xt=0,Pr=null,po(i,l,x,7));break;case 5:var T=null;switch(St.tag){case 26:T=St.memoizedState;case 5:case 27:var j=St;if(T?Sb(T):j.stateNode.complete){Xt=0,Pr=null;var F=j.sibling;if(F!==null)St=F;else{var ce=j.return;ce!==null?(St=ce,Gh(ce)):St=null}break t}}Xt=0,Pr=null,po(i,l,x,5);break;case 6:Xt=0,Pr=null,po(i,l,x,6);break;case 8:om(),Cn=6;break e;default:throw Error(r(462))}}gA();break}catch(ke){Ov(i,ke)}while(!0);return ya=rs=null,te.H=f,te.A=y,Vt=u,St!==null?0:(ln=null,Et=0,dt(),Cn)}function gA(){for(;St!==null&&!bt();)zv(St)}function zv(i){var l=sv(i.alternate,i,Ea);i.memoizedProps=i.pendingProps,l===null?Gh(i):St=l}function Iv(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=tv(u,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=tv(u,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:Cp(l);default:uv(u,l),l=St=Ly(l,Ea),l=sv(u,l,Ea)}i.memoizedProps=i.pendingProps,l===null?Gh(i):St=l}function po(i,l,u,f){ya=rs=null,Cp(l),no=null,Nu=0;var y=l.return;try{if(iA(i,y,l,u,Et)){Cn=1,Oh(i,Zr(u,i.current)),St=null;return}}catch(x){if(y!==null)throw St=y,x;Cn=1,Oh(i,Zr(u,i.current)),St=null;return}l.flags&32768?(Dt||f===1?i=!0:uo||(Et&536870912)!==0?i=!1:(sl=i=!0,(f===2||f===9||f===3||f===6)&&(f=zr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Pv(l,i)):Gh(l)}function Gh(i){var l=i;do{if((l.flags&32768)!==0){Pv(l,sl);return}i=l.return;var u=sA(l.alternate,l,Ea);if(u!==null){St=u;return}if(l=l.sibling,l!==null){St=l;return}St=l=i}while(l!==null);Cn===0&&(Cn=5)}function Pv(i,l){do{var u=oA(i.alternate,i);if(u!==null){u.flags&=32767,St=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){St=i;return}St=i=u}while(i!==null);Cn=6,St=null}function Hv(i,l,u,f,y,x,T,j,F){i.cancelPendingCommit=null;do Yh();while(Un!==0);if((Vt&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=nt,nu(i,u,x,T,j,F),i===ln&&(St=ln=null,Et=0),ho=l,cl=i,Na=u,am=x,lm=y,Mv=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bA(Ve,function(){return Kv(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=te.T,te.T=null,y=xe.p,xe.p=2,T=Vt,Vt|=4;try{uA(i,l,u)}finally{Vt=T,xe.p=y,te.T=f}}Un=1,qv(),Uv(),Fv()}}function qv(){if(Un===1){Un=0;var i=cl,l=ho,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=te.T,te.T=null;var f=xe.p;xe.p=2;var y=Vt;Vt|=4;try{kv(l,i);var x=km,T=E(i.containerInfo),j=x.focusedElem,F=x.selectionRange;if(T!==j&&j&&j.ownerDocument&&C(j.ownerDocument.documentElement,j)){if(F!==null&&M(j)){var ce=F.start,ke=F.end;if(ke===void 0&&(ke=ce),"selectionStart"in j)j.selectionStart=ce,j.selectionEnd=Math.min(ke,j.value.length);else{var Se=j.ownerDocument||document,pe=Se&&Se.defaultView||window;if(pe.getSelection){var ge=pe.getSelection(),We=j.textContent.length,ut=Math.min(F.start,We),nn=F.end===void 0?ut:Math.min(F.end,We);!ge.extend&&ut>nn&&(T=nn,nn=ut,ut=T);var ie=S(j,ut),$=S(j,nn);if(ie&&$&&(ge.rangeCount!==1||ge.anchorNode!==ie.node||ge.anchorOffset!==ie.offset||ge.focusNode!==$.node||ge.focusOffset!==$.offset)){var ue=Se.createRange();ue.setStart(ie.node,ie.offset),ge.removeAllRanges(),ut>nn?(ge.addRange(ue),ge.extend($.node,$.offset)):(ue.setEnd($.node,$.offset),ge.addRange(ue))}}}}for(Se=[],ge=j;ge=ge.parentNode;)ge.nodeType===1&&Se.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Se.length;j++){var we=Se[j];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}lf=!!bm,km=bm=null}finally{Vt=y,xe.p=f,te.T=u}}i.current=l,Un=2}}function Uv(){if(Un===2){Un=0;var i=cl,l=ho,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=te.T,te.T=null;var f=xe.p;xe.p=2;var y=Vt;Vt|=4;try{gv(i,l.alternate,l)}finally{Vt=y,xe.p=f,te.T=u}}Un=3}}function Fv(){if(Un===4||Un===3){Un=0,Ot();var i=cl,l=ho,u=Na,f=Mv;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Un=5:(Un=0,ho=cl=null,Vv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ul=null),Ia(u),l=l.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(It,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=te.T,y=xe.p,xe.p=2,te.T=null;try{for(var x=i.onRecoverableError,T=0;T<f.length;T++){var j=f[T];x(j.value,{componentStack:j.stack})}}finally{te.T=l,xe.p=y}}(Na&3)!==0&&Yh(),qi(i),y=i.pendingLanes,(u&261930)!==0&&(y&42)!==0?i===sm?Ku++:(Ku=0,sm=i):Ku=0,Gu(0)}}function Vv(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,Tu(l)))}function Yh(){return qv(),Uv(),Fv(),Kv()}function Kv(){if(Un!==5)return!1;var i=cl,l=am;am=0;var u=Ia(Na),f=te.T,y=xe.p;try{xe.p=32>u?32:u,te.T=null,u=lm,lm=null;var x=cl,T=Na;if(Un=0,ho=cl=null,Na=0,(Vt&6)!==0)throw Error(r(331));var j=Vt;if(Vt|=4,Tv(x.current),Sv(x,x.current,T,u),Vt=j,Gu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(It,x)}catch{}return!0}finally{xe.p=y,te.T=f,Vv(i,l)}}function Gv(i,l,u){l=Zr(u,l),l=Pp(i.stateNode,l,2),i=rl(i,l,2),i!==null&&(Yr(i,2),qi(i))}function $t(i,l,u){if(i.tag===3)Gv(i,i,u);else for(;l!==null;){if(l.tag===3){Gv(l,i,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ul===null||!ul.has(f))){i=Zr(u,i),u=Yx(2),f=rl(l,u,2),f!==null&&(Qx(u,f,l,i),Yr(f,2),qi(f));break}}l=l.return}}function cm(i,l,u){var f=i.pingCache;if(f===null){f=i.pingCache=new fA;var y=new Set;f.set(l,y)}else y=f.get(l),y===void 0&&(y=new Set,f.set(l,y));y.has(u)||(nm=!0,y.add(u),i=yA.bind(null,i,l,u),l.then(i,i))}function yA(i,l,u){var f=i.pingCache;f!==null&&f.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,ln===i&&(Et&u)===u&&(Cn===4||Cn===3&&(Et&62914560)===Et&&300>Lt()-qh?(Vt&2)===0&&fo(i,0):rm|=u,co===Et&&(co=0)),qi(i)}function Yv(i,l){l===0&&(l=Jc()),i=Gt(i,l),i!==null&&(Yr(i,l),qi(i))}function xA(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),Yv(i,u)}function vA(i,l){var u=0;switch(i.tag){case 31:case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(l),Yv(i,u)}function bA(i,l){return rn(i,l)}var Qh=null,mo=null,hm=!1,Xh=!1,fm=!1,fl=0;function qi(i){i!==mo&&i.next===null&&(mo===null?Qh=mo=i:mo=mo.next=i),Xh=!0,hm||(hm=!0,wA())}function Gu(i,l){if(!fm&&Xh){fm=!0;do for(var u=!1,f=Qh;f!==null;){if(i!==0){var y=f.pendingLanes;if(y===0)var x=0;else{var T=f.suspendedLanes,j=f.pingedLanes;x=(1<<31-Re(42|i)+1)-1,x&=y&~(T&~j),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,Wv(f,x))}else x=Et,x=Il(f,f===ln?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(x&3)===0||na(f,x)||(u=!0,Wv(f,x));f=f.next}while(u);fm=!1}}function kA(){Qv()}function Qv(){Xh=hm=!1;var i=0;fl!==0&&jA()&&(i=fl);for(var l=Lt(),u=null,f=Qh;f!==null;){var y=f.next,x=Xv(f,l);x===0?(f.next=null,u===null?Qh=y:u.next=y,y===null&&(mo=u)):(u=f,(i!==0||(x&3)!==0)&&(Xh=!0)),f=y}Un!==0&&Un!==5||Gu(i),fl!==0&&(fl=0)}function Xv(i,l){for(var u=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var T=31-Re(x),j=1<<T,F=y[T];F===-1?((j&u)===0||(j&f)!==0)&&(y[T]=Vd(j,l)):F<=l&&(i.expiredLanes|=j),x&=~j}if(l=ln,u=Et,u=Il(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===l&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&je(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||na(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(f!==null&&je(f),Ia(u)){case 2:case 8:u=ve;break;case 32:u=Ve;break;case 268435456:u=at;break;default:u=Ve}return f=$v.bind(null,i),u=rn(u,f),i.callbackPriority=l,i.callbackNode=u,l}return f!==null&&f!==null&&je(f),i.callbackPriority=2,i.callbackNode=null,2}function $v(i,l){if(Un!==0&&Un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Yh()&&i.callbackNode!==u)return null;var f=Et;return f=Il(i,i===ln?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(Dv(i,f,l),Xv(i,Lt()),i.callbackNode!=null&&i.callbackNode===u?$v.bind(null,i):null)}function Wv(i,l){if(Yh())return null;Dv(i,l,!0)}function wA(){RA(function(){(Vt&6)!==0?rn(re,kA):Qv()})}function dm(){if(fl===0){var i=Js;i===0&&(i=He,He<<=1,(He&261888)===0&&(He=256)),fl=i}return fl}function Zv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:xi(""+i)}function Jv(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function SA(i,l,u,f,y){if(l==="submit"&&u&&u.stateNode===y){var x=Zv((y[En]||null).action),T=f.submitter;T&&(l=(l=T[En]||null)?Zv(l.formAction):T.getAttribute("formAction"),l!==null&&(x=l,T=null));var j=new Os("action","action",null,f,y);i.push({event:j,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(fl!==0){var F=T?Jv(y,T):new FormData(y);Op(u,{pending:!0,data:F,method:y.method,action:x},null,F)}}else typeof x=="function"&&(j.preventDefault(),F=T?Jv(y,T):new FormData(y),Op(u,{pending:!0,data:F,method:y.method,action:x},x,F))},currentTarget:y}]})}}for(var pm=0;pm<Ue.length;pm++){var mm=Ue[pm],CA=mm.toLowerCase(),AA=mm[0].toUpperCase()+mm.slice(1);_e(CA,"on"+AA)}_e(de,"onAnimationEnd"),_e(le,"onAnimationIteration"),_e(be,"onAnimationStart"),_e("dblclick","onDoubleClick"),_e("focusin","onFocus"),_e("focusout","onBlur"),_e(Ne,"onTransitionRun"),_e(ze,"onTransitionStart"),_e(Ie,"onTransitionCancel"),_e(Me,"onTransitionEnd"),ji("onMouseEnter",["mouseout","mouseover"]),ji("onMouseLeave",["mouseout","mouseover"]),ji("onPointerEnter",["pointerout","pointerover"]),ji("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yu));function eb(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],y=f.event;f=f.listeners;e:{var x=void 0;if(l)for(var T=f.length-1;0<=T;T--){var j=f[T],F=j.instance,ce=j.currentTarget;if(j=j.listener,F!==x&&y.isPropagationStopped())break e;x=j,y.currentTarget=ce;try{x(y)}catch(ke){Ge(ke)}y.currentTarget=null,x=F}else for(T=0;T<f.length;T++){if(j=f[T],F=j.instance,ce=j.currentTarget,j=j.listener,F!==x&&y.isPropagationStopped())break e;x=j,y.currentTarget=ce;try{x(y)}catch(ke){Ge(ke)}y.currentTarget=null,x=F}}}}function Ct(i,l){var u=l[Pa];u===void 0&&(u=l[Pa]=new Set);var f=i+"__bubble";u.has(f)||(tb(l,i,2,!1),u.add(f))}function gm(i,l,u){var f=0;l&&(f|=4),tb(u,i,f,l)}var $h="_reactListening"+Math.random().toString(36).slice(2);function ym(i){if(!i[$h]){i[$h]=!0,ra.forEach(function(u){u!=="selectionchange"&&(TA.has(u)||gm(u,!1,i),gm(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[$h]||(l[$h]=!0,gm("selectionchange",!1,l))}}function tb(i,l,u,f){switch(_b(l)){case 2:var y=e4;break;case 8:y=t4;break;default:y=jm}u=y.bind(null,l,u,i),y=void 0,!cu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(l,u,{capture:!0,passive:y}):i.addEventListener(l,u,!0):y!==void 0?i.addEventListener(l,u,{passive:y}):i.addEventListener(l,u,!1)}function xm(i,l,u,f,y){var x=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var j=f.stateNode.containerInfo;if(j===y)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;j!==null;){if(T=Di(j),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){f=x=T;continue e}j=j.parentNode}}f=f.return}qa(function(){var ce=x,ke=Ds(u),Se=[];e:{var pe=Ke.get(i);if(pe!==void 0){var ge=Os,We=i;switch(i){case"keypress":if(Va(u)===0)break e;case"keydown":case"keyup":ge=Hs;break;case"focusin":We="focus",ge=Ka;break;case"focusout":We="blur",ge=Ka;break;case"beforeblur":case"afterblur":ge=Ka;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=yu;break;case de:case le:case be:ge=ih;break;case Me:ge=xu;break;case"scroll":case"scrollend":ge=Rs;break;case"wheel":ge=Us;break;case"copy":case"cut":case"paste":ge=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=gu;break;case"toggle":case"beforetoggle":ge=sh}var ut=(l&4)!==0,nn=!ut&&(i==="scroll"||i==="scrollend"),ie=ut?pe!==null?pe+"Capture":null:pe;ut=[];for(var $=ce,ue;$!==null;){var we=$;if(ue=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ue===null||ie===null||(we=oa($,ie),we!=null&&ut.push(Qu($,we,ue))),nn)break;$=$.return}0<ut.length&&(pe=new ge(pe,We,null,u,ke),Se.push({event:pe,listeners:ut}))}}if((l&7)===0){e:{if(pe=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",pe&&u!==Xr&&(We=u.relatedTarget||u.fromElement)&&(Di(We)||We[gr]))break e;if((ge||pe)&&(pe=ke.window===ke?ke:(pe=ke.ownerDocument)?pe.defaultView||pe.parentWindow:window,ge?(We=u.relatedTarget||u.toElement,ge=ce,We=We?Di(We):null,We!==null&&(nn=s(We),ut=We.tag,We!==nn||ut!==5&&ut!==27&&ut!==6)&&(We=null)):(ge=null,We=ce),ge!==We)){if(ut=Ls,we="onMouseLeave",ie="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(ut=gu,we="onPointerLeave",ie="onPointerEnter",$="pointer"),nn=ge==null?pe:Rr(ge),ue=We==null?pe:Rr(We),pe=new ut(we,$+"leave",ge,u,ke),pe.target=nn,pe.relatedTarget=ue,we=null,Di(ke)===ce&&(ut=new ut(ie,$+"enter",We,u,ke),ut.target=ue,ut.relatedTarget=nn,we=ut),nn=we,ge&&We)t:{for(ut=EA,ie=ge,$=We,ue=0,we=ie;we;we=ut(we))ue++;we=0;for(var it=$;it;it=ut(it))we++;for(;0<ue-we;)ie=ut(ie),ue--;for(;0<we-ue;)$=ut($),we--;for(;ue--;){if(ie===$||$!==null&&ie===$.alternate){ut=ie;break t}ie=ut(ie),$=ut($)}ut=null}else ut=null;ge!==null&&nb(Se,pe,ge,ut,!1),We!==null&&nn!==null&&nb(Se,nn,We,ut,!0)}}e:{if(pe=ce?Rr(ce):window,ge=pe.nodeName&&pe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&pe.type==="file")var Ht=es;else if(Ks(pe))if(Wr)Ht=Xa;else{Ht=pa;var Je=dh}else ge=pe.nodeName,!ge||ge.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ce&&uu(ce.elementType)&&(Ht=es):Ht=Su;if(Ht&&(Ht=Ht(i,ce))){wu(Se,Ht,u,ke);break e}Je&&Je(i,pe,ce),i==="focusout"&&ce&&pe.type==="number"&&ce.memoizedProps.value!=null&&Gl(pe,"number",pe.value)}switch(Je=ce?Rr(ce):window,i){case"focusin":(Ks(Je)||Je.contentEditable==="true")&&(z=Je,K=ce,ae=null);break;case"focusout":ae=K=z=null;break;case"mousedown":G=!0;break;case"contextmenu":case"mouseup":case"dragend":G=!1,V(Se,u,ke);break;case"selectionchange":if(B)break;case"keydown":case"keyup":V(Se,u,ke)}var mt;if(Zl)e:{switch(i){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else fa?ku(i,u)&&(Nt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Nt="onCompositionStart");Nt&&(Fs&&u.locale!=="ko"&&(fa||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&fa&&(mt=Fa()):($r=ke,js="value"in $r?$r.value:$r.textContent,fa=!0)),Je=Wh(ce,Nt),0<Je.length&&(Nt=new Ps(Nt,i,null,u,ke),Se.push({event:Nt,listeners:Je}),mt?Nt.data=mt:(mt=uh(u),mt!==null&&(Nt.data=mt)))),(mt=$d?ch(i,u):Wd(i,u))&&(Nt=Wh(ce,"onBeforeInput"),0<Nt.length&&(Je=new Ps("onBeforeInput","beforeinput",null,u,ke),Se.push({event:Je,listeners:Nt}),Je.data=mt)),SA(Se,i,ce,u,ke)}eb(Se,l)})}function Qu(i,l,u){return{instance:i,listener:l,currentTarget:u}}function Wh(i,l){for(var u=l+"Capture",f=[];i!==null;){var y=i,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=oa(i,u),y!=null&&f.unshift(Qu(i,y,x)),y=oa(i,l),y!=null&&f.push(Qu(i,y,x))),i.tag===3)return f;i=i.return}return[]}function EA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nb(i,l,u,f,y){for(var x=l._reactName,T=[];u!==null&&u!==f;){var j=u,F=j.alternate,ce=j.stateNode;if(j=j.tag,F!==null&&F===f)break;j!==5&&j!==26&&j!==27||ce===null||(F=ce,y?(ce=oa(u,x),ce!=null&&T.unshift(Qu(u,ce,F))):y||(ce=oa(u,x),ce!=null&&T.push(Qu(u,ce,F)))),u=u.return}T.length!==0&&i.push({event:l,listeners:T})}var NA=/\r\n?/g,MA=/\u0000|\uFFFD/g;function rb(i){return(typeof i=="string"?i:""+i).replace(NA,`
`).replace(MA,"")}function ib(i,l){return l=rb(l),rb(i)===l}function tn(i,l,u,f,y,x){switch(u){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||aa(i,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&aa(i,""+f);break;case"className":Vl(i,"class",f);break;case"tabIndex":Vl(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Vl(i,u,f);break;case"style":ou(i,f,x);break;case"data":if(l!=="object"){Vl(i,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=xi(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(l!=="input"&&tn(i,l,"name",y.name,y,null),tn(i,l,"formEncType",y.formEncType,y,null),tn(i,l,"formMethod",y.formMethod,y,null),tn(i,l,"formTarget",y.formTarget,y,null)):(tn(i,l,"encType",y.encType,y,null),tn(i,l,"method",y.method,y,null),tn(i,l,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=xi(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=Sr);break;case"onScroll":f!=null&&Ct("scroll",i);break;case"onScrollEnd":f!=null&&Ct("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=xi(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":Ct("beforetoggle",i),Ct("toggle",i),yt(i,"popover",f);break;case"xlinkActuate":Qr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Qr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Qr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Qr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Qr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Qr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Qr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Qr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Qr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":yt(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Yd.get(u)||u,yt(i,u,f))}}function vm(i,l,u,f,y,x){switch(u){case"style":ou(i,f,x);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof f=="string"?aa(i,f):(typeof f=="number"||typeof f=="bigint")&&aa(i,""+f);break;case"onScroll":f!=null&&Ct("scroll",i);break;case"onScrollEnd":f!=null&&Ct("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ul.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),l=u.slice(2,y?u.length-7:void 0),x=i[En]||null,x=x!=null?x[u]:null,typeof x=="function"&&i.removeEventListener(l,x,y),typeof f=="function")){typeof x!="function"&&x!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,f,y);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):yt(i,u,f)}}}function tr(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",i),Ct("load",i);var f=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var T=u[x];if(T!=null)switch(x){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:tn(i,l,x,T,u,null)}}y&&tn(i,l,"srcSet",u.srcSet,u,null),f&&tn(i,l,"src",u.src,u,null);return;case"input":Ct("invalid",i);var j=x=T=y=null,F=null,ce=null;for(f in u)if(u.hasOwnProperty(f)){var ke=u[f];if(ke!=null)switch(f){case"name":y=ke;break;case"type":T=ke;break;case"checked":F=ke;break;case"defaultChecked":ce=ke;break;case"value":x=ke;break;case"defaultValue":j=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,l));break;default:tn(i,l,f,ke,u,null)}}_s(i,x,j,F,ce,T,y,!1);return;case"select":Ct("invalid",i),f=T=x=null;for(y in u)if(u.hasOwnProperty(y)&&(j=u[y],j!=null))switch(y){case"value":x=j;break;case"defaultValue":T=j;break;case"multiple":f=j;default:tn(i,l,y,j,u,null)}l=x,u=T,i.multiple=!!f,l!=null?yi(i,!!f,l,!1):u!=null&&yi(i,!!f,u,!0);return;case"textarea":Ct("invalid",i),x=y=f=null;for(T in u)if(u.hasOwnProperty(T)&&(j=u[T],j!=null))switch(T){case"value":f=j;break;case"defaultValue":y=j;break;case"children":x=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:tn(i,l,T,j,u,null)}Yl(i,f,y,x);return;case"option":for(F in u)u.hasOwnProperty(F)&&(f=u[F],f!=null)&&(F==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":tn(i,l,F,f,u,null));return;case"dialog":Ct("beforetoggle",i),Ct("toggle",i),Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":Ct("load",i);break;case"video":case"audio":for(f=0;f<Yu.length;f++)Ct(Yu[f],i);break;case"image":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"embed":case"source":case"link":Ct("error",i),Ct("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in u)if(u.hasOwnProperty(ce)&&(f=u[ce],f!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:tn(i,l,ce,f,u,null)}return;default:if(uu(l)){for(ke in u)u.hasOwnProperty(ke)&&(f=u[ke],f!==void 0&&vm(i,l,ke,f,u,void 0));return}}for(j in u)u.hasOwnProperty(j)&&(f=u[j],f!=null&&tn(i,l,j,f,u,null))}function _A(i,l,u,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,T=null,j=null,F=null,ce=null,ke=null;for(ge in u){var Se=u[ge];if(u.hasOwnProperty(ge)&&Se!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":F=Se;default:f.hasOwnProperty(ge)||tn(i,l,ge,null,f,Se)}}for(var pe in f){var ge=f[pe];if(Se=u[pe],f.hasOwnProperty(pe)&&(ge!=null||Se!=null))switch(pe){case"type":x=ge;break;case"name":y=ge;break;case"checked":ce=ge;break;case"defaultChecked":ke=ge;break;case"value":T=ge;break;case"defaultValue":j=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,l));break;default:ge!==Se&&tn(i,l,pe,ge,f,Se)}}Oi(i,T,j,F,ce,ke,x,y);return;case"select":ge=T=j=pe=null;for(x in u)if(F=u[x],u.hasOwnProperty(x)&&F!=null)switch(x){case"value":break;case"multiple":ge=F;default:f.hasOwnProperty(x)||tn(i,l,x,null,f,F)}for(y in f)if(x=f[y],F=u[y],f.hasOwnProperty(y)&&(x!=null||F!=null))switch(y){case"value":pe=x;break;case"defaultValue":j=x;break;case"multiple":T=x;default:x!==F&&tn(i,l,y,x,f,F)}l=j,u=T,f=ge,pe!=null?yi(i,!!u,pe,!1):!!f!=!!u&&(l!=null?yi(i,!!u,l,!0):yi(i,!!u,u?[]:"",!1));return;case"textarea":ge=pe=null;for(j in u)if(y=u[j],u.hasOwnProperty(j)&&y!=null&&!f.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:tn(i,l,j,null,f,y)}for(T in f)if(y=f[T],x=u[T],f.hasOwnProperty(T)&&(y!=null||x!=null))switch(T){case"value":pe=y;break;case"defaultValue":ge=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&tn(i,l,T,y,f,x)}su(i,pe,ge);return;case"option":for(var We in u)pe=u[We],u.hasOwnProperty(We)&&pe!=null&&!f.hasOwnProperty(We)&&(We==="selected"?i.selected=!1:tn(i,l,We,null,f,pe));for(F in f)pe=f[F],ge=u[F],f.hasOwnProperty(F)&&pe!==ge&&(pe!=null||ge!=null)&&(F==="selected"?i.selected=pe&&typeof pe!="function"&&typeof pe!="symbol":tn(i,l,F,pe,f,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in u)pe=u[ut],u.hasOwnProperty(ut)&&pe!=null&&!f.hasOwnProperty(ut)&&tn(i,l,ut,null,f,pe);for(ce in f)if(pe=f[ce],ge=u[ce],f.hasOwnProperty(ce)&&pe!==ge&&(pe!=null||ge!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:tn(i,l,ce,pe,f,ge)}return;default:if(uu(l)){for(var nn in u)pe=u[nn],u.hasOwnProperty(nn)&&pe!==void 0&&!f.hasOwnProperty(nn)&&vm(i,l,nn,void 0,f,pe);for(ke in f)pe=f[ke],ge=u[ke],!f.hasOwnProperty(ke)||pe===ge||pe===void 0&&ge===void 0||vm(i,l,ke,pe,f,ge);return}}for(var ie in u)pe=u[ie],u.hasOwnProperty(ie)&&pe!=null&&!f.hasOwnProperty(ie)&&tn(i,l,ie,null,f,pe);for(Se in f)pe=f[Se],ge=u[Se],!f.hasOwnProperty(Se)||pe===ge||pe==null&&ge==null||tn(i,l,Se,pe,f,ge)}function ab(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var y=u[f],x=y.transferSize,T=y.initiatorType,j=y.duration;if(x&&j&&ab(T)){for(T=0,j=y.responseEnd,f+=1;f<u.length;f++){var F=u[f],ce=F.startTime;if(ce>j)break;var ke=F.transferSize,Se=F.initiatorType;ke&&ab(Se)&&(F=F.responseEnd,T+=ke*(F<j?1:(j-ce)/(F-ce)))}if(--f,l+=8*(x+T)/(y.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var bm=null,km=null;function Zh(i){return i.nodeType===9?i:i.ownerDocument}function lb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sb(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function wm(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Sm=null;function jA(){var i=window.event;return i&&i.type==="popstate"?i===Sm?!1:(Sm=i,!0):(Sm=null,!1)}var ob=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,RA=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(i){return ub.resolve(null).then(i).catch(BA)}:ob;function BA(i){setTimeout(function(){throw i})}function dl(i){return i==="head"}function cb(i,l){var u=l,f=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(f===0){i.removeChild(y),vo(l);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Xu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Xu(u);for(var x=u.firstChild;x;){var T=x.nextSibling,j=x.nodeName;x[Or]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=T}}else u==="body"&&Xu(i.ownerDocument.body);u=y}while(u);vo(l)}function hb(i,l){var u=i;i=0;do{var f=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=f}while(u)}function Cm(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Cm(u),Ns(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function LA(i,l,u,f){for(;i.nodeType===1;){var y=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Or])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function zA(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=ri(i.nextSibling),i===null))return null;return i}function fb(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ri(i.nextSibling),i===null))return null;return i}function Am(i){return i.data==="$?"||i.data==="$~"}function Tm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function IA(i,l){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||u.readyState!=="loading")l();else{var f=function(){l(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function ri(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Em=null;function db(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(l===0)return ri(i.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}i=i.nextSibling}return null}function pb(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return i;l--}else u!=="/$"&&u!=="/&"||l++}i=i.previousSibling}return null}function mb(i,l,u){switch(l=Zh(u),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Xu(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Ns(i)}var ii=new Map,gb=new Set;function Jh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ma=xe.d;xe.d={f:PA,r:HA,D:qA,C:UA,L:FA,m:VA,X:GA,S:KA,M:YA};function PA(){var i=Ma.f(),l=Vh();return i||l}function HA(i){var l=Zt(i);l!==null&&l.tag===5&&l.type==="form"?Ox(l):Ma.r(i)}var go=typeof document>"u"?null:document;function yb(i,l,u){var f=go;if(f&&typeof l=="string"&&l){var y=Yn(l);y='link[rel="'+i+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),gb.has(y)||(gb.add(y),i={rel:i,crossOrigin:u,href:l},f.querySelector(y)===null&&(l=f.createElement("link"),tr(l,"link",i),Nn(l),f.head.appendChild(l)))}}function qA(i){Ma.D(i),yb("dns-prefetch",i,null)}function UA(i,l){Ma.C(i,l),yb("preconnect",i,l)}function FA(i,l,u){Ma.L(i,l,u);var f=go;if(f&&i&&l){var y='link[rel="preload"][as="'+Yn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Yn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Yn(u.imageSizes)+'"]')):y+='[href="'+Yn(i)+'"]';var x=y;switch(l){case"style":x=yo(i);break;case"script":x=xo(i)}ii.has(x)||(i=g({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),ii.set(x,i),f.querySelector(y)!==null||l==="style"&&f.querySelector($u(x))||l==="script"&&f.querySelector(Wu(x))||(l=f.createElement("link"),tr(l,"link",i),Nn(l),f.head.appendChild(l)))}}function VA(i,l){Ma.m(i,l);var u=go;if(u&&i){var f=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Yn(f)+'"][href="'+Yn(i)+'"]',x=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=xo(i)}if(!ii.has(x)&&(i=g({rel:"modulepreload",href:i},l),ii.set(x,i),u.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Wu(x)))return}f=u.createElement("link"),tr(f,"link",i),Nn(f),u.head.appendChild(f)}}}function KA(i,l,u){Ma.S(i,l,u);var f=go;if(f&&i){var y=or(f).hoistableStyles,x=yo(i);l=l||"default";var T=y.get(x);if(!T){var j={loading:0,preload:null};if(T=f.querySelector($u(x)))j.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":l},u),(u=ii.get(x))&&Nm(i,u);var F=T=f.createElement("link");Nn(F),tr(F,"link",i),F._p=new Promise(function(ce,ke){F.onload=ce,F.onerror=ke}),F.addEventListener("load",function(){j.loading|=1}),F.addEventListener("error",function(){j.loading|=2}),j.loading|=4,ef(T,l,f)}T={type:"stylesheet",instance:T,count:1,state:j},y.set(x,T)}}}function GA(i,l){Ma.X(i,l);var u=go;if(u&&i){var f=or(u).hoistableScripts,y=xo(i),x=f.get(y);x||(x=u.querySelector(Wu(y)),x||(i=g({src:i,async:!0},l),(l=ii.get(y))&&Mm(i,l),x=u.createElement("script"),Nn(x),tr(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(y,x))}}function YA(i,l){Ma.M(i,l);var u=go;if(u&&i){var f=or(u).hoistableScripts,y=xo(i),x=f.get(y);x||(x=u.querySelector(Wu(y)),x||(i=g({src:i,async:!0,type:"module"},l),(l=ii.get(y))&&Mm(i,l),x=u.createElement("script"),Nn(x),tr(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(y,x))}}function xb(i,l,u,f){var y=(y=et.current)?Jh(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=yo(u.href),u=or(y).hoistableStyles,f=u.get(l),f||(f={type:"style",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=yo(u.href);var x=or(y).hoistableStyles,T=x.get(i);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,T),(x=y.querySelector($u(i)))&&!x._p&&(T.instance=x,T.state.loading=5),ii.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ii.set(i,u),x||QA(y,i,u,T.state))),l&&f===null)throw Error(r(528,""));return T}if(l&&f!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=xo(u),u=or(y).hoistableScripts,f=u.get(l),f||(f={type:"script",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function yo(i){return'href="'+Yn(i)+'"'}function $u(i){return'link[rel="stylesheet"]['+i+"]"}function vb(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function QA(i,l,u,f){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=i.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),tr(l,"link",u),Nn(l),i.head.appendChild(l))}function xo(i){return'[src="'+Yn(i)+'"]'}function Wu(i){return"script[async]"+i}function bb(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var f=i.querySelector('style[data-href~="'+Yn(u.href)+'"]');if(f)return l.instance=f,Nn(f),f;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Nn(f),tr(f,"style",y),ef(f,u.precedence,i),l.instance=f;case"stylesheet":y=yo(u.href);var x=i.querySelector($u(y));if(x)return l.state.loading|=4,l.instance=x,Nn(x),x;f=vb(u),(y=ii.get(y))&&Nm(f,y),x=(i.ownerDocument||i).createElement("link"),Nn(x);var T=x;return T._p=new Promise(function(j,F){T.onload=j,T.onerror=F}),tr(x,"link",f),l.state.loading|=4,ef(x,u.precedence,i),l.instance=x;case"script":return x=xo(u.src),(y=i.querySelector(Wu(x)))?(l.instance=y,Nn(y),y):(f=u,(y=ii.get(x))&&(f=g({},u),Mm(f,y)),i=i.ownerDocument||i,y=i.createElement("script"),Nn(y),tr(y,"link",f),i.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,ef(f,u.precedence,i));return l.instance}function ef(i,l,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,x=y,T=0;T<f.length;T++){var j=f[T];if(j.dataset.precedence===l)x=j;else if(x!==y)break}x?x.parentNode.insertBefore(i,x.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function Nm(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Mm(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var tf=null;function kb(i,l,u){if(tf===null){var f=new Map,y=tf=new Map;y.set(u,f)}else y=tf,f=y.get(u),f||(f=new Map,y.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),y=0;y<u.length;y++){var x=u[y];if(!(x[Or]||x[cn]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(l)||"";T=i+T;var j=f.get(T);j?j.push(x):f.set(T,[x])}}return f}function wb(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function XA(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Sb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $A(i,l,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=yo(f.href),x=l.querySelector($u(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=nf.bind(i),l.then(i,i)),u.state.loading|=4,u.instance=x,Nn(x);return}x=l.ownerDocument||l,f=vb(f),(y=ii.get(y))&&Nm(f,y),x=x.createElement("link"),Nn(x);var T=x;T._p=new Promise(function(j,F){T.onload=j,T.onerror=F}),tr(x,"link",f),u.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=nf.bind(i),l.addEventListener("load",u),l.addEventListener("error",u))}}var _m=0;function WA(i,l){return i.stylesheets&&i.count===0&&af(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var f=setTimeout(function(){if(i.stylesheets&&af(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+l);0<i.imgBytes&&_m===0&&(_m=62500*DA());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&af(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>_m?50:800)+l);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function nf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rf=null;function af(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rf=new Map,l.forEach(ZA,i),rf=null,nf.call(i))}function ZA(i,l){if(!(l.state.loading&4)){var u=rf.get(i);if(u)var f=u.get(null);else{u=new Map,rf.set(i,u);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var T=y[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),f=T)}f&&u.set(null,f)}y=l.instance,T=y.getAttribute("data-precedence"),x=u.get(T)||f,x===f&&u.set(null,y),u.set(T,y),this.count++,f=nf.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),x?x.parentNode.insertBefore(y,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),l.state.loading|=4}}var Zu={$$typeof:R,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function JA(i,l,u,f,y,x,T,j,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Cb(i,l,u,f,y,x,T,j,F,ce,ke,Se){return i=new JA(i,l,u,T,F,ce,ke,Se,j),l=1,x===!0&&(l|=24),x=Lr(3,null,null,l),i.current=x,x.stateNode=i,l=up(),l.refCount++,i.pooledCache=l,l.refCount++,x.memoizedState={element:f,isDehydrated:u,cache:l},dp(x),i}function Ab(i){return i?(i=Qs,i):Qs}function Tb(i,l,u,f,y,x){y=Ab(y),f.context===null?f.context=y:f.pendingContext=y,f=nl(l),f.payload={element:u},x=x===void 0?null:x,x!==null&&(f.callback=x),u=rl(i,f,l),u!==null&&(Nr(u,i,l),_u(u,i,l))}function Eb(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function Dm(i,l){Eb(i,l),(i=i.alternate)&&Eb(i,l)}function Nb(i){if(i.tag===13||i.tag===31){var l=Gt(i,67108864);l!==null&&Nr(l,i,67108864),Dm(i,67108864)}}function Mb(i){if(i.tag===13||i.tag===31){var l=qr();l=ru(l);var u=Gt(i,l);u!==null&&Nr(u,i,l),Dm(i,l)}}var lf=!0;function e4(i,l,u,f){var y=te.T;te.T=null;var x=xe.p;try{xe.p=2,jm(i,l,u,f)}finally{xe.p=x,te.T=y}}function t4(i,l,u,f){var y=te.T;te.T=null;var x=xe.p;try{xe.p=8,jm(i,l,u,f)}finally{xe.p=x,te.T=y}}function jm(i,l,u,f){if(lf){var y=Om(f);if(y===null)xm(i,l,f,sf,u),Db(i,f);else if(r4(y,i,l,u,f))f.stopPropagation();else if(Db(i,f),l&4&&-1<n4.indexOf(i)){for(;y!==null;){var x=Zt(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=mi(x.pendingLanes);if(T!==0){var j=x;for(j.pendingLanes|=2,j.entangledLanes|=2;T;){var F=1<<31-Re(T);j.entanglements[1]|=F,T&=~F}qi(x),(Vt&6)===0&&(Uh=Lt()+500,Gu(0))}}break;case 31:case 13:j=Gt(x,2),j!==null&&Nr(j,x,2),Vh(),Dm(x,2)}if(x=Om(f),x===null&&xm(i,l,f,sf,u),x===y)break;y=x}y!==null&&f.stopPropagation()}else xm(i,l,f,null,u)}}function Om(i){return i=Ds(i),Rm(i)}var sf=null;function Rm(i){if(sf=null,i=Di(i),i!==null){var l=s(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=o(l),i!==null)return i;i=null}else if(u===31){if(i=c(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return sf=i,null}function _b(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(An()){case re:return 2;case ve:return 8;case Ve:case Ze:return 32;case at:return 268435456;default:return 32}default:return 32}}var Bm=!1,pl=null,ml=null,gl=null,Ju=new Map,ec=new Map,yl=[],n4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Db(i,l){switch(i){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Ju.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(l.pointerId)}}function tc(i,l,u,f,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:x,targetContainers:[y]},l!==null&&(l=Zt(l),l!==null&&Nb(l)),i):(i.eventSystemFlags|=f,l=i.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),i)}function r4(i,l,u,f,y){switch(l){case"focusin":return pl=tc(pl,i,l,u,f,y),!0;case"dragenter":return ml=tc(ml,i,l,u,f,y),!0;case"mouseover":return gl=tc(gl,i,l,u,f,y),!0;case"pointerover":var x=y.pointerId;return Ju.set(x,tc(Ju.get(x)||null,i,l,u,f,y)),!0;case"gotpointercapture":return x=y.pointerId,ec.set(x,tc(ec.get(x)||null,i,l,u,f,y)),!0}return!1}function jb(i){var l=Di(i.target);if(l!==null){var u=s(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){i.blockedOn=l,ql(i.priority,function(){Mb(u)});return}}else if(l===31){if(l=c(u),l!==null){i.blockedOn=l,ql(i.priority,function(){Mb(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function of(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=Om(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Xr=f,u.target.dispatchEvent(f),Xr=null}else return l=Zt(u),l!==null&&Nb(l),i.blockedOn=u,!1;l.shift()}return!0}function Ob(i,l,u){of(i)&&u.delete(l)}function i4(){Bm=!1,pl!==null&&of(pl)&&(pl=null),ml!==null&&of(ml)&&(ml=null),gl!==null&&of(gl)&&(gl=null),Ju.forEach(Ob),ec.forEach(Ob)}function uf(i,l){i.blockedOn===l&&(i.blockedOn=null,Bm||(Bm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,i4)))}var cf=null;function Rb(i){cf!==i&&(cf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cf===i&&(cf=null);for(var l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],y=i[l+2];if(typeof f!="function"){if(Rm(f||u)===null)continue;break}var x=Zt(u);x!==null&&(i.splice(l,3),l-=3,Op(x,{pending:!0,data:y,method:u.method,action:f},f,y))}}))}function vo(i){function l(F){return uf(F,i)}pl!==null&&uf(pl,i),ml!==null&&uf(ml,i),gl!==null&&uf(gl,i),Ju.forEach(l),ec.forEach(l);for(var u=0;u<yl.length;u++){var f=yl[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<yl.length&&(u=yl[0],u.blockedOn===null);)jb(u),u.blockedOn===null&&yl.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var y=u[f],x=u[f+1],T=y[En]||null;if(typeof x=="function")T||Rb(u);else if(T){var j=null;if(x&&x.hasAttribute("formAction")){if(y=x,T=x[En]||null)j=T.formAction;else if(Rm(y)!==null)continue}else j=T.action;typeof j=="function"?u[f+1]=j:(u.splice(f,3),f-=3),Rb(u)}}}function Bb(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function Lm(i){this._internalRoot=i}hf.prototype.render=Lm.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,f=qr();Tb(u,f,i,l,null,null)},hf.prototype.unmount=Lm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Tb(i.current,2,null,i,null,null),Vh(),l[gr]=null}};function hf(i){this._internalRoot=i}hf.prototype.unstable_scheduleHydration=function(i){if(i){var l=Hl();i={blockedOn:null,target:i,priority:l};for(var u=0;u<yl.length&&l!==0&&l<yl[u].priority;u++);yl.splice(u,0,i),u===0&&jb(i)}};var Lb=e.version;if(Lb!=="19.2.4")throw Error(r(527,Lb,"19.2.4"));xe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(l),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var a4={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{It=ff.inject(a4),Pt=ff}catch{}}return rc.createRoot=function(i,l){if(!a(i))throw Error(r(299));var u=!1,f="",y=Fx,x=Vx,T=Kx;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=Cb(i,1,!1,null,null,u,f,null,y,x,T,Bb),i[gr]=l.current,ym(i),new Lm(l)},rc.hydrateRoot=function(i,l,u){if(!a(i))throw Error(r(299));var f=!1,y="",x=Fx,T=Vx,j=Kx,F=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(j=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),l=Cb(i,1,!0,l,u??null,f,y,F,x,T,j,Bb),l.context=Ab(null),u=l.current,f=qr(),f=ru(f),y=nl(f),y.callback=null,rl(u,y,f),u=f,l.current.lanes=u,Yr(l,u),qi(l),i[gr]=l.current,ym(i),new hf(l)},rc.version="19.2.4",rc}var Ub;function d4(){if(Ub)return Im.exports;Ub=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Im.exports=f4(),Im.exports}var p4=d4();q.createContext(null);var zf={exports:{}},m4=zf.exports,Fb;function g4(){return Fb||(Fb=1,(function(n,e){((t,r)=>{n.exports=r()})(m4,function(){var t=function(m,v){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,C){S.__proto__=C}:function(S,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(S[E]=C[E])}))(m,v)},r=function(){return(r=Object.assign||function(m){for(var v,S=1,C=arguments.length;S<C;S++)for(var E in v=arguments[S])Object.prototype.hasOwnProperty.call(v,E)&&(m[E]=v[E]);return m}).apply(this,arguments)};function a(m,v,S){for(var C,E=0,M=v.length;E<M;E++)!C&&E in v||((C=C||Array.prototype.slice.call(v,0,E))[E]=v[E]);return m.concat(C||Array.prototype.slice.call(v))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:s4,o=Object.keys,c=Array.isArray;function h(m,v){return typeof v=="object"&&o(v).forEach(function(S){m[S]=v[S]}),m}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var d=Object.getPrototypeOf,p={}.hasOwnProperty;function g(m,v){return p.call(m,v)}function b(m,v){typeof v=="function"&&(v=v(d(m))),(typeof Reflect>"u"?o:Reflect.ownKeys)(v).forEach(function(S){A(m,S,v[S])})}var w=Object.defineProperty;function A(m,v,S,C){w(m,v,h(S&&g(S,"get")&&typeof S.get=="function"?{get:S.get,set:S.set,configurable:!0}:{value:S,configurable:!0,writable:!0},C))}function N(m){return{from:function(v){return m.prototype=Object.create(v.prototype),A(m.prototype,"constructor",m),{extend:b.bind(null,m.prototype)}}}}var _=Object.getOwnPropertyDescriptor,O=[].slice;function H(m,v,S){return O.call(m,v,S)}function R(m,v){return v(m)}function ee(m){if(!m)throw new Error("Assertion Failed")}function Z(m){s.setImmediate?setImmediate(m):setTimeout(m,0)}function I(m,v){if(typeof v=="string"&&g(m,v))return m[v];if(!v)return m;if(typeof v!="string"){for(var S=[],C=0,E=v.length;C<E;++C){var M=I(m,v[C]);S.push(M)}return S}var B,z=v.indexOf(".");return z===-1||(B=m[v.substr(0,z)])==null?void 0:I(B,v.substr(z+1))}function U(m,v,S){if(m&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof v!="string"&&"length"in v){ee(typeof S!="string"&&"length"in S);for(var C=0,E=v.length;C<E;++C)U(m,v[C],S[C])}else{var M,B,z=v.indexOf(".");z!==-1?(M=v.substr(0,z),(z=v.substr(z+1))===""?S===void 0?c(m)&&!isNaN(parseInt(M))?m.splice(M,1):delete m[M]:m[M]=S:U(B=(B=m[M])&&g(m,M)?B:m[M]={},z,S)):S===void 0?c(m)&&!isNaN(parseInt(v))?m.splice(v,1):delete m[v]:m[v]=S}}function ye(m){var v,S={};for(v in m)g(m,v)&&(S[v]=m[v]);return S}var fe=[].concat;function L(m){return fe.apply([],m)}var Ee="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(v){return v+m+"Array"})}))).filter(function(m){return s[m]}),J=new Set(Ee.map(function(m){return s[m]})),ne=null;function me(m){return ne=new WeakMap,m=(function v(S){if(!S||typeof S!="object")return S;var C=ne.get(S);if(C)return C;if(c(S)){C=[],ne.set(S,C);for(var E=0,M=S.length;E<M;++E)C.push(v(S[E]))}else if(J.has(S.constructor))C=S;else{var B,z=d(S);for(B in C=z===Object.prototype?{}:Object.create(z),ne.set(S,C),S)g(S,B)&&(C[B]=v(S[B]))}return C})(m),ne=null,m}var he={}.toString;function se(m){return he.call(m).slice(8,-1)}var te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xe=typeof te=="symbol"?function(m){var v;return m!=null&&(v=m[te])&&v.apply(m)}:function(){return null};function Ce(m,v){v=m.indexOf(v),0<=v&&m.splice(v,1)}var Ae={};function D(m){var v,S,C,E;if(arguments.length===1){if(c(m))return m.slice();if(this===Ae&&typeof m=="string")return[m];if(E=xe(m))for(S=[];!(C=E.next()).done;)S.push(C.value);else{if(m==null)return[m];if(typeof(v=m.length)!="number")return[m];for(S=new Array(v);v--;)S[v]=m[v]}}else for(v=arguments.length,S=new Array(v);v--;)S[v]=arguments[v];return S}var Te=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ee=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],re=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ee),P={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qe(m,v){this.name=m,this.message=v}function ct(m,v){return m+". Errors: "+Object.keys(v).map(function(S){return v[S].toString()}).filter(function(S,C,E){return E.indexOf(S)===C}).join(`
`)}function et(m,v,S,C){this.failures=v,this.failedKeys=C,this.successCount=S,this.message=ct(m,v)}function jt(m,v){this.name="BulkError",this.failures=Object.keys(v).map(function(S){return v[S]}),this.failuresByPos=v,this.message=ct(m,this.failures)}N(Qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(et).from(Qe),N(jt).from(Qe);var ft=re.reduce(function(m,v){return m[v]=v+"Error",m},{}),Qt=Qe,Fe=re.reduce(function(m,v){var S=v+"Error";function C(E,M){this.name=S,E?typeof E=="string"?(this.message="".concat(E).concat(M?`
 `+M:""),this.inner=M||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=P[v]||S,this.inner=null)}return N(C).from(Qt),m[v]=C,m},{}),Ye=(Fe.Syntax=SyntaxError,Fe.Type=TypeError,Fe.Range=RangeError,Ee.reduce(function(m,v){return m[v+"Error"]=Fe[v],m},{}));Ee=re.reduce(function(m,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(m[v+"Error"]=Fe[v]),m},{});function Pe(){}function De(m){return m}function lt(m,v){return m==null||m===De?v:function(S){return v(m(S))}}function tt(m,v){return function(){m.apply(this,arguments),v.apply(this,arguments)}}function Tt(m,v){return m===Pe?v:function(){var S=m.apply(this,arguments),C=(S!==void 0&&(arguments[0]=S),this.onsuccess),E=this.onerror,M=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return C&&(this.onsuccess=this.onsuccess?tt(C,this.onsuccess):C),E&&(this.onerror=this.onerror?tt(E,this.onerror):E),M!==void 0?M:S}}function kt(m,v){return m===Pe?v:function(){m.apply(this,arguments);var S=this.onsuccess,C=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?tt(S,this.onsuccess):S),C&&(this.onerror=this.onerror?tt(C,this.onerror):C)}}function vt(m,v){return m===Pe?v:function(E){var C=m.apply(this,arguments),E=(h(E,C),this.onsuccess),M=this.onerror,B=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return E&&(this.onsuccess=this.onsuccess?tt(E,this.onsuccess):E),M&&(this.onerror=this.onerror?tt(M,this.onerror):M),C===void 0?B===void 0?void 0:B:h(C,B)}}function kn(m,v){return m===Pe?v:function(){return v.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function rn(m,v){return m===Pe?v:function(){var S=m.apply(this,arguments);if(S&&typeof S.then=="function"){for(var C=this,E=arguments.length,M=new Array(E);E--;)M[E]=arguments[E];return S.then(function(){return v.apply(C,M)})}return v.apply(this,arguments)}}Ee.ModifyError=et,Ee.DexieError=Qe,Ee.BulkError=jt;var je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function bt(m){je=m}var Ot={},Lt=100,An=typeof Promise>"u"?[]:(re=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[An=crypto.subtle.digest("SHA-512",new Uint8Array([0])),d(An),re]:[re,d(re),re]),re=An[0],da=An[1],da=da&&da.then,ve=re&&re.constructor,Ve=!!An[2],Ze=function(m,v){Gn.push([m,v]),un&&(queueMicrotask(Jc),un=!1)},at=!0,un=!0,zt=[],It=[],Pt=De,wt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pe,pgp:!1,env:{},finalize:Pe},Re=wt,Gn=[],pn=0,Es=[];function He(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Re;if(typeof m!="function"){if(m!==Ot)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&mi(this,this._value)}else this._state=null,this._value=null,++v.ref,(function S(C,E){try{E(function(M){if(C._state===null){if(M===C)throw new TypeError("A promise cannot be resolved with itself.");var B=C._lib&&Ni();M&&typeof M.then=="function"?S(C,function(z,K){M instanceof He?M._then(z,K):M.then(z,K)}):(C._state=!0,C._value=M,Il(C)),B&&Yr()}},mi.bind(null,C))}catch(M){mi(C,M)}})(this,m)}var za={get:function(){var m=Re,v=ql;function S(C,E){var M=this,B=!m.global&&(m!==Re||v!==ql),z=B&&!gr(),K=new He(function(ae,G){na(M,new zl(Ns(C,m,B,z),Ns(E,m,B,z),ae,G,m))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return S.prototype=Ot,S},set:function(m){A(this,"then",m&&m.prototype===Ot?za:{get:function(){return m},set:za.set})}};function zl(m,v,S,C,E){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof v=="function"?v:null,this.resolve=S,this.reject=C,this.psd=E}function mi(m,v){var S,C;It.push(v),m._state===null&&(S=m._lib&&Ni(),v=Pt(v),m._state=!1,m._value=v,C=m,zt.some(function(E){return E._value===C._value})||zt.push(C),Il(m),S)&&Yr()}function Il(m){var v=m._listeners;m._listeners=[];for(var S=0,C=v.length;S<C;++S)na(m,v[S]);var E=m._PSD;--E.ref||E.finalize(),pn===0&&(++pn,Ze(function(){--pn==0&&nu()},[]))}function na(m,v){if(m._state===null)m._listeners.push(v);else{var S=m._state?v.onFulfilled:v.onRejected;if(S===null)return(m._state?v.resolve:v.reject)(m._value);++v.psd.ref,++pn,Ze(Vd,[S,m,v])}}function Vd(m,v,S){try{var C,E=v._value;!v._state&&It.length&&(It=[]),C=je&&v._consoleTask?v._consoleTask.run(function(){return m(E)}):m(E),v._state||It.indexOf(E)!==-1||(M=>{for(var B=zt.length;B;)if(zt[--B]._value===M._value)return zt.splice(B,1)})(v),S.resolve(C)}catch(M){S.reject(M)}finally{--pn==0&&nu(),--S.psd.ref||S.psd.finalize()}}function Jc(){Or(wt,function(){Ni()&&Yr()})}function Ni(){var m=at;return un=at=!1,m}function Yr(){var m,v,S;do for(;0<Gn.length;)for(m=Gn,Gn=[],S=m.length,v=0;v<S;++v){var C=m[v];C[0].apply(null,C[1])}while(0<Gn.length);un=at=!0}function nu(){for(var m=zt,v=(zt=[],m.forEach(function(C){C._PSD.onunhandled.call(null,C._value,C)}),Es.slice(0)),S=v.length;S;)v[--S]()}function Pl(m){return new He(Ot,!1,m)}function an(m,v){var S=Re;return function(){var C=Ni(),E=Re;try{return _i(S,!0),m.apply(this,arguments)}catch(M){v&&v(M)}finally{_i(E,!1),C&&Yr()}}}b(He.prototype,{then:za,_then:function(m,v){na(this,new zl(null,null,m,v,Re))},catch:function(m){var v,S;return arguments.length===1?this.then(null,m):(v=m,S=arguments[1],typeof v=="function"?this.then(null,function(C){return(C instanceof v?S:Pl)(C)}):this.then(null,function(C){return(C&&C.name===v?S:Pl)(C)}))},finally:function(m){return this.then(function(v){return He.resolve(m()).then(function(){return v})},function(v){return He.resolve(m()).then(function(){return Pl(v)})})},timeout:function(m,v){var S=this;return m<1/0?new He(function(C,E){var M=setTimeout(function(){return E(new Fe.Timeout(v))},m);S.then(C,E).finally(clearTimeout.bind(null,M))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&A(He.prototype,Symbol.toStringTag,"Dexie.Promise"),wt.env=iu(),b(He,{all:function(){var m=D.apply(null,arguments).map(Pa);return new He(function(v,S){m.length===0&&v([]);var C=m.length;m.forEach(function(E,M){return He.resolve(E).then(function(B){m[M]=B,--C||v(m)},S)})})},resolve:function(m){return m instanceof He?m:m&&typeof m.then=="function"?new He(function(v,S){m.then(v,S)}):new He(Ot,!0,m)},reject:Pl,race:function(){var m=D.apply(null,arguments).map(Pa);return new He(function(v,S){m.map(function(C){return He.resolve(C).then(v,S)})})},PSD:{get:function(){return Re},set:function(m){return Re=m}},totalEchoes:{get:function(){return ql}},newPSD:cn,usePSD:Or,scheduler:{get:function(){return Ze},set:function(m){Ze=m}},rejectionMapper:{get:function(){return Pt},set:function(m){Pt=m}},follow:function(m,v){return new He(function(S,C){return cn(function(E,M){var B=Re;B.unhandleds=[],B.onunhandled=M,B.finalize=tt(function(){var z,K=this;z=function(){K.unhandleds.length===0?E():M(K.unhandleds[0])},Es.push(function ae(){z(),Es.splice(Es.indexOf(ae),1)}),++pn,Ze(function(){--pn==0&&nu()},[])},B.finalize),m()},v,S,C)})}}),ve&&(ve.allSettled&&A(He,"allSettled",function(){var m=D.apply(null,arguments).map(Pa);return new He(function(v){m.length===0&&v([]);var S=m.length,C=new Array(S);m.forEach(function(E,M){return He.resolve(E).then(function(B){return C[M]={status:"fulfilled",value:B}},function(B){return C[M]={status:"rejected",reason:B}}).then(function(){return--S||v(C)})})})}),ve.any&&typeof AggregateError<"u"&&A(He,"any",function(){var m=D.apply(null,arguments).map(Pa);return new He(function(v,S){m.length===0&&S(new AggregateError([]));var C=m.length,E=new Array(C);m.forEach(function(M,B){return He.resolve(M).then(function(z){return v(z)},function(z){E[B]=z,--C||S(new AggregateError(E))})})})}),ve.withResolvers)&&(He.withResolvers=ve.withResolvers);var Tn={awaits:0,echoes:0,id:0},ru=0,Ia=[],Hl=0,ql=0,Mi=0;function cn(m,B,S,C){var E=Re,M=Object.create(E),B=(M.parent=E,M.ref=0,M.global=!1,M.id=++Mi,wt.env,M.env=Ve?{Promise:He,PromiseProp:{value:He,configurable:!0,writable:!0},all:He.all,race:He.race,allSettled:He.allSettled,any:He.any,resolve:He.resolve,reject:He.reject}:{},B&&h(M,B),++E.ref,M.finalize=function(){--this.parent.ref||this.parent.finalize()},Or(M,m,S,C));return M.ref===0&&M.finalize(),B}function En(){return Tn.id||(Tn.id=++ru),++Tn.awaits,Tn.echoes+=Lt,Tn.id}function gr(){return!!Tn.awaits&&(--Tn.awaits==0&&(Tn.id=0),Tn.echoes=Tn.awaits*Lt,!0)}function Pa(m){return Tn.echoes&&m&&m.constructor===ve?(En(),m.then(function(v){return gr(),v},function(v){return gr(),Zt(v)})):m}function Kd(){var m=Ia[Ia.length-1];Ia.pop(),_i(m,!1)}function _i(m,v){var S,C,E=Re;(v?!Tn.echoes||Hl++&&m===Re:!Hl||--Hl&&m===Re)||queueMicrotask(v?function(M){++ql,Tn.echoes&&--Tn.echoes!=0||(Tn.echoes=Tn.awaits=Tn.id=0),Ia.push(Re),_i(M,!0)}.bind(null,m):Kd),m!==Re&&(Re=m,E===wt&&(wt.env=iu()),Ve)&&(S=wt.env.Promise,C=m.env,E.global||m.global)&&(Object.defineProperty(s,"Promise",C.PromiseProp),S.all=C.all,S.race=C.race,S.resolve=C.resolve,S.reject=C.reject,C.allSettled&&(S.allSettled=C.allSettled),C.any)&&(S.any=C.any)}function iu(){var m=s.Promise;return Ve?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function Or(m,v,S,C,E){var M=Re;try{return _i(m,!0),v(S,C,E)}finally{_i(M,!1)}}function Ns(m,v,S,C){return typeof m!="function"?m:function(){var E=Re;S&&En(),_i(v,!0);try{return m.apply(this,arguments)}finally{_i(E,!1),C&&queueMicrotask(gr)}}}function Di(m){Promise===ve&&Tn.echoes===0?Hl===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+da).indexOf("[native code]")===-1&&(En=gr=Pe);var Zt=He.reject,Rr="",or="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nn="String expected.",ra=[],Ul="__dbnames",gi="readonly",ji="readwrite";function ia(m,v){return m?v?function(){return m.apply(this,arguments)&&v.apply(this,arguments)}:m:v}var au={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Fl(m){return typeof m!="string"||/\./.test(m)?function(v){return v}:function(v){return v[m]===void 0&&m in v&&delete(v=me(v))[m],v}}function eh(){throw Fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function yt(m,v){try{var S=Vl(m),C=Vl(v);if(S!==C)return S==="Array"?1:C==="Array"?-1:S==="binary"?1:C==="binary"?-1:S==="string"?1:C==="string"?-1:S==="Date"?1:C!=="Date"?NaN:-1;switch(S){case"number":case"Date":case"string":return v<m?1:m<v?-1:0;case"binary":for(var E=Qr(m),M=Qr(v),B=E.length,z=M.length,K=B<z?B:z,ae=0;ae<K;++ae)if(E[ae]!==M[ae])return E[ae]<M[ae]?-1:1;return B===z?0:B<z?-1:1;case"Array":for(var G=m,V=v,X=G.length,W=V.length,Y=X<W?X:W,Q=0;Q<Y;++Q){var oe=yt(G[Q],V[Q]);if(oe!==0)return oe}return X===W?0:X<W?-1:1}}catch{}return NaN}function Vl(m){var v=typeof m;return v=="object"&&(ArrayBuffer.isView(m)||(v=se(m))==="ArrayBuffer")?"binary":v}function Qr(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}function Wn(m,v,S){var C=m.schema.yProps;return C?(v&&0<S.numFailures&&(v=v.filter(function(E,M){return!S.failures[M]})),Promise.all(C.map(function(E){return E=E.updatesTable,v?m.db.table(E).where("k").anyOf(v).delete():m.db.table(E).clear()})).then(function(){return S})):S}th.prototype.execute=function(m){var v=this["@@propmod"];if(v.add!==void 0){var S=v.add;if(c(S))return a(a([],c(m)?m:[],!0),S).sort();if(typeof S=="number")return(Number(m)||0)+S;if(typeof S=="bigint")try{return BigInt(m)+S}catch{return BigInt(0)+S}throw new TypeError("Invalid term ".concat(S))}if(v.remove!==void 0){var C=v.remove;if(c(C))return c(m)?m.filter(function(E){return!C.includes(E)}).sort():[];if(typeof C=="number")return Number(m)-C;if(typeof C=="bigint")try{return BigInt(m)-C}catch{return BigInt(0)-C}throw new TypeError("Invalid subtrahend ".concat(C))}return S=(S=v.replacePrefix)==null?void 0:S[0],S&&typeof m=="string"&&m.startsWith(S)?v.replacePrefix[1]+m.substring(S.length):m};var Ha=th;function th(m){this["@@propmod"]=m}function Ms(m,v){for(var S=o(v),C=S.length,E=!1,M=0;M<C;++M){var B=S[M],z=v[B],K=I(m,B);z instanceof Ha?(U(m,B,z.execute(K)),E=!0):K!==z&&(U(m,B,z),E=!0)}return E}Ft.prototype._trans=function(m,v,S){var C=this._tx||Re.trans,E=this.name,M=je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function B(ae,G,V){if(V.schema[E])return v(V.idbtrans,V);throw new Fe.NotFound("Table "+E+" not part of transaction")}var z=Ni();try{var K=C&&C.db._novip===this.db._novip?C===Re.trans?C._promise(m,B,S):cn(function(){return C._promise(m,B,S)},{trans:C,transless:Re.transless||Re}):(function ae(G,V,X,W){if(G.idbdb&&(G._state.openComplete||Re.letThrough||G._vip)){var Y=G._createTransaction(V,X,G._dbSchema);try{Y.create(),G._state.PR1398_maxLoop=3}catch(Q){return Q.name===ft.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return ae(G,V,X,W)})):Zt(Q)}return Y._promise(V,function(Q,oe){return cn(function(){return Re.trans=Y,W(Q,oe,Y)})}).then(function(Q){if(V==="readwrite")try{Y.idbtrans.commit()}catch{}return V==="readonly"?Q:Y._completion.then(function(){return Q})})}if(G._state.openComplete)return Zt(new Fe.DatabaseClosed(G._state.dbOpenError));if(!G._state.isBeingOpened){if(!G._state.autoOpen)return Zt(new Fe.DatabaseClosed);G.open().catch(Pe)}return G._state.dbReadyPromise.then(function(){return ae(G,V,X,W)})})(this.db,m,[this.name],B);return M&&(K._consoleTask=M,K=K.catch(function(ae){return console.trace(ae),Zt(ae)})),K}finally{z&&Yr()}},Ft.prototype.get=function(m,v){var S=this;return m&&m.constructor===Object?this.where(m).first(v):m==null?Zt(new Fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(C){return S.core.get({trans:C,key:m}).then(function(E){return S.hook.reading.fire(E)})}).then(v)},Ft.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(c(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var v=o(m);if(v.length===1)return this.where(v[0]).equals(m[v[0]]);var S=this.schema.indexes.concat(this.schema.primKey).filter(function(z){if(z.compound&&v.every(function(ae){return 0<=z.keyPath.indexOf(ae)})){for(var K=0;K<v.length;++K)if(v.indexOf(z.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(z,K){return z.keyPath.length-K.keyPath.length})[0];if(S&&this.db._maxKey!==Rr)return B=S.keyPath.slice(0,v.length),this.where(B).equals(B.map(function(z){return m[z]}));!S&&je&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var C=this.schema.idxByName;function E(z,K){return yt(z,K)===0}var B=v.reduce(function(G,K){var ae=G[0],G=G[1],V=C[K],X=m[K];return[ae||V,ae||!V?ia(G,V&&V.multi?function(W){return W=I(W,K),c(W)&&W.some(function(Y){return E(X,Y)})}:function(W){return E(X,I(W,K))}):G]},[null,null]),M=B[0],B=B[1];return M?this.where(M.name).equals(m[M.keyPath]).filter(B):S?this.filter(B):this.where(v).equals("")},Ft.prototype.filter=function(m){return this.toCollection().and(m)},Ft.prototype.count=function(m){return this.toCollection().count(m)},Ft.prototype.offset=function(m){return this.toCollection().offset(m)},Ft.prototype.limit=function(m){return this.toCollection().limit(m)},Ft.prototype.each=function(m){return this.toCollection().each(m)},Ft.prototype.toArray=function(m){return this.toCollection().toArray(m)},Ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ft.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,c(m)?"[".concat(m.join("+"),"]"):m))},Ft.prototype.reverse=function(){return this.toCollection().reverse()},Ft.prototype.mapToClass=function(m){for(var v=this.db,S=this.name,C=((this.schema.mappedClass=m).prototype instanceof eh&&(m=(B=>{var z=G,K=B;if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ae(){this.constructor=z}function G(){return B!==null&&B.apply(this,arguments)||this}return t(z,K),z.prototype=K===null?Object.create(K):(ae.prototype=K.prototype,new ae),Object.defineProperty(G.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),G.prototype.table=function(){return S},G})(m)),new Set),E=m.prototype;E;E=d(E))Object.getOwnPropertyNames(E).forEach(function(B){return C.add(B)});function M(B){if(!B)return B;var z,K=Object.create(m.prototype);for(z in B)if(!C.has(z))try{K[z]=B[z]}catch{}return K}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=M,this.hook("reading",M),m},Ft.prototype.defineClass=function(){return this.mapToClass(function(m){h(this,m)})},Ft.prototype.add=function(m,v){var S=this,C=this.schema.primKey,E=C.auto,M=C.keyPath,B=m;return M&&E&&(B=Fl(M)(m)),this._trans("readwrite",function(z){return S.core.mutate({trans:z,type:"add",keys:v!=null?[v]:null,values:[B]})}).then(function(z){return z.numFailures?He.reject(z.failures[0]):z.lastResult}).then(function(z){if(M)try{U(m,M,z)}catch{}return z})},Ft.prototype.upsert=function(m,v){var S=this,C=this.schema.primKey.keyPath;return this._trans("readwrite",function(E){return S.core.get({trans:E,key:m}).then(function(M){var B=M??{};return Ms(B,v),C&&U(B,C,m),S.core.mutate({trans:E,type:"put",values:[B],keys:[m],upsert:!0,updates:{keys:[m],changeSpecs:[v]}}).then(function(z){return z.numFailures?He.reject(z.failures[0]):!!M})})})},Ft.prototype.update=function(m,v){return typeof m!="object"||c(m)?this.where(":id").equals(m).modify(v):(m=I(m,this.schema.primKey.keyPath))===void 0?Zt(new Fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(v)},Ft.prototype.put=function(m,v){var S=this,C=this.schema.primKey,E=C.auto,M=C.keyPath,B=m;return M&&E&&(B=Fl(M)(m)),this._trans("readwrite",function(z){return S.core.mutate({trans:z,type:"put",values:[B],keys:v!=null?[v]:null})}).then(function(z){return z.numFailures?He.reject(z.failures[0]):z.lastResult}).then(function(z){if(M)try{U(m,M,z)}catch{}return z})},Ft.prototype.delete=function(m){var v=this;return this._trans("readwrite",function(S){return v.core.mutate({trans:S,type:"delete",keys:[m]}).then(function(C){return Wn(v,[m],C)}).then(function(C){return C.numFailures?He.reject(C.failures[0]):void 0})})},Ft.prototype.clear=function(){var m=this;return this._trans("readwrite",function(v){return m.core.mutate({trans:v,type:"deleteRange",range:au}).then(function(S){return Wn(m,null,S)})}).then(function(v){return v.numFailures?He.reject(v.failures[0]):void 0})},Ft.prototype.bulkGet=function(m){var v=this;return this._trans("readonly",function(S){return v.core.getMany({keys:m,trans:S}).then(function(C){return C.map(function(E){return v.hook.reading.fire(E)})})})},Ft.prototype.bulkAdd=function(m,v,S){var C=this,E=Array.isArray(v)?v:void 0,M=(S=S||(E?void 0:v))?S.allKeys:void 0;return this._trans("readwrite",function(B){var z=C.schema.primKey,ae=z.auto,z=z.keyPath;if(z&&E)throw new Fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==m.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=m.length,ae=z&&ae?m.map(Fl(z)):m;return C.core.mutate({trans:B,type:"add",keys:E,values:ae,wantResults:M}).then(function(G){var V=G.numFailures,X=G.failures;if(V===0)return M?G.results:G.lastResult;throw new jt("".concat(C.name,".bulkAdd(): ").concat(V," of ").concat(K," operations failed"),X)})})},Ft.prototype.bulkPut=function(m,v,S){var C=this,E=Array.isArray(v)?v:void 0,M=(S=S||(E?void 0:v))?S.allKeys:void 0;return this._trans("readwrite",function(B){var z=C.schema.primKey,ae=z.auto,z=z.keyPath;if(z&&E)throw new Fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==m.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=m.length,ae=z&&ae?m.map(Fl(z)):m;return C.core.mutate({trans:B,type:"put",keys:E,values:ae,wantResults:M}).then(function(G){var V=G.numFailures,X=G.failures;if(V===0)return M?G.results:G.lastResult;throw new jt("".concat(C.name,".bulkPut(): ").concat(V," of ").concat(K," operations failed"),X)})})},Ft.prototype.bulkUpdate=function(m){var v=this,S=this.core,C=m.map(function(B){return B.key}),E=m.map(function(B){return B.changes}),M=[];return this._trans("readwrite",function(B){return S.getMany({trans:B,keys:C,cache:"clone"}).then(function(z){var K=[],ae=[],G=(m.forEach(function(V,X){var W=V.key,Y=V.changes,Q=z[X];if(Q){for(var oe=0,de=Object.keys(Y);oe<de.length;oe++){var le=de[oe],be=Y[le];if(le===v.schema.primKey.keyPath){if(yt(be,W)!==0)throw new Fe.Constraint("Cannot update primary key in bulkUpdate()")}else U(Q,le,be)}M.push(X),K.push(W),ae.push(Q)}}),K.length);return S.mutate({trans:B,type:"put",keys:K,values:ae,updates:{keys:C,changeSpecs:E}}).then(function(V){var X=V.numFailures,W=V.failures;if(X===0)return G;for(var Y=0,Q=Object.keys(W);Y<Q.length;Y++){var oe,de=Q[Y],le=M[Number(de)];le!=null&&(oe=W[de],delete W[de],W[le]=oe)}throw new jt("".concat(v.name,".bulkUpdate(): ").concat(X," of ").concat(G," operations failed"),W)})})})},Ft.prototype.bulkDelete=function(m){var v=this,S=m.length;return this._trans("readwrite",function(C){return v.core.mutate({trans:C,type:"delete",keys:m}).then(function(E){return Wn(v,m,E)})}).then(function(C){var E=C.numFailures,M=C.failures;if(E===0)return C.lastResult;throw new jt("".concat(v.name,".bulkDelete(): ").concat(E," of ").concat(S," operations failed"),M)})};var lu=Ft;function Ft(){}function Kl(m){function v(B,z){if(z){for(var K=arguments.length,ae=new Array(K-1);--K;)ae[K-1]=arguments[K];return S[B].subscribe.apply(null,ae),m}if(typeof B=="string")return S[B]}var S={};v.addEventType=M;for(var C=1,E=arguments.length;C<E;++C)M(arguments[C]);return v;function M(B,z,K){var ae,G;if(typeof B!="object")return z=z||kn,G={subscribers:[],fire:K=K||Pe,subscribe:function(V){G.subscribers.indexOf(V)===-1&&(G.subscribers.push(V),G.fire=z(G.fire,V))},unsubscribe:function(V){G.subscribers=G.subscribers.filter(function(X){return X!==V}),G.fire=G.subscribers.reduce(z,K)}},S[B]=v[B]=G;o(ae=B).forEach(function(V){var X=ae[V];if(c(X))M(V,ae[V][0],ae[V][1]);else{if(X!=="asap")throw new Fe.InvalidArgument("Invalid event config");var W=M(V,De,function(){for(var Y=arguments.length,Q=new Array(Y);Y--;)Q[Y]=arguments[Y];W.subscribers.forEach(function(oe){Z(function(){oe.apply(null,Q)})})})}})}}function Yn(m,v){return N(v).from({prototype:m}),v}function Oi(m,v){return!(m.filter||m.algorithm||m.or)&&(v?m.justLimit:!m.replayFilter)}function _s(m,v){m.filter=ia(m.filter,v)}function Gl(m,v,S){var C=m.replayFilter;m.replayFilter=C?function(){return ia(C(),v())}:v,m.justLimit=S&&!C}function yi(m,v){if(m.isPrimKey)return v.primaryKey;var S=v.getIndexByKeyPath(m.index);if(S)return S;throw new Fe.Schema("KeyPath "+m.index+" on object store "+v.name+" is not indexed")}function su(m,v,S){var C=yi(m,v.schema);return v.openCursor({trans:S,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:C,range:m.range}})}function Yl(m,v,S,C){var E,M,B=m.replayFilter?ia(m.filter,m.replayFilter()):m.filter;return m.or?(E={},M=function(z,K,ae){var G,V;B&&!B(K,ae,function(X){return K.stop(X)},function(X){return K.fail(X)})||((V=""+(G=K.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(G)),g(E,V))||(E[V]=!0,v(z,K,ae))},Promise.all([m.or._iterate(M,S),aa(su(m,C,S),m.algorithm,M,!m.keysOnly&&m.valueMapper)])):aa(su(m,C,S),ia(m.algorithm,B),v,!m.keysOnly&&m.valueMapper)}function aa(m,v,S,C){var E=an(C?function(M,B,z){return S(C(M),B,z)}:S);return m.then(function(M){if(M)return M.start(function(){var B=function(){return M.continue()};v&&!v(M,function(z){return B=z},function(z){M.stop(z),B=Pe},function(z){M.fail(z),B=Pe})||E(M.value,M,function(z){return B=z}),B()})})}_t.prototype._read=function(m,v){var S=this._ctx;return S.error?S.table._trans(null,Zt.bind(null,S.error)):S.table._trans("readonly",m).then(v)},_t.prototype._write=function(m){var v=this._ctx;return v.error?v.table._trans(null,Zt.bind(null,v.error)):v.table._trans("readwrite",m,"locked")},_t.prototype._addAlgorithm=function(m){var v=this._ctx;v.algorithm=ia(v.algorithm,m)},_t.prototype._iterate=function(m,v){return Yl(this._ctx,m,v,this._ctx.table.core)},_t.prototype.clone=function(m){var v=Object.create(this.constructor.prototype),S=Object.create(this._ctx);return m&&h(S,m),v._ctx=S,v},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(m){var v=this._ctx;return this._read(function(S){return Yl(v,m,S,v.table.core)})},_t.prototype.count=function(m){var v=this;return this._read(function(S){var C,E=v._ctx,M=E.table.core;return Oi(E,!0)?M.count({trans:S,query:{index:yi(E,M.schema),range:E.range}}).then(function(B){return Math.min(B,E.limit)}):(C=0,Yl(E,function(){return++C,!1},S,M).then(function(){return C}))}).then(m)},_t.prototype.sortBy=function(m,v){var S=m.split(".").reverse(),C=S[0],E=S.length-1;function M(K,ae){return ae?M(K[S[ae]],ae-1):K[C]}var B=this._ctx.dir==="next"?1:-1;function z(K,ae){return yt(M(K,E),M(ae,E))*B}return this.toArray(function(K){return K.sort(z)}).then(v)},_t.prototype.toArray=function(m){var v=this;return this._read(function(S){var C,E,M,B=v._ctx;return B.dir==="next"&&Oi(B,!0)&&0<B.limit?(C=B.valueMapper,E=yi(B,B.table.core.schema),B.table.core.query({trans:S,limit:B.limit,values:!0,query:{index:E,range:B.range}}).then(function(z){return z=z.result,C?z.map(C):z})):(M=[],Yl(B,function(z){return M.push(z)},S,B.table.core).then(function(){return M}))},m)},_t.prototype.offset=function(m){var v=this._ctx;return m<=0||(v.offset+=m,Oi(v)?Gl(v,function(){var S=m;return function(C,E){return S===0||(S===1?--S:E(function(){C.advance(S),S=0}),!1)}}):Gl(v,function(){var S=m;return function(){return--S<0}})),this},_t.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Gl(this._ctx,function(){var v=m;return function(S,C,E){return--v<=0&&C(E),0<=v}},!0),this},_t.prototype.until=function(m,v){return _s(this._ctx,function(S,C,E){return!m(S.value)||(C(E),v)}),this},_t.prototype.first=function(m){return this.limit(1).toArray(function(v){return v[0]}).then(m)},_t.prototype.last=function(m){return this.reverse().first(m)},_t.prototype.filter=function(m){var v;return _s(this._ctx,function(S){return m(S.value)}),(v=this._ctx).isMatch=ia(v.isMatch,m),this},_t.prototype.and=function(m){return this.filter(m)},_t.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},_t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(S,C){m(C.key,C)})},_t.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},_t.prototype.eachPrimaryKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(S,C){m(C.primaryKey,C)})},_t.prototype.keys=function(m){var v=this._ctx,S=(v.keysOnly=!v.isMatch,[]);return this.each(function(C,E){S.push(E.key)}).then(function(){return S}).then(m)},_t.prototype.primaryKeys=function(m){var v=this._ctx;if(v.dir==="next"&&Oi(v,!0)&&0<v.limit)return this._read(function(C){var E=yi(v,v.table.core.schema);return v.table.core.query({trans:C,values:!1,limit:v.limit,query:{index:E,range:v.range}})}).then(function(C){return C.result}).then(m);v.keysOnly=!v.isMatch;var S=[];return this.each(function(C,E){S.push(E.primaryKey)}).then(function(){return S}).then(m)},_t.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},_t.prototype.firstKey=function(m){return this.limit(1).keys(function(v){return v[0]}).then(m)},_t.prototype.lastKey=function(m){return this.reverse().firstKey(m)},_t.prototype.distinct=function(){var m,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(m={},_s(this._ctx,function(C){var C=C.primaryKey.toString(),E=g(m,C);return m[C]=!0,!E})),this},_t.prototype.modify=function(m){var v=this,S=this._ctx;return this._write(function(C){function E(Q,oe){var de=oe.failures;X+=Q-oe.numFailures;for(var le=0,be=o(de);le<be.length;le++){var Ne=be[le];V.push(de[Ne])}}var M=typeof m=="function"?m:function(Q){return Ms(Q,m)},B=S.table.core,G=B.schema.primaryKey,z=G.outbound,K=G.extractKey,ae=200,G=v.db._options.modifyChunkSize,V=(G&&(ae=typeof G=="object"?G[B.name]||G["*"]||200:G),[]),X=0,W=[],Y=m===ou;return v.clone().primaryKeys().then(function(Q){function oe(le){var be=Math.min(ae,Q.length-le),Ne=Q.slice(le,le+be);return(Y?Promise.resolve([]):B.getMany({trans:C,keys:Ne,cache:"immutable"})).then(function(ze){var Ie=[],Me=[],Ke=z?[]:null,Ue=Y?Ne:[];if(!Y)for(var _e=0;_e<be;++_e){var Ge=ze[_e],ht={value:me(Ge),primKey:Q[le+_e]};M.call(ht,ht.value,ht)!==!1&&(ht.value==null?Ue.push(Q[le+_e]):z||yt(K(Ge),K(ht.value))===0?(Me.push(ht.value),z&&Ke.push(Q[le+_e])):(Ue.push(Q[le+_e]),Ie.push(ht.value)))}return Promise.resolve(0<Ie.length&&B.mutate({trans:C,type:"add",values:Ie}).then(function(xt){for(var nt in xt.failures)Ue.splice(parseInt(nt),1);E(Ie.length,xt)})).then(function(){return(0<Me.length||de&&typeof m=="object")&&B.mutate({trans:C,type:"put",keys:Ke,values:Me,criteria:de,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<le}).then(function(xt){return E(Me.length,xt)})}).then(function(){return(0<Ue.length||de&&Y)&&B.mutate({trans:C,type:"delete",keys:Ue,criteria:de,isAdditionalChunk:0<le}).then(function(xt){return Wn(S.table,Ue,xt)}).then(function(xt){return E(Ue.length,xt)})}).then(function(){return Q.length>le+be&&oe(le+ae)})})}var de=Oi(S)&&S.limit===1/0&&(typeof m!="function"||Y)&&{index:S.index,range:S.range};return oe(0).then(function(){if(0<V.length)throw new et("Error modifying one or more objects",V,X,W);return Q.length})})})},_t.prototype.delete=function(){var m=this._ctx,v=m.range;return!Oi(m)||m.table.schema.yProps||!m.isPrimKey&&v.type!==3?this.modify(ou):this._write(function(S){var C=m.table.core.schema.primaryKey,E=v;return m.table.core.count({trans:S,query:{index:C,range:E}}).then(function(M){return m.table.core.mutate({trans:S,type:"deleteRange",range:E}).then(function(K){var z=K.failures,K=K.numFailures;if(K)throw new et("Could not delete some values",Object.keys(z).map(function(ae){return z[ae]}),M-K);return M-K})})})};var Gd=_t;function _t(){}var ou=function(m,v){return v.value=null};function uu(m,v){return m<v?-1:m===v?0:1}function Yd(m,v){return v<m?-1:m===v?0:1}function yr(m,v,S){return m=m instanceof la?new m.Collection(m):m,m._ctx.error=new(S||TypeError)(v),m}function xi(m){return new m.Collection(m,function(){return Ds("")}).limit(0)}function Sr(W,v,S,C){var E,M,B,z,K,ae,G,V=S.length;if(!S.every(function(Q){return typeof Q=="string"}))return yr(W,Nn);function X(Q){E=Q==="next"?function(de){return de.toUpperCase()}:function(de){return de.toLowerCase()},M=Q==="next"?function(de){return de.toLowerCase()}:function(de){return de.toUpperCase()},B=Q==="next"?uu:Yd;var oe=S.map(function(de){return{lower:M(de),upper:E(de)}}).sort(function(de,le){return B(de.lower,le.lower)});z=oe.map(function(de){return de.upper}),K=oe.map(function(de){return de.lower}),G=(ae=Q)==="next"?"":C}X("next");var W=new W.Collection(W,function(){return Xr(z[0],K[V-1]+C)}),Y=(W._ondirectionchange=function(Q){X(Q)},0);return W._addAlgorithm(function(Q,oe,de){var le=Q.key;if(typeof le=="string"){var be=M(le);if(v(be,K,Y))return!0;for(var Ne=null,ze=Y;ze<V;++ze){var Ie=((Me,Ke,Ue,_e,Ge,ht)=>{for(var xt=Math.min(Me.length,_e.length),nt=-1,dt=0;dt<xt;++dt){var Jt=Ke[dt];if(Jt!==_e[dt])return Ge(Me[dt],Ue[dt])<0?Me.substr(0,dt)+Ue[dt]+Ue.substr(dt+1):Ge(Me[dt],_e[dt])<0?Me.substr(0,dt)+_e[dt]+Ue.substr(dt+1):0<=nt?Me.substr(0,nt)+Ke[nt]+Ue.substr(nt+1):null;Ge(Me[dt],Jt)<0&&(nt=dt)}return xt<_e.length&&ht==="next"?Me+Ue.substr(Me.length):xt<Me.length&&ht==="prev"?Me.substr(0,Ue.length):nt<0?null:Me.substr(0,nt)+_e[nt]+Ue.substr(nt+1)})(le,be,z[ze],K[ze],B,ae);Ie===null&&Ne===null?Y=ze+1:(Ne===null||0<B(Ne,Ie))&&(Ne=Ie)}oe(Ne!==null?function(){Q.continue(Ne+G)}:de)}return!1}),W}function Xr(m,v,S,C){return{type:2,lower:m,upper:v,lowerOpen:S,upperOpen:C}}function Ds(m){return{type:1,lower:m,upper:m}}Object.defineProperty(mn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),mn.prototype.between=function(m,v,S,C){S=S!==!1,C=C===!0;try{return 0<this._cmp(m,v)||this._cmp(m,v)===0&&(S||C)&&(!S||!C)?xi(this):new this.Collection(this,function(){return Xr(m,v,!S,!C)})}catch{return yr(this,or)}},mn.prototype.equals=function(m){return m==null?yr(this,or):new this.Collection(this,function(){return Ds(m)})},mn.prototype.above=function(m){return m==null?yr(this,or):new this.Collection(this,function(){return Xr(m,void 0,!0)})},mn.prototype.aboveOrEqual=function(m){return m==null?yr(this,or):new this.Collection(this,function(){return Xr(m,void 0,!1)})},mn.prototype.below=function(m){return m==null?yr(this,or):new this.Collection(this,function(){return Xr(void 0,m,!1,!0)})},mn.prototype.belowOrEqual=function(m){return m==null?yr(this,or):new this.Collection(this,function(){return Xr(void 0,m)})},mn.prototype.startsWith=function(m){return typeof m!="string"?yr(this,Nn):this.between(m,m+Rr,!0,!0)},mn.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):Sr(this,function(v,S){return v.indexOf(S[0])===0},[m],Rr)},mn.prototype.equalsIgnoreCase=function(m){return Sr(this,function(v,S){return v===S[0]},[m],"")},mn.prototype.anyOfIgnoreCase=function(){var m=D.apply(Ae,arguments);return m.length===0?xi(this):Sr(this,function(v,S){return S.indexOf(v)!==-1},m,"")},mn.prototype.startsWithAnyOfIgnoreCase=function(){var m=D.apply(Ae,arguments);return m.length===0?xi(this):Sr(this,function(v,S){return S.some(function(C){return v.indexOf(C)===0})},m,Rr)},mn.prototype.anyOf=function(){var m,v,S=this,C=D.apply(Ae,arguments),E=this._cmp;try{C.sort(E)}catch{return yr(this,or)}return C.length===0?xi(this):((m=new this.Collection(this,function(){return Xr(C[0],C[C.length-1])}))._ondirectionchange=function(M){E=M==="next"?S._ascending:S._descending,C.sort(E)},v=0,m._addAlgorithm(function(M,B,z){for(var K=M.key;0<E(K,C[v]);)if(++v===C.length)return B(z),!1;return E(K,C[v])===0||(B(function(){M.continue(C[v])}),!1)}),m)},mn.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},mn.prototype.noneOf=function(){var m=D.apply(Ae,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return yr(this,or)}var v=m.reduce(function(S,C){return S?S.concat([[S[S.length-1][1],C]]):[[-1/0,C]]},null);return v.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},mn.prototype.inAnyRange=function(m,de){var S=this,C=this._cmp,E=this._ascending,M=this._descending,B=this._min,z=this._max;if(m.length===0)return xi(this);if(!m.every(function(le){return le[0]!==void 0&&le[1]!==void 0&&E(le[0],le[1])<=0}))return yr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Fe.InvalidArgument);var K=!de||de.includeLowers!==!1,ae=de&&de.includeUppers===!0,G,V=E;function X(le,be){return V(le[0],be[0])}try{(G=m.reduce(function(le,be){for(var Ne=0,ze=le.length;Ne<ze;++Ne){var Ie=le[Ne];if(C(be[0],Ie[1])<0&&0<C(be[1],Ie[0])){Ie[0]=B(Ie[0],be[0]),Ie[1]=z(Ie[1],be[1]);break}}return Ne===ze&&le.push(be),le},[])).sort(X)}catch{return yr(this,or)}var W=0,Y=ae?function(le){return 0<E(le,G[W][1])}:function(le){return 0<=E(le,G[W][1])},Q=K?function(le){return 0<M(le,G[W][0])}:function(le){return 0<=M(le,G[W][0])},oe=Y,de=new this.Collection(this,function(){return Xr(G[0][0],G[G.length-1][1],!K,!ae)});return de._ondirectionchange=function(le){V=le==="next"?(oe=Y,E):(oe=Q,M),G.sort(X)},de._addAlgorithm(function(le,be,Ne){for(var ze,Ie=le.key;oe(Ie);)if(++W===G.length)return be(Ne),!1;return!Y(ze=Ie)&&!Q(ze)||(S._cmp(Ie,G[W][1])===0||S._cmp(Ie,G[W][0])===0||be(function(){V===E?le.continue(G[W][0]):le.continue(G[W][1])}),!1)}),de},mn.prototype.startsWithAnyOf=function(){var m=D.apply(Ae,arguments);return m.every(function(v){return typeof v=="string"})?m.length===0?xi(this):this.inAnyRange(m.map(function(v){return[v,v+Rr]})):yr(this,"startsWithAnyOf() only works with strings")};var la=mn;function mn(){}function Br(m){return an(function(v){return sa(v),m(v.target.error),!1})}function sa(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var qa="storagemutated",oa="x-storagemutated-1",Qn=Kl(null,qa),cu=(ur.prototype._lock=function(){return ee(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},ur.prototype._unlock=function(){if(ee(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{Or(m[1],m[0])}catch{}}return this},ur.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},ur.prototype.create=function(m){var v=this;if(this.mode){var S=this.db.idbdb,C=this.db._state.dbOpenError;if(ee(!this.idbtrans),!m&&!S)switch(C&&C.name){case"DatabaseClosedError":throw new Fe.DatabaseClosed(C);case"MissingAPIError":throw new Fe.MissingAPI(C.message,C);default:throw new Fe.OpenFailed(C)}if(!this.active)throw new Fe.TransactionInactive;ee(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||S).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=an(function(E){sa(E),v._reject(m.error)}),m.onabort=an(function(E){sa(E),v.active&&v._reject(new Fe.Abort(m.error)),v.active=!1,v.on("abort").fire(E)}),m.oncomplete=an(function(){v.active=!1,v._resolve(),"mutatedParts"in m&&Qn.storagemutated.fire(m.mutatedParts)})}return this},ur.prototype._promise=function(m,v,S){var C,E=this;return m==="readwrite"&&this.mode!=="readwrite"?Zt(new Fe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new He(function(M,B){E._blockedFuncs.push([function(){E._promise(m,v,S).then(M,B)},Re])}):S?cn(function(){var M=new He(function(B,z){E._lock();var K=v(B,z,E);K&&K.then&&K.then(B,z)});return M.finally(function(){return E._unlock()}),M._lib=!0,M}):((C=new He(function(M,B){var z=v(M,B,E);z&&z.then&&z.then(M,B)}))._lib=!0,C):Zt(new Fe.TransactionInactive)},ur.prototype._root=function(){return this.parent?this.parent._root():this},ur.prototype.waitFor=function(m){var v,S=this._root(),C=He.resolve(m),E=(S._waitingFor?S._waitingFor=S._waitingFor.then(function(){return C}):(S._waitingFor=C,S._waitingQueue=[],v=S.idbtrans.objectStore(S.storeNames[0]),(function M(){for(++S._spinCount;S._waitingQueue.length;)S._waitingQueue.shift()();S._waitingFor&&(v.get(-1/0).onsuccess=M)})()),S._waitingFor);return new He(function(M,B){C.then(function(z){return S._waitingQueue.push(an(M.bind(null,z)))},function(z){return S._waitingQueue.push(an(B.bind(null,z)))}).finally(function(){S._waitingFor===E&&(S._waitingFor=null)})})},ur.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Fe.Abort))},ur.prototype.table=function(m){var v=this._memoizedTables||(this._memoizedTables={});if(g(v,m))return v[m];var S=this.schema[m];if(S)return(S=new this.db.Table(m,S,this)).core=this.db.core.table(m),v[m]=S;throw new Fe.NotFound("Table "+m+" not part of transaction")},ur);function ur(){}function $r(m,v,S,C,E,M,B,z){return{name:m,keyPath:v,unique:S,multi:C,auto:E,compound:M,src:(S&&!B?"&":"")+(C?"*":"")+(E?"++":"")+js(v),type:z}}function js(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function Ua(m,v,S){return{name:m,primKey:v,indexes:S,mappedClass:null,idxByName:(C=function(E){return[E.name,E]},S.reduce(function(E,M,B){return M=C(M,B),M&&(E[M[0]]=M[1]),E},{}))};var C}var Fa=function(m){try{return m.only([[]]),Fa=function(){return[[]]},[[]]}catch{return Fa=function(){return Rr},Rr}};function Va(m){return m==null?function(){}:typeof m=="string"?(v=m).split(".").length===1?function(S){return S[v]}:function(S){return I(S,v)}:function(S){return I(S,m)};var v}function Ql(m){return[].slice.call(m)}var nh=0;function Rn(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function ua(m,v,K){function C(Y){if(Y.type===3)return null;if(Y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var V=Y.lower,X=Y.upper,W=Y.lowerOpen,Y=Y.upperOpen;return V===void 0?X===void 0?null:v.upperBound(X,!!Y):X===void 0?v.lowerBound(V,!!W):v.bound(V,X,!!W,!!Y)}function E(G){var V,X=G.name;return{name:X,schema:G,mutate:function(W){var Y=W.trans,Q=W.type,oe=W.keys,de=W.values,le=W.range;return new Promise(function(be,Ne){be=an(be);var ze=Y.objectStore(X),Ie=ze.keyPath==null,Me=Q==="put"||Q==="add";if(!Me&&Q!=="delete"&&Q!=="deleteRange")throw new Error("Invalid operation type: "+Q);var Ke,Ue=(oe||de||{length:1}).length;if(oe&&de&&oe.length!==de.length)throw new Error("Given keys array must have same length as given values array.");if(Ue===0)return be({numFailures:0,failures:{},results:[],lastResult:void 0});function _e(Gt){++xt,sa(Gt)}var Ge=[],ht=[],xt=0;if(Q==="deleteRange"){if(le.type===4)return be({numFailures:xt,failures:ht,results:[],lastResult:void 0});le.type===3?Ge.push(Ke=ze.clear()):Ge.push(Ke=ze.delete(C(le)))}else{var Ie=Me?Ie?[de,oe]:[de,null]:[oe,null],nt=Ie[0],dt=Ie[1];if(Me)for(var Jt=0;Jt<Ue;++Jt)Ge.push(Ke=dt&&dt[Jt]!==void 0?ze[Q](nt[Jt],dt[Jt]):ze[Q](nt[Jt])),Ke.onerror=_e;else for(Jt=0;Jt<Ue;++Jt)Ge.push(Ke=ze[Q](nt[Jt])),Ke.onerror=_e}function hr(Gt){Gt=Gt.target.result,Ge.forEach(function(zi,$a){return zi.error!=null&&(ht[$a]=zi.error)}),be({numFailures:xt,failures:ht,results:Q==="delete"?oe:Ge.map(function(zi){return zi.result}),lastResult:Gt})}Ke.onerror=function(Gt){_e(Gt),hr(Gt)},Ke.onsuccess=hr})},getMany:function(W){var Y=W.trans,Q=W.keys;return new Promise(function(oe,de){oe=an(oe);for(var le,be=Y.objectStore(X),Ne=Q.length,ze=new Array(Ne),Ie=0,Me=0,Ke=function(Ge){Ge=Ge.target,ze[Ge._pos]=Ge.result,++Me===Ie&&oe(ze)},Ue=Br(de),_e=0;_e<Ne;++_e)Q[_e]!=null&&((le=be.get(Q[_e]))._pos=_e,le.onsuccess=Ke,le.onerror=Ue,++Ie);Ie===0&&oe(ze)})},get:function(W){var Y=W.trans,Q=W.key;return new Promise(function(oe,de){oe=an(oe);var le=Y.objectStore(X).get(Q);le.onsuccess=function(be){return oe(be.target.result)},le.onerror=Br(de)})},query:(V=z,function(W){return new Promise(function(Y,Q){Y=an(Y);var oe,de,le,Me=W.trans,be=W.values,Ne=W.limit,Ie=W.query,ze=Ne===1/0?void 0:Ne,Ke=Ie.index,Ie=Ie.range,Me=Me.objectStore(X),Me=Ke.isPrimaryKey?Me:Me.index(Ke.name),Ke=C(Ie);if(Ne===0)return Y({result:[]});V?((Ie=be?Me.getAll(Ke,ze):Me.getAllKeys(Ke,ze)).onsuccess=function(Ue){return Y({result:Ue.target.result})},Ie.onerror=Br(Q)):(oe=0,de=!be&&"openKeyCursor"in Me?Me.openKeyCursor(Ke):Me.openCursor(Ke),le=[],de.onsuccess=function(Ue){var _e=de.result;return!_e||(le.push(be?_e.value:_e.primaryKey),++oe===Ne)?Y({result:le}):void _e.continue()},de.onerror=Br(Q))})}),openCursor:function(W){var Y=W.trans,Q=W.values,oe=W.query,de=W.reverse,le=W.unique;return new Promise(function(be,Ne){be=an(be);var Me=oe.index,ze=oe.range,Ie=Y.objectStore(X),Ie=Me.isPrimaryKey?Ie:Ie.index(Me.name),Me=de?le?"prevunique":"prev":le?"nextunique":"next",Ke=!Q&&"openKeyCursor"in Ie?Ie.openKeyCursor(C(ze),Me):Ie.openCursor(C(ze),Me);Ke.onerror=Br(Ne),Ke.onsuccess=an(function(Ue){var _e,Ge,ht,xt,nt=Ke.result;nt?(nt.___id=++nh,nt.done=!1,_e=nt.continue.bind(nt),Ge=(Ge=nt.continuePrimaryKey)&&Ge.bind(nt),ht=nt.advance.bind(nt),xt=function(){throw new Error("Cursor not stopped")},nt.trans=Y,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=an(Ne),nt.next=function(){var dt=this,Jt=1;return this.start(function(){return Jt--?dt.continue():dt.stop()}).then(function(){return dt})},nt.start=function(dt){function Jt(){if(Ke.result)try{dt()}catch(Gt){nt.fail(Gt)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var hr=new Promise(function(Gt,zi){Gt=an(Gt),Ke.onerror=Br(zi),nt.fail=zi,nt.stop=function($a){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=xt,Gt($a)}});return Ke.onsuccess=an(function(Gt){Ke.onsuccess=Jt,Jt()}),nt.continue=_e,nt.continuePrimaryKey=Ge,nt.advance=ht,Jt(),hr},be(nt)):be(null)},Ne)})},count:function(W){var Y=W.query,Q=W.trans,oe=Y.index,de=Y.range;return new Promise(function(le,be){var Ne=Q.objectStore(X),Ne=oe.isPrimaryKey?Ne:Ne.index(oe.name),ze=C(de),ze=ze?Ne.count(ze):Ne.count();ze.onsuccess=an(function(Ie){return le(Ie.target.result)}),ze.onerror=Br(be)})}}}M=K,B=Ql((K=m).objectStoreNames);var M,K={schema:{name:K.name,tables:B.map(function(G){return M.objectStore(G)}).map(function(G){var V=G.keyPath,X=G.autoIncrement,Y=c(V),W={},Y={name:G.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:V==null,compound:Y,keyPath:V,autoIncrement:X,unique:!0,extractKey:Va(V)},indexes:Ql(G.indexNames).map(function(Q){return G.index(Q)}).map(function(le){var be=le.name,oe=le.unique,de=le.multiEntry,le=le.keyPath,be={name:be,compound:c(le),keyPath:le,unique:oe,multiEntry:de,extractKey:Va(le)};return W[Rn(le)]=be}),getIndexByKeyPath:function(Q){return W[Rn(Q)]}};return W[":id"]=Y.primaryKey,V!=null&&(W[Rn(V)]=Y.primaryKey),Y})},hasGetAll:0<B.length&&"getAll"in M.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},B=K.schema,z=K.hasGetAll,K=B.tables.map(E),ae={};return K.forEach(function(G){return ae[G.name]=G}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(G){if(ae[G])return ae[G];throw new Error("Table '".concat(G,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Fa(v),schema:B}}function Os(m,v,S,C){return S=S.IDBKeyRange,v=ua(v,S,C),{dbcore:m.dbcore.reduce(function(E,M){return M=M.create,r(r({},E),M(E))},v)}}function Ri(m,v){var S=v.db,S=Os(m._middlewares,S,m._deps,v);m.core=S.dbcore,m.tables.forEach(function(C){var E=C.name;m.core.schema.tables.some(function(M){return M.name===E})&&(C.core=m.core.table(E),m[E]instanceof m.Table)&&(m[E].core=C.core)})}function Rs(m,v,S,C){S.forEach(function(E){var M=C[E];v.forEach(function(B){var z=(function K(ae,G){return _(ae,G)||(ae=d(ae))&&K(ae,G)})(B,E);(!z||"value"in z&&z.value===void 0)&&(B===m.Transaction.prototype||B instanceof m.Transaction?A(B,E,{get:function(){return this.table(E)},set:function(K){w(this,E,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):B[E]=new m.Table(E,M))})})}function Xl(m,v){v.forEach(function(S){for(var C in S)S[C]instanceof m.Table&&delete S[C]})}function hu(m,v){return m._cfg.version-v._cfg.version}function $l(m,v,S,C){var E=m._dbSchema,M=(S.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=Ua("$meta",ih("")[0],[]),m._storeNames.push("$meta")),m._createTransaction("readwrite",m._storeNames,E)),B=(M.create(S),M._completion.catch(C),M._reject.bind(M)),z=Re.transless||Re;cn(function(){if(Re.trans=M,Re.transless=z,v!==0)return Ri(m,S),ae=v,((K=M).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(G){return G??ae}):He.resolve(ae)).then(function(oe){var V=m,X=oe,W=M,Y=S,Q=[],oe=V._versions,de=V._dbSchema=Ka(0,V.idbdb,Y);return(oe=oe.filter(function(le){return le._cfg.version>=X})).length===0?He.resolve():(oe.forEach(function(le){Q.push(function(){var be,Ne,ze,Ie=de,Me=le._cfg.dbschema,Ke=(Is(V,Ie,Y),Is(V,Me,Y),de=V._dbSchema=Me,Ls(Ie,Me)),Ue=(Ke.add.forEach(function(_e){fu(Y,_e[0],_e[1].primKey,_e[1].indexes)}),Ke.change.forEach(function(_e){if(_e.recreate)throw new Fe.Upgrade("Not yet support for changing primary key");var Ge=Y.objectStore(_e.name);_e.add.forEach(function(ht){return zs(Ge,ht)}),_e.change.forEach(function(ht){Ge.deleteIndex(ht.name),zs(Ge,ht)}),_e.del.forEach(function(ht){return Ge.deleteIndex(ht)})}),le._cfg.contentUpgrade);if(Ue&&le._cfg.version>X)return Ri(V,Y),W._memoizedTables={},be=ye(Me),Ke.del.forEach(function(_e){be[_e]=Ie[_e]}),Xl(V,[V.Transaction.prototype]),Rs(V,[V.Transaction.prototype],o(be),be),W.schema=be,(Ne=Te(Ue))&&En(),Me=He.follow(function(){var _e;(ze=Ue(W))&&Ne&&(_e=gr.bind(null,null),ze.then(_e,_e))}),ze&&typeof ze.then=="function"?He.resolve(ze):Me.then(function(){return ze})}),Q.push(function(be){var Ne,ze,Ie=le._cfg.dbschema;Ne=Ie,ze=be,[].slice.call(ze.db.objectStoreNames).forEach(function(Me){return Ne[Me]==null&&ze.db.deleteObjectStore(Me)}),Xl(V,[V.Transaction.prototype]),Rs(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),W.schema=V._dbSchema}),Q.push(function(be){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===le._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(Ne){return Ne!=="$meta"})):be.objectStore("$meta").put(le._cfg.version,"version"))})}),(function le(){return Q.length?He.resolve(Q.shift()(W.idbtrans)).then(le):He.resolve()})().then(function(){rh(de,Y)}))}).catch(B);var K,ae;o(E).forEach(function(G){fu(S,G,E[G].primKey,E[G].indexes)}),Ri(m,S),He.follow(function(){return m.on.populate.fire(M)}).catch(B)})}function Bs(m,v){rh(m._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var S=Ka(0,m.idbdb,v);Is(m,m._dbSchema,v);for(var C=0,E=Ls(S,m._dbSchema).change;C<E.length;C++){var M=(B=>{if(B.change.length||B.recreate)return console.warn("Unable to patch indexes of table ".concat(B.name," because it has changes on the type of index or primary key.")),{value:void 0};var z=v.objectStore(B.name);B.add.forEach(function(K){je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(B.name,".").concat(K.src)),zs(z,K)})})(E[C]);if(typeof M=="object")return M.value}}function Ls(m,v){var S,C={del:[],add:[],change:[]};for(S in m)v[S]||C.del.push(S);for(S in v){var E=m[S],M=v[S];if(E){var B={name:S,def:M,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(M.primKey.keyPath||"")||E.primKey.auto!==M.primKey.auto)B.recreate=!0,C.change.push(B);else{var z=E.idxByName,K=M.idxByName,ae=void 0;for(ae in z)K[ae]||B.del.push(ae);for(ae in K){var G=z[ae],V=K[ae];G?G.src!==V.src&&B.change.push(V):B.add.push(V)}(0<B.del.length||0<B.add.length||0<B.change.length)&&C.change.push(B)}}else C.add.push([S,M])}return C}function fu(m,v,S,C){var E=m.db.createObjectStore(v,S.keyPath?{keyPath:S.keyPath,autoIncrement:S.auto}:{autoIncrement:S.auto});C.forEach(function(M){return zs(E,M)})}function rh(m,v){o(m).forEach(function(S){v.db.objectStoreNames.contains(S)||(je&&console.debug("Dexie: Creating missing table",S),fu(v,S,m[S].primKey,m[S].indexes))})}function zs(m,v){m.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function Ka(m,v,S){var C={};return H(v.objectStoreNames,0).forEach(function(E){for(var M=S.objectStore(E),B=$r(js(ae=M.keyPath),ae||"",!0,!1,!!M.autoIncrement,ae&&typeof ae!="string",!0),z=[],K=0;K<M.indexNames.length;++K){var G=M.index(M.indexNames[K]),ae=G.keyPath,G=$r(G.name,ae,!!G.unique,!!G.multiEntry,!1,ae&&typeof ae!="string",!1);z.push(G)}C[E]=Ua(E,B,z)}),C}function Is(m,v,S){for(var C=S.db.objectStoreNames,E=0;E<C.length;++E){var M=C[E],B=S.objectStore(M);m._hasGetAll="getAll"in B;for(var z=0;z<B.indexNames.length;++z){var K,ae=B.indexNames[z],G=B.index(ae).keyPath,G=typeof G=="string"?G:"["+H(G).join("+")+"]";v[M]&&(K=v[M].idxByName[G])&&(K.name=ae,delete v[M].idxByName[G],v[M].idxByName[ae]=K)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function ih(m){return m.split(",").map(function(v,S){var E=v.split(":"),C=(C=E[1])==null?void 0:C.trim(),E=(v=E[0].trim()).replace(/([&*]|\+\+)/g,""),M=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return $r(E,M||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),c(M),S===0,C)})}Ga.prototype._createTableSchema=Ua,Ga.prototype._parseIndexSyntax=ih,Ga.prototype._parseStoresSpec=function(m,v){var S=this;o(m).forEach(function(C){if(m[C]!==null){var E=S._parseIndexSyntax(m[C]),M=E.shift();if(!M)throw new Fe.Schema("Invalid schema for table "+C+": "+m[C]);if(M.unique=!0,M.multi)throw new Fe.Schema("Primary key cannot be multiEntry*");E.forEach(function(B){if(B.auto)throw new Fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!B.keyPath)throw new Fe.Schema("Index must have a name and cannot be an empty string")}),M=S._createTableSchema(C,M,E),v[C]=M}})},Ga.prototype.stores=function(S){var v=this.db,S=(this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,S):S,v._versions),C={},E={};return S.forEach(function(M){h(C,M._cfg.storesSource),E=M._cfg.dbschema={},M._parseStoresSpec(C,E)}),v._dbSchema=E,Xl(v,[v._allTables,v,v.Transaction.prototype]),Rs(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],o(E),E),v._storeNames=o(E),this},Ga.prototype.upgrade=function(m){return this._cfg.contentUpgrade=rn(this._cfg.contentUpgrade||Pe,m),this};var Qd=Ga;function Ga(){}function du(m,v){var S=m._dbNamesDB;return S||(S=m._dbNamesDB=new Wr(Ul,{addons:[],indexedDB:m,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),S.table("dbnames")}function Ps(m){return m&&typeof m.databases=="function"}function pu(m){return cn(function(){return Re.letThrough=!0,m()})}function mu(m){return!("from"in m)}var Xn=function(m,v){var S;if(!this)return S=new Xn,m&&"d"in m&&h(S,m),S;h(this,arguments.length?{d:1,from:m,to:1<arguments.length?v:m}:{d:0})};function Wl(m,v,S){var C=yt(v,S);if(!isNaN(C)){if(0<C)throw RangeError();if(mu(m))return h(m,{from:v,to:S,d:1});var C=m.l,E=m.r;if(yt(S,m.from)<0)return C?Wl(C,v,S):m.l={from:v,to:S,d:1,l:null,r:null},lh(m);if(0<yt(v,m.to))return E?Wl(E,v,S):m.r={from:v,to:S,d:1,l:null,r:null},lh(m);yt(v,m.from)<0&&(m.from=v,m.l=null,m.d=E?E.d+1:1),0<yt(S,m.to)&&(m.to=S,m.r=null,m.d=m.l?m.l.d+1:1),v=!m.r,C&&!m.l&&ca(m,C),E&&v&&ca(m,E)}}function ca(m,v){mu(v)||(function S(C,E){var M=E.from,B=E.l,z=E.r;Wl(C,M,E.to),B&&S(C,B),z&&S(C,z)})(m,v)}function ah(m,v){var S=Hs(v),C=S.next();if(!C.done)for(var E=C.value,M=Hs(m),B=M.next(E.from),z=B.value;!C.done&&!B.done;){if(yt(z.from,E.to)<=0&&0<=yt(z.to,E.from))return!0;yt(E.from,z.from)<0?E=(C=S.next(z.from)).value:z=(B=M.next(E.from)).value}return!1}function Hs(m){var v=mu(m)?null:{s:0,n:m};return{next:function(S){for(var C=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,C)for(;v.n.l&&yt(S,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!C||yt(S,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function lh(m){var v,S,C,E=(((E=m.r)==null?void 0:E.d)||0)-(((E=m.l)==null?void 0:E.d)||0),E=1<E?"r":E<-1?"l":"";E&&(v=E=="r"?"l":"r",S=r({},m),C=m[E],m.from=C.from,m.to=C.to,m[E]=C[E],S[E]=C[v],(m[v]=S).d=gu(S)),m.d=gu(m)}function gu(S){var v=S.r,S=S.l;return(v?S?Math.max(v.d,S.d):v.d:S?S.d:0)+1}function qs(m,v){return o(v).forEach(function(S){m[S]?ca(m[S],v[S]):m[S]=(function C(E){var M,B,z={};for(M in E)g(E,M)&&(B=E[M],z[M]=!B||typeof B!="object"||J.has(B.constructor)?B:C(B));return z})(v[S])}),m}function yu(m,v){return m.all||v.all||Object.keys(m).some(function(S){return v[S]&&ah(v[S],m[S])})}b(Xn.prototype,((re={add:function(m){return ca(this,m),this},addKey:function(m){return Wl(this,m,m),this},addKeys:function(m){var v=this;return m.forEach(function(S){return Wl(v,S,S)}),this},hasKey:function(m){var v=Hs(this).next(m).value;return v&&yt(v.from,m)<=0&&0<=yt(v.to,m)}})[te]=function(){return Hs(this)},re));var ha={},xu={},vu=!1;function Us(m){qs(xu,m),vu||(vu=!0,setTimeout(function(){vu=!1,bu(xu,!(xu={}))},0))}function bu(m,v){v===void 0&&(v=!1);var S=new Set;if(m.all)for(var C=0,E=Object.values(ha);C<E.length;C++)sh(z=E[C],m,S,v);else for(var M in m){var B,z,M=/^idb\:\/\/(.*)\/(.*)\//.exec(M);M&&(B=M[1],M=M[2],z=ha["idb://".concat(B,"/").concat(M)])&&sh(z,m,S,v)}S.forEach(function(K){return K()})}function sh(m,v,S,C){for(var E=[],M=0,B=Object.entries(m.queries.query);M<B.length;M++){for(var z=B[M],K=z[0],ae=[],G=0,V=z[1];G<V.length;G++){var X=V[G];yu(v,X.obsSet)?X.subscribers.forEach(function(oe){return S.add(oe)}):C&&ae.push(X)}C&&E.push([K,ae])}if(C)for(var W=0,Y=E;W<Y.length;W++){var Q=Y[W],K=Q[0],ae=Q[1];m.queries.query[K]=ae}}function Xd(m){var v=m._state,S=m._deps.indexedDB;if(v.isBeingOpened||m.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Zt(v.dbOpenError):m});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var C=v.openCanceller,E=Math.round(10*m.verno),M=!1;function B(){if(v.openCanceller!==C)throw new Fe.DatabaseClosed("db.open() was cancelled")}function z(){return new He(function(X,W){if(B(),!S)throw new Fe.MissingAPI;var Y=m.name,Q=v.autoSchema||!E?S.open(Y):S.open(Y,E);if(!Q)throw new Fe.MissingAPI;Q.onerror=Br(W),Q.onblocked=an(m._fireOnBlocked),Q.onupgradeneeded=an(function(oe){var de;G=Q.transaction,v.autoSchema&&!m._options.allowEmptyDB?(Q.onerror=sa,G.abort(),Q.result.close(),(de=S.deleteDatabase(Y)).onsuccess=de.onerror=an(function(){W(new Fe.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):(G.onerror=Br(W),de=oe.oldVersion>Math.pow(2,62)?0:oe.oldVersion,V=de<1,m.idbdb=Q.result,M&&Bs(m,G),$l(m,de/10,G,W))},W),Q.onsuccess=an(function(){G=null;var oe,de,le,be,Ne,ze,Ie=m.idbdb=Q.result,Me=H(Ie.objectStoreNames);if(0<Me.length)try{var Ke=Ie.transaction((Ne=Me).length===1?Ne[0]:Ne,"readonly");if(v.autoSchema)ze=Ie,be=Ke,(le=m).verno=ze.version/10,be=le._dbSchema=Ka(0,ze,be),le._storeNames=H(ze.objectStoreNames,0),Rs(le,[le._allTables],o(be),be);else if(Is(m,m._dbSchema,Ke),de=Ke,((de=Ls(Ka(0,(oe=m).idbdb,de),oe._dbSchema)).add.length||de.change.some(function(Ue){return Ue.add.length||Ue.change.length}))&&!M)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ie.close(),E=Ie.version+1,M=!0,X(z());Ri(m,Ke)}catch{}ra.push(m),Ie.onversionchange=an(function(Ue){v.vcFired=!0,m.on("versionchange").fire(Ue)}),Ie.onclose=an(function(){m.close({disableAutoOpen:!1})}),V&&(Me=m._deps,Ne=Y,Ps(ze=Me.indexedDB)||Ne===Ul||du(ze,Me.IDBKeyRange).put({name:Ne}).catch(Pe)),X()},W)}).catch(function(X){switch(X?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),z();break;case"VersionError":if(0<E)return E=0,z()}return He.reject(X)})}var K,ae=v.dbReadyResolve,G=null,V=!1;return He.race([C,(typeof navigator>"u"?He.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(X){function W(){return indexedDB.databases().finally(X)}K=setInterval(W,100),W()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(z)]).then(function(){return B(),v.onReadyBeingFired=[],He.resolve(pu(function(){return m.on.ready.fire(m.vip)})).then(function X(){var W;if(0<v.onReadyBeingFired.length)return W=v.onReadyBeingFired.reduce(rn,Pe),v.onReadyBeingFired=[],He.resolve(pu(function(){return W(m.vip)})).then(X)})}).finally(function(){v.openCanceller===C&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(X){v.dbOpenError=X;try{G&&G.abort()}catch{}return C===v.openCanceller&&m._close(),Zt(X)}).finally(function(){v.openComplete=!0,ae()}).then(function(){var X;return V&&(X={},m.tables.forEach(function(W){W.schema.indexes.forEach(function(Y){Y.name&&(X["idb://".concat(m.name,"/").concat(W.name,"/").concat(Y.name)]=new Xn(-1/0,[[[]]]))}),X["idb://".concat(m.name,"/").concat(W.name,"/")]=X["idb://".concat(m.name,"/").concat(W.name,"/:dels")]=new Xn(-1/0,[[[]]])}),Qn(qa).fire(X),bu(X,!0)),m})}function Zl(m){function v(M){return m.next(M)}var S=E(v),C=E(function(M){return m.throw(M)});function E(M){return function(z){var z=M(z),K=z.value;return z.done?K:K&&typeof K.then=="function"?K.then(S,C):c(K)?Promise.all(K).then(S,C):S(K)}}return E(v)()}function Bi(m,v,S){for(var C=c(m)?m.slice():[m],E=0;E<S;++E)C.push(v);return C}var $d={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return r(r({},m),{table:function(C){var S=m.table(C),C=S.schema,E={},M=[];function B(X,W,Y){var le=Rn(X),Q=E[le]=E[le]||[],oe=X==null?0:typeof X=="string"?1:X.length,de=0<W,le=r(r({},Y),{name:de?"".concat(le,"(virtual-from:").concat(Y.name,")"):Y.name,lowLevelIndex:Y,isVirtual:de,keyTail:W,keyLength:oe,extractKey:Va(X),unique:!de&&Y.unique});return Q.push(le),le.isPrimaryKey||M.push(le),1<oe&&B(oe===2?X[0]:X.slice(0,oe-1),W+1,Y),Q.sort(function(be,Ne){return be.keyTail-Ne.keyTail}),le}var z=B(C.primaryKey.keyPath,0,C.primaryKey);E[":id"]=[z];for(var K=0,ae=C.indexes;K<ae.length;K++){var G=ae[K];B(G.keyPath,0,G)}function V(X){var W,Y=X.query.index;return Y.isVirtual?r(r({},X),{query:{index:Y.lowLevelIndex,range:(W=X.query.range,Y=Y.keyTail,{type:W.type===1?2:W.type,lower:Bi(W.lower,W.lowerOpen?m.MAX_KEY:m.MIN_KEY,Y),lowerOpen:!0,upper:Bi(W.upper,W.upperOpen?m.MIN_KEY:m.MAX_KEY,Y),upperOpen:!0})}}):X}return r(r({},S),{schema:r(r({},C),{primaryKey:z,indexes:M,getIndexByKeyPath:function(X){return(X=E[Rn(X)])&&X[0]}}),count:function(X){return S.count(V(X))},query:function(X){return S.query(V(X))},openCursor:function(X){var W=X.query.index,Y=W.keyTail,Q=W.keyLength;return W.isVirtual?S.openCursor(V(X)).then(function(de){return de&&oe(de)}):S.openCursor(X);function oe(de){return Object.create(de,{continue:{value:function(le){le!=null?de.continue(Bi(le,X.reverse?m.MAX_KEY:m.MIN_KEY,Y)):X.unique?de.continue(de.key.slice(0,Q).concat(X.reverse?m.MIN_KEY:m.MAX_KEY,Y)):de.continue()}},continuePrimaryKey:{value:function(le,be){de.continuePrimaryKey(Bi(le,m.MAX_KEY,Y),be)}},primaryKey:{get:function(){return de.primaryKey}},key:{get:function(){var le=de.key;return Q===1?le[0]:le.slice(0,Q)}},value:{get:function(){return de.value}}})}}})}})}};function Fs(m,v,S,C){return S=S||{},C=C||"",o(m).forEach(function(E){var M,B,z;g(v,E)?(M=m[E],B=v[E],typeof M=="object"&&typeof B=="object"&&M&&B?(z=se(M))!==se(B)?S[C+E]=v[E]:z==="Object"?Fs(M,B,S,C+E+"."):M!==B&&(S[C+E]=v[E]):M!==B&&(S[C+E]=v[E])):S[C+E]=void 0}),o(v).forEach(function(E){g(m,E)||(S[C+E]=v[E])}),S}function Vs(m,v){return v.type==="delete"?v.keys:v.keys||v.values.map(m.extractKey)}var oh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return r(r({},m),{table:function(v){var S=m.table(v),C=S.schema.primaryKey;return r(r({},S),{mutate:function(E){var M=Re.trans,B=M.table(v).hook,z=B.deleting,K=B.creating,ae=B.updating;switch(E.type){case"add":if(K.fire===Pe)break;return M._promise("readwrite",function(){return G(E)},!0);case"put":if(K.fire===Pe&&ae.fire===Pe)break;return M._promise("readwrite",function(){return G(E)},!0);case"delete":if(z.fire===Pe)break;return M._promise("readwrite",function(){return G(E)},!0);case"deleteRange":if(z.fire===Pe)break;return M._promise("readwrite",function(){return(function V(X,W,Y){return S.query({trans:X,values:!1,query:{index:C,range:W},limit:Y}).then(function(Q){var oe=Q.result;return G({type:"delete",keys:oe,trans:X}).then(function(de){return 0<de.numFailures?Promise.reject(de.failures[0]):oe.length<Y?{failures:[],numFailures:0,lastResult:void 0}:V(X,r(r({},W),{lower:oe[oe.length-1],lowerOpen:!0}),Y)})})})(E.trans,E.range,1e4)},!0)}return S.mutate(E);function G(V){var X,W,Y,Q=Re.trans,oe=V.keys||Vs(C,V);if(oe)return(V=V.type==="add"||V.type==="put"?r(r({},V),{keys:oe}):r({},V)).type!=="delete"&&(V.values=a([],V.values)),V.keys&&(V.keys=a([],V.keys)),X=S,Y=oe,((W=V).type==="add"?Promise.resolve([]):X.getMany({trans:W.trans,keys:Y,cache:"immutable"})).then(function(de){var le=oe.map(function(be,Ne){var ze,Ie,Me,Ke=de[Ne],Ue={onerror:null,onsuccess:null};return V.type==="delete"?z.fire.call(Ue,be,Ke,Q):V.type==="add"||Ke===void 0?(ze=K.fire.call(Ue,be,V.values[Ne],Q),be==null&&ze!=null&&(V.keys[Ne]=be=ze,C.outbound||U(V.values[Ne],C.keyPath,be))):(ze=Fs(Ke,V.values[Ne]),(Ie=ae.fire.call(Ue,ze,be,Ke,Q))&&(Me=V.values[Ne],Object.keys(Ie).forEach(function(_e){g(Me,_e)?Me[_e]=Ie[_e]:U(Me,_e,Ie[_e])}))),Ue});return S.mutate(V).then(function(be){for(var Ne=be.failures,ze=be.results,Ie=be.numFailures,be=be.lastResult,Me=0;Me<oe.length;++Me){var Ke=(ze||oe)[Me],Ue=le[Me];Ke==null?Ue.onerror&&Ue.onerror(Ne[Me]):Ue.onsuccess&&Ue.onsuccess(V.type==="put"&&de[Me]?V.values[Me]:Ke)}return{failures:Ne,results:ze,numFailures:Ie,lastResult:be}}).catch(function(be){return le.forEach(function(Ne){return Ne.onerror&&Ne.onerror(be)}),Promise.reject(be)})});throw new Error("Keys missing")}}})}})}};function ku(m,v,S){try{if(!v||v.keys.length<m.length)return null;for(var C=[],E=0,M=0;E<v.keys.length&&M<m.length;++E)yt(v.keys[E],m[M])===0&&(C.push(S?me(v.values[E]):v.values[E]),++M);return C.length===m.length?C:null}catch{return null}}var uh={stack:"dbcore",level:-1,create:function(m){return{table:function(v){var S=m.table(v);return r(r({},S),{getMany:function(C){var E;return C.cache?(E=ku(C.keys,C.trans._cache,C.cache==="clone"))?He.resolve(E):S.getMany(C).then(function(M){return C.trans._cache={keys:C.keys,values:C.cache==="clone"?me(M):M},M}):S.getMany(C)},mutate:function(C){return C.type!=="add"&&(C.trans._cache=null),S.mutate(C)}})}}}};function fa(m,v){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function ch(m,v){switch(m){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wd={stack:"dbcore",level:0,name:"Observability",create:function(m){var v=m.schema.name,S=new Xn(m.MIN_KEY,m.MAX_KEY);return r(r({},m),{transaction:function(C,E,M){if(Re.subscr&&E!=="readonly")throw new Fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return m.transaction(C,E,M)},table:function(C){function E(oe){var Q,oe=oe.query;return[Q=oe.index,new Xn((Q=(oe=oe.range).lower)!=null?Q:m.MIN_KEY,(Q=oe.upper)!=null?Q:m.MAX_KEY)]}var M=m.table(C),B=M.schema,z=B.primaryKey,K=B.indexes,ae=z.extractKey,G=z.outbound,V=z.autoIncrement&&K.filter(function(Y){return Y.compound&&Y.keyPath.includes(z.keyPath)}),X=r(r({},M),{mutate:function(Y){function Q(Ge){return Ge="idb://".concat(v,"/").concat(C,"/").concat(Ge),Ne[Ge]||(Ne[Ge]=new Xn)}var oe,de,le,be=Y.trans,Ne=Y.mutatedParts||(Y.mutatedParts={}),ze=Q(""),Ie=Q(":dels"),Me=Y.type,Ue=Y.type==="deleteRange"?[Y.range]:Y.type==="delete"?[Y.keys]:Y.values.length<50?[Vs(z,Y).filter(function(Ge){return Ge}),Y.values]:[],Ke=Ue[0],Ue=Ue[1],_e=Y.trans._cache;return c(Ke)?(ze.addKeys(Ke),(Me=Me==="delete"||Ke.length===Ue.length?ku(Ke,_e):null)||Ie.addKeys(Ke),(Me||Ue)&&(oe=Q,de=Me,le=Ue,B.indexes.forEach(function(Ge){var ht=oe(Ge.name||"");function xt(dt){return dt!=null?Ge.extractKey(dt):null}function nt(dt){Ge.multiEntry&&c(dt)?dt.forEach(function(Jt){return ht.addKey(Jt)}):ht.addKey(dt)}(de||le).forEach(function(dt,Gt){var hr=de&&xt(de[Gt]),Gt=le&&xt(le[Gt]);yt(hr,Gt)!==0&&(hr!=null&&nt(hr),Gt!=null)&&nt(Gt)})}))):Ke?(Ue={from:(_e=Ke.lower)!=null?_e:m.MIN_KEY,to:(Me=Ke.upper)!=null?Me:m.MAX_KEY},Ie.add(Ue),ze.add(Ue)):(ze.add(S),Ie.add(S),B.indexes.forEach(function(Ge){return Q(Ge.name).add(S)})),M.mutate(Y).then(function(Ge){return!Ke||Y.type!=="add"&&Y.type!=="put"||(ze.addKeys(Ge.results),V&&V.forEach(function(ht){for(var xt=Y.values.map(function(hr){return ht.extractKey(hr)}),nt=ht.keyPath.findIndex(function(hr){return hr===z.keyPath}),dt=0,Jt=Ge.results.length;dt<Jt;++dt)xt[dt][nt]=Ge.results[dt];Q(ht.name).addKeys(xt)})),be.mutatedParts=qs(be.mutatedParts||{},Ne),Ge})}}),W={get:function(Y){return[z,new Xn(Y.key)]},getMany:function(Y){return[z,new Xn().addKeys(Y.keys)]},count:E,query:E,openCursor:E};return o(W).forEach(function(Y){X[Y]=function(Q){var oe=Re.subscr,de=!!oe,le=fa(Re,M)&&ch(Y,Q)?Q.obsSet={}:oe;if(de){var be,oe=function(Ue){return Ue="idb://".concat(v,"/").concat(C,"/").concat(Ue),le[Ue]||(le[Ue]=new Xn)},Ne=oe(""),ze=oe(":dels"),de=W[Y](Q),Ie=de[0],de=de[1];if((Y==="query"&&Ie.isPrimaryKey&&!Q.values?ze:oe(Ie.name||"")).add(de),!Ie.isPrimaryKey){if(Y!=="count")return be=Y==="query"&&G&&Q.values&&M.query(r(r({},Q),{values:!1})),M[Y].apply(this,arguments).then(function(Ue){if(Y==="query"){if(G&&Q.values)return be.then(function(xt){return xt=xt.result,Ne.addKeys(xt),Ue});var _e=Q.values?Ue.result.map(ae):Ue.result;(Q.values?Ne:ze).addKeys(_e)}else{var Ge,ht;if(Y==="openCursor")return ht=Q.values,(Ge=Ue)&&Object.create(Ge,{key:{get:function(){return ze.addKey(Ge.primaryKey),Ge.key}},primaryKey:{get:function(){var xt=Ge.primaryKey;return ze.addKey(xt),xt}},value:{get:function(){return ht&&Ne.addKey(Ge.primaryKey),Ge.value}}})}return Ue});ze.add(S)}}return M[Y].apply(this,arguments)}}),X}})}};function hh(m,v,S){var C;return S.numFailures===0?v:v.type==="deleteRange"||(C=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,S.numFailures===C)?null:(C=r({},v),c(C.keys)&&(C.keys=C.keys.filter(function(E,M){return!(M in S.failures)})),"values"in C&&c(C.values)&&(C.values=C.values.filter(function(E,M){return!(M in S.failures)})),C)}function Ks(m,v){return S=m,((C=v).lower===void 0||(C.lowerOpen?0<yt(S,C.lower):0<=yt(S,C.lower)))&&(S=m,(C=v).upper===void 0||(C.upperOpen?yt(S,C.upper)<0:yt(S,C.upper)<=0));var S,C}function wu(m,v,S,C,E,M){var B,z,K,ae,G,V;return!S||S.length===0||(B=v.query.index,z=B.multiEntry,K=v.query.range,ae=C.schema.primaryKey.extractKey,G=B.extractKey,V=(B.lowLevelIndex||B).extractKey,(C=S.reduce(function(X,W){var Y=X,Q=[];if(W.type==="add"||W.type==="put")for(var oe=new Xn,de=W.values.length-1;0<=de;--de){var le,be=W.values[de],Ne=ae(be);!oe.hasKey(Ne)&&(le=G(be),z&&c(le)?le.some(function(Ue){return Ks(Ue,K)}):Ks(le,K))&&(oe.addKey(Ne),Q.push(be))}switch(W.type){case"add":var ze=new Xn().addKeys(v.values?X.map(function(_e){return ae(_e)}):X),Y=X.concat(v.values?Q.filter(function(_e){return _e=ae(_e),!ze.hasKey(_e)&&(ze.addKey(_e),!0)}):Q.map(function(_e){return ae(_e)}).filter(function(_e){return!ze.hasKey(_e)&&(ze.addKey(_e),!0)}));break;case"put":var Ie=new Xn().addKeys(W.values.map(function(_e){return ae(_e)}));Y=X.filter(function(_e){return!Ie.hasKey(v.values?ae(_e):_e)}).concat(v.values?Q:Q.map(function(_e){return ae(_e)}));break;case"delete":var Me=new Xn().addKeys(W.keys);Y=X.filter(function(_e){return!Me.hasKey(v.values?ae(_e):_e)});break;case"deleteRange":var Ke=W.range;Y=X.filter(function(_e){return!Ks(ae(_e),Ke)})}return Y},m))===m)?m:(C.sort(function(X,W){return yt(V(X),V(W))||yt(ae(X),ae(W))}),v.limit&&v.limit<1/0&&(C.length>v.limit?C.length=v.limit:m.length===v.limit&&C.length<v.limit&&(E.dirty=!0)),M?Object.freeze(C):C)}function Ya(m,v){return yt(m.lower,v.lower)===0&&yt(m.upper,v.upper)===0&&!!m.lowerOpen==!!v.lowerOpen&&!!m.upperOpen==!!v.upperOpen}function Jl(m,v){return((S,C,E,M)=>{if(S===void 0)return C!==void 0?-1:0;if(C===void 0)return 1;if((S=yt(S,C))===0){if(E&&M)return 0;if(E)return 1;if(M)return-1}return S})(m.lower,v.lower,m.lowerOpen,v.lowerOpen)<=0&&0<=((S,C,E,M)=>{if(S===void 0)return C!==void 0?1:0;if(C===void 0)return-1;if((S=yt(S,C))===0){if(E&&M)return 0;if(E)return-1;if(M)return 1}return S})(m.upper,v.upper,m.upperOpen,v.upperOpen)}function Zd(m,v,S,C){m.subscribers.add(S),C.addEventListener("abort",function(){var E,M;m.subscribers.delete(S),m.subscribers.size===0&&(E=m,M=v,setTimeout(function(){E.subscribers.size===0&&Ce(M,E)},3e3))})}var Gs={stack:"dbcore",level:0,name:"Cache",create:function(m){var v=m.schema.name;return r(r({},m),{transaction:function(S,C,E){var M,B,z=m.transaction(S,C,E);return C==="readwrite"&&(E=(M=new AbortController).signal,z.addEventListener("abort",(B=function(K){return function(){if(M.abort(),C==="readwrite"){for(var ae=new Set,G=0,V=S;G<V.length;G++){var X=V[G],W=ha["idb://".concat(v,"/").concat(X)];if(W){var Y=m.table(X),Q=W.optimisticOps.filter(function(Ge){return Ge.trans===z});if(z._explicit&&K&&z.mutatedParts)for(var oe=0,de=Object.values(W.queries.query);oe<de.length;oe++)for(var le=0,be=(Ie=de[oe]).slice();le<be.length;le++)yu((Me=be[le]).obsSet,z.mutatedParts)&&(Ce(Ie,Me),Me.subscribers.forEach(function(Ge){return ae.add(Ge)}));else if(0<Q.length){W.optimisticOps=W.optimisticOps.filter(function(Ge){return Ge.trans!==z});for(var Ne=0,ze=Object.values(W.queries.query);Ne<ze.length;Ne++)for(var Ie,Me,Ke,Ue=0,_e=(Ie=ze[Ne]).slice();Ue<_e.length;Ue++)(Me=_e[Ue]).res!=null&&z.mutatedParts&&(K&&!Me.dirty?(Ke=Object.isFrozen(Me.res),Ke=wu(Me.res,Me.req,Q,Y,Me,Ke),Me.dirty?(Ce(Ie,Me),Me.subscribers.forEach(function(Ge){return ae.add(Ge)})):Ke!==Me.res&&(Me.res=Ke,Me.promise=He.resolve({result:Ke}))):(Me.dirty&&Ce(Ie,Me),Me.subscribers.forEach(function(Ge){return ae.add(Ge)})))}}}ae.forEach(function(Ge){return Ge()})}}})(!1),{signal:E}),z.addEventListener("error",B(!1),{signal:E}),z.addEventListener("complete",B(!0),{signal:E})),z},table:function(S){var C=m.table(S),E=C.schema.primaryKey;return r(r({},C),{mutate:function(M){var B,z=Re.trans;return!E.outbound&&z.db._options.cache!=="disabled"&&!z.explicit&&z.idbtrans.mode==="readwrite"&&(B=ha["idb://".concat(v,"/").concat(S)])?(z=C.mutate(M),M.type!=="add"&&M.type!=="put"||!(50<=M.values.length||Vs(E,M).some(function(K){return K==null}))?(B.optimisticOps.push(M),M.mutatedParts&&Us(M.mutatedParts),z.then(function(K){0<K.numFailures&&(Ce(B.optimisticOps,M),(K=hh(0,M,K))&&B.optimisticOps.push(K),M.mutatedParts)&&Us(M.mutatedParts)}),z.catch(function(){Ce(B.optimisticOps,M),M.mutatedParts&&Us(M.mutatedParts)})):z.then(function(K){var ae=hh(0,r(r({},M),{values:M.values.map(function(G,V){var X;return K.failures[V]?G:(U(X=(X=E.keyPath)!=null&&X.includes(".")?me(G):r({},G),E.keyPath,K.results[V]),X)})}),K);B.optimisticOps.push(ae),queueMicrotask(function(){return M.mutatedParts&&Us(M.mutatedParts)})}),z):C.mutate(M)},query:function(M){var B,z,K,ae,G,V,X;return fa(Re,C)&&ch("query",M)?(B=((K=Re.trans)==null?void 0:K.db._options.cache)==="immutable",z=(K=Re).requery,K=K.signal,V=((W,Y,Q,oe)=>{var de=ha["idb://".concat(W,"/").concat(Y)];if(!de)return[];if(!(W=de.queries[Q]))return[null,!1,de,null];var le=W[(oe.query?oe.query.index.name:null)||""];if(!le)return[null,!1,de,null];switch(Q){case"query":var be=le.find(function(Ne){return Ne.req.limit===oe.limit&&Ne.req.values===oe.values&&Ya(Ne.req.query.range,oe.query.range)});return be?[be,!0,de,le]:[le.find(function(Ne){return("limit"in Ne.req?Ne.req.limit:1/0)>=oe.limit&&(!oe.values||Ne.req.values)&&Jl(Ne.req.query.range,oe.query.range)}),!1,de,le];case"count":return be=le.find(function(Ne){return Ya(Ne.req.query.range,oe.query.range)}),[be,!!be,de,le]}})(v,S,"query",M),X=V[0],ae=V[2],G=V[3],X&&V[1]?X.obsSet=M.obsSet:(V=C.query(M).then(function(W){var Y=W.result;if(X&&(X.res=Y),B){for(var Q=0,oe=Y.length;Q<oe;++Q)Object.freeze(Y[Q]);Object.freeze(Y)}else W.result=me(Y);return W}).catch(function(W){return G&&X&&Ce(G,X),Promise.reject(W)}),X={obsSet:M.obsSet,promise:V,subscribers:new Set,type:"query",req:M,dirty:!1},G?G.push(X):(G=[X],(ae=ae||(ha["idb://".concat(v,"/").concat(S)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[M.query.index.name||""]=G)),Zd(X,G,z,K),X.promise.then(function(W){return{result:wu(W.result,M,ae?.optimisticOps,C,X,B)}})):C.query(M)}})}})}};function es(m,v){return new Proxy(m,{get:function(S,C,E){return C==="db"?v:Reflect.get(S,C,E)}})}gn.prototype.version=function(m){if(isNaN(m)||m<.1)throw new Fe.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new Fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var v=this._versions,S=v.filter(function(C){return C._cfg.version===m})[0];return S||(S=new this.Version(m),v.push(S),v.sort(hu),S.stores({}),this._state.autoSchema=!1),S},gn.prototype._whenReady=function(m){var v=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?m():new He(function(S,C){if(v._state.openComplete)return C(new Fe.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void C(new Fe.DatabaseClosed);v.open().catch(Pe)}v._state.dbReadyPromise.then(S,C)}).then(m)},gn.prototype.use=function(E){var v=E.stack,S=E.create,C=E.level,E=E.name,M=(E&&this.unuse({stack:v,name:E}),this._middlewares[v]||(this._middlewares[v]=[]));return M.push({stack:v,create:S,level:C??10,name:E}),M.sort(function(B,z){return B.level-z.level}),this},gn.prototype.unuse=function(m){var v=m.stack,S=m.name,C=m.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(E){return C?E.create!==C:!!S&&E.name!==S})),this},gn.prototype.open=function(){var m=this;return Or(wt,function(){return Xd(m)})},gn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var m=this._state,v=ra.indexOf(this);if(0<=v&&ra.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new He(function(S){m.dbReadyResolve=S}),m.openCanceller=new He(function(S,C){m.cancelOpen=C}))},gn.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,S=this._state;v?(S.isBeingOpened&&S.cancelOpen(new Fe.DatabaseClosed),this._close(),S.autoOpen=!1,S.dbOpenError=new Fe.DatabaseClosed):(this._close(),S.autoOpen=this._options.autoOpen||S.isBeingOpened,S.openComplete=!1,S.dbOpenError=null)},gn.prototype.delete=function(m){var v=this,S=(m===void 0&&(m={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),C=this._state;return new He(function(E,M){function B(){v.close(m);var z=v._deps.indexedDB.deleteDatabase(v.name);z.onsuccess=an(function(){var K,ae,G;K=v._deps,ae=v.name,Ps(G=K.indexedDB)||ae===Ul||du(G,K.IDBKeyRange).delete(ae).catch(Pe),E()}),z.onerror=Br(M),z.onblocked=v._fireOnBlocked}if(S)throw new Fe.InvalidArgument("Invalid closeOptions argument to db.delete()");C.isBeingOpened?C.dbReadyPromise.then(B):B()})},gn.prototype.backendDB=function(){return this.idbdb},gn.prototype.isOpen=function(){return this.idbdb!==null},gn.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},gn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gn.prototype,"tables",{get:function(){var m=this;return o(this._allTables).map(function(v){return m._allTables[v]})},enumerable:!1,configurable:!0}),gn.prototype.transaction=function(){var m=function(v,S,C){var E=arguments.length;if(E<2)throw new Fe.InvalidArgument("Too few arguments");for(var M=new Array(E-1);--E;)M[E-1]=arguments[E];return C=M.pop(),[v,L(M),C]}.apply(this,arguments);return this._transaction.apply(this,m)},gn.prototype._transaction=function(m,v,S){var C,E,M=this,B=Re.trans,z=(B&&B.db===this&&m.indexOf("!")===-1||(B=null),m.indexOf("?")!==-1);m=m.replace("!","").replace("?","");try{if(E=v.map(function(ae){if(ae=ae instanceof M.Table?ae.name:ae,typeof ae!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ae}),m=="r"||m===gi)C=gi;else{if(m!="rw"&&m!=ji)throw new Fe.InvalidArgument("Invalid transaction mode: "+m);C=ji}if(B){if(B.mode===gi&&C===ji){if(!z)throw new Fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");B=null}B&&E.forEach(function(ae){if(B&&B.storeNames.indexOf(ae)===-1){if(!z)throw new Fe.SubTransaction("Table "+ae+" not included in parent transaction.");B=null}}),z&&B&&!B.active&&(B=null)}}catch(ae){return B?B._promise(null,function(G,V){V(ae)}):Zt(ae)}var K=function ae(G,V,X,W,Y){return He.resolve().then(function(){var le=Re.transless||Re,Q=G._createTransaction(V,X,G._dbSchema,W),le=(Q.explicit=!0,{trans:Q,transless:le});if(W)Q.idbtrans=W.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,G._state.PR1398_maxLoop=3}catch(be){return be.name===ft.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return ae(G,V,X,null,Y)})):Zt(be)}var oe,de=Te(Y),le=(de&&En(),He.follow(function(){var be;(oe=Y.call(Q,Q))&&(de?(be=gr.bind(null,null),oe.then(be,be)):typeof oe.next=="function"&&typeof oe.throw=="function"&&(oe=Zl(oe)))},le));return(oe&&typeof oe.then=="function"?He.resolve(oe).then(function(be){return Q.active?be:Zt(new Fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):le.then(function(){return oe})).then(function(be){return W&&Q._resolve(),Q._completion.then(function(){return be})}).catch(function(be){return Q._reject(be),Zt(be)})})}.bind(null,this,C,E,B,S);return B?B._promise(C,K,"lock"):Re.trans?Or(Re.transless,function(){return M._whenReady(K)}):this._whenReady(K)},gn.prototype.table=function(m){if(g(this._allTables,m))return this._allTables[m];throw new Fe.InvalidTable("Table ".concat(m," does not exist"))};var Wr=gn;function gn(m,v){var S,C,E,M,B,z=this,K=(this._middlewares={},this.verno=0,gn.dependencies),K=(this._options=v=r({addons:gn.addons,autoOpen:!0,indexedDB:K.indexedDB,IDBKeyRange:K.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),ae=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pe,dbReadyPromise:null,cancelOpen:Pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),G=(ae.dbReadyPromise=new He(function(V){ae.dbReadyResolve=V}),ae.openCanceller=new He(function(V,X){ae.cancelOpen=X}),this._state=ae,this.name=m,this.on=Kl(this,"populate","blocked","versionchange","close",{ready:[rn,Pe]}),this.once=function(V,X){var W=function(){for(var Y=[],Q=0;Q<arguments.length;Q++)Y[Q]=arguments[Q];z.on(V).unsubscribe(W),X.apply(z,Y)};return z.on(V,W)},this.on.ready.subscribe=R(this.on.ready.subscribe,function(V){return function(X,W){gn.vip(function(){var Y,Q=z._state;Q.openComplete?(Q.dbOpenError||He.resolve().then(X),W&&V(X)):Q.onReadyBeingFired?(Q.onReadyBeingFired.push(X),W&&V(X)):(V(X),Y=z,W||V(function oe(){Y.on.ready.unsubscribe(X),Y.on.ready.unsubscribe(oe)}))})}}),this.Collection=(S=this,Yn(Gd.prototype,function(oe,Q){this.db=S;var W=au,Y=null;if(Q)try{W=Q()}catch(le){Y=le}var Q=oe._ctx,oe=Q.table,de=oe.hook.reading.fire;this._ctx={table:oe,index:Q.index,isPrimKey:!Q.index||oe.schema.primKey.keyPath&&Q.index===oe.schema.primKey.name,range:W,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:Q.or,valueMapper:de!==De?de:null}})),this.Table=(C=this,Yn(lu.prototype,function(V,X,W){this.db=C,this._tx=W,this.name=V,this.schema=X,this.hook=C._allTables[V]?C._allTables[V].hook:Kl(null,{creating:[Tt,Pe],reading:[lt,De],updating:[vt,Pe],deleting:[kt,Pe]})})),this.Transaction=(E=this,Yn(cu.prototype,function(V,X,W,Y,Q){var oe=this;V!=="readonly"&&X.forEach(function(de){de=(de=W[de])==null?void 0:de.yProps,de&&(X=X.concat(de.map(function(le){return le.updatesTable})))}),this.db=E,this.mode=V,this.storeNames=X,this.schema=W,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=Kl(this,"complete","error","abort"),this.parent=Q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new He(function(de,le){oe._resolve=de,oe._reject=le}),this._completion.then(function(){oe.active=!1,oe.on.complete.fire()},function(de){var le=oe.active;return oe.active=!1,oe.on.error.fire(de),oe.parent?oe.parent._reject(de):le&&oe.idbtrans&&oe.idbtrans.abort(),Zt(de)})})),this.Version=(M=this,Yn(Qd.prototype,function(V){this.db=M,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(B=this,Yn(la.prototype,function(V,X,W){if(this.db=B,this._ctx={table:V,index:X===":id"?null:X,or:W},this._cmp=this._ascending=yt,this._descending=function(Y,Q){return yt(Q,Y)},this._max=function(Y,Q){return 0<yt(Y,Q)?Y:Q},this._min=function(Y,Q){return yt(Y,Q)<0?Y:Q},this._IDBKeyRange=B._deps.IDBKeyRange,!this._IDBKeyRange)throw new Fe.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(z.name,"'. Closing db now to resume the delete request.")),z.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(z.name,"') was blocked")):console.warn("Upgrade '".concat(z.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=Fa(v.IDBKeyRange),this._createTransaction=function(V,X,W,Y){return new z.Transaction(V,X,W,z._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(V){z.on("blocked").fire(V),ra.filter(function(X){return X.name===z.name&&X!==z&&!X._state.vcFired}).map(function(X){return X.on("versionchange").fire(V)})},this.use(uh),this.use(Gs),this.use(Wd),this.use($d),this.use(oh),new Proxy(this,{get:function(V,X,W){var Y;return X==="_vip"||(X==="table"?function(Q){return es(z.table(Q),G)}:(Y=Reflect.get(V,X,W))instanceof lu?es(Y,G):X==="tables"?Y.map(function(Q){return es(Q,G)}):X==="_createTransaction"?function(){return es(Y.apply(this,arguments),G)}:Y)}}));this.vip=G,K.forEach(function(V){return V(z)})}var Qa,da=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",fh=(Ys.prototype.subscribe=function(m,v,S){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:v,complete:S})},Ys.prototype[da]=function(){return this},Ys);function Ys(m){this._subscribe=m}try{Qa={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Qa={indexedDB:null,IDBKeyRange:null}}function dh(m){var v,S=!1,C=new fh(function(E){var M=Te(m),B,z=!1,K={},ae={},G={get closed(){return z},unsubscribe:function(){z||(z=!0,B&&B.abort(),V&&Qn.storagemutated.unsubscribe(W))}},V=(E.start&&E.start(G),!1),X=function(){return Di(Y)},W=function(Q){qs(K,Q),yu(ae,K)&&X()},Y=function(){var Q,oe,de;!z&&Qa.indexedDB&&(K={},Q={},B&&B.abort(),B=new AbortController,de=(le=>{var be=Ni();try{M&&En();var Ne=cn(m,le);return Ne=M?Ne.finally(gr):Ne}finally{be&&Yr()}})(oe={subscr:Q,signal:B.signal,requery:X,querier:m,trans:null}),Promise.resolve(de).then(function(le){S=!0,v=le,z||oe.signal.aborted||(K={},(be=>{for(var Ne in be)if(g(be,Ne))return;return 1})(ae=Q)||V||(Qn(qa,W),V=!0),Di(function(){return!z&&E.next&&E.next(le)}))},function(le){S=!1,["DatabaseClosedError","AbortError"].includes(le?.name)||z||Di(function(){z||E.error&&E.error(le)})}))};return setTimeout(X,0),G});return C.hasValue=function(){return S},C.getValue=function(){return v},C}var pa=Wr;function Su(m){var v=Li;try{Li=!0,Qn.storagemutated.fire(m),bu(m,!0)}finally{Li=v}}b(pa,r(r({},Ee),{delete:function(m){return new pa(m,{addons:[]}).delete()},exists:function(m){return new pa(m,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return v=pa.dependencies,S=v.indexedDB,v=v.IDBKeyRange,(Ps(S)?Promise.resolve(S.databases()).then(function(C){return C.map(function(E){return E.name}).filter(function(E){return E!==Ul})}):du(S,v).toCollection().primaryKeys()).then(m)}catch{return Zt(new Fe.MissingAPI)}var v,S},defineClass:function(){return function(m){h(this,m)}},ignoreTransaction:function(m){return Re.trans?Or(Re.transless,m):m()},vip:pu,async:function(m){return function(){try{var v=Zl(m.apply(this,arguments));return v&&typeof v.then=="function"?v:He.resolve(v)}catch(S){return Zt(S)}}},spawn:function(m,v,S){try{var C=Zl(m.apply(S,v||[]));return C&&typeof C.then=="function"?C:He.resolve(C)}catch(E){return Zt(E)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(m,v){return m=He.resolve(typeof m=="function"?pa.ignoreTransaction(m):m).timeout(v||6e4),Re.trans?Re.trans.waitFor(m):m},Promise:He,debug:{get:function(){return je},set:function(m){bt(m)}},derive:N,extend:h,props:b,override:R,Events:Kl,on:Qn,liveQuery:dh,extendObservabilitySet:qs,getByKeyPath:I,setByKeyPath:U,delByKeyPath:function(m,v){typeof v=="string"?U(m,v,void 0):"length"in v&&[].map.call(v,function(S){U(m,S,void 0)})},shallowClone:ye,deepClone:me,getObjectDiff:Fs,cmp:yt,asap:Z,minKey:-1/0,addons:[],connections:ra,errnames:ft,dependencies:Qa,cache:ha,semVer:"4.3.0",version:"4.3.0".split(".").map(function(m){return parseInt(m)}).reduce(function(m,v,S){return m+v/Math.pow(10,2*S)})})),pa.maxKey=Fa(pa.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Qn(qa,function(m){Li||(m=new CustomEvent(oa,{detail:m}),Li=!0,dispatchEvent(m),Li=!1)}),addEventListener(oa,function(m){m=m.detail,Li||Su(m)}));var Xa,Li=!1,cr=function(){};return typeof BroadcastChannel<"u"&&((cr=function(){(Xa=new BroadcastChannel(oa)).onmessage=function(m){return m.data&&Su(m.data)}})(),typeof Xa.unref=="function"&&Xa.unref(),Qn(qa,function(m){Li||Xa.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!Wr.disableBfCache&&m.persisted){je&&console.debug("Dexie: handling persisted pagehide"),Xa?.close();for(var v=0,S=ra;v<S.length;v++)S[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!Wr.disableBfCache&&m.persisted&&(je&&console.debug("Dexie: handling persisted pageshow"),cr(),Su({all:new Xn(-1/0,[[]])}))})),He.rejectionMapper=function(m,v){return!m||m instanceof Qe||m instanceof TypeError||m instanceof SyntaxError||!m.name||!Ye[m.name]?m:(v=new Ye[m.name](v||m.message,m),"stack"in m&&A(v,"stack",{get:function(){return this.inner.stack}}),v)},bt(je),r(Wr,Object.freeze({__proto__:null,Dexie:Wr,Entity:eh,PropModification:Ha,RangeSet:Xn,add:function(m){return new Ha({add:m})},cmp:yt,default:Wr,liveQuery:dh,mergeRanges:ca,rangesOverlap:ah,remove:function(m){return new Ha({remove:m})},replacePrefix:function(m,v){return new Ha({replacePrefix:[m,v]})}}),{default:Wr}),Wr})})(zf)),zf.exports}var y4=g4();const _g=Sd(y4),Vb=Symbol.for("Dexie"),Gf=globalThis[Vb]||(globalThis[Vb]=_g);if(_g.semVer!==Gf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_g.semVer} and ${Gf.semVer}`);const{liveQuery:KB,mergeRanges:GB,rangesOverlap:YB,RangeSet:QB,cmp:XB,Entity:$B,PropModification:WB,replacePrefix:ZB,add:JB,remove:eL,DexieYProvider:tL}=Gf,_o=[{id:"image",label:"Image",icon:"Image",description:"Character avatar image"},{id:"name",label:"Name",icon:"Type",description:"Character name"},{id:"description",label:"Description",icon:"FileText",description:"Character description"},{id:"first_mes",label:"First Message",icon:"MessageCircle",description:"First greeting message"},{id:"alternate_greetings",label:"Greetings",icon:"Greeting",description:"Alternate greetings"},{id:"mes_example",label:"Examples",icon:"MessagesSquare",description:"Message examples"},{id:"scenario",label:"Scenario",icon:"Map",description:"Roleplay scenario"},{id:"physical_description",label:"Appearance",icon:"Eye",description:"Physical description"},{id:"personality",label:"Personality",icon:"User",description:"Personality traits"},{id:"system_prompt",label:"System",icon:"Terminal",description:"System prompt"},{id:"post_history_instructions",label:"Post-History",icon:"History",description:"Post-history instructions"},{id:"lorebook",label:"Lorebook",icon:"Book",description:"Character lore entries"},{id:"creator",label:"Creator",icon:"UserCircle",description:"Character creator name"},{id:"creator_notes",label:"Creator Notes",icon:"NotebookPen",description:"Notes from the creator (supports CSS)"},{id:"tags",label:"Tags",icon:"Tags",description:"Character tags (comma-separated)"},{id:"character_version",label:"Version",icon:"Tag",description:"Character version identifier"},{id:"extensions",label:"Extensions",icon:"Puzzle",description:"Extension data"},{id:"avatar",label:"Avatar URL",icon:"Link",description:"Character avatar URL (CharHub, etc.)"}],rw={ui:{theme:"system",editorFontSize:16,sidebarWidth:280},version:1},nr=[];for(let n=0;n<256;++n)nr.push((n+256).toString(16).slice(1));function x4(n,e=0){return(nr[n[e+0]]+nr[n[e+1]]+nr[n[e+2]]+nr[n[e+3]]+"-"+nr[n[e+4]]+nr[n[e+5]]+"-"+nr[n[e+6]]+nr[n[e+7]]+"-"+nr[n[e+8]]+nr[n[e+9]]+"-"+nr[n[e+10]]+nr[n[e+11]]+nr[n[e+12]]+nr[n[e+13]]+nr[n[e+14]]+nr[n[e+15]]).toLowerCase()}let qm;const v4=new Uint8Array(16);function b4(){if(!qm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qm=crypto.getRandomValues.bind(crypto)}return qm(v4)}const k4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kb={randomUUID:k4};function w4(n,e,t){n=n||{};const r=n.random??n.rng?.()??b4();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,x4(r)}function Um(n,e,t){return Kb.randomUUID&&!n?Kb.randomUUID():w4(n)}class S4 extends Gf{characters;settings;constructor(){super("character-vault-db"),this.version(1).stores({characters:"id, name, updatedAt, createdAt",settings:"id"})}async getAllCharacters(){return this.characters.orderBy("updatedAt").reverse().toArray()}async getCharacter(e){return this.characters.get(e)}async searchCharacters(e){const t=e.toLowerCase();return this.characters.filter(r=>r.name.toLowerCase().includes(t)).toArray()}async createCharacter(e){const t=new Date().toISOString(),a={id:Um(),name:e.name,imageData:e.imageData||"",data:{spec:{name:e.name,description:e.data?.spec?.description||"",personality:e.data?.spec?.personality||"",scenario:e.data?.spec?.scenario||"",first_mes:e.data?.spec?.first_mes||"",mes_example:e.data?.spec?.mes_example||"",system_prompt:e.data?.spec?.system_prompt||"",post_history_instructions:e.data?.spec?.post_history_instructions||"",alternate_greetings:e.data?.spec?.alternate_greetings||[],physical_description:e.data?.spec?.physical_description||"",avatar:e.data?.spec?.avatar,creator_notes:e.data?.spec?.creator_notes,creator:e.data?.spec?.creator,character_version:e.data?.spec?.character_version,tags:e.data?.spec?.tags},characterBook:e.data?.characterBook,extensions:e.data?.extensions||{}},version:1,createdAt:t,updatedAt:t,lastOpenedAt:t};return await this.characters.add(a),a}async updateCharacter(e,t){const r=await this.characters.get(e);if(!r)throw new Error(`Character with ID "${e}" not found`);const a=new Date().toISOString(),s={...r,name:t.name??r.name,imageData:t.imageData??r.imageData,data:{spec:{...r.data.spec,...t.data?.spec},characterBook:t.data?.characterBook??r.data.characterBook,extensions:t.data?.extensions??r.data.extensions},updatedAt:a};return await this.characters.put(s),s}async updateSpecField(e,t,r){const a=await this.characters.get(e);if(!a)throw new Error(`Character with ID "${e}" not found`);const s=new Date().toISOString(),o={...a,data:{...a.data,spec:{...a.data.spec,[t]:r}},updatedAt:s};return await this.characters.put(o),o}async updateCharacterImage(e,t){return this.updateCharacter(e,{imageData:t})}async deleteCharacter(e){await this.characters.delete(e)}async duplicateCharacter(e,t){const r=await this.characters.get(e);if(!r)throw new Error(`Character with ID "${e}" not found`);const a=new Date().toISOString(),s=Um(),o={...r,id:s,name:t,data:{...r.data,spec:{...r.data.spec,name:t}},createdAt:a,updatedAt:a,lastOpenedAt:a};return await this.characters.add(o),o}async updateLastOpened(e){const t=new Date().toISOString();await this.characters.update(e,{lastOpenedAt:t})}async getSettings(){const e=await this.settings.get("app-settings");if(!e){const t={...rw,id:"app-settings"};return await this.settings.add(t),t}return e}async updateSettings(e){const t=await this.getSettings(),r={...t,...e,ui:{...t.ui,...e.ui}};return await this.settings.put(r),r}async importCharacter(e){const t=new Date().toISOString(),a={id:Um(),name:e.name||"Imported Character",imageData:e.imageData||"",data:{spec:{name:e.data?.spec?.name||e.name||"Imported Character",description:e.data?.spec?.description||"",personality:e.data?.spec?.personality||"",scenario:e.data?.spec?.scenario||"",first_mes:e.data?.spec?.first_mes||"",mes_example:e.data?.spec?.mes_example||"",system_prompt:e.data?.spec?.system_prompt||"",post_history_instructions:e.data?.spec?.post_history_instructions||"",alternate_greetings:e.data?.spec?.alternate_greetings||[],physical_description:e.data?.spec?.physical_description||"",avatar:e.data?.spec?.avatar,creator_notes:e.data?.spec?.creator_notes,creator:e.data?.spec?.creator,character_version:e.data?.spec?.character_version,tags:e.data?.spec?.tags},characterBook:e.data?.characterBook,extensions:e.data?.extensions||{}},version:1,createdAt:t,updatedAt:t,lastOpenedAt:t};return await this.characters.add(a),a}}const Yt=new S4;function C4(){const[n,e]=q.useState([]),[t,r]=q.useState(null),[a,s]=q.useState(!0),[o,c]=q.useState(null),[h,d]=q.useState(null),p=q.useRef(new Map);q.useEffect(()=>{async function I(){try{s(!0);const[U,ye]=await Promise.all([Yt.getAllCharacters(),Yt.getSettings()]);e(U),d(ye)}catch(U){c(U instanceof Error?U:new Error("Failed to load characters"))}finally{s(!1)}}I()},[]);const g=q.useCallback(async()=>{try{const I=await Yt.getAllCharacters();e(I)}catch(I){c(I instanceof Error?I:new Error("Failed to refresh characters"))}},[]),b=q.useCallback(async I=>{const U=await Yt.createCharacter(I);return e(ye=>[U,...ye]),r(U),h&&(await Yt.updateSettings({lastActiveCharacterId:U.id}),d({...h,lastActiveCharacterId:U.id})),U},[h]),w=q.useCallback(async I=>{try{const U=await Yt.getCharacter(I);U&&(await Yt.updateLastOpened(I),r(U),h&&(await Yt.updateSettings({lastActiveCharacterId:I}),d({...h,lastActiveCharacterId:I})),await g())}catch(U){c(U instanceof Error?U:new Error("Failed to open character"))}},[h,g]),A=q.useCallback(()=>{r(null),h&&(Yt.updateSettings({lastActiveCharacterId:void 0}),d({...h,lastActiveCharacterId:void 0}))},[h]),N=q.useCallback(async I=>{try{await Yt.deleteCharacter(I),e(U=>U.filter(ye=>ye.id!==I)),t?.id===I&&(r(null),h&&(await Yt.updateSettings({lastActiveCharacterId:void 0}),d({...h,lastActiveCharacterId:void 0})))}catch(U){throw c(U instanceof Error?U:new Error("Failed to delete character")),U}},[t,h]),_=q.useCallback(async(I,U)=>{try{const ye=await Yt.updateCharacter(I,U);return e(fe=>fe.map(L=>L.id===I?ye:L)),t?.id===I&&r(ye),ye}catch(ye){throw c(ye instanceof Error?ye:new Error("Failed to update character")),ye}},[t]),O=q.useCallback(async(I,U,ye)=>{const fe=`${I}:${String(U)}`,L=(p.current.get(fe)??0)+1;p.current.set(fe,L);try{const J=await Yt.updateSpecField(I,U,ye);return p.current.get(fe)!==L||(e(ne=>ne.map(me=>me.id===I?J:me)),r(ne=>ne?.id===I?J:ne)),J}catch(J){throw p.current.get(fe)!==L||c(J instanceof Error?J:new Error("Failed to update spec field")),J}},[]),H=q.useCallback(async(I,U)=>{try{const ye=await Yt.duplicateCharacter(I,U);return e(fe=>[ye,...fe]),ye}catch(ye){throw c(ye instanceof Error?ye:new Error("Failed to duplicate character")),ye}},[]),R=q.useCallback(async I=>{try{const U=await Yt.updateSettings(I);d(U)}catch(U){throw c(U instanceof Error?U:new Error("Failed to update settings")),U}},[]);return[{characters:n,currentCharacter:t,isLoading:a,error:o,settings:h},{createCharacter:b,openCharacter:w,closeCharacter:A,deleteCharacter:N,updateCharacter:_,duplicateCharacter:H,refreshCharacters:g,updateSpecField:O,updateSettings:R}]}const iw=q.createContext(null);function A4({children:n}){const[e,t]=C4(),r={currentCharacter:e.currentCharacter,isCharacterOpen:e.currentCharacter!==null,createCharacter:t.createCharacter,openCharacter:t.openCharacter,closeCharacter:t.closeCharacter,deleteCharacter:t.deleteCharacter,updateCharacter:t.updateCharacter,duplicateCharacter:t.duplicateCharacter,updateSpecField:t.updateSpecField,characters:e.characters,refreshCharacters:t.refreshCharacters,settings:e.settings,updateSettings:t.updateSettings,isLoading:e.isLoading,error:e.error};return k.jsx(iw.Provider,{value:r,children:n})}function $o(){const n=q.useContext(iw);if(!n)throw new Error("useCharacterContext must be used within a CharacterProvider");return n}const Pn={ai:{baseUrl:"https://nano-gpt.com/api/v1",apiKey:"",modelId:"",availableModels:[],enableStreaming:!1,enableReasoning:!1,showReasoning:!1},sampler:{temperature:.7,minP:.05,topK:40,repetitionPenalty:1.1,topP:1,contextLength:4096,maxTokens:2048},samplerPresets:[{id:"preset-creative",name:"Creative",settings:{temperature:.9,minP:.05,topK:50,repetitionPenalty:1.05,topP:.95,contextLength:4096,maxTokens:2048}},{id:"preset-balanced",name:"Balanced",settings:{temperature:.7,minP:.05,topK:40,repetitionPenalty:1.1,topP:1,contextLength:4096,maxTokens:2048}},{id:"preset-factual",name:"Factual",settings:{temperature:.3,minP:.1,topK:20,repetitionPenalty:1.2,topP:.5,contextLength:4096,maxTokens:1024}}],prompts:{expand:`Please expand and elaborate on the following text, adding more detail and depth while maintaining the same style and tone:

"""
\${text}
"""

Provide only the expanded text without any additional commentary.`,rewrite:`Please rewrite the following text to improve clarity, flow, and impact while preserving the original meaning:

"""
\${text}
"""

Provide only the rewritten text without any additional commentary.`,instruct:`Please apply the following instruction to the text below:

Instruction: \${instruction}

Text:
"""
\${text}
"""

Provide only the modified text without any additional commentary.`,shorten:`Please shorten and condense the following text, making it more concise while preserving the key meaning and essential details:

"""
\${text}
"""

Provide only the shortened text without any additional commentary.`,lengthen:`Please lengthen the following text by adding more detail, depth, and elaboration while maintaining the same style and tone:

"""
\${text}
"""

Provide only the lengthened text without any additional commentary.`,vivid:`Please rewrite the following text to make it more vivid and descriptive, adding sensory details, imagery, and evocative language:

"""
\${text}
"""

Provide only the enhanced text without any additional commentary.`,emotion:`Please rewrite the following text to add more emotional depth, feeling, and character voice while preserving the original meaning:

"""
\${text}
"""

Provide only the enhanced text without any additional commentary.`,grammar:`Please fix any grammar, spelling, and punctuation errors in the following text while preserving the original meaning and style:

"""
\${text}
"""

Provide only the corrected text without any additional commentary.`}},aw=q.createContext(null);class T4{async getSettings(){const e=await Yt.getSettings();if(!e){const t={id:"app-settings",ui:{theme:"system",editorFontSize:16,sidebarWidth:280},version:1};return await Yt.settings.add(t),t}return e}async saveSettings(e){await Yt.settings.put(e)}async getAISettings(){const e=await this.getSettings();return{...Pn.ai,...e.ai}}async saveAISettings(e){const r={...await this.getSettings(),ai:{...Pn.ai,...e}};await Yt.settings.put(r)}async getSamplerSettings(){const e=await this.getSettings();return{...Pn.sampler,...e.sampler}}async saveSamplerSettings(e){const r={...await this.getSettings(),sampler:{...Pn.sampler,...e}};await Yt.settings.put(r)}async getContextSectionIds(){return(await this.getSettings()).contextSectionIds||[]}async saveContextSectionIds(e){const r={...await this.getSettings(),contextSectionIds:e};await Yt.settings.put(r)}async addContextSection(e){const t=await this.getSettings(),r=t.contextSectionIds||[];if(!r.includes(e)){const a={...t,contextSectionIds:[...r,e]};await Yt.settings.put(a)}}async removeContextSection(e){const t=await this.getSettings(),r=t.contextSectionIds||[],a={...t,contextSectionIds:r.filter(s=>s!==e)};await Yt.settings.put(a)}async getPromptSettings(){const e=await this.getSettings();return{...Pn.prompts,...e.prompts}}async savePromptSettings(e){const r={...await this.getSettings(),prompts:{...Pn.prompts,...e}};await Yt.settings.put(r)}async saveAllAISettings(e,t,r){const s={...await this.getSettings(),ai:{...Pn.ai,...e},sampler:{...Pn.sampler,...t},prompts:{...Pn.prompts,...r}};await Yt.settings.put(s)}async applySamplerPreset(e){const r=Pn.samplerPresets.find(a=>a.id===e);if(!r)throw new Error(`Preset with ID "${e}" not found`);await this.saveSamplerSettings(r.settings)}async resetToDefaults(){const e={...rw,id:"app-settings",ai:Pn.ai,sampler:Pn.sampler,prompts:Pn.prompts,contextSectionIds:[]};return await Yt.settings.put(e),e}async clearAISettings(){const e=await this.getSettings(),t={...e,ai:Pn.ai,sampler:e.sampler??Pn.sampler,prompts:e.prompts??Pn.prompts};await Yt.settings.put(t)}}const rr=new T4,Gb=500;function E4({children:n}){const{currentCharacter:e,updateCharacter:t,updateSpecField:r}=$o(),[a,s]=q.useState("name"),[o,c]=q.useState(!1),[h,d]=q.useState("saved"),[p,g]=q.useState(16),[b,w]=q.useState(""),[A,N]=q.useState([]),[_,O]=q.useState([]),[H,R]=q.useState(Pn.ai),[ee,Z]=q.useState(Pn.sampler),[I,U]=q.useState(Pn.prompts),ye=q.useRef(new Map),fe=q.useRef(new Map),L=q.useRef(new Map),J=q.useRef(new Map),ne=q.useRef(new Map),me=q.useRef(new Map),he=q.useRef(new Map),se=q.useRef(new Map),te=Zi.useMemo(()=>{const Ye=["image","extensions"].includes(a)||_.includes(a)?[]:[a];return[...new Set([...Ye,...A])].filter(Pe=>!_.includes(Pe))},[a,A,_]),xe=q.useCallback(async()=>{try{const[Ye,Pe,De,lt]=await Promise.all([rr.getAISettings(),rr.getSamplerSettings(),rr.getPromptSettings(),rr.getSettings()]);R(Ye),Z(Pe),U(De),g(lt.ui.editorFontSize)}catch(Ye){console.error("Failed to load settings:",Ye)}},[]);q.useEffect(()=>{const Ye=setTimeout(()=>{xe()},0);return()=>clearTimeout(Ye)},[xe]),q.useEffect(()=>{document.documentElement.style.setProperty("--editor-font-size",`${p}px`)},[p]);const Ce=q.useRef(a);q.useEffect(()=>{if(Ce.current!==a){Ce.current=a;const Ye=setTimeout(()=>{O([])},0);return()=>clearTimeout(Ye)}},[a]);const Ae=q.useCallback(async Ye=>{if(!e)throw new Error("No character is currently open");const Pe=e.id,De=`${Pe}:updateCharacter`;c(!0),d("saving");const lt=he.current.get(De),tt={...lt,...Ye,data:Ye.data??lt?.data};return he.current.set(De,tt),me.current.has(De)&&window.clearTimeout(me.current.get(De)),new Promise((Tt,kt)=>{const vt=se.current.get(De)??{resolve:[],reject:[]};vt.resolve.push(Tt),vt.reject.push(kt),se.current.set(De,vt);const kn=window.setTimeout(async()=>{me.current.delete(De);const rn=he.current.get(De);if(!rn)return;const je=(ne.current.get(De)??0)+1;ne.current.set(De,je);try{const bt=await t(Pe,rn),Ot=se.current.get(De);he.current.delete(De),se.current.delete(De),ne.current.get(De)===je&&(c(!1),d("saved")),Ot?.resolve.forEach(Lt=>Lt(bt))}catch(bt){const Ot=se.current.get(De);he.current.delete(De),se.current.delete(De),ne.current.get(De)===je&&d("error"),Ot?.reject.forEach(Lt=>Lt(bt))}},Gb);me.current.set(De,kn)})},[e,t]),D=q.useCallback(async(Ye,Pe)=>{if(!e)throw new Error("No character is currently open");const De=`${e.id}:${String(Ye)}`,lt=e.id;return L.current.set(De,Pe),c(!0),d("saving"),fe.current.has(De)&&window.clearTimeout(fe.current.get(De)),new Promise((tt,Tt)=>{const kt=J.current.get(De)??{resolve:[],reject:[]};kt.resolve.push(tt),kt.reject.push(Tt),J.current.set(De,kt);const vt=window.setTimeout(async()=>{fe.current.delete(De);const kn=L.current.get(De);if(kn===void 0)return;const rn=(ye.current.get(De)??0)+1;ye.current.set(De,rn);try{const je=await r(lt,Ye,kn),bt=J.current.get(De);L.current.delete(De),J.current.delete(De),ye.current.get(De)===rn&&(c(!1),d("saved")),bt?.resolve.forEach(Ot=>Ot(je))}catch(je){const bt=J.current.get(De);L.current.delete(De),J.current.delete(De),ye.current.get(De)===rn&&(console.error("Failed to save spec field:",je),d("error")),bt?.reject.forEach(Ot=>Ot(je))}},Gb);fe.current.set(De,vt)})},[e,r]),Te=q.useCallback(async Ye=>{g(Ye),document.documentElement.style.setProperty("--editor-font-size",`${Ye}px`);try{const Pe=await rr.getSettings();await rr.saveSettings({...Pe,ui:{...Pe.ui,editorFontSize:Ye}})}catch(Pe){console.error("Failed to save font size:",Pe)}},[]),Ee=q.useCallback(Ye=>{N(Pe=>{const lt=(typeof Ye=="function"?Ye(Pe):Ye).filter(tt=>tt!==a);return rr.saveContextSectionIds(lt),lt})},[a]),P=q.useCallback(Ye=>{O(Pe=>Pe.filter(De=>De!==Ye)),N(Pe=>{if(Pe.includes(Ye))return Pe;const De=[...Pe,Ye];return rr.addContextSection(Ye),De})},[]),Qe=q.useCallback(Ye=>{O(Pe=>[...new Set([...Pe,Ye])]),N(Pe=>{const De=Pe.filter(lt=>lt!==Ye);return rr.removeContextSection(Ye),De})},[]),ct=q.useCallback(Ye=>{R(Pe=>{const De={...Pe,...Ye};return rr.saveAISettings(De),De})},[]),et=q.useCallback(Ye=>{Z(Pe=>{const De={...Pe,...Ye};return rr.saveSamplerSettings(De),De})},[]),jt=q.useCallback(Ye=>{U(Pe=>{const De={...Pe,...Ye};return rr.savePromptSettings(De),De})},[]),ft=q.useCallback(Ye=>e?Ye.map(Pe=>{const De=e.data.spec;switch(Pe){case"name":return`Character Name: ${De.name}`;case"description":return`Description:
${De.description}`;case"personality":return`Personality:
${De.personality}`;case"scenario":return`Scenario:
${De.scenario}`;case"first_mes":return`First Message:
${De.first_mes}`;case"mes_example":return`Message Examples:
${De.mes_example}`;case"system_prompt":return`System Prompt:
${De.system_prompt}`;case"post_history_instructions":return`Post-History Instructions:
${De.post_history_instructions}`;case"alternate_greetings":return`Alternate Greetings:
${De.alternate_greetings.join(`
---
`)}`;case"physical_description":return`Physical Description:
${De.physical_description}`;case"avatar":return De.avatar?`Avatar URL: ${De.avatar}`:"";case"creator_notes":return De.creator_notes?`Creator Notes:
${De.creator_notes}`:"";case"creator":return De.creator?`Creator: ${De.creator}`:"";case"character_version":return De.character_version?`Version: ${De.character_version}`:"";case"tags":return De.tags?.length?`Tags: ${De.tags.join(", ")}`:"";case"lorebook":{const lt=e.data.characterBook;if(!lt||lt.entries.length===0)return"";const tt=lt.entries.filter(kt=>kt.enabled);if(tt.length===0)return"";let Tt=`Lorebook: ${lt.name||"Character Lore"}
`;return lt.description&&(Tt+=`${lt.description}
`),Tt+=`
`,tt.forEach(kt=>{Tt+=`[Entry ${kt.id}]`,kt.name&&(Tt+=` ${kt.name}`),Tt+=`
`,Tt+=`Keys: ${kt.keys.join(", ")}
`,kt.comment&&(Tt+=`Note: ${kt.comment}
`),Tt+=`${kt.content}

`}),Tt.trim()}default:return""}}).filter(Pe=>Pe.length>0):[],[e]),Qt=q.useCallback((Ye,Pe,De)=>{if(!e||!a)return;const lt=e.data.spec;let tt;switch(a){case"name":tt=lt.name;break;case"description":tt=lt.description;break;case"personality":tt=lt.personality;break;case"scenario":tt=lt.scenario;break;case"first_mes":tt=lt.first_mes;break;case"mes_example":tt=lt.mes_example;break;case"system_prompt":tt=lt.system_prompt;break;case"post_history_instructions":tt=lt.post_history_instructions;break;case"alternate_greetings":tt=lt.alternate_greetings.join(`
---
`);break;case"physical_description":tt=lt.physical_description;break;case"avatar":tt=lt.avatar||"";break;case"creator_notes":tt=lt.creator_notes||"";break;case"creator":tt=lt.creator||"";break;case"character_version":tt=lt.character_version||"";break;case"tags":tt=lt.tags?.join(", ")||"";break;default:return}const Tt=De??b;let kt;switch(Pe){case"expand":case"rewrite":case"instruct":if(Tt){const vt=tt.indexOf(Tt);if(vt!==-1)kt=tt.substring(0,vt)+Ye+tt.substring(vt+Tt.length);else{const kn=Tt.trim(),rn=tt.indexOf(kn);rn!==-1?kt=tt.substring(0,rn)+Ye+tt.substring(rn+kn.length):(console.warn("AI operation: Selected text not found in content, appending instead"),kt=tt+`

`+Ye)}}else kt=tt+`

`+Ye;break;case"ask":kt=tt+`

`+Ye;break;default:kt=tt}a==="alternate_greetings"?D(a,kt.split(`
---
`).filter(vt=>vt.trim())):a==="tags"?D(a,kt.split(",").map(vt=>vt.trim()).filter(vt=>vt)):D(a,kt),w("")},[e,a,b,D]),Fe={currentCharacter:e,activeSection:a,isDirty:o,saveStatus:h,fontSize:p,selectedText:b,contextSectionIds:te,userAddedContextIds:A,aiConfig:H,samplerSettings:ee,promptSettings:I,setActiveSection:s,updateCharacter:Ae,updateSpecField:D,setFontSize:Te,setSelectedText:w,setContextSectionIds:Ee,addContextSection:P,removeContextSection:Qe,updateAIConfig:ct,updateSamplerSettings:et,updatePromptSettings:jt,handleAIOperation:Qt,getContextContent:ft,reloadSettings:xe};return k.jsx(aw.Provider,{value:Fe,children:n})}function Cd(){const n=q.useContext(aw);if(!n)throw new Error("useCharacterEditorContext must be used within a CharacterEditorProvider");return n}var N4=nw();const lw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const M4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const _4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const Yb=n=>{const e=_4(n);return e.charAt(0).toUpperCase()+e.slice(1)};var D4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const j4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const O4=q.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...c},h)=>q.createElement("svg",{ref:h,...D4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:lw("lucide",a),...!s&&!j4(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,p])=>q.createElement(d,p)),...Array.isArray(s)?s:[s]]));const $e=(n,e)=>{const t=q.forwardRef(({className:r,...a},s)=>q.createElement(O4,{ref:s,iconNode:e,className:lw(`lucide-${M4(Yb(n))}`,`lucide-${n}`,r),...a}));return t.displayName=Yb(n),t};const R4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],B4=$e("arrow-left",R4);const L4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Yf=$e("book-open",L4);const z4=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],I0=$e("book",z4);const I4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],sw=$e("brain",I4);const P4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ow=$e("check",P4);const H4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],El=$e("chevron-down",H4);const q4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],U4=$e("chevron-left",q4);const F4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],V4=$e("chevron-right",F4);const K4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Io=$e("chevron-up",K4);const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Da=$e("circle-alert",G4);const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Q4=$e("circle-question-mark",Y4);const X4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$4=$e("circle-user",X4);const W4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z4=$e("clock",W4);const J4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],P0=$e("copy",J4);const eT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uw=$e("download",eT);const tT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nT=$e("eye",tT);const rT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],To=$e("file-text",rT);const iT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],aT=$e("funnel",iT);const lT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],sT=$e("hash",lT);const oT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],uT=$e("history",oT);const cT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],H0=$e("image",cT);const hT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fT=$e("info",hT);const dT=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pT=$e("key",dT);const mT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gT=$e("layers",mT);const yT=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],xT=$e("link",yT);const vT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yc=$e("loader-circle",vT);const bT=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],kT=$e("map",bT);const wT=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Dg=$e("message-circle",wT);const ST=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Do=$e("message-square",ST);const CT=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],AT=$e("messages-square",CT);const TT=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ET=$e("moon",TT);const NT=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],MT=$e("notebook-pen",NT);const _T=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],DT=$e("palette",_T);const jT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],OT=$e("panel-left",jT);const RT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],BT=$e("panel-right",RT);const LT=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Qb=$e("pen-tool",LT);const zT=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],IT=$e("percent",zT);const PT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],HT=$e("play",PT);const qT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wo=$e("plus",qT);const UT=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],FT=$e("puzzle",UT);const VT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cw=$e("refresh-cw",VT);const KT=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],GT=$e("repeat",KT);const YT=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],jg=$e("rocket",YT);const QT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],XT=$e("rotate-ccw",QT);const $T=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hw=$e("save",$T);const WT=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ZT=$e("scroll-text",WT);const JT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qf=$e("search",JT);const eE=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],tE=$e("server",eE);const nE=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],rE=$e("settings-2",nE);const iE=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aE=$e("settings",iE);const lE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],sE=$e("shield",lE);const oE=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],fw=$e("sliders-vertical",oE);const uE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ra=$e("sparkles",uE);const cE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],hE=$e("square",cE);const fE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dE=$e("sun",fE);const pE=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mE=$e("tag",pE);const gE=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],yE=$e("tags",gE);const xE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dw=$e("target",xE);const vE=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],bE=$e("terminal",vE);const kE=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],wE=$e("thermometer",kE);const SE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nl=$e("trash-2",SE);const CE=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],pw=$e("type",CE);const AE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Dc=$e("upload",AE);const TE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q0=$e("user",TE);const EE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Og=$e("users",EE);const NE=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],mw=$e("wand-sparkles",NE);const ME=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bs=$e("x",ME);const _E=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],DE=$e("zap",_E);let Rg=[],gw=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?gw:Rg).push(t=t+n[e])})();function jE(n){if(n<768)return!1;for(let e=0,t=Rg.length;;){let r=e+t>>1;if(n<Rg[r])t=r;else if(n>=gw[r])e=r+1;else return!0;if(e==t)return!1}}function Xb(n){return n>=127462&&n<=127487}const $b=8205;function OE(n,e,t=!0,r=!0){return(t?yw:RE)(n,e,r)}function yw(n,e,t){if(e==n.length)return e;e&&xw(n.charCodeAt(e))&&vw(n.charCodeAt(e-1))&&e--;let r=Fm(n,e);for(e+=Wb(r);e<n.length;){let a=Fm(n,e);if(r==$b||a==$b||t&&jE(a))e+=Wb(a),r=a;else if(Xb(a)){let s=0,o=e-2;for(;o>=0&&Xb(Fm(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function RE(n,e,t){for(;e>0;){let r=yw(n,e-2,t);if(r<e)return r;e--}return 0}function Fm(n,e){let t=n.charCodeAt(e);if(!vw(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return xw(r)?(t-55296<<10)+(r-56320)+65536:t}function xw(n){return n>=56320&&n<57344}function vw(n){return n>=55296&&n<56320}function Wb(n){return n<65536?1:2}class Ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Po(this,e,t);let a=[];return this.decompose(0,e,a,2),r.length&&r.decompose(0,r.length,a,3),this.decompose(t,this.length,a,1),Yi.from(a,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Po(this,e,t);let r=[];return this.decompose(e,t,r,0),Yi.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),a=new xc(this),s=new xc(e);for(let o=t,c=t;;){if(a.next(o),s.next(o),o=0,a.lineBreak!=s.lineBreak||a.done!=s.done||a.value!=s.value)return!1;if(c+=a.value.length,a.done||c>=r)return!0}}iter(e=1){return new xc(this,e)}iterRange(e,t=this.length){return new bw(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let a=this.line(e).from;r=this.iterRange(a,Math.max(a,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new kw(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ut.empty:e.length<=32?new jn(e):Yi.from(jn.split(e,[]))}}class jn extends Ut{constructor(e,t=BE(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,a){for(let s=0;;s++){let o=this.text[s],c=a+o.length;if((t?r:c)>=e)return new LE(a,c,r,o);a=c+1,r++}}decompose(e,t,r,a){let s=e<=0&&t>=this.length?this:new jn(Zb(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(a&1){let o=r.pop(),c=If(s.text,o.text.slice(),0,s.length);if(c.length<=32)r.push(new jn(c,o.length+s.length));else{let h=c.length>>1;r.push(new jn(c.slice(0,h)),new jn(c.slice(h)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof jn))return super.replace(e,t,r);[e,t]=Po(this,e,t);let a=If(this.text,If(r.text,Zb(this.text,0,e)),t),s=this.length+r.length-(t-e);return a.length<=32?new jn(a,s):Yi.from(jn.split(a,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=Po(this,e,t);let a="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let c=this.text[o],h=s+c.length;s>e&&o&&(a+=r),e<h&&t>s&&(a+=c.slice(Math.max(0,e-s),t-s)),s=h+1}return a}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],a=-1;for(let s of e)r.push(s),a+=s.length+1,r.length==32&&(t.push(new jn(r,a)),r=[],a=-1);return a>-1&&t.push(new jn(r,a)),t}}class Yi extends Ut{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,a){for(let s=0;;s++){let o=this.children[s],c=a+o.length,h=r+o.lines-1;if((t?h:c)>=e)return o.lineInner(e,t,r,a);a=c+1,r=h+1}}decompose(e,t,r,a){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let c=this.children[s],h=o+c.length;if(e<=h&&t>=o){let d=a&((o<=e?1:0)|(h>=t?2:0));o>=e&&h<=t&&!d?r.push(c):c.decompose(e-o,t-o,r,d)}o=h+1}}replace(e,t,r){if([e,t]=Po(this,e,t),r.lines<this.lines)for(let a=0,s=0;a<this.children.length;a++){let o=this.children[a],c=s+o.length;if(e>=s&&t<=c){let h=o.replace(e-s,t-s,r),d=this.lines-o.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[a]=h,new Yi(p,this.length-(t-e)+r.length)}return super.replace(s,c,h)}s=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Po(this,e,t);let a="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let c=this.children[s],h=o+c.length;o>e&&s&&(a+=r),e<h&&t>o&&(a+=c.sliceString(e-o,t-o,r)),o=h+1}return a}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Yi))return 0;let r=0,[a,s,o,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;a+=t,s+=t){if(a==o||s==c)return r;let h=this.children[a],d=e.children[s];if(h!=d)return r+h.scanIdentical(d,t);r+=h.length+1}}static from(e,t=e.reduce((r,a)=>r+a.length+1,-1)){let r=0;for(let w of e)r+=w.lines;if(r<32){let w=[];for(let A of e)A.flatten(w);return new jn(w,t)}let a=Math.max(32,r>>5),s=a<<1,o=a>>1,c=[],h=0,d=-1,p=[];function g(w){let A;if(w.lines>s&&w instanceof Yi)for(let N of w.children)g(N);else w.lines>o&&(h>o||!h)?(b(),c.push(w)):w instanceof jn&&h&&(A=p[p.length-1])instanceof jn&&w.lines+A.lines<=32?(h+=w.lines,d+=w.length+1,p[p.length-1]=new jn(A.text.concat(w.text),A.length+1+w.length)):(h+w.lines>a&&b(),h+=w.lines,d+=w.length+1,p.push(w))}function b(){h!=0&&(c.push(p.length==1?p[0]:Yi.from(p,d)),d=-1,h=p.length=0)}for(let w of e)g(w);return b(),c.length==1?c[0]:new Yi(c,t)}}Ut.empty=new jn([""],0);function BE(n){let e=-1;for(let t of n)e+=t.length+1;return e}function If(n,e,t=0,r=1e9){for(let a=0,s=0,o=!0;s<n.length&&a<=r;s++){let c=n[s],h=a+c.length;h>=t&&(h>r&&(c=c.slice(0,r-a)),a<t&&(c=c.slice(t-a)),o?(e[e.length-1]+=c,o=!1):e.push(c)),a=h+1}return e}function Zb(n,e,t){return If(n,[""],e,t)}class xc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof jn?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,a=this.nodes[r],s=this.offsets[r],o=s>>1,c=a instanceof jn?a.text.length:a.children.length;if(o==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(a instanceof jn){let h=a.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=a.children[o+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof jn?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class bw{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new xc(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:a}=this.cursor.next(e);return this.pos+=(a.length+e)*t,this.value=a.length<=r?a:t<0?a.slice(a.length-r):a.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class kw{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:a}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=a,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ut.prototype[Symbol.iterator]=function(){return this.iter()},xc.prototype[Symbol.iterator]=bw.prototype[Symbol.iterator]=kw.prototype[Symbol.iterator]=function(){return this});class LE{constructor(e,t,r,a){this.from=e,this.to=t,this.number=r,this.text=a}get length(){return this.to-this.from}}function Po(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Vn(n,e,t=!0,r=!0){return OE(n,e,t,r)}function zE(n){return n>=56320&&n<57344}function IE(n){return n>=55296&&n<56320}function ww(n,e){let t=n.charCodeAt(e);if(!IE(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return zE(r)?(t-55296<<10)+(r-56320)+65536:t}function PE(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Sw(n){return n<65536?1:2}const Bg=/\r\n?|\n/;var Kr=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Kr||(Kr={}));class Ji{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,a=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,a,s),a+=s):a+=o,r+=s}}iterChangedRanges(e,t=!1){Lg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],a=this.sections[t++];a<0?e.push(r,a):e.push(a,r)}return new Ji(e)}composeDesc(e){return this.empty?e:e.empty?this:Cw(this,e)}mapDesc(e,t=!1){return e.empty?this:zg(this,e,t)}mapPos(e,t=-1,r=Kr.Simple){let a=0,s=0;for(let o=0;o<this.sections.length;){let c=this.sections[o++],h=this.sections[o++],d=a+c;if(h<0){if(d>e)return s+(e-a);s+=c}else{if(r!=Kr.Simple&&d>=e&&(r==Kr.TrackDel&&a<e&&d>e||r==Kr.TrackBefore&&a<e||r==Kr.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!c)return e==a||t<0?s:s+h;s+=h}a=d}if(e>a)throw new RangeError(`Position ${e} is out of range for changeset of length ${a}`);return s}touchesRange(e,t=e){for(let r=0,a=0;r<this.sections.length&&a<=t;){let s=this.sections[r++],o=this.sections[r++],c=a+s;if(o>=0&&a<=t&&c>=e)return a<e&&c>t?"cover":!0;a=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],a=this.sections[t++];e+=(e?" ":"")+r+(a>=0?":"+a:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ji(e)}static create(e){return new Ji(e)}}class Fn extends Ji{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Lg(this,(t,r,a,s,o)=>e=e.replace(a,a+(r-t),o),!1),e}mapDesc(e,t=!1){return zg(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let a=0,s=0;a<t.length;a+=2){let o=t[a],c=t[a+1];if(c>=0){t[a]=c,t[a+1]=o;let h=a>>1;for(;r.length<h;)r.push(Ut.empty);r.push(o?e.slice(s,s+o):Ut.empty)}s+=o}return new Fn(t,r)}compose(e){return this.empty?e:e.empty?this:Cw(this,e,!0)}map(e,t=!1){return e.empty?this:zg(this,e,t,!0)}iterChanges(e,t=!1){Lg(this,e,t)}get desc(){return Ji.create(this.sections)}filter(e){let t=[],r=[],a=[],s=new jc(this);e:for(let o=0,c=0;;){let h=o==e.length?1e9:e[o++];for(;c<h||c==h&&s.len==0;){if(s.done)break e;let p=Math.min(s.len,h-c);fr(a,p,-1);let g=s.ins==-1?-1:s.off==0?s.ins:0;fr(t,p,g),g>0&&Cl(r,t,s.text),s.forward(p),c+=p}let d=e[o++];for(;c<d;){if(s.done)break e;let p=Math.min(s.len,d-c);fr(t,p,-1),fr(a,p,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(p),c+=p}}return{changes:new Fn(t,r),filtered:Ji.create(a)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],a=this.sections[t+1];a<0?e.push(r):a==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let a=[],s=[],o=0,c=null;function h(p=!1){if(!p&&!a.length)return;o<t&&fr(a,t-o,-1);let g=new Fn(a,s);c=c?c.compose(g.map(c)):g,a=[],s=[],o=0}function d(p){if(Array.isArray(p))for(let g of p)d(g);else if(p instanceof Fn){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),c=c?c.compose(p.map(c)):p}else{let{from:g,to:b=g,insert:w}=p;if(g>b||g<0||b>t)throw new RangeError(`Invalid change range ${g} to ${b} (in doc of length ${t})`);let A=w?typeof w=="string"?Ut.of(w.split(r||Bg)):w:Ut.empty,N=A.length;if(g==b&&N==0)return;g<o&&h(),g>o&&fr(a,g-o,-1),fr(a,b-g,N),Cl(s,a,A),o=b}}return d(e),h(!c),c}static empty(e){return new Fn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let a=0;a<e.length;a++){let s=e[a];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,c)=>c&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<a;)r.push(Ut.empty);r[a]=Ut.of(s.slice(1)),t.push(s[0],r[a].length)}}}return new Fn(t,r)}static createSet(e,t){return new Fn(e,t)}}function fr(n,e,t,r=!1){if(e==0&&t<=0)return;let a=n.length-2;a>=0&&t<=0&&t==n[a+1]?n[a]+=e:a>=0&&e==0&&n[a]==0?n[a+1]+=t:r?(n[a]+=e,n[a+1]+=t):n.push(e,t)}function Cl(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ut.empty);n.push(t)}}function Lg(n,e,t){let r=n.inserted;for(let a=0,s=0,o=0;o<n.sections.length;){let c=n.sections[o++],h=n.sections[o++];if(h<0)a+=c,s+=c;else{let d=a,p=s,g=Ut.empty;for(;d+=c,p+=h,h&&r&&(g=g.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)c=n.sections[o++],h=n.sections[o++];e(a,d,s,p,g),a=d,s=p}}}function zg(n,e,t,r=!1){let a=[],s=r?[]:null,o=new jc(n),c=new jc(e);for(let h=-1;;){if(o.done&&c.len||c.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&c.ins==-1){let d=Math.min(o.len,c.len);fr(a,d,-1),o.forward(d),c.forward(d)}else if(c.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(c.len<o.len||c.len==o.len&&!t))){let d=c.len;for(fr(a,c.ins,-1);d;){let p=Math.min(o.len,d);o.ins>=0&&h<o.i&&o.len<=p&&(fr(a,0,o.ins),s&&Cl(s,a,o.text),h=o.i),o.forward(p),d-=p}c.next()}else if(o.ins>=0){let d=0,p=o.len;for(;p;)if(c.ins==-1){let g=Math.min(p,c.len);d+=g,p-=g,c.forward(g)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;fr(a,d,h<o.i?o.ins:0),s&&h<o.i&&Cl(s,a,o.text),h=o.i,o.forward(o.len-p)}else{if(o.done&&c.done)return s?Fn.createSet(a,s):Ji.create(a);throw new Error("Mismatched change set lengths")}}}function Cw(n,e,t=!1){let r=[],a=t?[]:null,s=new jc(n),o=new jc(e);for(let c=!1;;){if(s.done&&o.done)return a?Fn.createSet(r,a):Ji.create(r);if(s.ins==0)fr(r,s.len,0,c),s.next();else if(o.len==0&&!o.done)fr(r,0,o.ins,c),a&&Cl(a,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,o.len),d=r.length;if(s.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;fr(r,h,p,c),a&&p&&Cl(a,r,o.text)}else o.ins==-1?(fr(r,s.off?0:s.len,h,c),a&&Cl(a,r,s.textBit(h))):(fr(r,s.off?0:s.len,o.off?0:o.ins,c),a&&!o.off&&Cl(a,r,o.text));c=(s.ins>h||o.ins>=0&&o.len>h)&&(c||r.length>d),s.forward2(h),o.forward(h)}}}}class jc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ut.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ut.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ys{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,a;return this.empty?r=a=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),a=e.mapPos(this.to,-1)),r==this.from&&a==this.to?this:new ys(r,a,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Oe.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Oe.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Oe.range(e.anchor,e.head)}static create(e,t,r){return new ys(e,t,r)}}class Oe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Oe.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Oe([this.main],0)}addRange(e,t=!0){return Oe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Oe.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Oe(e.ranges.map(t=>ys.fromJSON(t)),e.main)}static single(e,t=e){return new Oe([Oe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,a=0;a<e.length;a++){let s=e[a];if(s.empty?s.from<=r:s.from<r)return Oe.normalized(e.slice(),t);r=s.to}return new Oe(e,t)}static cursor(e,t=0,r,a){return ys.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(a??16777215)<<6)}static range(e,t,r,a){let s=(r??16777215)<<6|(a==null?7:Math.min(6,a));return t<e?ys.create(t,e,48|s):ys.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((a,s)=>a.from-s.from),t=e.indexOf(r);for(let a=1;a<e.length;a++){let s=e[a],o=e[a-1];if(s.empty?s.from<=o.to:s.from<o.to){let c=o.from,h=Math.max(s.to,o.to);a<=t&&t--,e.splice(--a,2,s.anchor>s.head?Oe.range(h,c):Oe.range(c,h))}}return new Oe(e,t)}}function Aw(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let U0=0;class ot{constructor(e,t,r,a,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=a,this.id=U0++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new ot(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:F0),!!e.static,e.enables)}of(e){return new Pf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Pf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Pf(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function F0(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Pf{constructor(e,t,r,a){this.dependencies=e,this.facet=t,this.type=r,this.value=a,this.id=U0++}dynamicSlot(e){var t;let r=this.value,a=this.facet.compareInput,s=this.id,o=e[s]>>1,c=this.type==2,h=!1,d=!1,p=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?d=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[o]=r(g),1},update(g,b){if(h&&b.docChanged||d&&(b.docChanged||b.selection)||Ig(g,p)){let w=r(g);if(c?!Jb(w,g.values[o],a):!a(w,g.values[o]))return g.values[o]=w,1}return 0},reconfigure:(g,b)=>{let w,A=b.config.address[s];if(A!=null){let N=$f(b,A);if(this.dependencies.every(_=>_ instanceof ot?b.facet(_)===g.facet(_):_ instanceof Ai?b.field(_,!1)==g.field(_,!1):!0)||(c?Jb(w=r(g),N,a):a(w=r(g),N)))return g.values[o]=N,0}else w=r(g);return g.values[o]=w,1}}}}function Jb(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function Ig(n,e){let t=!1;for(let r of e)vc(n,r)&1&&(t=!0);return t}function HE(n,e,t){let r=t.map(h=>n[h.id]),a=t.map(h=>h.type),s=r.filter(h=>!(h&1)),o=n[e.id]>>1;function c(h){let d=[];for(let p=0;p<r.length;p++){let g=$f(h,r[p]);if(a[p]==2)for(let b of g)d.push(b);else d.push(g)}return e.combine(d)}return{create(h){for(let d of r)vc(h,d);return h.values[o]=c(h),1},update(h,d){if(!Ig(h,s))return 0;let p=c(h);return e.compare(p,h.values[o])?0:(h.values[o]=p,1)},reconfigure(h,d){let p=Ig(h,r),g=d.config.facets[e.id],b=d.facet(e);if(g&&!p&&F0(t,g))return h.values[o]=b,0;let w=c(h);return e.compare(w,b)?(h.values[o]=b,0):(h.values[o]=w,1)}}}const df=ot.define({static:!0});class Ai{constructor(e,t,r,a,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=a,this.spec=s,this.provides=void 0}static define(e){let t=new Ai(U0++,e.create,e.update,e.compare||((r,a)=>r===a),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(df).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,a)=>{let s=r.values[t],o=this.updateF(s,a);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,a)=>{let s=r.facet(df),o=a.facet(df),c;return(c=s.find(h=>h.field==this))&&c!=o.find(h=>h.field==this)?(r.values[t]=c.create(r),1):a.config.address[this.id]!=null?(r.values[t]=a.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,df.of({field:this,create:e})]}get extension(){return this}}const gs={lowest:4,low:3,default:2,high:1,highest:0};function ic(n){return e=>new Tw(e,n)}const Fc={highest:ic(gs.highest),high:ic(gs.high),default:ic(gs.default),low:ic(gs.low),lowest:ic(gs.lowest)};class Tw{constructor(e,t){this.inner=e,this.prec=t}}class Ad{of(e){return new Pg(this,e)}reconfigure(e){return Ad.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Pg{constructor(e,t){this.compartment=e,this.inner=t}}class Xf{constructor(e,t,r,a,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=a,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let a=[],s=Object.create(null),o=new Map;for(let b of qE(e,t,o))b instanceof Ai?a.push(b):(s[b.facet.id]||(s[b.facet.id]=[])).push(b);let c=Object.create(null),h=[],d=[];for(let b of a)c[b.id]=d.length<<1,d.push(w=>b.slot(w));let p=r?.config.facets;for(let b in s){let w=s[b],A=w[0].facet,N=p&&p[b]||[];if(w.every(_=>_.type==0))if(c[A.id]=h.length<<1|1,F0(N,w))h.push(r.facet(A));else{let _=A.combine(w.map(O=>O.value));h.push(r&&A.compare(_,r.facet(A))?r.facet(A):_)}else{for(let _ of w)_.type==0?(c[_.id]=h.length<<1|1,h.push(_.value)):(c[_.id]=d.length<<1,d.push(O=>_.dynamicSlot(O)));c[A.id]=d.length<<1,d.push(_=>HE(_,A,w))}}let g=d.map(b=>b(c));return new Xf(e,o,g,c,h,s)}}function qE(n,e,t){let r=[[],[],[],[],[]],a=new Map;function s(o,c){let h=a.get(o);if(h!=null){if(h<=c)return;let d=r[h].indexOf(o);d>-1&&r[h].splice(d,1),o instanceof Pg&&t.delete(o.compartment)}if(a.set(o,c),Array.isArray(o))for(let d of o)s(d,c);else if(o instanceof Pg){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;t.set(o.compartment,d),s(d,c)}else if(o instanceof Tw)s(o.inner,o.prec);else if(o instanceof Ai)r[c].push(o),o.provides&&s(o.provides,c);else if(o instanceof Pf)r[c].push(o),o.facet.extensions&&s(o.facet.extensions,gs.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(d,c)}}return s(n,gs.default),r.reduce((o,c)=>o.concat(c))}function vc(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let a=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|a}function $f(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Ew=ot.define(),Hg=ot.define({combine:n=>n.some(e=>e),static:!0}),Nw=ot.define({combine:n=>n.length?n[0]:void 0,static:!0}),Mw=ot.define(),_w=ot.define(),Dw=ot.define(),jw=ot.define({combine:n=>n.length?n[0]:!1});class Rl{constructor(e,t){this.type=e,this.value=t}static define(){return new UE}}class UE{of(e){return new Rl(this,e)}}class FE{constructor(e){this.map=e}of(e){return new dn(this,e)}}class dn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new dn(this.type,t)}is(e){return this.type==e}static define(e={}){return new FE(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let a of e){let s=a.map(t);s&&r.push(s)}return r}}dn.reconfigure=dn.define();dn.appendConfig=dn.define();class Kn{constructor(e,t,r,a,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=a,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&Aw(r,t.newLength),s.some(c=>c.type==Kn.time)||(this.annotations=s.concat(Kn.time.of(Date.now())))}static create(e,t,r,a,s,o){return new Kn(e,t,r,a,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Kn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Kn.time=Rl.define();Kn.userEvent=Rl.define();Kn.addToHistory=Rl.define();Kn.remote=Rl.define();function VE(n,e){let t=[];for(let r=0,a=0;;){let s,o;if(r<n.length&&(a==e.length||e[a]>=n[r]))s=n[r++],o=n[r++];else if(a<e.length)s=e[a++],o=e[a++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Ow(n,e,t){var r;let a,s,o;return t?(a=e.changes,s=Fn.empty(e.changes.length),o=n.changes.compose(e.changes)):(a=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(a)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(a),effects:dn.mapEffects(n.effects,a).concat(dn.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function qg(n,e,t){let r=e.selection,a=jo(e.annotations);return e.userEvent&&(a=a.concat(Kn.userEvent.of(e.userEvent))),{changes:e.changes instanceof Fn?e.changes:Fn.of(e.changes||[],t,n.facet(Nw)),selection:r&&(r instanceof Oe?r:Oe.single(r.anchor,r.head)),effects:jo(e.effects),annotations:a,scrollIntoView:!!e.scrollIntoView}}function Rw(n,e,t){let r=qg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=Ow(r,qg(n,e[s],o?r.changes.newLength:n.doc.length),o)}let a=Kn.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return GE(t?KE(a):a)}function KE(n){let e=n.startState,t=!0;for(let a of e.facet(Mw)){let s=a(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:VE(t,s))}if(t!==!0){let a,s;if(t===!1)s=n.changes.invertedDesc,a=Fn.empty(e.doc.length);else{let o=n.changes.filter(t);a=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Kn.create(e,a,n.selection&&n.selection.map(s),dn.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(_w);for(let a=r.length-1;a>=0;a--){let s=r[a](n);s instanceof Kn?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Kn?n=s[0]:n=Rw(e,jo(s),!1)}return n}function GE(n){let e=n.startState,t=e.facet(Dw),r=n;for(let a=t.length-1;a>=0;a--){let s=t[a](n);s&&Object.keys(s).length&&(r=Ow(r,qg(e,s,n.changes.newLength),!0))}return r==n?n:Kn.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const YE=[];function jo(n){return n==null?YE:Array.isArray(n)?n:[n]}var lr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(lr||(lr={}));const QE=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ug;try{Ug=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function XE(n){if(Ug)return Ug.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||QE.test(t)))return!0}return!1}function $E(n){return e=>{if(!/\S/.test(e))return lr.Space;if(XE(e))return lr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return lr.Word;return lr.Other}}class Kt{constructor(e,t,r,a,s,o){this.config=e,this.doc=t,this.selection=r,this.values=a,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)vc(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return vc(this,r),$f(this,r)}update(...e){return Rw(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:a}=t;for(let c of e.effects)c.is(Ad.reconfigure)?(t&&(a=new Map,t.compartments.forEach((h,d)=>a.set(d,h)),t=null),a.set(c.value.compartment,c.value.extension)):c.is(dn.reconfigure)?(t=null,r=c.value):c.is(dn.appendConfig)&&(t=null,r=jo(r).concat(c.value));let s;t?s=e.startState.values.slice():(t=Xf.resolve(r,a,this),s=new Kt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let o=e.startState.facet(Hg)?e.newSelection:e.newSelection.asSingle();new Kt(t,e.newDoc,o,s,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Oe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),a=this.changes(r.changes),s=[r.range],o=jo(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),d=this.changes(h.changes),p=d.map(a);for(let b=0;b<c;b++)s[b]=s[b].map(p);let g=a.mapDesc(d,!0);s.push(h.range.map(g)),a=a.compose(p),o=dn.mapEffects(o,p).concat(dn.mapEffects(jo(h.effects),g))}return{changes:a,selection:Oe.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Fn?e:Fn.of(e,this.doc.length,this.facet(Kt.lineSeparator))}toText(e){return Ut.of(e.split(this.facet(Kt.lineSeparator)||Bg))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(vc(this,t),$f(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let a=e[r];a instanceof Ai&&this.config.address[a.id]!=null&&(t[r]=a.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let a=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],c=e[s];a.push(o.init(h=>o.spec.fromJSON(c,h)))}}return Kt.create({doc:e.doc,selection:Oe.fromJSON(e.selection),extensions:t.extensions?a.concat([t.extensions]):a})}static create(e={}){let t=Xf.resolve(e.extensions||[],new Map),r=e.doc instanceof Ut?e.doc:Ut.of((e.doc||"").split(t.staticFacet(Kt.lineSeparator)||Bg)),a=e.selection?e.selection instanceof Oe?e.selection:Oe.single(e.selection.anchor,e.selection.head):Oe.single(0);return Aw(a,r.length),t.staticFacet(Hg)||(a=a.asSingle()),new Kt(t,r,a,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Kt.tabSize)}get lineBreak(){return this.facet(Kt.lineSeparator)||`
`}get readOnly(){return this.facet(jw)}phrase(e,...t){for(let r of this.facet(Kt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,a)=>{if(a=="$")return"$";let s=+(a||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let a=[];for(let s of this.facet(Ew))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&a.push(o[e]);return a}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return $E(t.length?t[0]:"")}wordAt(e){let{text:t,from:r,length:a}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,c=e-r;for(;o>0;){let h=Vn(t,o,!1);if(s(t.slice(h,o))!=lr.Word)break;o=h}for(;c<a;){let h=Vn(t,c);if(s(t.slice(c,h))!=lr.Word)break;c=h}return o==c?null:Oe.range(o+r,c+r)}}Kt.allowMultipleSelections=Hg;Kt.tabSize=ot.define({combine:n=>n.length?n[0]:4});Kt.lineSeparator=Nw;Kt.readOnly=jw;Kt.phrases=ot.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(a=>n[a]==e[a])}});Kt.languageData=Ew;Kt.changeFilter=Mw;Kt.transactionFilter=_w;Kt.transactionExtender=Dw;Ad.reconfigure=dn.define();function V0(n,e,t={}){let r={};for(let a of n)for(let s of Object.keys(a)){let o=a[s],c=r[s];if(c===void 0)r[s]=o;else if(!(c===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](c,o);else throw new Error("Config merge conflict for field "+s)}for(let a in e)r[a]===void 0&&(r[a]=e[a]);return r}class ks{eq(e){return this==e}range(e,t=e){return Fg.create(e,t,this)}}ks.prototype.startSide=ks.prototype.endSide=0;ks.prototype.point=!1;ks.prototype.mapMode=Kr.TrackDel;function K0(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let Fg=class Bw{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Bw(e,t,r)}};function Vg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class G0{constructor(e,t,r,a){this.from=e,this.to=t,this.value=r,this.maxPoint=a}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,a=0){let s=r?this.to:this.from;for(let o=a,c=s.length;;){if(o==c)return o;let h=o+c>>1,d=s[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==o)return d>=0?o:c;d>=0?c=h:o=h+1}}between(e,t,r,a){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(a(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],a=[],s=[],o=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,g=this.to[h]+e,b,w;if(p==g){let A=t.mapPos(p,d.startSide,d.mapMode);if(A==null||(b=w=A,d.startSide!=d.endSide&&(w=t.mapPos(p,d.endSide),w<b)))continue}else if(b=t.mapPos(p,d.startSide),w=t.mapPos(g,d.endSide),b>w||b==w&&d.startSide>0&&d.endSide<=0)continue;(w-b||d.endSide-d.startSide)<0||(o<0&&(o=b),d.point&&(c=Math.max(c,w-b)),r.push(d),a.push(b-o),s.push(w-o))}return{mapped:r.length?new G0(a,s,r,c):null,pos:o}}}class Wt{constructor(e,t,r,a){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=a}static create(e,t,r,a){return new Wt(e,t,r,a)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:a=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Vg)),this.isEmpty)return t.length?Wt.of(t):this;let c=new Lw(this,null,-1).goto(0),h=0,d=[],p=new Ho;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let g=t[h++];p.addInner(g.from,g.to,g.value)||d.push(g)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!o||a>this.chunkEnd(c.chunkIndex)||s<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!o||a>c.to||s<c.from||o(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(Fg.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Wt.empty:this.nextLayer.update({add:d,filter:o,filterFrom:a,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],a=-1;for(let o=0;o<this.chunk.length;o++){let c=this.chunkPos[o],h=this.chunk[o],d=e.touchesRange(c,c+h.length);if(d===!1)a=Math.max(a,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(d===!0){let{mapped:p,pos:g}=h.map(c,e);p&&(a=Math.max(a,p.maxPoint),t.push(p),r.push(g))}}let s=this.nextLayer.map(e);return t.length==0?s:new Wt(r,t,s||Wt.empty,a)}between(e,t,r){if(!this.isEmpty){for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],o=this.chunk[a];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Oc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Oc.from(e).goto(t)}static compare(e,t,r,a,s=-1){let o=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=s),c=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=s),h=e1(o,c,r),d=new ac(o,h,s),p=new ac(c,h,s);r.iterGaps((g,b,w)=>t1(d,g,p,b,w,a)),r.empty&&r.length==0&&t1(d,0,p,0,0,a)}static eq(e,t,r=0,a){a==null&&(a=999999999);let s=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),o=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let c=e1(s,o),h=new ac(s,c,0).goto(r),d=new ac(o,c,0).goto(r);for(;;){if(h.to!=d.to||!Kg(h.active,d.active)||h.point&&(!d.point||!K0(h.point,d.point)))return!1;if(h.to>a)return!0;h.next(),d.next()}}static spans(e,t,r,a,s=-1){let o=new ac(e,null,s).goto(t),c=t,h=o.openStart;for(;;){let d=Math.min(o.to,r);if(o.point){let p=o.activeForPoint(o.to),g=o.pointFrom<t?p.length+1:o.point.startSide<0?p.length:Math.min(p.length,h);a.point(c,d,o.point,p,g,o.pointRank),h=Math.min(o.openEnd(d),p.length)}else d>c&&(a.span(c,d,o.active,h),h=o.openEnd(d));if(o.to>r)return h+(o.point&&o.to>r?1:0);c=o.to,o.next()}}static of(e,t=!1){let r=new Ho;for(let a of e instanceof Fg?[e]:t?WE(e):e)r.add(a.from,a.to,a.value);return r.finish()}static join(e){if(!e.length)return Wt.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let a=e[r];a!=Wt.empty;a=a.nextLayer)t=new Wt(a.chunkPos,a.chunk,t,Math.max(a.maxPoint,t.maxPoint));return t}}Wt.empty=new Wt([],[],null,-1);function WE(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Vg(e,r)>0)return n.slice().sort(Vg);e=r}return n}Wt.empty.nextLayer=Wt.empty;class Ho{finishChunk(e){this.chunks.push(new G0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Ho)).add(e,t,r)}addInner(e,t,r){let a=e-this.lastTo||r.startSide-this.last.endSide;if(a<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return a<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Wt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Wt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function e1(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let a=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let c=r.get(s.chunk[o]);c!=null&&(t?t.mapPos(c):c)==s.chunkPos[o]&&!t?.touchesRange(c,c+s.chunk[o].length)&&a.add(s.chunk[o])}return a}class Lw{constructor(e,t,r,a=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=a}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let a=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(a)||this.layer.chunkEnd(this.chunkIndex)<e||a.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let a=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<a)&&this.setRangeIndex(a)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Oc{constructor(e){this.heap=e}static from(e,t=null,r=-1){let a=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&a.push(new Lw(o,t,r,s));return a.length==1?a[0]:new Oc(a)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Vm(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Vm(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Vm(this.heap,0)}}}function Vm(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let a=n[r];if(r+1<n.length&&a.compare(n[r+1])>=0&&(a=n[r+1],r++),t.compare(a)<0)break;n[r]=t,n[e]=a,e=r}}class ac{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Oc.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){pf(this.active,e),pf(this.activeTo,e),pf(this.activeRank,e),this.minActive=n1(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:a,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||a-this.activeTo[t])>0;)t++;mf(this.active,t,r),mf(this.activeTo,t,a),mf(this.activeRank,t,s),e&&mf(e,t,this.cursor.from),this.minActive=n1(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>e){this.to=this.activeTo[a],this.endSide=this.active[a].endSide;break}this.removeActive(a),r&&pf(r,a)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let a=r.length-1;a>=0&&r[a]<e;a--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function t1(n,e,t,r,a,s){n.goto(e),t.goto(r);let o=r+a,c=r,h=r-e,d=!!s.boundChange;for(let p=!1;;){let g=n.to+h-t.to,b=g||n.endSide-t.endSide,w=b<0?n.to+h:t.to,A=Math.min(w,o);if(n.point||t.point?(n.point&&t.point&&K0(n.point,t.point)&&Kg(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(c,A,n.point,t.point),p=!1):(p&&s.boundChange(c),A>c&&!Kg(n.active,t.active)&&s.compareRange(c,A,n.active,t.active),d&&A<o&&(g||n.openEnd(w)!=t.openEnd(w))&&(p=!0)),w>o)break;c=w,b<=0&&n.next(),b>=0&&t.next()}}function Kg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!K0(n[t],e[t]))return!1;return!0}function pf(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function mf(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function n1(n,e){let t=-1,r=1e9;for(let a=0;a<e.length;a++)(e[a]-r||n[a].endSide-n[t].endSide)<0&&(t=a,r=e[a]);return t}function Td(n,e,t=n.length){let r=0;for(let a=0;a<t&&a<n.length;)n.charCodeAt(a)==9?(r+=e-r%e,a++):(r++,a=Vn(n,a));return r}function ZE(n,e,t,r){for(let a=0,s=0;;){if(s>=e)return a;if(a==n.length)break;s+=n.charCodeAt(a)==9?t-s%t:1,a=Vn(n,a)}return n.length}const Gg="",r1=typeof Symbol>"u"?"__"+Gg:Symbol.for(Gg),Yg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),i1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ml{constructor(e,t){this.rules=[];let{finish:r}=t||{};function a(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,c,h,d){let p=[],g=/^@(\w+)\b/.exec(o[0]),b=g&&g[1]=="keyframes";if(g&&c==null)return h.push(o[0]+";");for(let w in c){let A=c[w];if(/&/.test(w))s(w.split(/,\s*/).map(N=>o.map(_=>N.replace(/&/,_))).reduce((N,_)=>N.concat(_)),A,h);else if(A&&typeof A=="object"){if(!g)throw new RangeError("The value of a property ("+w+") should be a primitive value.");s(a(w),A,p,b)}else A!=null&&p.push(w.replace(/_.*/,"").replace(/[A-Z]/g,N=>"-"+N.toLowerCase())+": "+A+";")}(p.length||b)&&h.push((r&&!g&&!d?o.map(r):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in e)s(a(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=i1[r1]||1;return i1[r1]=e+1,Gg+e.toString(36)}static mount(e,t,r){let a=e[Yg],s=r&&r.nonce;a?s&&a.setNonce(s):a=new JE(e,s),a.mount(Array.isArray(t)?t:[t],e)}}let a1=new Map;class JE{constructor(e,t){let r=e.ownerDocument||e,a=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&a.CSSStyleSheet){let s=a1.get(r);if(s)return e[Yg]=s;this.sheet=new a.CSSStyleSheet,a1.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Yg]=this}mount(e,t){let r=this.sheet,a=0,s=0;for(let o=0;o<e.length;o++){let c=e[o],h=this.modules.indexOf(c);if(h<s&&h>-1&&(this.modules.splice(h,1),s--,h=-1),h==-1){if(this.modules.splice(s++,0,c),r)for(let d=0;d<c.rules.length;d++)r.insertRule(c.rules[d],a++)}else{for(;s<h;)a+=this.modules[s++].rules.length;a+=c.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var _l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},eN=typeof navigator<"u"&&/Mac/.test(navigator.platform),tN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ar=0;ar<10;ar++)_l[48+ar]=_l[96+ar]=String(ar);for(var ar=1;ar<=24;ar++)_l[ar+111]="F"+ar;for(var ar=65;ar<=90;ar++)_l[ar]=String.fromCharCode(ar+32),Rc[ar]=String.fromCharCode(ar);for(var Km in _l)Rc.hasOwnProperty(Km)||(Rc[Km]=_l[Km]);function nN(n){var e=eN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||tN&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Rc:_l)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ai(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];typeof a=="string"?n.setAttribute(r,a):a!=null&&(n[r]=a)}e++}for(;e<arguments.length;e++)zw(n,arguments[e]);return n}function zw(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)zw(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let vr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Qg=typeof document<"u"?document:{documentElement:{style:{}}};const Xg=/Edge\/(\d+)/.exec(vr.userAgent),Iw=/MSIE \d/.test(vr.userAgent),$g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vr.userAgent),Ed=!!(Iw||$g||Xg),l1=!Ed&&/gecko\/(\d+)/i.test(vr.userAgent),Gm=!Ed&&/Chrome\/(\d+)/.exec(vr.userAgent),rN="webkitFontSmoothing"in Qg.documentElement.style,Wg=!Ed&&/Apple Computer/.test(vr.vendor),s1=Wg&&(/Mobile\/\w+/.test(vr.userAgent)||vr.maxTouchPoints>2);var Xe={mac:s1||/Mac/.test(vr.platform),windows:/Win/.test(vr.platform),linux:/Linux|X11/.test(vr.platform),ie:Ed,ie_version:Iw?Qg.documentMode||6:$g?+$g[1]:Xg?+Xg[1]:0,gecko:l1,gecko_version:l1?+(/Firefox\/(\d+)/.exec(vr.userAgent)||[0,0])[1]:0,chrome:!!Gm,chrome_version:Gm?+Gm[1]:0,ios:s1,android:/Android\b/.test(vr.userAgent),webkit_version:rN?+(/\bAppleWebKit\/(\d+)/.exec(vr.userAgent)||[0,0])[1]:0,safari:Wg,safari_version:Wg?+(/\bVersion\/(\d+(\.\d+)?)/.exec(vr.userAgent)||[0,0])[1]:0,tabSize:Qg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Y0(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Wf=Object.create(null);function Q0(n,e,t){if(n==e)return!0;n||(n=Wf),e||(e=Wf);let r=Object.keys(n),a=Object.keys(e);if(r.length-0!=a.length-0)return!1;for(let s of r)if(s!=t&&(a.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function iN(n,e){for(let t=n.attributes.length-1;t>=0;t--){let r=n.attributes[t].name;e[r]==null&&n.removeAttribute(r)}for(let t in e){let r=e[t];t=="style"?n.style.cssText=r:n.getAttribute(t)!=r&&n.setAttribute(t,r)}}function o1(n,e,t){let r=!1;if(e)for(let a in e)t&&a in t||(r=!0,a=="style"?n.style.cssText="":n.removeAttribute(a));if(t)for(let a in t)e&&e[a]==t[a]||(r=!0,a=="style"?n.style.cssText=t[a]:n.setAttribute(a,t[a]));return r}function aN(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Nd{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var kr=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(kr||(kr={}));class vn extends ks{constructor(e,t,r,a){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=a}get heightRelevant(){return!1}static mark(e){return new Vc(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ws(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,a;if(e.isBlockGap)r=-5e8,a=4e8;else{let{start:s,end:o}=Pw(e,t);r=(s?t?-3e8:-1:5e8)-1,a=(o?t?2e8:1:-6e8)+1}return new ws(e,r,a,t,e.widget||null,!0)}static line(e){return new Kc(e)}static set(e,t=!1){return Wt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}vn.none=Wt.empty;class Vc extends vn{constructor(e){let{start:t,end:r}=Pw(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Y0(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Wf}eq(e){return this==e||e instanceof Vc&&this.tagName==e.tagName&&Q0(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Vc.prototype.point=!1;class Kc extends vn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Kc&&this.spec.class==e.spec.class&&Q0(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Kc.prototype.mapMode=Kr.TrackBefore;Kc.prototype.point=!0;class ws extends vn{constructor(e,t,r,a,s,o){super(t,r,s,e),this.block=a,this.isReplace=o,this.mapMode=a?t<=0?Kr.TrackBefore:Kr.TrackAfter:Kr.TrackDel}get type(){return this.startSide!=this.endSide?kr.WidgetRange:this.startSide<=0?kr.WidgetBefore:kr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ws&&lN(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ws.prototype.point=!0;function Pw(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function lN(n,e){return n==e||!!(n&&e&&n.compare(e))}function Oo(n,e,t,r=0){let a=t.length-1;a>=0&&t[a]+r>=n?t[a]=Math.max(t[a],e):t.push(n,e)}class Bc extends ks{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Bc&&this.tagName==e.tagName&&Q0(this.attributes,e.attributes)}static create(e){return new Bc(e.tagName,e.attributes||Wf)}static set(e,t=!1){return Wt.of(e,t)}}Bc.prototype.startSide=Bc.prototype.endSide=-1;function qo(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Zg(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function bc(n,e){if(!e.anchorNode)return!1;try{return Zg(n,e.anchorNode)}catch{return!1}}function Hf(n){return n.nodeType==3?Lc(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function kc(n,e,t,r){return t?u1(n,e,t,r,-1)||u1(n,e,t,r,1):!1}function Dl(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Zf(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function u1(n,e,t,r,a){for(;;){if(n==t&&e==r)return!0;if(e==(a<0?0:Ba(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Dl(n)+(a<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(a<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=a<0?Ba(n):0}else return!1}}function Ba(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Jf(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function sN(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Hw(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function oN(n,e,t,r,a,s,o,c){let h=n.ownerDocument,d=h.defaultView||window;for(let p=n,g=!1;p&&!g;)if(p.nodeType==1){let b,w=p==h.body,A=1,N=1;if(w)b=sN(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let H=p.getBoundingClientRect();({scaleX:A,scaleY:N}=Hw(p,H)),b={left:H.left,right:H.left+p.clientWidth*A,top:H.top,bottom:H.top+p.clientHeight*N}}let _=0,O=0;if(a=="nearest")e.top<b.top?(O=e.top-(b.top+o),t>0&&e.bottom>b.bottom+O&&(O=e.bottom-b.bottom+o)):e.bottom>b.bottom&&(O=e.bottom-b.bottom+o,t<0&&e.top-O<b.top&&(O=e.top-(b.top+o)));else{let H=e.bottom-e.top,R=b.bottom-b.top;O=(a=="center"&&H<=R?e.top+H/2-R/2:a=="start"||a=="center"&&t<0?e.top-o:e.bottom-R+o)-b.top}if(r=="nearest"?e.left<b.left?(_=e.left-(b.left+s),t>0&&e.right>b.right+_&&(_=e.right-b.right+s)):e.right>b.right&&(_=e.right-b.right+s,t<0&&e.left<b.left+_&&(_=e.left-(b.left+s))):_=(r=="center"?e.left+(e.right-e.left)/2-(b.right-b.left)/2:r=="start"==c?e.left-s:e.right-(b.right-b.left)+s)-b.left,_||O)if(w)d.scrollBy(_,O);else{let H=0,R=0;if(O){let ee=p.scrollTop;p.scrollTop+=O/N,R=(p.scrollTop-ee)*N}if(_){let ee=p.scrollLeft;p.scrollLeft+=_/A,H=(p.scrollLeft-ee)*A}e={left:e.left-H,top:e.top-R,right:e.right-H,bottom:e.bottom-R},H&&Math.abs(H-_)<1&&(r="nearest"),R&&Math.abs(R-O)<1&&(a="nearest")}if(w)break;(e.top<b.top||e.bottom>b.bottom||e.left<b.left||e.right>b.right)&&(e={left:Math.max(e.left,b.left),right:Math.min(e.right,b.right),top:Math.max(e.top,b.top),bottom:Math.min(e.bottom,b.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function uN(n){let e=n.ownerDocument,t,r;for(let a=n.parentNode;a&&!(a==e.body||t&&r);)if(a.nodeType==1)!r&&a.scrollHeight>a.clientHeight&&(r=a),!t&&a.scrollWidth>a.clientWidth&&(t=a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;return{x:t,y:r}}class cN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Ba(t):0),r,Math.min(e.focusOffset,r?Ba(r):0))}set(e,t,r,a){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=a}}let ms=null;Xe.safari&&Xe.safari_version>=26&&(ms=!1);function qw(n){if(n.setActive)return n.setActive();if(ms)return n.focus(ms);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ms==null?{get preventScroll(){return ms={preventScroll:!0},!0}}:void 0),!ms){ms=!1;for(let t=0;t<e.length;){let r=e[t++],a=e[t++],s=e[t++];r.scrollTop!=a&&(r.scrollTop=a),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let c1;function Lc(n,e,t=e){let r=c1||(c1=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Ro(n,e,t,r){let a={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey}=r);let s=new KeyboardEvent("keydown",a);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",a);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function hN(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function fN(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Ba(t));;)if(r){if(t.nodeType!=1)return!1;let a=t.childNodes[r-1];a.contentEditable=="false"?r--:(t=a,r=Ba(t))}else{if(t==n)return!0;r=Dl(t),t=t.parentNode}}function Uw(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Fw(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Ba(t)}else if(t.parentNode&&!Zf(t))r=Dl(t),t=t.parentNode;else return null}}function Vw(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!Zf(t))r=Dl(t)+1,t=t.parentNode;else return null}}class wi{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new wi(e.parentNode,Dl(e),t)}static after(e,t){return new wi(e.parentNode,Dl(e)+1,t)}}var wn=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(wn||(wn={}));const Ss=wn.LTR,X0=wn.RTL;function Kw(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const dN=Kw("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pN=Kw("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Jg=Object.create(null),Ui=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Jg[e]=t,Jg[t]=-e}function Gw(n){return n<=247?dN[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?pN[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const mN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ja{get dir(){return this.level%2?X0:Ss}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,a){let s=-1;for(let o=0;o<e.length;o++){let c=e[o];if(c.from<=t&&c.to>=t){if(c.level==r)return o;(s<0||(a!=0?a<0?c.from<t:c.to>t:e[s].level>c.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Yw(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],a=e[t];if(r.from!=a.from||r.to!=a.to||r.direction!=a.direction||!Yw(r.inner,a.inner))return!1}return!0}const sn=[];function gN(n,e,t,r,a){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,c=s<r.length?r[s].from:t,h=s?256:a;for(let d=o,p=h,g=h;d<c;d++){let b=Gw(n.charCodeAt(d));b==512?b=p:b==8&&g==4&&(b=16),sn[d]=b==4?2:b,b&7&&(g=b),p=b}for(let d=o,p=h,g=h;d<c;d++){let b=sn[d];if(b==128)d<c-1&&p==sn[d+1]&&p&24?b=sn[d]=p:sn[d]=256;else if(b==64){let w=d+1;for(;w<c&&sn[w]==64;)w++;let A=d&&p==8||w<t&&sn[w]==8?g==1?1:8:256;for(let N=d;N<w;N++)sn[N]=A;d=w-1}else b==8&&g==1&&(sn[d]=1);p=b,b&7&&(g=b)}}}function yN(n,e,t,r,a){let s=a==1?2:1;for(let o=0,c=0,h=0;o<=r.length;o++){let d=o?r[o-1].to:e,p=o<r.length?r[o].from:t;for(let g=d,b,w,A;g<p;g++)if(w=Jg[b=n.charCodeAt(g)])if(w<0){for(let N=c-3;N>=0;N-=3)if(Ui[N+1]==-w){let _=Ui[N+2],O=_&2?a:_&4?_&1?s:a:0;O&&(sn[g]=sn[Ui[N]]=O),c=N;break}}else{if(Ui.length==189)break;Ui[c++]=g,Ui[c++]=b,Ui[c++]=h}else if((A=sn[g])==2||A==1){let N=A==a;h=N?0:1;for(let _=c-3;_>=0;_-=3){let O=Ui[_+2];if(O&2)break;if(N)Ui[_+2]|=2;else{if(O&4)break;Ui[_+2]|=4}}}}}function xN(n,e,t,r){for(let a=0,s=r;a<=t.length;a++){let o=a?t[a-1].to:n,c=a<t.length?t[a].from:e;for(let h=o;h<c;){let d=sn[h];if(d==256){let p=h+1;for(;;)if(p==c){if(a==t.length)break;p=t[a++].to,c=a<t.length?t[a].from:e}else if(sn[p]==256)p++;else break;let g=s==1,b=(p<e?sn[p]:r)==1,w=g==b?g?1:2:r;for(let A=p,N=a,_=N?t[N-1].to:n;A>h;)A==_&&(A=t[--N].from,_=N?t[N-1].to:n),sn[--A]=w;h=p}else s=d,h++}}}function e0(n,e,t,r,a,s,o){let c=r%2?2:1;if(r%2==a%2)for(let h=e,d=0;h<t;){let p=!0,g=!1;if(d==s.length||h<s[d].from){let N=sn[h];N!=c&&(p=!1,g=N==16)}let b=!p&&c==1?[]:null,w=p?r:r+1,A=h;e:for(;;)if(d<s.length&&A==s[d].from){if(g)break e;let N=s[d];if(!p)for(let _=N.to,O=d+1;;){if(_==t)break e;if(O<s.length&&s[O].from==_)_=s[O++].to;else{if(sn[_]==c)break e;break}}if(d++,b)b.push(N);else{N.from>h&&o.push(new ja(h,N.from,w));let _=N.direction==Ss!=!(w%2);t0(n,_?r+1:r,a,N.inner,N.from,N.to,o),h=N.to}A=N.to}else{if(A==t||(p?sn[A]!=c:sn[A]==c))break;A++}b?e0(n,h,A,r+1,a,b,o):h<A&&o.push(new ja(h,A,w)),h=A}else for(let h=t,d=s.length;h>e;){let p=!0,g=!1;if(!d||h>s[d-1].to){let N=sn[h-1];N!=c&&(p=!1,g=N==16)}let b=!p&&c==1?[]:null,w=p?r:r+1,A=h;e:for(;;)if(d&&A==s[d-1].to){if(g)break e;let N=s[--d];if(!p)for(let _=N.from,O=d;;){if(_==e)break e;if(O&&s[O-1].to==_)_=s[--O].from;else{if(sn[_-1]==c)break e;break}}if(b)b.push(N);else{N.to<h&&o.push(new ja(N.to,h,w));let _=N.direction==Ss!=!(w%2);t0(n,_?r+1:r,a,N.inner,N.from,N.to,o),h=N.from}A=N.from}else{if(A==e||(p?sn[A-1]!=c:sn[A-1]==c))break;A--}b?e0(n,A,h,r+1,a,b,o):A<h&&o.push(new ja(A,h,w)),h=A}}function t0(n,e,t,r,a,s,o){let c=e%2?2:1;gN(n,a,s,r,c),yN(n,a,s,r,c),xN(a,s,r,c),e0(n,a,s,e,t,r,o)}function vN(n,e,t){if(!n)return[new ja(0,0,e==X0?1:0)];if(e==Ss&&!t.length&&!mN.test(n))return Qw(n.length);if(t.length)for(;n.length>sn.length;)sn[sn.length]=256;let r=[],a=e==Ss?0:1;return t0(n,a,a,t,0,n.length,r),r}function Qw(n){return[new ja(0,n,0)]}let Xw="";function bN(n,e,t,r,a){var s;let o=r.head-n.from,c=ja.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),h=e[c],d=h.side(a,t);if(o==d){let b=c+=a?1:-1;if(b<0||b>=e.length)return null;h=e[c=b],o=h.side(!a,t),d=h.side(a,t)}let p=Vn(n.text,o,h.forward(a,t));(p<h.from||p>h.to)&&(p=d),Xw=n.text.slice(Math.min(o,p),Math.max(o,p));let g=c==(a?e.length-1:0)?null:e[c+(a?1:-1)];return g&&p==d&&g.level+(a?0:1)<h.level?Oe.cursor(g.side(!a,t)+n.from,g.forward(a,t)?1:-1,g.level):Oe.cursor(p+n.from,h.forward(a,t)?-1:1,h.level)}function kN(n,e,t){for(let r=e;r<t;r++){let a=Gw(n.charCodeAt(r));if(a==1)return Ss;if(a==2||a==4)return X0}return Ss}const $w=ot.define(),Ww=ot.define(),Zw=ot.define(),Jw=ot.define(),n0=ot.define(),eS=ot.define(),tS=ot.define(),$0=ot.define(),W0=ot.define(),nS=ot.define({combine:n=>n.some(e=>e)}),rS=ot.define({combine:n=>n.some(e=>e)}),iS=ot.define();class Bo{constructor(e,t="nearest",r="nearest",a=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=a,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Bo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Bo(Oe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const gf=dn.define({map:(n,e)=>n.map(e)}),aS=dn.define();function Xi(n,e,t){let r=n.facet(Jw);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const _a=ot.define({combine:n=>n.length?n[0]:!0});let wN=0;const Eo=ot.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class hi{constructor(e,t,r,a,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=a,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Eo.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Eo.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:a,provide:s,decorations:o}=t||{};return new hi(wN++,e,r,a,c=>{let h=[];return o&&h.push(Md.of(d=>{let p=d.plugin(c);return p?o(p):vn.none})),s&&h.push(s(c)),h})}static fromClass(e,t){return hi.define((r,a)=>new e(r,a),t)}}class Ym{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Xi(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Xi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Xi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const lS=ot.define(),Z0=ot.define(),Md=ot.define(),sS=ot.define(),J0=ot.define(),Gc=ot.define(),oS=ot.define();function h1(n,e){let t=n.state.facet(oS);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),a=[];return Wt.spans(r,e.from,e.to,{point(){},span(s,o,c,h){let d=s-e.from,p=o-e.from,g=a;for(let b=c.length-1;b>=0;b--,h--){let w=c[b].spec.bidiIsolate,A;if(w==null&&(w=kN(e.text,d,p)),h>0&&g.length&&(A=g[g.length-1]).to==d&&A.direction==w)A.to=p,g=A.inner;else{let N={from:d,to:p,direction:w,inner:[]};g.push(N),g=N.inner}}}}),a}const uS=ot.define();function cS(n){let e=0,t=0,r=0,a=0;for(let s of n.state.facet(uS)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(a=Math.max(a,o.bottom)))}return{left:e,right:t,top:r,bottom:a}}const dc=ot.define();class oi{constructor(e,t,r,a){this.fromA=e,this.toA=t,this.fromB=r,this.toB=a}join(e){return new oi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let a=e[t-1];if(!(a.fromA>r.toA)){if(a.toA<r.fromA)break;r=r.join(a),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let a=0,s=0,o=0;;){let c=a<e.length?e[a].fromB:1e9,h=s<t.length?t[s]:1e9,d=Math.min(c,h);if(d==1e9)break;let p=d+o,g=d,b=p;for(;;)if(s<t.length&&t[s]<=g){let w=t[s+1];s+=2,g=Math.max(g,w);for(let A=a;A<e.length&&e[A].fromB<=g;A++)o=e[A].toA-e[A].toB;b=Math.max(b,w+o)}else if(a<e.length&&e[a].fromB<=g){let w=e[a++];g=Math.max(g,w.toB),b=Math.max(b,w.toA),o=w.toA-w.toB}else break;r.push(new oi(p,b,d,g))}return r}}class ed{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Fn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let a=[];this.changes.iterChangedRanges((s,o,c,h)=>a.push(new oi(s,o,c,h))),this.changedRanges=a}static create(e,t,r){return new ed(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const SN=[];class qn{constructor(e,t,r=0){this.dom=e,this.length=t,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return SN}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&iN(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let r=t;for(let a of this.children){if(a==e)return r;r+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let r=Dl(this.dom),a=this.length?e>0:t>0;return new wi(this.parent.dom,r+(a?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Dd)return e;return null}static get(e){return e.cmTile}}class _d extends qn{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,r=null,a,s=e?.node==t?e:null,o=0;for(let c of this.children){if(c.sync(e),o+=c.length+c.breakAfter,a=r?r.nextSibling:t.firstChild,s&&a!=c.dom&&(s.written=!0),c.dom.parentNode==t)for(;a&&a!=c.dom;)a=f1(a);else t.insertBefore(c.dom,a);r=c.dom}for(a=r?r.nextSibling:t.firstChild,s&&a&&(s.written=!0);a;)a=f1(a);this.length=o}}function f1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Dd extends _d{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=qn.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],r=this,a=0,s=0;;)if(a==r.children.length){if(!t.length)return;r=r.parent,r.breakAfter&&s++,a=t.pop()}else{let o=r.children[a++];if(o instanceof Tl)t.push(a),r=o,a=0;else{let c=s+o.length,h=e(o,s);if(h!==void 0)return h;s=c+o.breakAfter}}}resolveBlock(e,t){let r,a=-1,s,o=-1;if(this.blockTiles((c,h)=>{let d=h+c.length;if(e>=h&&e<=d){if(c.isWidget()&&t>=-1&&t<=1){if(c.flags&32)return!0;c.flags&16&&(r=void 0)}(h<e||e==d&&(t<-1?c.length:c.covers(1)))&&(!r||!c.isWidget()&&r.isWidget())&&(r=c,a=e-h),(d>e||e==h&&(t>1?c.length:c.covers(-1)))&&(!s||!c.isWidget()&&s.isWidget())&&(s=c,o=e-h)}}),!r&&!s)throw new Error("No tile at position "+e);return r&&t<0||!s?{tile:r,offset:a}:{tile:s,offset:o}}}class Tl extends _d{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let r=new Tl(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}}class Uo extends _d{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,r){let a=new Uo(t||document.createElement("div"),e);return(!t||!r)&&(a.flags|=4),a}get domAttrs(){return this.attrs}resolveInline(e,t,r){let a=null,s=-1,o=null,c=-1;function h(p,g){for(let b=0,w=0;b<p.children.length&&w<=g;b++){let A=p.children[b],N=w+A.length;N>=g&&(A.isComposite()?h(A,g-w):(!o||o.isHidden&&(t>0||r&&AN(o,A)))&&(N>g||A.flags&32)?(o=A,c=g-w):(w<g||A.flags&16&&!A.isHidden)&&(a=A,s=g-w)),w=N}}h(this,e);let d=(t<0?a:o)||a||o;return d?{tile:d,offset:d==a?s:c}:null}coordsIn(e,t){let r=this.resolveInline(e,t,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),t):CN(this)}domIn(e,t){let r=this.resolveInline(e,t);if(r){let{tile:a,offset:s}=r;if(this.dom.contains(a.dom))return a.isText()?new wi(a.dom,Math.min(a.dom.nodeValue.length,s)):a.domPosFor(s,a.flags&16?1:a.flags&32?-1:t);let o=r.tile.parent,c=!1;for(let h of o.children){if(c)return new wi(h.dom,0);h==r.tile&&(c=!0)}}return new wi(this.dom,0)}}function CN(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Hf(e);return t[t.length-1]||null}function AN(n,e){let t=n.coordsIn(0,1),r=e.coordsIn(0,1);return t&&r&&r.top<t.bottom}class _r extends _d{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let r=new _r(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}}class xs extends qn{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let r=this.dom.nodeValue.length;e>r&&(e=r);let a=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Xe.chrome||Xe.gecko||(e?(a--,o=1):s<r&&(s++,o=-1)):t<0?a--:s<r&&s++;let c=Lc(this.dom,a,s).getClientRects();if(!c.length)return null;let h=c[(o?o<0:t>=0)?0:c.length-1];return Xe.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),o?Jf(h,o<0):h||null}static of(e,t){let r=new xs(t||document.createTextNode(e),e);return t||(r.flags|=2),r}}class Cs extends qn{constructor(e,t,r,a){super(e,t,a),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,r){let a=this.widget.coordsAt(this.dom,e,t);if(a)return a;if(r)return Jf(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let c=this.flags&16?!0:this.flags&32?!1:e>0;for(let h=c?s.length-1:0;o=s[h],!(e>0?h==0:h==s.length-1||o.top<o.bottom);h+=c?-1:1);return Jf(o,!c)}}get overrideDOMText(){if(!this.length)return Ut.empty;let{root:e}=this;if(!e)return Ut.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,r,a,s){return s||(s=e.toDOM(t),e.editable||(s.contentEditable="false")),new Cs(s,r,e,a)}}class td extends qn{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Ut.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class TN{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,r){let{tile:a,index:s,beforeBreak:o,parents:c}=this;for(;e||t>0;)if(a.isComposite())if(o){if(!e)break;r&&r.break(),e--,o=!1}else if(s==a.children.length){if(!e&&!c.length)break;r&&r.leave(a),o=!!a.breakAfter,{tile:a,index:s}=c.pop(),s++}else{let h=a.children[s],d=h.breakAfter;(t>0?h.length<=e:h.length<e)&&(!r||r.skip(h,0,h.length)!==!1||!h.isComposite)?(o=!!d,s++,e-=h.length):(c.push({tile:a,index:s}),a=h,s=0,r&&h.isComposite()&&r.enter(h))}else if(s==a.length)o=!!a.breakAfter,{tile:a,index:s}=c.pop(),s++;else if(e){let h=Math.min(e,a.length-s);r&&r.skip(a,s,s+h),e-=h,s+=h}else break;return this.tile=a,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class EN{constructor(e,t,r,a){this.from=e,this.to=t,this.wrapper=r,this.rank=a}}class NN{constructor(e,t,r){this.cache=e,this.root=t,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,r,a){var s;this.flushBuffer();let o=this.ensureMarks(t,r),c=o.lastChild;if(c&&c.isText()&&!(c.flags&8)&&c.length+e.length<512){this.cache.reused.set(c,2);let h=o.children[o.children.length-1]=new xs(c.dom,c.text+e);h.parent=o}else o.append(a||xs.of(e,(s=this.cache.find(xs))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let r=this.curLine;r.dom!=t.line.dom&&(r.setDOM(this.cache.reused.has(t.line)?Qm(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let a=r;for(let c=t.marks.length-1;c>=0;c--){let h=t.marks[c],d=a.lastChild;if(d instanceof _r&&d.mark.eq(h.mark))d.dom!=h.dom&&d.setDOM(Qm(h.dom)),a=d;else{if(this.cache.reused.get(h)){let g=qn.get(h.dom);g&&g.setDOM(Qm(h.dom))}let p=_r.of(h.mark,h.dom);a.append(p),a=p}this.cache.reused.set(h,2)}let s=qn.get(e.text);s&&this.cache.reused.set(s,2);let o=new xs(e.text,e.text.nodeValue);o.flags|=8,a.append(o)}addInlineWidget(e,t,r){let a=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);a||this.flushBuffer();let s=this.ensureMarks(t,r);!a&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,r){this.flushBuffer(),this.ensureMarks(t,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var r;e||(e=hS);let a=Uo.start(e,t||((r=this.cache.find(Uo))===null||r===void 0?void 0:r.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=a)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var r;let a=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],c;if(t>0&&(c=a.lastChild)&&c instanceof _r&&c.mark.eq(o))a=c,t--;else{let h=_r.of(o,(r=this.cache.find(_r,d=>d.mark.eq(o)))===null||r===void 0?void 0:r.dom);a.append(h),a=h,t=0}}return a}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!d1(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Xe.ios&&d1(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Xm,0,32)||new Cs(Xm.toDOM(),0,Xm,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new EN(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-t.rank||this.wrappers[r-1].to-t.to)<0;)r--;this.wrappers.splice(r,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let r of this.wrappers){let a=t.lastChild;if(r.from<this.pos&&a instanceof Tl&&a.wrapper.eq(r.wrapper))t=a;else{let s=Tl.of(r.wrapper,(e=this.cache.find(Tl,o=>o.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);t.append(s),t=s}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),r=this.cache.find(td,void 0,1);return r&&(r.flags=t),r||new td(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class MN{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:a,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=a;let c=this.textOff=Math.min(e,a.length);return s?null:a.slice(0,c)}let t=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,t);return this.textOff=t,r}}const nd=[Cs,Uo,xs,_r,td,Tl,Dd];for(let n=0;n<nd.length;n++)nd[n].bucket=n;class _N{constructor(e){this.view=e,this.buckets=nd.map(()=>[]),this.index=nd.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,r=this.buckets[t];r.length<6?r.push(e):r[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,r=2){let a=e.bucket,s=this.buckets[a],o=this.index[a];for(let c=s.length-1;c>=0;c--){let h=(c+o)%s.length,d=s[h];if((!t||t(d))&&!this.reused.has(d))return s.splice(h,1),h<o&&this.index[a]--,this.reused.set(d,r),d}return null}findWidget(e,t,r){let a=this.buckets[0];if(a.length)for(let s=0,o=0;;s++){if(s==a.length){if(o)return null;o=1,s=0}let c=a[s];if(!this.reused.has(c)&&(o==0?c.widget.compare(e):c.widget.constructor==e.constructor&&e.updateDOM(c.dom,this.view)))return a.splice(s,1),s<this.index[0]&&this.index[0]--,c.widget==e&&c.length==t&&(c.flags&497)==r?(this.reused.set(c,1),c):(this.reused.set(c,2),new Cs(c.dom,t,e,c.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class DN{constructor(e,t,r,a,s){this.view=e,this.decorations=a,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new _N(e),this.text=new MN(e.state.doc),this.builder=new NN(this.cache,new Dd(e,e.contentDOM),Wt.iter(r)),this.cache.reused.set(t,2),this.old=new TN(t),this.reuseWalker={skip:(o,c,h)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,t){let r=t&&this.getCompositionContext(t.text);for(let a=0,s=0,o=0;;){let c=o<e.length?e[o++]:null,h=c?c.fromA:this.old.root.length;if(h>a){let d=h-a;this.preserve(d,!o,!c),a=h,s+=d}if(!c)break;t&&c.fromA<=t.range.fromA&&c.toA>=t.range.toA?(this.forward(c.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(s,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,r),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,c.toA),this.emit(t.range.toB,c.toB)):(this.forward(c.fromA,c.toA),this.emit(s,c.toB)),s=c.toB,a=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,r){let a=RN(this.old),s=this.openMarks;this.old.advance(e,r?1:-1,{skip:(o,c,h)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(h-c);else{let d=h>0||c<o.length?Cs.of(o.widget,this.view,h-c,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,a,s),s=a.length)}else if(o.isText())this.builder.ensureLine(null),!c&&h==o.length?this.builder.addText(o.text,a,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(c,h),a,s)),s=a.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof td)this.cache.add(o);else if(o instanceof _r)this.builder.ensureLine(null),this.builder.addMark(o,a,s),this.cache.reused.set(o,1),s=a.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof _r&&a.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?a.length&&(a.length=s=0):o instanceof _r&&(a.shift(),s=Math.min(s,a.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let r=null,a=this.builder,s=0,o=Wt.spans(this.decorations,e,t,{point:(c,h,d,p,g,b)=>{if(d instanceof ws){if(this.disallowBlockEffectsFor[b]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(h>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=p.length,g>p.length)a.continueWidget(h-c);else{let w=d.widget||(d.block?Fo.block:Fo.inline),A=jN(d),N=this.cache.findWidget(w,h-c,A)||Cs.of(w,this.view,h-c,A);d.block?(d.startSide>0&&a.addLineStartIfNotCovered(r),a.addBlockWidget(N)):(a.ensureLine(r),a.addInlineWidget(N,p,g))}r=null}else r=ON(r,d);h>c&&this.text.skip(h-c)},span:(c,h,d,p)=>{for(let g=c;g<h;){let b=this.text.next(Math.min(512,h-g));b==null?(a.addLineStartIfNotCovered(r),a.addBreak(),g++):(a.ensureLine(r),a.addText(b,d,g==c?p:d.length),g+=b.length),r=null}}});a.addLineStartIfNotCovered(r),this.openWidget=o>s,this.openMarks=o}forward(e,t,r=1){t-e<=10?this.old.advance(t-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let t=[],r=null;for(let a=e.parentNode;;a=a.parentNode){let s=qn.get(a);if(a==this.view.contentDOM)break;s instanceof _r?t.push(s):s?.isLine()?r=s:a.nodeName=="DIV"&&!r&&a!=this.view.contentDOM?r=new Uo(a,hS):t.push(_r.of(new Vc({tagName:a.nodeName.toLowerCase(),attributes:aN(a)}),a))}return{line:r,marks:t}}}function d1(n,e){let t=r=>{for(let a of r.children)if((e?a.isText():a.length)||t(a))return!0;return!1};return t(n)}function jN(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const hS={class:"cm-line"};function ON(n,e){let t=e.spec.attributes,r=e.spec.class;return!t&&!r||(n||(n={class:"cm-line"}),t&&Y0(t,n),r&&(n.class+=" "+r)),n}function RN(n){let e=[];for(let t=n.parents.length;t>1;t--){let r=t==n.parents.length?n.tile:n.parents[t].tile;r instanceof _r&&e.push(r.mark)}return e}function Qm(n){let e=qn.get(n);return e&&e.setDOM(n.cloneNode()),n}class Fo extends Nd{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Fo.inline=new Fo("span");Fo.block=new Fo("div");const Xm=new class extends Nd{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class p1{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=vn.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Dd(e,e.contentDOM),this.updateInner([new oi(0,0,0,e.state.doc.length)],null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let a=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?a=this.domChanged.newSel.head:!FN(e.changes,this.hasComposition)&&!e.selectionSet&&(a=e.state.selection.main.head));let s=a>-1?LN(this.view,e.changes,a):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;r=new oi(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Xe.ie||Xe.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,c=this.blockWrappers;this.updateDeco();let h=PN(o,this.decorations,e.changes);h.length&&(r=oi.extendWithRanges(r,h));let d=qN(c,this.blockWrappers,e.changes);return d.length&&(r=oi.extendWithRanges(r,d)),s&&!r.some(p=>p.fromA<=s.range.fromA&&p.toA>=s.range.toA)&&(r=s.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(t||e.length){let o=this.tile,c=new DN(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(e,t),r0(o,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Xe.chrome||Xe.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||r.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof $m&&a.push(s.dom);r.updateGaps(a)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(aS)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,a=this.view.root.activeElement,s=a==r,o=!s&&!(this.view.state.facet(_a)||r.tabIndex>-1)&&bc(r,this.view.observer.selectionRange)&&!(a&&r.contains(a));if(!(s||t||o))return;let c=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,d,p;if(h.empty?p=d=this.inlineDOMNearPos(h.anchor,h.assoc||1):(p=this.inlineDOMNearPos(h.head,h.head==h.from?1:-1),d=this.inlineDOMNearPos(h.anchor,h.anchor==h.from?1:-1)),Xe.gecko&&h.empty&&!this.hasComposition&&BN(d)){let b=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(b,d.node.childNodes[d.offset]||null)),d=p=new wi(b,0),c=!0}let g=this.view.observer.selectionRange;(c||!g.focusNode||(!kc(d.node,d.offset,g.anchorNode,g.anchorOffset)||!kc(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,h))&&(this.view.observer.ignore(()=>{Xe.android&&Xe.chrome&&r.contains(g.focusNode)&&UN(g.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let b=qo(this.view.root);if(b)if(h.empty){if(Xe.gecko){let w=zN(d.node,d.offset);if(w&&w!=3){let A=(w==1?Fw:Vw)(d.node,d.offset);A&&(d=new wi(A.node,A.offset))}}b.collapse(d.node,d.offset),h.bidiLevel!=null&&b.caretBidiLevel!==void 0&&(b.caretBidiLevel=h.bidiLevel)}else if(b.extend){b.collapse(d.node,d.offset);try{b.extend(p.node,p.offset)}catch{}}else{let w=document.createRange();h.anchor>h.head&&([d,p]=[p,d]),w.setEnd(p.node,p.offset),w.setStart(d.node,d.offset),b.removeAllRanges(),b.addRange(w)}o&&this.view.root.activeElement==r&&(r.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new wi(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new wi(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&kc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=qo(e.root),{anchorNode:a,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=this.lineAt(t.head,t.assoc);if(!o)return;let c=o.posAtStart;if(t.head==c||t.head==c+o.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);r.collapse(p.node,p.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&r.collapse(a,s)}posFromDOM(e,t){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let a=r.posAtStart;if(r.isComposite()){let s;if(e==r.dom)s=r.dom.childNodes[t];else{let o=Ba(e)==0?0:t==0?-1:1;for(;;){let c=e.parentNode;if(c==r.dom)break;o==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?o=-1:o=1),e=c}o<0?s=e:s=e.nextSibling}if(s==r.dom.firstChild)return a;for(;s&&!qn.get(s);)s=s.nextSibling;if(!s)return a+r.length;for(let o=0,c=a;;o++){let h=r.children[o];if(h.dom==s)return c;c+=h.length+h.breakAfter}}else return r.isText()?e==r.dom?a+t:a+(t?r.length:0):a}domAtPos(e,t){let{tile:r,offset:a}=this.tile.resolveBlock(e,t);return r.isWidget()?r.domPosFor(e,t):r.domIn(a,t)}inlineDOMNearPos(e,t){let r,a=-1,s=!1,o,c=-1,h=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=e)return!0;d.flags&16&&(s=!0)}else{let g=p+d.length;if(p<=e&&(r=d,a=e-p,s=g<e),g>=e&&!o&&(o=d,c=e-p,h=p>e),p>e&&o)return!0}}),!r&&!o?this.domAtPos(e,t):(s&&o?r=null:h&&r&&(o=null),r&&t<0||!o?r.domIn(a,t):o.domIn(c,t))}coordsAt(e,t){let{tile:r,offset:a}=this.tile.resolveBlock(e,t);return r.isWidget()?r.widget instanceof $m?null:r.coordsInWidget(a,t,!0):r.coordsIn(a,t)}lineAt(e,t){let{tile:r}=this.tile.resolveBlock(e,t);return r.isLine()?r:null}coordsForChar(e){let{tile:t,offset:r}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function a(s,o){if(s.isComposite())for(let c of s.children){if(c.length>=o){let h=a(c,o);if(h)return h}if(o-=c.length,o<0)break}else if(s.isText()&&o<s.length){let c=Vn(s.text,o);if(c==o)return null;let h=Lc(s.dom,o,c).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(d==h.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return a(t,r)}measureVisibleLineHeights(e){let t=[],{from:r,to:a}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==wn.LTR,d=0,p=(g,b,w)=>{for(let A=0;A<g.children.length&&!(b>a);A++){let N=g.children[A],_=b+N.length,O=N.dom.getBoundingClientRect(),{height:H}=O;if(w&&!A&&(d+=O.top-w.top),N instanceof Tl)_>r&&p(N,b,O);else if(b>=r&&(d>0&&t.push(-d),t.push(H+d),d=0,o)){let R=N.dom.lastChild,ee=R?Hf(R):[];if(ee.length){let Z=ee[ee.length-1],I=h?Z.right-O.left:O.right-Z.left;I>c&&(c=I,this.minWidth=s,this.minWidthFrom=b,this.minWidthTo=_)}}w&&A==g.children.length-1&&(d+=w.bottom-O.bottom),b=_+N.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?wn.RTL:wn.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let c=0,h;for(let d of o.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=Hf(d.dom);if(p.length!=1)return;c+=p[0].width,h=p[0].height}if(c)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:c/o.length,textHeight:h}}});if(e)return e;let t=document.createElement("div"),r,a,s;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let o=Hf(t.firstChild)[0];r=t.getBoundingClientRect().height,a=o&&o.width?o.width/27:7,s=o&&o.height?o.height:r,t.remove()}),{lineHeight:r,charWidth:a,textHeight:s}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,a=0;;a++){let s=a==t.viewports.length?null:t.viewports[a],o=s?s.from-1:this.view.state.doc.length;if(o>r){let c=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(vn.replace({widget:new $m(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return vn.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Md).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,a=this.view.state.facet(J0).map((s,o)=>{let c=typeof s=="function";return c&&(r=!0),c?s(this.view):s});for(a.length&&(this.dynamicDecorationMap[e++]=r,t.push(Wt.join(a))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(sS).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(iS))try{if(d(this.view,e.range,e))return!0}catch(p){Xi(this.view.state,p,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),a;if(!r)return;!t.empty&&(a=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,a.left),top:Math.min(r.top,a.top),right:Math.max(r.right,a.right),bottom:Math.max(r.bottom,a.bottom)});let s=cS(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;oN(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==wn.LTR)}lineHasWidget(e){let t=r=>r.isWidget()||r.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){r0(this.tile)}}function r0(n,e){let t=e?.get(n);if(t!=1){t==null&&n.destroy();for(let r of n.children)r0(r,e)}}function BN(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function fS(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Fw(t.focusNode,t.focusOffset),a=Vw(t.focusNode,t.focusOffset),s=r||a;if(a&&r&&a.node!=r.node){let c=qn.get(a.node);if(!c||c.isText()&&c.text!=a.node.nodeValue)s=a;else if(n.docView.lastCompositionAfterCursor){let h=qn.get(r.node);!h||h.isText()&&h.text!=r.node.nodeValue||(s=a)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function LN(n,e,t){let r=fS(n,t);if(!r)return null;let{node:a,from:s,to:o}=r,c=a.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc;return{range:new oi(h.mapPos(s),h.mapPos(o),s,o),text:a}}function zN(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let IN=class{constructor(){this.changes=[]}compareRange(e,t){Oo(e,t,this.changes)}comparePoint(e,t){Oo(e,t,this.changes)}boundChange(e){Oo(e,e,this.changes)}};function PN(n,e,t){let r=new IN;return Wt.compare(n,e,t,r),r.changes}class HN{constructor(){this.changes=[]}compareRange(e,t){Oo(e,t,this.changes)}comparePoint(){}boundChange(e){Oo(e,e,this.changes)}}function qN(n,e,t){let r=new HN;return Wt.compare(n,e,t,r),r.changes}function UN(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function FN(n,e){let t=!1;return e&&n.iterChangedRanges((r,a)=>{r<e.to&&a>e.from&&(t=!0)}),t}class $m extends Nd{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function VN(n,e,t=1){let r=n.charCategorizer(e),a=n.doc.lineAt(e),s=e-a.from;if(a.length==0)return Oe.cursor(e);s==0?t=1:s==a.length&&(t=-1);let o=s,c=s;t<0?o=Vn(a.text,s,!1):c=Vn(a.text,s);let h=r(a.text.slice(o,c));for(;o>0;){let d=Vn(a.text,o,!1);if(r(a.text.slice(d,o))!=h)break;o=d}for(;c<a.length;){let d=Vn(a.text,c);if(r(a.text.slice(c,d))!=h)break;c=d}return Oe.range(o+a.from,c+a.from)}function KN(n,e,t,r,a){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((a-t.top-(n.defaultLineHeight-c)*.5)/c);s+=h*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+ZE(o,s,n.state.tabSize)}function i0(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let a;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!a||s.type==kr.Text&&(a.type!=s.type||(t<0?s.from<e:s.to>e)))&&(a=s)}}return a||r}return r}function GN(n,e,t,r){let a=i0(n,e.head,e.assoc||-1),s=!r||a.type!=kr.Text||!(n.lineWrapping||a.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>a.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),c=n.textDirectionAt(a.from),h=n.posAtCoords({x:t==(c==wn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(h!=null)return Oe.cursor(h,t?-1:1)}return Oe.cursor(t?a.to:a.from,t?-1:1)}function m1(n,e,t,r){let a=n.state.doc.lineAt(e.head),s=n.bidiSpans(a),o=n.textDirectionAt(a.from);for(let c=e,h=null;;){let d=bN(a,s,o,c,t),p=Xw;if(!d){if(a.number==(t?n.state.doc.lines:1))return c;p=`
`,a=n.state.doc.line(a.number+(t?1:-1)),s=n.bidiSpans(a),d=n.visualLineSide(a,!t)}if(h){if(!h(p))return c}else{if(!r)return d;h=r(p)}c=d}}function YN(n,e,t){let r=n.state.charCategorizer(e),a=r(t);return s=>{let o=r(s);return a==lr.Space&&(a=o),a==o}}function QN(n,e,t,r){let a=e.head,s=t?1:-1;if(a==(t?n.state.doc.length:0))return Oe.cursor(a,e.assoc);let o=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(a,e.assoc||-1),p=n.documentTop;if(d)o==null&&(o=d.left-h.left),c=s<0?d.top:d.bottom;else{let A=n.viewState.lineBlockAt(a);o==null&&(o=Math.min(h.right-h.left,n.defaultCharacterWidth*(a-A.from))),c=(s<0?A.top:A.bottom)+p}let g=h.left+o,b=r??n.viewState.heightOracle.textHeight>>1,w=a0(n,{x:g,y:c+b*s},!1,s);return Oe.cursor(w.pos,w.assoc,void 0,o)}function wc(n,e,t){for(;;){let r=0;for(let a of n)a.between(e-1,e+1,(s,o,c)=>{if(e>s&&e<o){let h=r||t||(e-s<o-e?-1:1);e=h<0?s:o,r=h}});if(!r)return e}}function dS(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let a=e.ranges[r],s=null;if(a.empty){let o=wc(n,a.from,0);o!=a.from&&(s=Oe.cursor(o,-1))}else{let o=wc(n,a.from,-1),c=wc(n,a.to,1);(o!=a.from||c!=a.to)&&(s=Oe.range(a.from==a.anchor?o:c,a.from==a.head?o:c))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?Oe.create(t,e.mainIndex):e}function Wm(n,e,t){let r=wc(n.state.facet(Gc).map(a=>a(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:Oe.cursor(r,r<t.from?1:-1)}class Qi{constructor(e,t){this.pos=e,this.assoc=t}}function a0(n,e,t,r){let a=n.contentDOM.getBoundingClientRect(),s=a.top+n.viewState.paddingTop,{x:o,y:c}=e,h=c-s,d;for(;;){if(h<0)return new Qi(0,1);if(h>n.viewState.docHeight)return new Qi(n.state.doc.length,-1);if(d=n.elementAtHeight(h),r==null)break;if(d.type==kr.Text){if(r<0?d.to<n.viewport.from:d.from>n.viewport.to)break;let b=n.docView.coordsAt(r<0?d.from:d.to,r);if(b&&(r<0?b.top<=h+s:b.bottom>=h+s))break}let g=n.viewState.heightOracle.textHeight/2;h=r>0?d.bottom+g:d.top-g}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==kr.Text){let g=KN(n,a,d,o,c);return new Qi(g,g==d.from?1:-1)}}if(d.type!=kr.Text)return h<(d.top+d.bottom)/2?new Qi(d.from,1):new Qi(d.to,-1);let p=n.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=n.docView.lineAt(d.from,-2)),pS(n,p,d.from,o,c)}function pS(n,e,t,r,a){let s=-1,o=null,c=1e9,h=1e9,d=a,p=a,g=(b,w)=>{for(let A=0;A<b.length;A++){let N=b[A];if(N.top==N.bottom)continue;let _=N.left>r?N.left-r:N.right<r?r-N.right:0,O=N.top>a?N.top-a:N.bottom<a?a-N.bottom:0;N.top<=p&&N.bottom>=d&&(d=Math.min(N.top,d),p=Math.max(N.bottom,p),O=0),(s<0||(O-h||_-c)<0)&&(s>=0&&h&&c<_&&o.top<=p-2&&o.bottom>=d+2?h=0:(s=w,c=_,h=O,o=N))}};if(e.isText()){for(let w=0;w<e.length;){let A=Vn(e.text,w);if(g(Lc(e.dom,w,A).getClientRects(),w),!c&&!h)break;w=A}return r>(o.left+o.right)/2==(g1(n,s+t)==wn.LTR)?new Qi(t+Vn(e.text,s),-1):new Qi(t+s,1)}else{if(!e.length)return new Qi(t,1);for(let N=0;N<e.children.length;N++){let _=e.children[N];if(_.flags&48)continue;let O=(_.dom.nodeType==1?_.dom:Lc(_.dom,0,_.length)).getClientRects();if(g(O,N),!c&&!h)break}let b=e.children[s],w=e.posBefore(b,t);return b.isComposite()||b.isText()?pS(n,b,w,Math.max(o.left,Math.min(o.right,r)),a):r>(o.left+o.right)/2==(g1(n,s+t)==wn.LTR)?new Qi(w+b.length,-1):new Qi(w,1)}}function g1(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[ja.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const pc="";class XN{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(Kt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=pc}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let a=e;;){this.findPointBefore(r,a);let s=this.text.length;this.readNode(a);let o=qn.get(a),c=a.nextSibling;if(c==t){o?.breakAfter&&!c&&r!=this.view.contentDOM&&this.lineBreak();break}let h=qn.get(c);(o&&h?o.breakAfter:(o?o.breakAfter:Zf(a))||Zf(c)&&(a.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!WN(c,t)&&this.lineBreak(),a=c}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,a=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,c;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(c=a.exec(t))&&(s=c.index,o=c[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=o-1);r=s+o}}readNode(e){let t=qn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let a=r.iter();!a.next().done;)a.lineBreak?this.lineBreak():this.append(a.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+($N(e,r.node,r.offset)?t:0))}}function $N(n,e,t){for(;;){if(!e||t<Ba(e))return!1;if(e==n)return!0;t=Dl(e)+1,e=e.parentNode}}function WN(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=qn.get(n);if(!r?.isWidget())return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let a=r.overrideDOMText;if(a?.length)return!1}return!0}class y1{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ZN{constructor(e,t,r,a){this.typeOver=a,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=mS(e.docView.tile,t,r,0))){let c=s||o?[]:eM(e),h=new XN(c,e);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=tM(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=s&&s.node==c.focusNode&&s.offset==c.focusOffset||!Zg(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=o&&o.node==c.anchorNode&&o.offset==c.anchorOffset||!Zg(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((Xe.ios||Xe.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(h,d),b=Math.max(h,d),w=p.from-g,A=p.to-b;(w==0||w==1||g==0)&&(A==0||A==-1||b==e.state.doc.length)&&(h=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Oe.range(d,h)):this.newSel=Oe.single(d,h)}}}function mS(n,e,t,r){if(n.isComposite()){let a=-1,s=-1,o=-1,c=-1;for(let h=0,d=r,p=r;h<n.children.length;h++){let g=n.children[h],b=d+g.length;if(d<e&&b>t)return mS(g,e,t,d);if(b>=e&&a==-1&&(a=h,s=d),d>t&&g.dom.parentNode==n.dom){o=h,c=p;break}p=b,d=b+g.breakAfter}return{from:s,to:c<0?r+n.length:c,startDOM:(a?n.children[a-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:o<n.children.length&&o>=0?n.children[o].dom:null}}else return n.isText()?{from:r,to:r+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function gS(n,e){let t,{newSel:r}=e,a=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:c}=e.bounds,h=a.from,d=null;(s===8||Xe.android&&e.text.length<c-o)&&(h=a.to,d="end");let p=yS(n.state.doc.sliceString(o,c,pc),e.text,h-o,d);p&&(Xe.chrome&&s==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==pc+pc&&p.toB--,t={from:o+p.from,to:o+p.toA,insert:Ut.of(e.text.slice(p.from,p.toB).split(pc))})}else r&&(!n.hasFocus&&n.state.facet(_a)||rd(r,a))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!a.empty&&r&&r.main.empty?t={from:a.from,to:a.to,insert:n.state.doc.slice(a.from,a.to)}:(Xe.mac||Xe.android)&&t&&t.from==t.to&&t.from==a.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=Oe.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Ut.of([t.insert.toString().replace("."," ")])}):t&&t.from>=a.from&&t.to<=a.to&&(t.from!=a.from||t.to!=a.to)&&a.to-a.from-(t.to-t.from)<=4?t={from:a.from,to:a.to,insert:n.state.doc.slice(a.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,a.to))}:n.state.doc.lineAt(a.from).to<a.to&&n.docView.lineHasWidget(a.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:a.from,to:a.to,insert:n.state.toText(n.inputState.insertingText)}:Xe.chrome&&t&&t.from==t.to&&t.from==a.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=Oe.single(r.main.anchor-1,r.main.head-1)),t={from:a.from,to:a.to,insert:Ut.of([" "])}),t)return ey(n,t,r,s);if(r&&!rd(r,a)){let o=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=dS(n.state.facet(Gc).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:o,userEvent:c}),!0}else return!1}function ey(n,e,t,r=-1){if(Xe.ios&&n.inputState.flushIOSKey(e))return!0;let a=n.state.selection.main;if(Xe.android&&(e.to==a.to&&(e.from==a.from||e.from==a.from-1&&n.state.sliceDoc(e.from,a.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ro(n.contentDOM,"Enter",13)||(e.from==a.from-1&&e.to==a.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>a.head)&&Ro(n.contentDOM,"Backspace",8)||e.from==a.from&&e.to==a.to+1&&e.insert.length==0&&Ro(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,c=()=>o||(o=JN(n,e,t));return n.state.facet(eS).some(h=>h(n,e.from,e.to,s,c))||n.dispatch(c()),!0}function JN(n,e,t){let r,a=n.state,s=a.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let h=e.from<s.from?-1:1,d=h<0?s.from:s.to,p=wc(a.facet(Gc).map(g=>g(n)),d,h);e.from==p&&(o=p)}if(o>-1)r={changes:e,selection:Oe.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=s.from<e.from?a.sliceDoc(s.from,e.from):"",d=s.to>e.to?a.sliceDoc(e.to,s.to):"";r=a.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=a.changes(e),d=t&&t.main.to<=h.newLength?t.main:void 0;if(a.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let p=n.state.sliceDoc(e.from,e.to),g,b=t&&fS(n,t.main.head);if(b){let A=e.insert.length-(e.to-e.from);g={from:b.from,to:b.to-A}}else g=n.state.doc.lineAt(s.head);let w=s.to-e.to;r=a.changeByRange(A=>{if(A.from==s.from&&A.to==s.to)return{changes:h,range:d||A.map(h)};let N=A.to-w,_=N-p.length;if(n.state.sliceDoc(_,N)!=p||N>=g.from&&_<=g.to)return{range:A};let O=a.changes({from:_,to:N,insert:e.insert}),H=A.to-s.to;return{changes:O,range:d?Oe.range(Math.max(0,d.anchor+H),Math.max(0,d.head+H)):A.map(O)}})}else r={changes:h,selection:d&&a.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),a.update(r,{userEvent:c,scrollIntoView:!0})}function yS(n,e,t,r){let a=Math.min(n.length,e.length),s=0;for(;s<a&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==a&&n.length==e.length)return null;let o=n.length,c=e.length;for(;o>0&&c>0&&n.charCodeAt(o-1)==e.charCodeAt(c-1);)o--,c--;if(r=="end"){let h=Math.max(0,s-Math.min(o,c));t-=o+h-s}if(o<s&&n.length<e.length){let h=t<=s&&t>=o?s-t:0;s-=h,c=s+(c-o),o=s}else if(c<s){let h=t<=s&&t>=c?s-t:0;s-=h,o=s+(o-c),c=s}return{from:s,toA:o,toB:c}}function eM(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:a,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new y1(t,r)),(a!=t||s!=r)&&e.push(new y1(a,s))),e}function tM(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?Oe.single(t+e,r+e):null}function rd(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class nM{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Xe.safari&&e.contentDOM.addEventListener("input",()=>null),Xe.gecko&&yM(e.contentDOM.ownerDocument)}handleEvent(e){!cM(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let a of r.observers)a(this.view,t);for(let a of r.handlers){if(t.defaultPrevented)break;if(a(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=rM(e),r=this.handlers,a=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,c=r[s];c&&o!=!c.handlers.length&&(a.removeEventListener(s,this.handleEvent),c=null),c||a.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&a.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&vS.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Xe.android&&Xe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Xe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=xS.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||iM.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ro(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Xe.safari&&!Xe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function x1(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(a){Xi(t.state,a)}}}function rM(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let a=r.spec,s=a&&a.plugin.domEventHandlers,o=a&&a.plugin.domEventObservers;if(s)for(let c in s){let h=s[c];h&&t(c).handlers.push(x1(r.value,h))}if(o)for(let c in o){let h=o[c];h&&t(c).observers.push(x1(r.value,h))}}for(let r in Ci)t(r).handlers.push(Ci[r]);for(let r in fi)t(r).observers.push(fi[r]);return e}const xS=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],iM="dthko",vS=[16,17,18,20,91,92,224,225],yf=6;function xf(n){return Math.max(0,n)*.7+8}function aM(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class lM{constructor(e,t,r,a){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=a,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=uN(e.contentDOM),this.atoms=e.state.facet(Gc).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Kt.allowMultipleSelections)&&sM(e,t),this.dragging=uM(e,t)&&wS(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&aM(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,a=0,s=0,o=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:a,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=cS(this.view);e.clientX-h.left<=a+yf?t=-xf(a-e.clientX):e.clientX+h.right>=o-yf&&(t=xf(e.clientX-o)),e.clientY-h.top<=s+yf?r=-xf(s-e.clientY):e.clientY+h.bottom>=c-yf&&(r=xf(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=dS(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function sM(n,e){let t=n.state.facet($w);return t.length?t[0](e):Xe.mac?e.metaKey:e.ctrlKey}function oM(n,e){let t=n.state.facet(Ww);return t.length?t[0](e):Xe.mac?!e.altKey:!e.ctrlKey}function uM(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=qo(n.root);if(!r||r.rangeCount==0)return!0;let a=r.getRangeAt(0).getClientRects();for(let s=0;s<a.length;s++){let o=a[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function cM(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=qn.get(t))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Ci=Object.create(null),fi=Object.create(null),bS=Xe.ie&&Xe.ie_version<15||Xe.ios&&Xe.webkit_version<604;function hM(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),kS(n,t.value)},50)}function jd(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function kS(n,e){e=jd(n.state,$0,e);let{state:t}=n,r,a=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(l0!=null&&t.selection.ranges.every(h=>h.empty)&&l0==s.toString()){let h=-1;r=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let g=t.toText((o?s.line(a++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:Oe.cursor(d.from+g.length)}})}else o?r=t.changeByRange(h=>{let d=s.line(a++);return{changes:{from:h.from,to:h.to,insert:d.text},range:Oe.cursor(h.from+d.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}fi.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ci.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);fi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};fi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ci.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Zw))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=dM(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new lM(n,e,t,r)),r&&n.observer.ignore(()=>{qw(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let a=n.inputState.mouseSelection;if(a)return a.start(e),a.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function v1(n,e,t,r){if(r==1)return Oe.cursor(e,t);if(r==2)return VN(n.state,e,t);{let a=n.docView.lineAt(e,t),s=n.state.doc.lineAt(a?a.posAtEnd:e),o=a?a.posAtStart:s.from,c=a?a.posAtEnd:s.to;return c<n.state.doc.length&&c==s.to&&c++,Oe.range(o,c)}}const fM=Xe.ie&&Xe.ie_version<=11;let b1=null,k1=0,w1=0;function wS(n){if(!fM)return n.detail;let e=b1,t=w1;return b1=n,w1=Date.now(),k1=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(k1+1)%3:1}function dM(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=wS(e),a=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),a=a.map(s.changes))},get(s,o,c){let h=n.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),d,p=v1(n,h.pos,h.assoc,r);if(t.pos!=h.pos&&!o){let g=v1(n,t.pos,t.assoc,r),b=Math.min(g.from,p.from),w=Math.max(g.to,p.to);p=b<p.from?Oe.range(b,w):Oe.range(w,b)}return o?a.replaceRange(a.main.extend(p.from,p.to)):c&&r==1&&a.ranges.length>1&&(d=pM(a,h.pos))?d:c?a.addRange(p):Oe.create([p])}}}function pM(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:a}=n.ranges[t];if(r<=e&&a>=e)return Oe.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ci.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let a=n.docView.tile.nearest(e.target);if(a&&a.isWidget()){let s=a.posAtStart,o=s+a.length;(s>=t.to||o<=t.from)&&(t=Oe.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",jd(n.state,W0,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ci.dragend=n=>(n.inputState.draggedContent=null,!1);function S1(n,e,t,r){if(t=jd(n.state,$0,t),!t)return;let a=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&oM(n,e)?{from:s.from,to:s.to}:null,c={from:a,insert:t},h=n.state.changes(o?[o,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(a,-1),head:h.mapPos(a,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ci.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),a=0,s=()=>{++a==t.length&&S1(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let c=new FileReader;c.onerror=s,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[o]=c.result),s()},c.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return S1(n,e,r,!0),!0}return!1};Ci.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=bS?null:e.clipboardData;return t?(kS(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(hM(n),!1)};function mM(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function gM(n){let e=[],t=[],r=!1;for(let a of n.selection.ranges)a.empty||(e.push(n.sliceDoc(a.from,a.to)),t.push(a));if(!e.length){let a=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>a&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),a=o.number}r=!0}return{text:jd(n,W0,e.join(n.lineBreak)),ranges:t,linewise:r}}let l0=null;Ci.copy=Ci.cut=(n,e)=>{let t=qo(n.root);if(t&&!bc(n.contentDOM,t))return!1;let{text:r,ranges:a,linewise:s}=gM(n.state);if(!r&&!s)return!1;l0=s?r:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"});let o=bS?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(mM(n,r),!1)};const SS=Rl.define();function CS(n,e){let t=[];for(let r of n.facet(tS)){let a=r(n,e);a&&t.push(a)}return t.length?n.update({effects:t,annotations:SS.of(!0)}):null}function AS(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=CS(n.state,e);t?n.dispatch(t):n.update([])}},10)}fi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),AS(n)};fi.blur=n=>{n.observer.clearSelectionRange(),AS(n)};fi.compositionstart=fi.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};fi.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Xe.chrome&&Xe.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};fi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ci.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let c=o[0],h=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return ey(n,{from:h,to:d,insert:n.state.toText(s)},null),!0}}let a;if(Xe.chrome&&Xe.android&&(a=xS.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(a.key,a.keyCode),a.key=="Backspace"||a.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Xe.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Xe.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>fi.compositionend(n,e),20),!1};const C1=new Set;function yM(n){C1.has(n)||(C1.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const A1=["pre-wrap","normal","pre-line","break-spaces"];let Vo=!1;function T1(){Vo=!1}class xM{constructor(e){this.lineWrapping=e,this.doc=Ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return A1.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let a=e[r];a<0?r++:this.heightSamples[Math.floor(a*10)]||(t=!0,this.heightSamples[Math.floor(a*10)]=!0)}return t}refresh(e,t,r,a,s,o){let c=A1.indexOf(e)>-1,h=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=c||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=a,this.lineLength=s,h){this.heightSamples={};for(let d=0;d<o.length;d++){let p=o[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class vM{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ki{constructor(e,t,r,a,s){this.from=e,this.length=t,this.top=r,this.height=a,this._content=s}get type(){return typeof this._content=="number"?kr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ws?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ki(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fn=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(fn||(fn={}));const qf=.001;class wr{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>qf&&(Vo=!0),this.height=e)}replace(e,t,r){return wr.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,a){let s=this,o=r.doc;for(let c=a.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:p,toB:g}=a[c],b=s.lineAt(h,fn.ByPosNoHeight,r.setDoc(t),0,0),w=b.to>=d?b:s.lineAt(d,fn.ByPosNoHeight,r,0,0);for(g+=w.to-d,d=w.to;c>0&&b.from<=a[c-1].toA;)h=a[c-1].fromA,p=a[c-1].fromB,c--,h<b.from&&(b=s.lineAt(h,fn.ByPosNoHeight,r,0,0));p+=b.from-h,h=b.from;let A=ty.build(r.setDoc(o),e,p,g);s=id(s,s.replace(h,d,A))}return s.updateHeight(r,0)}static empty(){return new Vr(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,a=0,s=0;for(;;)if(t==r)if(a>s*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,a-=c.size}else if(s>a*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,s-=c.size}else break;else if(a<s){let c=e[t++];c&&(a+=c.size)}else{let c=e[--r];c&&(s+=c.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new kM(wr.of(e.slice(0,t)),o,wr.of(e.slice(r)))}}function id(n,e){return n==e?n:(n.constructor!=e.constructor&&(Vo=!0),e)}wr.prototype.size=1;const bM=vn.replace({});class TS extends wr{constructor(e,t,r){super(e,t),this.deco=r,this.spaceAbove=0}mainBlock(e,t){return new ki(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,r,a){return this.spaceAbove&&e<r+this.spaceAbove?new ki(a,0,r,this.spaceAbove,bM):this.mainBlock(r,a)}lineAt(e,t,r,a,s){let o=this.mainBlock(a,s);return this.spaceAbove?this.blockAt(0,r,a,s).join(o):o}forEachLine(e,t,r,a,s,o){e<=s+this.length&&t>=s&&o(this.lineAt(0,fn.ByPos,r,a,s))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,r=!1,a){return a&&a.from<=t&&a.more&&this.setMeasuredHeight(a),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vr extends TS{constructor(e,t,r){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,t){return new ki(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,r){let a=r[0];return r.length==1&&(a instanceof Vr||a instanceof ir&&a.flags&4)&&Math.abs(this.length-a.length)<10?(a instanceof ir?a=new Vr(a.length,this.height,this.spaceAbove):a.height=this.height,this.outdated||(a.outdated=!1),a):wr.of(r)}updateHeight(e,t=0,r=!1,a){return a&&a.from<=t&&a.more?this.setMeasuredHeight(a):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ir extends wr{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,a=e.doc.lineAt(t+this.length).number,s=a-r+1,o,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);o=h/s,this.length>s+1&&(c=(this.height-h)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:a,perLine:o,perChar:c}}blockAt(e,t,r,a){let{firstLine:s,lastLine:o,perLine:c,perChar:h}=this.heightMetrics(t,a);if(t.lineWrapping){let d=a+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=t.doc.lineAt(d),g=c+p.length*h,b=Math.max(r,e-g/2);return new ki(p.from,p.length,b,g,0)}else{let d=Math.max(0,Math.min(o-s,Math.floor((e-r)/c))),{from:p,length:g}=t.doc.line(s+d);return new ki(p,g,r+c*d,c,0)}}lineAt(e,t,r,a,s){if(t==fn.ByHeight)return this.blockAt(e,r,a,s);if(t==fn.ByPosNoHeight){let{from:w,to:A}=r.doc.lineAt(e);return new ki(w,A-w,0,0,0)}let{firstLine:o,perLine:c,perChar:h}=this.heightMetrics(r,s),d=r.doc.lineAt(e),p=c+d.length*h,g=d.number-o,b=a+c*g+h*(d.from-s-g);return new ki(d.from,d.length,Math.max(a,Math.min(b,a+this.height-p)),p,0)}forEachLine(e,t,r,a,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(r,s);for(let p=e,g=a;p<=t;){let b=r.doc.lineAt(p);if(p==e){let A=b.number-c;g+=h*A+d*(e-s-A)}let w=h+d*b.length;o(new ki(b.from,b.length,g,w,0)),g+=w,p=b.to+1}}replace(e,t,r){let a=this.length-t;if(a>0){let s=r[r.length-1];s instanceof ir?r[r.length-1]=new ir(s.length+a):r.push(null,new ir(a-1))}if(e>0){let s=r[0];s instanceof ir?r[0]=new ir(e+s.length):r.unshift(new ir(e-1),null)}return wr.of(r)}decomposeLeft(e,t){t.push(new ir(e-1),null)}decomposeRight(e,t){t.push(null,new ir(this.length-e-1))}updateHeight(e,t=0,r=!1,a){let s=t+this.length;if(a&&a.from<=t+this.length&&a.more){let o=[],c=Math.max(t,a.from),h=-1;for(a.from>t&&o.push(new ir(a.from-t-1).updateHeight(e,t));c<=s&&a.more;){let p=e.doc.lineAt(c).length;o.length&&o.push(null);let g=a.heights[a.index++],b=0;g<0&&(b=-g,g=a.heights[a.index++]),h==-1?h=g:Math.abs(g-h)>=qf&&(h=-2);let w=new Vr(p,g,b);w.outdated=!1,o.push(w),c+=p+1}c<=s&&o.push(null,new ir(s-c).updateHeight(e,c));let d=wr.of(o);return(h<0||Math.abs(d.height-this.height)>=qf||Math.abs(h-this.heightMetrics(e,t).perLine)>=qf)&&(Vo=!0),id(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class kM extends wr{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,a){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,a):this.right.blockAt(e,t,s,a+this.left.length+this.break)}lineAt(e,t,r,a,s){let o=a+this.left.height,c=s+this.left.length+this.break,h=t==fn.ByHeight?e<o:e<c,d=h?this.left.lineAt(e,t,r,a,s):this.right.lineAt(e,t,r,o,c);if(this.break||(h?d.to<c:d.from>c))return d;let p=t==fn.ByPosNoHeight?fn.ByPosNoHeight:fn.ByPos;return h?d.join(this.right.lineAt(c,p,r,o,c)):this.left.lineAt(c,p,r,a,s).join(d)}forEachLine(e,t,r,a,s,o){let c=a+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,a,s,o),t>=h&&this.right.forEachLine(e,t,r,c,h,o);else{let d=this.lineAt(h,fn.ByPos,r,a,s);e<d.from&&this.left.forEachLine(e,d.from-1,r,a,s,o),d.to>=e&&d.from<=t&&o(d),t>d.to&&this.right.forEachLine(d.to+1,t,r,c,h,o)}}replace(e,t,r){let a=this.left.length+this.break;if(t<a)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-a,t-a,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let c of r)s.push(c);if(e>0&&E1(s,o-1),t<this.length){let c=s.length;this.decomposeRight(t,s),E1(s,c)}return wr.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,a=r+this.break;if(e>=a)return this.right.decomposeRight(e-a,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<a&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?wr.of(this.break?[e,null,t]:[e,t]):(this.left=id(this.left,e),this.right=id(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,a){let{left:s,right:o}=this,c=t+s.length+this.break,h=null;return a&&a.from<=t+s.length&&a.more?h=s=s.updateHeight(e,t,r,a):s.updateHeight(e,t,r),a&&a.from<=c+o.length&&a.more?h=o=o.updateHeight(e,c,r,a):o.updateHeight(e,c,r),h?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function E1(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof ir&&(r=n[e+1])instanceof ir&&n.splice(e-1,3,new ir(t.length+1+r.length))}const wM=5;class ty{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),a=this.nodes[this.nodes.length-1];a instanceof Vr?a.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Vr(r-this.pos,-1,0)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let a=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;a<0&&(a=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new TS(o,a,r)):(o||s||a>=wM)&&this.addLineDeco(a,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vr(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let r=new ir(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vr)return e;let t=new Vr(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let a=this.ensureLine();a.length+=r,a.collapsed+=r,a.widgetHeight=Math.max(a.widgetHeight,e),a.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Vr)&&!this.isCovered?this.nodes.push(new Vr(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let a of this.nodes)a instanceof Vr&&a.updateHeight(this.oracle,r),r+=a?a.length:1;return this.nodes}static build(e,t,r,a){let s=new ty(r,e);return Wt.spans(t,r,a,s,0),s.finish(r)}}function SM(n,e,t){let r=new CM;return Wt.compare(n,e,t,r,0),r.changes}class CM{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,a){(e<t||r&&r.heightRelevant||a&&a.heightRelevant)&&Oo(e,t,this.changes,5)}}function AM(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,a=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(a.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(a.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=r.body;)if(d.nodeType==1){let p=d,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let b=p.getBoundingClientRect();s=Math.max(s,b.left),o=Math.min(o,b.right),c=Math.max(c,b.top),h=Math.min(d==n.parentNode?a.innerHeight:h,b.bottom)}d=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function TM(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function EM(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Zm{constructor(e,t,r,a){this.from=e,this.to=t,this.size=r,this.displaySize=a}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let a=e[r],s=t[r];if(a.from!=s.from||a.to!=s.to||a.size!=s.size)return!1}return!0}draw(e,t){return vn.replace({widget:new NM(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class NM extends Nd{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class N1{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=M1,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Z0).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new xM(t),this.stateDeco=_1(e),this.heightMap=wr.empty().applyChanges(this.stateDeco,Ut.empty,this.heightOracle.setDoc(e.doc),[new oi(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=vn.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let a=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>a>=s&&a<=o)){let{from:s,to:o}=this.lineBlockAt(a);e.push(new vf(s,o))}}return this.viewports=e.sort((r,a)=>r.from-a.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?M1:new ny(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(mc(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=_1(this.state);let a=e.changedRanges,s=oi.extendWithRanges(a,SM(r,this.stateDeco,e?e.changes:Fn.empty(this.state.doc.length))),o=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);T1(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Vo)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let h=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(rS)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),a=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?wn.RTL:wn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,c=t.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:ee,scaleY:Z}=Hw(t,c);(ee>.005&&Math.abs(this.scaleX-ee)>.005||Z>.005&&Math.abs(this.scaleY-Z)>.005)&&(this.scaleX=ee,this.scaleY=Z,d|=16,o=h=!0)}let g=(parseInt(r.paddingTop)||0)*this.scaleY,b=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=b)&&(this.paddingTop=g,this.paddingBottom=b,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(a.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let w=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=Uw(e.scrollDOM);let A=(this.printing?EM:AM)(t,this.paddingTop),N=A.top-this.pixelViewport.top,_=A.bottom-this.pixelViewport.bottom;this.pixelViewport=A;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(h=!0)),!this.inView&&!this.scrollTarget&&!TM(e.dom))return 0;let H=c.width;if((this.contentDOMWidth!=H||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let ee=e.docView.measureVisibleLineHeights(this.viewport);if(a.mustRefreshForHeights(ee)&&(o=!0),o||a.lineWrapping&&Math.abs(H-this.contentDOMWidth)>a.charWidth){let{lineHeight:Z,charWidth:I,textHeight:U}=e.docView.measureTextSize();o=Z>0&&a.refresh(s,Z,I,U,Math.max(5,H/I),ee),o&&(e.docView.minWidth=0,d|=16)}N>0&&_>0?p=Math.max(N,_):N<0&&_<0&&(p=Math.min(N,_)),T1();for(let Z of this.viewports){let I=Z.from==this.viewport.from?ee:e.docView.measureVisibleLineHeights(Z);this.heightMap=(o?wr.empty().applyChanges(this.stateDeco,Ut.empty,this.heightOracle,[new oi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(a,0,o,new vM(Z.from,I))}Vo&&(d|=2)}let R=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),a=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:c}=this,h=new vf(a.lineAt(o-r*1e3,fn.ByHeight,s,0,0).from,a.lineAt(c+(1-r)*1e3,fn.ByHeight,s,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=a.lineAt(d,fn.ByPos,s,0,0),b;t.y=="center"?b=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?b=g.top:b=g.bottom-p,h=new vf(a.lineAt(b-1e3/2,fn.ByHeight,s,0,0).from,a.lineAt(b+p+1e3/2,fn.ByHeight,s,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),a=t.mapPos(e.to,1);return new vf(this.heightMap.lineAt(r,fn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(a,fn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:a}=this.heightMap.lineAt(e,fn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,fn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:c}=this;return(e==0||a<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=c+Math.max(10,Math.min(r,250)))&&a>o-2*1e3&&s<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let a of e)t.touchesRange(a.from,a.to)||r.push(new Zm(t.mapPos(a.from),t.mapPos(a.to),a.size,a.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,a=r?1e4:2e3,s=a>>1,o=a<<1;if(this.defaultTextDirection!=wn.LTR&&!r)return[];let c=[],h=(p,g,b,w)=>{if(g-p<s)return;let A=this.state.selection.main,N=[A.from];A.empty||N.push(A.to);for(let O of N)if(O>p&&O<g){h(p,O-10,b,w),h(O+10,g,b,w);return}let _=_M(e,O=>O.from>=b.from&&O.to<=b.to&&Math.abs(O.from-p)<s&&Math.abs(O.to-g)<s&&!N.some(H=>O.from<H&&O.to>H));if(!_){if(g<b.to&&t&&r&&t.visibleRanges.some(R=>R.from<=g&&R.to>=g)){let R=t.moveToLineBoundary(Oe.cursor(g),!1,!0).head;R>p&&(g=R)}let O=this.gapSize(b,p,g,w),H=r||O<2e6?O:2e6;_=new Zm(p,g,O,H)}c.push(_)},d=p=>{if(p.length<o||p.type!=kr.Text)return;let g=MM(p.from,p.to,this.stateDeco);if(g.total<o)return;let b=this.scrollTarget?this.scrollTarget.range.head:null,w,A;if(r){let N=a/this.heightOracle.lineLength*this.heightOracle.lineHeight,_,O;if(b!=null){let H=kf(g,b),R=((this.visibleBottom-this.visibleTop)/2+N)/p.height;_=H-R,O=H+R}else _=(this.visibleTop-p.top-N)/p.height,O=(this.visibleBottom-p.top+N)/p.height;w=bf(g,_),A=bf(g,O)}else{let N=g.total*this.heightOracle.charWidth,_=a*this.heightOracle.charWidth,O=0;if(N>2e6)for(let I of e)I.from>=p.from&&I.from<p.to&&I.size!=I.displaySize&&I.from*this.heightOracle.charWidth+O<this.pixelViewport.left&&(O=I.size-I.displaySize);let H=this.pixelViewport.left+O,R=this.pixelViewport.right+O,ee,Z;if(b!=null){let I=kf(g,b),U=((R-H)/2+_)/N;ee=I-U,Z=I+U}else ee=(H-_)/N,Z=(R+_)/N;w=bf(g,ee),A=bf(g,Z)}w>p.from&&h(p.from,w,p,g),A<p.to&&h(A,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(e,t,r,a){let s=kf(a,r)-kf(a,t);return this.heightOracle.lineWrapping?e.height*s:a.total*this.heightOracle.charWidth*s}updateLineGaps(e){Zm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=vn.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Wt.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let a=0;if(r.length!=this.visibleRanges.length)a=12;else for(let s=0;s<r.length&&!(a&8);s++){let o=this.visibleRanges[s],c=r[s];(o.from!=c.from||o.to!=c.to)&&(a|=4,e&&e.mapPos(o.from,-1)==c.from&&e.mapPos(o.to,1)==c.to||(a|=8))}return this.visibleRanges=r,a}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||mc(this.heightMap.lineAt(e,fn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||mc(this.heightMap.lineAt(this.scaler.fromDOM(e),fn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return mc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vf{constructor(e,t){this.from=e,this.to=t}}function MM(n,e,t){let r=[],a=n,s=0;return Wt.spans(t,n,e,{span(){},point(o,c){o>a&&(r.push({from:a,to:o}),s+=o-a),a=c}},20),a<e&&(r.push({from:a,to:e}),s+=e-a),{total:s,ranges:r}}function bf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let a=0;;a++){let{from:s,to:o}=e[a],c=o-s;if(r<=c)return s+r;r-=c}}function kf(n,e){let t=0;for(let{from:r,to:a}of n.ranges){if(e<=a){t+=e-r;break}t+=a-r}return t/n.total}function _M(n,e){for(let t of n)if(e(t))return t}const M1={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function _1(n){let e=n.facet(Md).filter(r=>typeof r!="function"),t=n.facet(J0).filter(r=>typeof r!="function");return t.length&&e.push(Wt.join(t)),e}class ny{constructor(e,t,r){let a=0,s=0,o=0;this.viewports=r.map(({from:c,to:h})=>{let d=t.lineAt(c,fn.ByPos,e,0,0).top,p=t.lineAt(h,fn.ByPos,e,0,0).bottom;return a+=p-d,{from:c,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-a)/(t.height-a);for(let c of this.viewports)c.domTop=o+(c.top-s)*this.scale,o=c.domBottom=c.domTop+(c.bottom-c.top),s=c.bottom}toDOM(e){for(let t=0,r=0,a=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return a+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,a=s.domBottom}}fromDOM(e){for(let t=0,r=0,a=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-a)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,a=s.domBottom}}eq(e){return e instanceof ny?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function mc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ki(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(a=>mc(a,e)):n._content)}const wf=ot.define({combine:n=>n.join(" ")}),s0=ot.define({combine:n=>n.indexOf(!0)>-1}),o0=Ml.newName(),ES=Ml.newName(),NS=Ml.newName(),MS={"&light":"."+ES,"&dark":"."+NS};function u0(n,e,t){return new Ml(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,a=>{if(a=="&")return n;if(!t||!t[a])throw new RangeError(`Unsupported selector: ${a}`);return t[a]}):n+" "+r}})}const DM=u0("."+o0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},MS),jM={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Jm=Xe.ie&&Xe.ie_version<=11;class OM{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new cN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Xe.ie&&Xe.ie_version<=11||Xe.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Xe.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Xe.chrome&&Xe.chrome_version<126)&&(this.editContext=new BM(e),e.state.facet(_a)&&(e.contentDOM.editContext=this.editContext.editContext)),Jm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,a=this.selectionRange;if(r.state.facet(_a)?r.root.activeElement!=this.dom:!bc(this.dom,a))return;let s=a.anchorNode&&r.docView.tile.nearest(a.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Xe.ie&&Xe.ie_version<=11||Xe.android&&Xe.chrome)&&!r.state.selection.main.empty&&a.focusNode&&kc(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=qo(e.root);if(!t)return!1;let r=Xe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&RM(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let a=bc(this.dom,r);return a&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fN(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),a&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jM),Jm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Jm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let a=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ro(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(a)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,a=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(a=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:a}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),a=this.selectionChanged&&bc(this.dom,this.selectionRange);if(e<0&&!a)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new ZN(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,a=gS(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!rd(this.view.state.selection,t.newSel.main))&&this.view.update([]),a}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let r=D1(t,e.previousSibling||e.target.previousSibling,-1),a=D1(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:a?t.posBefore(a):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(_a)!=e.state.facet(_a)&&(e.view.contentDOM.editContext=e.state.facet(_a)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function D1(n,e,t){for(;e;){let r=qn.get(e);if(r&&r.parent==n)return r;let a=e.parentNode;e=a!=n.dom?a:t>0?e.nextSibling:e.previousSibling}return null}function j1(n,e){let t=e.startContainer,r=e.startOffset,a=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor,1);return kc(o.node,o.offset,a,s)&&([t,r,a,s]=[a,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:a,focusOffset:s}}function RM(n,e){if(e.getComposedRanges){let a=e.getComposedRanges(n.root)[0];if(a)return j1(n,a)}let t=null;function r(a){a.preventDefault(),a.stopImmediatePropagation(),t=a.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?j1(n,t):null}class BM{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let a=e.state.selection.main,{anchor:s,head:o}=a,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let d=h-c>r.text.length;c==this.from&&s<this.from?c=s:h==this.to&&s>this.to&&(h=s);let p=yS(e.state.sliceDoc(c,h),r.text,(d?a.from:a.to)-c,d?"end":null);if(!p){let b=Oe.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));rd(b,a)||e.dispatch({selection:b,userEvent:"select"});return}let g={from:p.from+c,to:p.toA+c,insert:Ut.of(r.text.slice(p.from,p.toB).split(`
`))};if((Xe.mac||Xe.android)&&g.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:c,to:h,insert:Ut.of([r.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let b=this.to-this.from+(g.to-g.from+g.insert.length);ey(e,g,Oe.single(this.toEditorPos(r.selectionStart,b),this.toEditorPos(r.selectionEnd,b)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let a=[],s=null;for(let o=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);o<c;o++){let h=e.coordsForChar(o);s=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||s||new DOMRect,a.push(s)}t.updateCharacterBounds(r.rangeStart,a)},this.handlers.textformatupdate=r=>{let a=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,c=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(c)){let h=this.toEditorPos(s.rangeStart),d=this.toEditorPos(s.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;a.push(vn.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:aS.of(vn.set(a))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let a=qo(r.root);a&&a.rangeCount&&this.editContext.updateSelectionBounds(a.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,a=this.pendingContextChange;return e.changes.iterChanges((s,o,c,h,d)=>{if(r)return;let p=d.length-(o-s);if(a&&o>=a.to)if(a.from==s&&a.to==o&&a.insert.eq(d)){a=this.pendingContextChange=null,t+=p,this.to+=p;return}else a=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=p,this.to+=p;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),d.toString()),this.to+=p}t+=p}),a&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(a=>!a.isUserEvent("input.type")&&a.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),a=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=a)&&this.editContext.updateSelection(r,a)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class rt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(a=>a.forEach(s=>r(s,this)))||(a=>this.update(a)),this.dispatch=this.dispatch.bind(this),this._root=e.root||hN(e.parent)||document,this.viewState=new N1(e.state||Kt.create(e)),e.scrollTo&&e.scrollTo.is(gf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Eo).map(a=>new Ym(a));for(let a of this.plugins)a.update(this);this.observer=new OM(this),this.inputState=new nM(this),this.inputState.ensureHandlers(this.plugins),this.docView=new p1(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof Kn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,a,s=this.state;for(let b of e){if(b.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=b.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,c=0,h=null;e.some(b=>b.annotation(SS))?(this.inputState.notifiedFocused=o,c=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=CS(s,o),h||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(p=null)):this.observer.clear(),s.facet(Kt.phrases)!=this.state.facet(Kt.phrases))return this.setState(s);a=ed.create(this,s,e),a.flags|=c;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let b of e){if(g&&(g=g.map(b.changes)),b.scrollIntoView){let{main:w}=b.state.selection;g=new Bo(w.empty?w:Oe.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of b.effects)w.is(gf)&&(g=w.value.clip(this.state))}this.viewState.update(a,g),this.bidiCache=ad.update(this.bidiCache,a.changes),a.empty||(this.updatePlugins(a),this.inputState.update(a)),t=this.docView.update(a),this.state.facet(dc)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(b=>b.isUserEvent("select.pointer")))}finally{this.updateState=0}if(a.startState.facet(wf)!=a.state.facet(wf)&&(this.viewState.mustMeasureContent=!0),(t||r||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!a.empty)for(let b of this.state.facet(n0))try{b(a)}catch(w){Xi(this.state,w,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!gS(this,p)&&d.force&&Ro(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new N1(e),this.plugins=e.facet(Eo).map(r=>new Ym(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new p1(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Eo),r=e.state.facet(Eo);if(t!=r){let a=[];for(let s of r){let o=t.indexOf(s);if(o<0)a.push(new Ym(s));else{let c=this.plugins[o];c.mustUpdate=e,a.push(c)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=a,this.pluginMap.clear()}else for(let a of this.plugins)a.mustUpdate=e;for(let a=0;a<this.plugins.length;a++)this.plugins[a].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Xi(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,a=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(a-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(o<0)if(Uw(r))s=-1,o=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(a);s=w.from,o=w.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(w=>{try{return w.read(this)}catch(A){return Xi(this.state,A),O1}}),g=ed.create(this,this.state,[]),b=!1;g.flags|=h,t?t.flags|=h:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),b=this.docView.update(g),b&&this.docViewUpdate());for(let w=0;w<d.length;w++)if(p[w]!=O1)try{let A=d[w];A.write&&A.write(p[w],this)}catch(A){Xi(this.state,A)}if(b&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let A=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(A>1||A<-1){a=a+A,r.scrollTop=a/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(n0))c(t)}get themeClasses(){return o0+" "+(this.state.facet(s0)?NS:ES)+" "+this.state.facet(wf)}updateAttrs(){let e=R1(this,lS,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(_a)?"true":"false",class:"cm-content",style:`${Xe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),R1(this,Z0,t);let r=this.observer.ignore(()=>{let a=o1(this.contentDOM,this.contentAttrs,t),s=o1(this.dom,this.editorAttrs,e);return a||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let a of r.effects)if(a.is(rt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=a.value}}mountStyles(){this.styleModules=this.state.facet(dc);let e=this.state.facet(rt.cspNonce);Ml.mount(this.root,this.styleModules.concat(DM).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Wm(this,e,m1(this,e,t,r))}moveByGroup(e,t){return Wm(this,e,m1(this,e,t,r=>YN(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),a=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return Oe.cursor(s.side(t,a)+e.from,s.forward(!t,a)?1:-1)}moveToLineBoundary(e,t,r=!0){return GN(this,e,t,r)}moveVertically(e,t,r){return Wm(this,e,QN(this,e,t,r))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let r=a0(this,e,t);return r&&r.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),a0(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let a=this.state.doc.lineAt(e),s=this.bidiSpans(a),o=s[ja.find(s,e-a.from,-1,t)];return Jf(r,o.dir==wn.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(nS)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>LM)return Qw(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Yw(s.isolates,r=h1(this,e))))return s.order;r||(r=h1(this,e));let a=vN(e.text,t,r);return this.bidiCache.push(new ad(e.from,e.to,t,r,!0,a)),a}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Xe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{qw(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return gf.of(new Bo(typeof e=="number"?Oe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return gf.of(new Bo(Oe.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return hi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return hi.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Ml.newName(),a=[wf.of(r),dc.of(u0(`.${r}`,e))];return t&&t.dark&&a.push(s0.of(!0)),a}static baseTheme(e){return Fc.lowest(dc.of(u0("."+o0,e,MS)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),a=r&&qn.get(r)||qn.get(e);return((t=a?.root)===null||t===void 0?void 0:t.view)||null}}rt.styleModule=dc;rt.inputHandler=eS;rt.clipboardInputFilter=$0;rt.clipboardOutputFilter=W0;rt.scrollHandler=iS;rt.focusChangeEffect=tS;rt.perLineTextDirection=nS;rt.exceptionSink=Jw;rt.updateListener=n0;rt.editable=_a;rt.mouseSelectionStyle=Zw;rt.dragMovesSelection=Ww;rt.clickAddsSelectionRange=$w;rt.decorations=Md;rt.blockWrappers=sS;rt.outerDecorations=J0;rt.atomicRanges=Gc;rt.bidiIsolatedRanges=oS;rt.scrollMargins=uS;rt.darkTheme=s0;rt.cspNonce=ot.define({combine:n=>n.length?n[0]:""});rt.contentAttributes=Z0;rt.editorAttributes=lS;rt.lineWrapping=rt.contentAttributes.of({class:"cm-lineWrapping"});rt.announce=dn.define();const LM=4096,O1={};class ad{constructor(e,t,r,a,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=a,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],a=e.length?e[e.length-1].dir:wn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==a&&!t.touchesRange(o.from,o.to)&&r.push(new ad(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function R1(n,e,t){for(let r=n.state.facet(e),a=r.length-1;a>=0;a--){let s=r[a],o=typeof s=="function"?s(n):s;o&&Y0(o,t)}return t}const zM=Xe.mac?"mac":Xe.windows?"win":Xe.linux?"linux":"key";function IM(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let a,s,o,c;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))a=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return a&&(r="Alt-"+r),s&&(r="Ctrl-"+r),c&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Sf(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const PM=Fc.default(rt.domEventHandlers({keydown(n,e){return DS(_S(e.state),n,e,"editor")}})),ld=ot.define({enables:PM}),B1=new WeakMap;function _S(n){let e=n.facet(ld),t=B1.get(e);return t||B1.set(e,t=UM(e.reduce((r,a)=>r.concat(a),[]))),t}function HM(n,e,t){return DS(_S(n.state),e,n,t)}let Sl=null;const qM=4e3;function UM(n,e=zM){let t=Object.create(null),r=Object.create(null),a=(o,c)=>{let h=r[o];if(h==null)r[o]=c;else if(h!=c)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,c,h,d,p)=>{var g,b;let w=t[o]||(t[o]=Object.create(null)),A=c.split(/ (?!$)/).map(O=>IM(O,e));for(let O=1;O<A.length;O++){let H=A.slice(0,O).join(" ");a(H,!0),w[H]||(w[H]={preventDefault:!0,stopPropagation:!1,run:[R=>{let ee=Sl={view:R,prefix:H,scope:o};return setTimeout(()=>{Sl==ee&&(Sl=null)},qM),!0}]})}let N=A.join(" ");a(N,!1);let _=w[N]||(w[N]={preventDefault:!1,stopPropagation:!1,run:((b=(g=w._any)===null||g===void 0?void 0:g.run)===null||b===void 0?void 0:b.slice())||[]});h&&_.run.push(h),d&&(_.preventDefault=!0),p&&(_.stopPropagation=!0)};for(let o of n){let c=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of c){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=o;for(let b in p)p[b].run.push(w=>g(w,c0))}let h=o[e]||o.key;if(h)for(let d of c)s(d,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(d,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return t}let c0=null;function DS(n,e,t,r){c0=e;let a=nN(e),s=ww(a,0),o=Sw(s)==a.length&&a!=" ",c="",h=!1,d=!1,p=!1;Sl&&Sl.view==t&&Sl.scope==r&&(c=Sl.prefix+" ",vS.indexOf(e.keyCode)<0&&(d=!0,Sl=null));let g=new Set,b=_=>{if(_){for(let O of _.run)if(!g.has(O)&&(g.add(O),O(t)))return _.stopPropagation&&(p=!0),!0;_.preventDefault&&(_.stopPropagation&&(p=!0),d=!0)}return!1},w=n[r],A,N;return w&&(b(w[c+Sf(a,e,!o)])?h=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Xe.windows&&e.ctrlKey&&e.altKey)&&!(Xe.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(A=_l[e.keyCode])&&A!=a?(b(w[c+Sf(A,e,!0)])||e.shiftKey&&(N=Rc[e.keyCode])!=a&&N!=A&&b(w[c+Sf(N,e,!1)]))&&(h=!0):o&&e.shiftKey&&b(w[c+Sf(a,e,!0)])&&(h=!0),!h&&b(w._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),c0=null,h}class Yc{constructor(e,t,r,a,s){this.className=e,this.left=t,this.top=r,this.width=a,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let a=e.coordsAtPos(r.head,r.assoc||1);if(!a)return[];let s=jS(e);return[new Yc(t,a.left-s.left,a.top-s.top,null,a.bottom-a.top)]}else return FM(e,t,r)}}function jS(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==wn.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function L1(n,e,t,r){let a=n.coordsAtPos(e,t*2);if(!a)return r;let s=n.dom.getBoundingClientRect(),o=(a.top+a.bottom)/2,c=n.posAtCoords({x:s.left+1,y:o}),h=n.posAtCoords({x:s.right-1,y:o});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function FM(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),a=Math.min(t.to,n.viewport.to),s=n.textDirection==wn.LTR,o=n.contentDOM,c=o.getBoundingClientRect(),h=jS(n),d=o.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),g=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),b=c.right-(p?parseInt(p.paddingRight):0),w=i0(n,r,1),A=i0(n,a,-1),N=w.type==kr.Text?w:null,_=A.type==kr.Text?A:null;if(N&&(n.lineWrapping||w.widgetLineBreaks)&&(N=L1(n,r,1,N)),_&&(n.lineWrapping||A.widgetLineBreaks)&&(_=L1(n,a,-1,_)),N&&_&&N.from==_.from&&N.to==_.to)return H(R(t.from,t.to,N));{let Z=N?R(t.from,null,N):ee(w,!1),I=_?R(null,t.to,_):ee(A,!0),U=[];return(N||w).to<(_||A).from-(N&&_?1:0)||w.widgetLineBreaks>1&&Z.bottom+n.defaultLineHeight/2<I.top?U.push(O(g,Z.bottom,b,I.top)):Z.bottom<I.top&&n.elementAtHeight((Z.bottom+I.top)/2).type==kr.Text&&(Z.bottom=I.top=(Z.bottom+I.top)/2),H(Z).concat(U).concat(H(I))}function O(Z,I,U,ye){return new Yc(e,Z-h.left,I-h.top,Math.max(0,U-Z),ye-I)}function H({top:Z,bottom:I,horizontal:U}){let ye=[];for(let fe=0;fe<U.length;fe+=2)ye.push(O(U[fe],Z,U[fe+1],I));return ye}function R(Z,I,U){let ye=1e9,fe=-1e9,L=[];function J(he,se,te,xe,Ce){let Ae=n.coordsAtPos(he,he==U.to?-2:2),D=n.coordsAtPos(te,te==U.from?2:-2);!Ae||!D||(ye=Math.min(Ae.top,D.top,ye),fe=Math.max(Ae.bottom,D.bottom,fe),Ce==wn.LTR?L.push(s&&se?g:Ae.left,s&&xe?b:D.right):L.push(!s&&xe?g:D.left,!s&&se?b:Ae.right))}let ne=Z??U.from,me=I??U.to;for(let he of n.visibleRanges)if(he.to>ne&&he.from<me)for(let se=Math.max(he.from,ne),te=Math.min(he.to,me);;){let xe=n.state.doc.lineAt(se);for(let Ce of n.bidiSpans(xe)){let Ae=Ce.from+xe.from,D=Ce.to+xe.from;if(Ae>=te)break;D>se&&J(Math.max(Ae,se),Z==null&&Ae<=ne,Math.min(D,te),I==null&&D>=me,Ce.dir)}if(se=xe.to+1,se>=te)break}return L.length==0&&J(ne,Z==null,me,I==null,n.textDirection),{top:ye,bottom:fe,horizontal:L}}function ee(Z,I){let U=c.top+(I?Z.top:Z.bottom);return{top:U,bottom:U,horizontal:[]}}}function VM(n,e){return n.constructor==e.constructor&&n.eq(e)}class KM{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Uf)!=e.state.facet(Uf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Uf);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!VM(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let a of e)a.update&&t&&a.constructor&&this.drawn[r].constructor&&a.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(a.draw(),t);for(;t;){let a=t.nextSibling;t.remove(),t=a}this.drawn=e,Xe.safari&&Xe.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Uf=ot.define();function OS(n){return[hi.define(e=>new KM(e,n)),Uf.of(n)]}const zc=ot.define({combine(n){return V0(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function GM(n={}){return[zc.of(n),YM,QM,XM,rS.of(!0)]}function RS(n){return n.startState.facet(zc)!=n.state.facet(zc)}const YM=OS({above:!0,markers(n){let{state:e}=n,t=e.facet(zc),r=[];for(let a of e.selection.ranges){let s=a==e.selection.main;if(a.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=a.empty?a:Oe.cursor(a.head,a.head>a.anchor?-1:1);for(let h of Yc.forRange(n,o,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=RS(n);return t&&z1(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){z1(e.state,n)},class:"cm-cursorLayer"});function z1(n,e){e.style.animationDuration=n.facet(zc).cursorBlinkRate+"ms"}const QM=OS({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Yc.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||RS(n)},class:"cm-selectionLayer"}),XM=Fc.highest(rt.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),I1=ot.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function BS(n,e){let t=n.plugin(LS),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const LS=hi.fromClass(class{constructor(n){this.input=n.state.facet(sd),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(I1);this.top=new Cf(n,!0,e.topContainer),this.bottom=new Cf(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(I1);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Cf(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Cf(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(sd);if(t!=this.input){let r=t.filter(h=>h),a=[],s=[],o=[],c=[];for(let h of r){let d=this.specs.indexOf(h),p;d<0?(p=h(n.view),c.push(p)):(p=this.panels[d],p.update&&p.update(n)),a.push(p),(p.top?s:o).push(p)}this.specs=r,this.panels=a,this.top.sync(s),this.bottom.sync(o);for(let h of c)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>rt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Cf{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=P1(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=P1(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function P1(n){let e=n.nextSibling;return n.remove(),e}const sd=ot.define({enables:LS});class Ko extends ks{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ko.prototype.elementClass="";Ko.prototype.toDOM=void 0;Ko.prototype.mapMode=Kr.TrackBefore;Ko.prototype.startSide=Ko.prototype.endSide=-1;Ko.prototype.point=!0;const $M=1024;let WM=0;class eg{constructor(e,t){this.from=e,this.to=t}}class Bt{constructor(e={}){this.id=WM++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=di.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Bt.closedBy=new Bt({deserialize:n=>n.split(" ")});Bt.openedBy=new Bt({deserialize:n=>n.split(" ")});Bt.group=new Bt({deserialize:n=>n.split(" ")});Bt.isolate=new Bt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Bt.contextHash=new Bt({perNode:!0});Bt.lookAhead=new Bt({perNode:!0});Bt.mounted=new Bt({perNode:!0});class Sc{constructor(e,t,r,a=!1){this.tree=e,this.overlay=t,this.parser=r,this.bracketed=a}static get(e){return e&&e.props&&e.props[Bt.mounted.id]}}const ZM=Object.create(null);class di{constructor(e,t,r,a=0){this.name=e,this.props=t,this.id=r,this.flags=a}static define(e){let t=e.props&&e.props.length?Object.create(null):ZM,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),a=new di(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(a)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return a}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Bt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let a of r.split(" "))t[a]=e[r];return r=>{for(let a=r.prop(Bt.group),s=-1;s<(a?a.length:0);s++){let o=t[s<0?r.name:a[s]];if(o)return o}}}}di.none=new di("",Object.create(null),0,8);const Af=new WeakMap,H1=new WeakMap;var On;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(On||(On={}));class sr{constructor(e,t,r,a,s){if(this.type=e,this.children=t,this.positions=r,this.length=a,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,c]of s)this.props[typeof o=="number"?o:o.id]=c}}toString(){let e=Sc.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let a=r.toString();a&&(t&&(t+=","),t+=a)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new f0(this.topNode,e)}cursorAt(e,t=0,r=0){let a=Af.get(this)||this.topNode,s=new f0(a);return s.moveTo(e,t),Af.set(this,s._tree),s}get topNode(){return new ci(this,0,0,null)}resolve(e,t=0){let r=Ic(Af.get(this)||this.topNode,e,t,!1);return Af.set(this,r),r}resolveInner(e,t=0){let r=Ic(H1.get(this)||this.topNode,e,t,!0);return H1.set(this,r),r}resolveStack(e,t=0){return t3(this,e,t)}iterate(e){let{enter:t,leave:r,from:a=0,to:s=this.length}=e,o=e.mode||0,c=(o&On.IncludeAnonymous)>0;for(let h=this.cursor(o|On.IncludeAnonymous);;){let d=!1;if(h.from<=s&&h.to>=a&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ay(di.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,a)=>new sr(this.type,t,r,a,this.propValues),e.makeTree||((t,r,a)=>new sr(di.none,t,r,a)))}static build(e){return n3(e)}}sr.empty=new sr(di.none,[],[],0);class ry{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ry(this.buffer,this.index)}}class jl{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return di.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],a=this.set.types[t],s=a.name;if(/\W/.test(s)&&!a.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,a,s){let{buffer:o}=this,c=-1;for(let h=e;h!=t&&!(zS(s,a,o[h+1],o[h+2])&&(c=h,r>0));h=o[h+3]);return c}slice(e,t,r){let a=this.buffer,s=new Uint16Array(t-e),o=0;for(let c=e,h=0;c<t;){s[h++]=a[c++],s[h++]=a[c++]-r;let d=s[h++]=a[c++]-r;s[h++]=a[c++]-e,o=Math.max(o,d)}return new jl(s,o,this.set)}}function zS(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ic(n,e,t,r){for(var a;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof ci&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:On.IgnoreOverlays;if(r)for(let o=n,c=o.parent;c;o=c,c=o.parent)o instanceof ci&&o.index<0&&((a=c.enter(e,t,s))===null||a===void 0?void 0:a.from)!=o.from&&(n=c);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class IS{cursor(e=0){return new f0(this,e)}getChild(e,t=null,r=null){let a=q1(this,e,t,r);return a.length?a[0]:null}getChildren(e,t=null,r=null){return q1(this,e,t,r)}resolve(e,t=0){return Ic(this,e,t,!1)}resolveInner(e,t=0){return Ic(this,e,t,!0)}matchContext(e){return h0(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let a=t.lastChild;if(!a||a.to!=t.to)break;a.type.isError&&a.from==a.to?(r=t,t=a.prevSibling):t=a}return r}get node(){return this}get next(){return this.parent}}class ci extends IS{constructor(e,t,r,a){super(),this._tree=e,this.from=t,this.index=r,this._parent=a}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,a,s=0){var o;for(let c=this;;){for(let{children:h,positions:d}=c._tree,p=t>0?h.length:-1;e!=p;e+=t){let g=h[e],b=d[e]+c.from;if(!(!(s&On.EnterBracketed&&g instanceof sr&&((o=Sc.get(g))===null||o===void 0?void 0:o.overlay)===null&&(b>=r||b+g.length<=r))&&!zS(a,r,b,b+g.length))){if(g instanceof jl){if(s&On.ExcludeBuffers)continue;let w=g.findChild(0,g.buffer.length,t,r-b,a);if(w>-1)return new Al(new JM(c,g,e,b),null,w)}else if(s&On.IncludeAnonymous||!g.type.isAnonymous||iy(g)){let w;if(!(s&On.IgnoreMounts)&&(w=Sc.get(g))&&!w.overlay)return new ci(w.tree,b,e,c);let A=new ci(g,b,e,c);return s&On.IncludeAnonymous||!A.type.isAnonymous?A:A.nextChild(t<0?g.children.length-1:0,t,r,a,s)}}}if(s&On.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+t:e=t<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,r=0){let a;if(!(r&On.IgnoreOverlays)&&(a=Sc.get(this._tree))&&a.overlay){let s=e-this.from,o=r&On.EnterBracketed&&a.bracketed;for(let{from:c,to:h}of a.overlay)if((t>0||o?c<=s:c<s)&&(t<0||o?h>=s:h>s))return new ci(a.tree,a.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function q1(n,e,t,r){let a=n.cursor(),s=[];if(!a.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=a.type.is(t),!a.nextSibling())return s}for(;;){if(r!=null&&a.type.is(r))return s;if(a.type.is(e)&&s.push(a.node),!a.nextSibling())return r==null?s:[]}}function h0(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class JM{constructor(e,t,r,a){this.parent=e,this.buffer=t,this.index=r,this.start=a}}class Al extends IS{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:a}=this.context,s=a.findChild(this.index+4,a.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Al(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,r=0){if(r&On.ExcludeBuffers)return null;let{buffer:a}=this.context,s=a.findChild(this.index+4,a.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Al(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Al(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Al(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,a=this.index+4,s=r.buffer[this.index+3];if(s>a){let o=r.buffer[this.index+1];e.push(r.slice(a,s,o)),t.push(0)}return new sr(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function PS(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof ci&&t.index<0?null:t.parent,a=n.slice();return r?a[e]=r:a.splice(e,1),new e3(a,t)}class e3{constructor(e,t){this.heads=e,this.node=t}get next(){return PS(this.heads)}}function t3(n,e,t){let r=n.resolveInner(e,t),a=null;for(let s=r instanceof ci?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(a||(a=[r])).push(o.resolve(e,t)),s=o}else{let o=Sc.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let c=new ci(o.tree,o.overlay[0].from+s.from,-1,s);(a||(a=[r])).push(Ic(c,e,t,!1))}}return a?PS(a):r}class f0{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~On.EnterBracketed,e instanceof ci)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:a}=this.buffer;return this.type=t||a.set.types[a.buffer[e]],this.from=r+a.buffer[e+1],this.to=r+a.buffer[e+2],!0}yield(e){return e?e instanceof ci?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:a}=this.buffer,s=a.findChild(this.index+4,a.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&On.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&On.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&On.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let a=r<0?0:this.stack[r]+4;if(this.index!=a)return this.yieldBuf(t.findChild(a,this.index,-1,0,4))}else{let a=t.buffer[this.index+3];if(a<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(a)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:a}=this;if(a){if(e>0){if(this.index<a.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(a.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=a)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let c=r._tree.children[s];if(this.mode&On.IncludeAnonymous||c instanceof jl||!c.type.isAnonymous||iy(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let a=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==a){if(a==this.index)return o;t=o,r=s+1;break e}a=this.stack[--s]}for(let a=r;a<this.stack.length;a++)t=new Al(this.buffer,t,this.stack[a]);return this.bufferNode=new Al(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let a=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(a=!0)}for(;;){if(a&&t&&t(this),a=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,a=!0}}}matchContext(e){if(!this.buffer)return h0(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let a=e.length-1,s=this.stack.length-1;a>=0;s--){if(s<0)return h0(this._tree,e,a);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[a]&&e[a]!=o.name)return!1;a--}}return!0}}function iy(n){return n.children.some(e=>e instanceof jl||!e.type.isAnonymous||iy(e))}function n3(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:a=$M,reused:s=[],minRepeatType:o=r.types.length}=n,c=Array.isArray(t)?new ry(t,t.length):t,h=r.types,d=0,p=0;function g(Z,I,U,ye,fe,L){let{id:J,start:ne,end:me,size:he}=c,se=p,te=d;if(he<0)if(c.next(),he==-1){let Te=s[J];U.push(Te),ye.push(ne-Z);return}else if(he==-3){d=J;return}else if(he==-4){p=J;return}else throw new RangeError(`Unrecognized record size: ${he}`);let xe=h[J],Ce,Ae,D=ne-Z;if(me-ne<=a&&(Ae=_(c.pos-I,fe))){let Te=new Uint16Array(Ae.size-Ae.skip),Ee=c.pos-Ae.size,P=Te.length;for(;c.pos>Ee;)P=O(Ae.start,Te,P);Ce=new jl(Te,me-Ae.start,r),D=Ae.start-Z}else{let Te=c.pos-he;c.next();let Ee=[],P=[],Qe=J>=o?J:-1,ct=0,et=me;for(;c.pos>Te;)Qe>=0&&c.id==Qe&&c.size>=0?(c.end<=et-a&&(A(Ee,P,ne,ct,c.end,et,Qe,se,te),ct=Ee.length,et=c.end),c.next()):L>2500?b(ne,Te,Ee,P):g(ne,Te,Ee,P,Qe,L+1);if(Qe>=0&&ct>0&&ct<Ee.length&&A(Ee,P,ne,ct,ne,et,Qe,se,te),Ee.reverse(),P.reverse(),Qe>-1&&ct>0){let jt=w(xe,te);Ce=ay(xe,Ee,P,0,Ee.length,0,me-ne,jt,jt)}else Ce=N(xe,Ee,P,me-ne,se-me,te)}U.push(Ce),ye.push(D)}function b(Z,I,U,ye){let fe=[],L=0,J=-1;for(;c.pos>I;){let{id:ne,start:me,end:he,size:se}=c;if(se>4)c.next();else{if(J>-1&&me<J)break;J<0&&(J=he-a),fe.push(ne,me,he),L++,c.next()}}if(L){let ne=new Uint16Array(L*4),me=fe[fe.length-2];for(let he=fe.length-3,se=0;he>=0;he-=3)ne[se++]=fe[he],ne[se++]=fe[he+1]-me,ne[se++]=fe[he+2]-me,ne[se++]=se;U.push(new jl(ne,fe[2]-me,r)),ye.push(me-Z)}}function w(Z,I){return(U,ye,fe)=>{let L=0,J=U.length-1,ne,me;if(J>=0&&(ne=U[J])instanceof sr){if(!J&&ne.type==Z&&ne.length==fe)return ne;(me=ne.prop(Bt.lookAhead))&&(L=ye[J]+ne.length+me)}return N(Z,U,ye,fe,L,I)}}function A(Z,I,U,ye,fe,L,J,ne,me){let he=[],se=[];for(;Z.length>ye;)he.push(Z.pop()),se.push(I.pop()+U-fe);Z.push(N(r.types[J],he,se,L-fe,ne-L,me)),I.push(fe-U)}function N(Z,I,U,ye,fe,L,J){if(L){let ne=[Bt.contextHash,L];J=J?[ne].concat(J):[ne]}if(fe>25){let ne=[Bt.lookAhead,fe];J=J?[ne].concat(J):[ne]}return new sr(Z,I,U,ye,J)}function _(Z,I){let U=c.fork(),ye=0,fe=0,L=0,J=U.end-a,ne={size:0,start:0,skip:0};e:for(let me=U.pos-Z;U.pos>me;){let he=U.size;if(U.id==I&&he>=0){ne.size=ye,ne.start=fe,ne.skip=L,L+=4,ye+=4,U.next();continue}let se=U.pos-he;if(he<0||se<me||U.start<J)break;let te=U.id>=o?4:0,xe=U.start;for(U.next();U.pos>se;){if(U.size<0)if(U.size==-3||U.size==-4)te+=4;else break e;else U.id>=o&&(te+=4);U.next()}fe=xe,ye+=he,L+=te}return(I<0||ye==Z)&&(ne.size=ye,ne.start=fe,ne.skip=L),ne.size>4?ne:void 0}function O(Z,I,U){let{id:ye,start:fe,end:L,size:J}=c;if(c.next(),J>=0&&ye<o){let ne=U;if(J>4){let me=c.pos-(J-4);for(;c.pos>me;)U=O(Z,I,U)}I[--U]=ne,I[--U]=L-Z,I[--U]=fe-Z,I[--U]=ye}else J==-3?d=ye:J==-4&&(p=ye);return U}let H=[],R=[];for(;c.pos>0;)g(n.start||0,n.bufferStart||0,H,R,-1,0);let ee=(e=n.length)!==null&&e!==void 0?e:H.length?R[0]+H[0].length:0;return new sr(h[n.topID],H.reverse(),R.reverse(),ee)}const U1=new WeakMap;function Ff(n,e){if(!n.isAnonymous||e instanceof jl||e.type!=n)return 1;let t=U1.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof sr)){t=1;break}t+=Ff(n,r)}U1.set(e,t)}return t}function ay(n,e,t,r,a,s,o,c,h){let d=0;for(let A=r;A<a;A++)d+=Ff(n,e[A]);let p=Math.ceil(d*1.5/8),g=[],b=[];function w(A,N,_,O,H){for(let R=_;R<O;){let ee=R,Z=N[R],I=Ff(n,A[R]);for(R++;R<O;R++){let U=Ff(n,A[R]);if(I+U>=p)break;I+=U}if(R==ee+1){if(I>p){let U=A[ee];w(U.children,U.positions,0,U.children.length,N[ee]+H);continue}g.push(A[ee])}else{let U=N[R-1]+A[R-1].length-Z;g.push(ay(n,A,N,ee,R,Z,U,null,h))}b.push(Z+H-s)}}return w(e,t,r,a,0),(c||h)(g,b,o)}class vs{constructor(e,t,r,a,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=a,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let a=[new vs(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&a.push(s);return a}static applyChanges(e,t,r=128){if(!t.length)return e;let a=[],s=1,o=e.length?e[0]:null;for(let c=0,h=0,d=0;;c++){let p=c<t.length?t[c]:null,g=p?p.fromA:1e9;if(g-h>=r)for(;o&&o.from<g;){let b=o;if(h>=b.from||g<=b.to||d){let w=Math.max(b.from,h)-d,A=Math.min(b.to,g)-d;b=w>=A?null:new vs(w,A,b.tree,b.offset+d,c>0,!!p)}if(b&&a.push(b),o.to>g)break;o=s<e.length?e[s++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return a}}class r3{startParse(e,t,r){return typeof e=="string"&&(e=new i3(e)),r=r?r.length?r.map(a=>new eg(a.from,a.to)):[new eg(0,0)]:[new eg(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let a=this.startParse(e,t,r);for(;;){let s=a.advance();if(s)return s}}}class i3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Bt({perNode:!0});let a3=0;class li{constructor(e,t,r,a){this.name=e,this.set=t,this.base=r,this.modified=a,this.id=a3++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof li&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let a=new li(r,[],null,[]);if(a.set.push(a),t)for(let s of t.set)a.set.push(s);return a}static defineModifier(e){let t=new od(e);return r=>r.modified.indexOf(t)>-1?r:od.get(r.base||r,r.modified.concat(t).sort((a,s)=>a.id-s.id))}}let l3=0;class od{constructor(e){this.name=e,this.instances=[],this.id=l3++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&s3(t,c.modified));if(r)return r;let a=[],s=new li(e.name,a,e,t);for(let c of t)c.instances.push(s);let o=o3(t);for(let c of e.set)if(!c.modified.length)for(let h of o)a.push(od.get(c,h));return s}}function s3(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function o3(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,a=e.length;r<a;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function u3(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let a of t.split(" "))if(a){let s=[],o=2,c=a;for(let g=0;;){if(c=="..."&&g>0&&g+3==a.length){o=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!b)throw new RangeError("Invalid path: "+a);if(s.push(b[0]=="*"?"":b[0][0]=='"'?JSON.parse(b[0]):b[0]),g+=b[0].length,g==a.length)break;let w=a[g++];if(g==a.length&&w=="!"){o=0;break}if(w!="/")throw new RangeError("Invalid path: "+a);c=a.slice(g)}let h=s.length-1,d=s[h];if(!d)throw new RangeError("Invalid path: "+a);let p=new Pc(r,o,h>0?s.slice(0,h):null);e[d]=p.sort(e[d])}}return HS.add(e)}const HS=new Bt({combine(n,e){let t,r,a;for(;n||e;){if(!n||e&&n.depth>=e.depth?(a=e,e=e.next):(a=n,n=n.next),t&&t.mode==a.mode&&!a.context&&!t.context)continue;let s=new Pc(a.tags,a.mode,a.context);t?t.next=s:r=s,t=s}return r}});class Pc{constructor(e,t,r,a){this.tags=e,this.mode=t,this.context=r,this.next=a}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Pc.empty=new Pc([],2,null);function qS(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:a=null}=e||{};return{style:s=>{let o=a;for(let c of s)for(let h of c.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:r}}function c3(n,e){let t=null;for(let r of n){let a=r.style(e);a&&(t=t?t+" "+a:a)}return t}function h3(n,e,t,r=0,a=n.length){let s=new f3(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,a,"",s.highlighters),s.flush(a)}class f3{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,a,s){let{type:o,from:c,to:h}=e;if(c>=r||h<=t)return;o.isTop&&(s=this.highlighters.filter(w=>!w.scope||w.scope(o)));let d=a,p=d3(e)||Pc.empty,g=c3(s,p.tags);if(g&&(d&&(d+=" "),d+=g,p.mode==1&&(a+=(a?" ":"")+g)),this.startSpan(Math.max(t,c),d),p.opaque)return;let b=e.tree&&e.tree.prop(Bt.mounted);if(b&&b.overlay){let w=e.node.enter(b.overlay[0].from+c,1),A=this.highlighters.filter(_=>!_.scope||_.scope(b.tree.type)),N=e.firstChild();for(let _=0,O=c;;_++){let H=_<b.overlay.length?b.overlay[_]:null,R=H?H.from+c:h,ee=Math.max(t,O),Z=Math.min(r,R);if(ee<Z&&N)for(;e.from<Z&&(this.highlightRange(e,ee,Z,a,s),this.startSpan(Math.min(Z,e.to),d),!(e.to>=R||!e.nextSibling())););if(!H||R>r)break;O=H.to+c,O>t&&(this.highlightRange(w.cursor(),Math.max(t,H.from+c),Math.min(r,O),"",A),this.startSpan(Math.min(r,O),d))}N&&e.parent()}else if(e.firstChild()){b&&(a="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,a,s),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function d3(n){let e=n.type.prop(HS);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const qe=li.define,Tf=qe(),bl=qe(),F1=qe(bl),V1=qe(bl),kl=qe(),Ef=qe(kl),tg=qe(kl),Ki=qe(),ds=qe(Ki),Fi=qe(),Vi=qe(),d0=qe(),lc=qe(d0),Nf=qe(),Le={comment:Tf,lineComment:qe(Tf),blockComment:qe(Tf),docComment:qe(Tf),name:bl,variableName:qe(bl),typeName:F1,tagName:qe(F1),propertyName:V1,attributeName:qe(V1),className:qe(bl),labelName:qe(bl),namespace:qe(bl),macroName:qe(bl),literal:kl,string:Ef,docString:qe(Ef),character:qe(Ef),attributeValue:qe(Ef),number:tg,integer:qe(tg),float:qe(tg),bool:qe(kl),regexp:qe(kl),escape:qe(kl),color:qe(kl),url:qe(kl),keyword:Fi,self:qe(Fi),null:qe(Fi),atom:qe(Fi),unit:qe(Fi),modifier:qe(Fi),operatorKeyword:qe(Fi),controlKeyword:qe(Fi),definitionKeyword:qe(Fi),moduleKeyword:qe(Fi),operator:Vi,derefOperator:qe(Vi),arithmeticOperator:qe(Vi),logicOperator:qe(Vi),bitwiseOperator:qe(Vi),compareOperator:qe(Vi),updateOperator:qe(Vi),definitionOperator:qe(Vi),typeOperator:qe(Vi),controlOperator:qe(Vi),punctuation:d0,separator:qe(d0),bracket:lc,angleBracket:qe(lc),squareBracket:qe(lc),paren:qe(lc),brace:qe(lc),content:Ki,heading:ds,heading1:qe(ds),heading2:qe(ds),heading3:qe(ds),heading4:qe(ds),heading5:qe(ds),heading6:qe(ds),contentSeparator:qe(Ki),list:qe(Ki),quote:qe(Ki),emphasis:qe(Ki),strong:qe(Ki),link:qe(Ki),monospace:qe(Ki),strikethrough:qe(Ki),inserted:qe(),deleted:qe(),changed:qe(),invalid:qe(),meta:Nf,documentMeta:qe(Nf),annotation:qe(Nf),processingInstruction:qe(Nf),definition:li.defineModifier("definition"),constant:li.defineModifier("constant"),function:li.defineModifier("function"),standard:li.defineModifier("standard"),local:li.defineModifier("local"),special:li.defineModifier("special")};for(let n in Le){let e=Le[n];e instanceof li&&(e.name=n)}qS([{tag:Le.link,class:"tok-link"},{tag:Le.heading,class:"tok-heading"},{tag:Le.emphasis,class:"tok-emphasis"},{tag:Le.strong,class:"tok-strong"},{tag:Le.keyword,class:"tok-keyword"},{tag:Le.atom,class:"tok-atom"},{tag:Le.bool,class:"tok-bool"},{tag:Le.url,class:"tok-url"},{tag:Le.labelName,class:"tok-labelName"},{tag:Le.inserted,class:"tok-inserted"},{tag:Le.deleted,class:"tok-deleted"},{tag:Le.literal,class:"tok-literal"},{tag:Le.string,class:"tok-string"},{tag:Le.number,class:"tok-number"},{tag:[Le.regexp,Le.escape,Le.special(Le.string)],class:"tok-string2"},{tag:Le.variableName,class:"tok-variableName"},{tag:Le.local(Le.variableName),class:"tok-variableName tok-local"},{tag:Le.definition(Le.variableName),class:"tok-variableName tok-definition"},{tag:Le.special(Le.variableName),class:"tok-variableName2"},{tag:Le.definition(Le.propertyName),class:"tok-propertyName tok-definition"},{tag:Le.typeName,class:"tok-typeName"},{tag:Le.namespace,class:"tok-namespace"},{tag:Le.className,class:"tok-className"},{tag:Le.macroName,class:"tok-macroName"},{tag:Le.propertyName,class:"tok-propertyName"},{tag:Le.operator,class:"tok-operator"},{tag:Le.comment,class:"tok-comment"},{tag:Le.meta,class:"tok-meta"},{tag:Le.invalid,class:"tok-invalid"},{tag:Le.punctuation,class:"tok-punctuation"}]);var ng;const gc=new Bt,p3=new Bt;class $i{constructor(e,t,r=[],a=""){this.data=e,this.name=a,Kt.prototype.hasOwnProperty("tree")||Object.defineProperty(Kt.prototype,"tree",{get(){return ea(this)}}),this.parser=t,this.extension=[Yo.of(this),Kt.languageData.of((s,o,c)=>{let h=K1(s,o,c),d=h.type.prop(gc);if(!d)return[];let p=s.facet(d),g=h.type.prop(p3);if(g){let b=h.resolve(o-h.from,c);for(let w of g)if(w.test(b,s)){let A=s.facet(w.facet);return w.type=="replace"?A:A.concat(p)}}return p})].concat(r)}isActiveAt(e,t,r=-1){return K1(e,t,r).type.prop(gc)==this.data}findRegions(e){let t=e.facet(Yo);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],a=(s,o)=>{if(s.prop(gc)==this.data){r.push({from:o,to:o+s.length});return}let c=s.prop(Bt.mounted);if(c){if(c.tree.prop(gc)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+o,to:h.to+o});else r.push({from:o,to:o+s.length});return}else if(c.overlay){let h=r.length;if(a(c.tree,c.overlay[0].from+o),r.length>h)return}}for(let h=0;h<s.children.length;h++){let d=s.children[h];d instanceof sr&&a(d,s.positions[h]+o)}};return a(ea(e),0),r}get allowsNesting(){return!0}}$i.setState=dn.define();function K1(n,e,t){let r=n.facet(Yo),a=ea(n).topNode;if(!r||r.allowsNesting)for(let s=a;s;s=s.enter(e,t,On.ExcludeBuffers|On.EnterBracketed))s.type.isTop&&(a=s);return a}function ea(n){let e=n.field($i.state,!1);return e?e.tree:sr.empty}class m3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let sc=null;class ud{constructor(e,t,r=[],a,s,o,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=a,this.treeLen=s,this.viewport=o,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new ud(e,t,[],sr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new m3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=sr.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let a=Date.now()+e;e=()=>Date.now()>a}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let a=this.parse.advance();if(a)if(this.fragments=this.withoutTempSkipped(vs.addTree(a,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=a,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(vs.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=sc;sc=this;try{return e()}finally{sc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=G1(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:a,treeLen:s,viewport:o,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,g,b)=>h.push({fromA:d,toA:p,fromB:g,toB:b})),r=vs.applyChanges(r,h),a=sr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&c.push({from:p,to:g})}}}return new ud(this.parser,t,r,a,s,o,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:a,to:s}=this.skipped[r];a<e.to&&s>e.from&&(this.fragments=G1(this.fragments,a,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends r3{createParse(t,r,a){let s=a[0].from,o=a[a.length-1].to;return{parsedPos:s,advance(){let h=sc;if(h){for(let d of a)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new sr(di.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return sc}}function G1(n,e,t){return vs.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Go{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Go(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=ud.create(e.facet(Yo).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Go(r)}}$i.state=Ai.define({create:Go.init,update(n,e){for(let t of e.effects)if(t.is($i.setState))return t.value;return e.startState.facet(Yo)!=e.state.facet(Yo)?Go.init(e.state):n.apply(e)}});let US=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(US=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const rg=typeof navigator<"u"&&(!((ng=navigator.scheduling)===null||ng===void 0)&&ng.isInputPending)?()=>navigator.scheduling.isInputPending():null,g3=hi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field($i.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field($i.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=US(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:a}}=this.view,s=r.field($i.state);if(s.tree==s.context.tree&&s.context.isDone(a+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!rg?Math.max(25,e.timeRemaining()-5):1e9),c=s.context.treeLen<a&&r.doc.length>a+1e3,h=s.context.work(()=>rg&&rg()||Date.now()>o,a+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:$i.setState.of(new Go(s.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Yo=ot.define({combine(n){return n.length?n[0]:null},enables:n=>[$i.state,g3,rt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),y3=ot.define(),ly=ot.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function cd(n){let e=n.facet(ly);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function hd(n,e){let t="",r=n.tabSize,a=n.facet(ly)[0];if(a=="	"){for(;e>=r;)t+="	",e-=r;a=" "}for(let s=0;s<e;s++)t+=a;return t}function FS(n,e){n instanceof Kt&&(n=new Od(n));for(let r of n.state.facet(y3)){let a=r(n,e);if(a!==void 0)return a}let t=ea(n.state);return t.length>=e?v3(n,t,e):null}class Od{constructor(e,t={}){this.state=e,this.options=t,this.unit=cd(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:a,simulateDoubleBreak:s}=this.options;return a!=null&&a>=r.from&&a<=r.to?s&&a==e?{text:"",from:e}:(t<0?a<e:a<=e)?{text:r.text.slice(a-r.from),from:a}:{text:r.text.slice(0,a-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:a}=this.lineAt(e,t);return r.slice(e-a,Math.min(r.length,e+100-a))}column(e,t=1){let{text:r,from:a}=this.lineAt(e,t),s=this.countColumn(r,e-a),o=this.options.overrideIndentation?this.options.overrideIndentation(a):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Td(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:a}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(a);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const x3=new Bt;function v3(n,e,t){let r=e.resolveStack(t),a=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(a!=r.node){let s=[];for(let o=a;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return VS(r,n,t)}function VS(n,e,t){for(let r=n;r;r=r.next){let a=k3(r.node);if(a)return a(sy.create(e,t,r))}return 0}function b3(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function k3(n){let e=n.type.prop(x3);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Bt.closedBy))){let a=n.lastChild,s=a&&r.indexOf(a.name)>-1;return o=>A3(o,!0,1,void 0,s&&!b3(o)?a.from:void 0)}return n.parent==null?w3:null}function w3(){return 0}class sy extends Od{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new sy(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(S3(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return VS(this.context.next,this.base,this.pos)}}function S3(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function C3(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let a=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=a==null||a<=s.from?s.to:Math.min(s.to,a);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let d=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+d}}c=h.to}}function A3(n,e,t,r,a){let s=n.textAfter,o=s.match(/^\s*/)[0].length,c=r&&s.slice(o,o+r.length)==r||a==n.pos+o,h=C3(n);return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}class Rd{constructor(e,t){this.specs=e;let r;function a(c){let h=Ml.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const s=typeof t.all=="string"?t.all:t.all?a(t.all):void 0,o=t.scope;this.scope=o instanceof $i?c=>c.prop(gc)==o.data:o?c=>c==o:void 0,this.style=qS(e.map(c=>({tag:c.tag,class:c.class||a(Object.assign({},c,{tag:null}))})),{all:s}).style,this.module=r?new Ml(r):null,this.themeType=t.themeType}static define(e,t){return new Rd(e,t||{})}}const p0=ot.define(),T3=ot.define({combine(n){return n.length?[n[0]]:null}});function ig(n){let e=n.facet(p0);return e.length?e:n.facet(T3)}function E3(n,e){let t=[M3],r;return n instanceof Rd&&(n.module&&t.push(rt.styleModule.of(n.module)),r=n.themeType),r?t.push(p0.computeN([rt.darkTheme],a=>a.facet(rt.darkTheme)==(r=="dark")?[n]:[])):t.push(p0.of(n)),t}class N3{constructor(e){this.markCache=Object.create(null),this.tree=ea(e.state),this.decorations=this.buildDeco(e,ig(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ea(e.state),r=ig(e.state),a=r!=ig(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!a&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||a)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return vn.none;let r=new Ho;for(let{from:a,to:s}of e.visibleRanges)h3(this.tree,t,(o,c,h)=>{r.add(o,c,this.markCache[h]||(this.markCache[h]=vn.mark({class:h})))},a,s);return r.finish()}}const M3=Fc.high(hi.fromClass(N3,{decorations:n=>n.decorations})),_3=1e4,D3="()[]{}",j3=new Bt;function m0(n,e,t){let r=n.prop(e<0?Bt.openedBy:Bt.closedBy);if(r)return r;if(n.name.length==1){let a=t.indexOf(n.name);if(a>-1&&a%2==(e<0?1:0))return[t[a+e]]}return null}function g0(n){let e=n.type.prop(j3);return e?e(n.node):n}function No(n,e,t,r={}){let a=r.maxScanDistance||_3,s=r.brackets||D3,o=ea(n),c=o.resolveInner(e,t);for(let h=c;h;h=h.parent){let d=m0(h.type,t,s);if(d&&h.from<h.to){let p=g0(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return O3(n,e,t,h,p,d,s)}}return R3(n,e,t,o,c.type,a,s)}function O3(n,e,t,r,a,s,o){let c=r.parent,h={from:a.from,to:a.to},d=0,p=c?.cursor();if(p&&(t<0?p.childBefore(r.from):p.childAfter(r.to)))do if(t<0?p.to<=r.from:p.from>=r.to){if(d==0&&s.indexOf(p.type.name)>-1&&p.from<p.to){let g=g0(p);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(m0(p.type,t,o))d++;else if(m0(p.type,-t,o)){if(d==0){let g=g0(p);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function R3(n,e,t,r,a,s,o){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=o.indexOf(c);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),g=0;for(let b=0;!p.next().done&&b<=s;){let w=p.value;t<0&&(b+=w.length);let A=e+b*t;for(let N=t>0?0:w.length-1,_=t>0?w.length:-1;N!=_;N+=t){let O=o.indexOf(w[N]);if(!(O<0||r.resolveInner(A+N,1).type!=a))if(O%2==0==t>0)g++;else{if(g==1)return{start:d,end:{from:A+N,to:A+N+1},matched:O>>1==h>>1};g--}}t>0&&(b+=w.length)}return p.done?{start:d,matched:!1}:null}const B3=Object.create(null),Y1=[di.none],Q1=[],X1=Object.create(null),L3=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])L3[n]=z3(B3,e);function ag(n,e){Q1.indexOf(n)>-1||(Q1.push(n),console.warn(e))}function z3(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let d of c.split(".")){let p=n[d]||Le[d];p?typeof p=="function"?h.length?h=h.map(p):ag(d,`Modifier ${d} used at start of tag`):h.length?ag(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:ag(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),a=r+" "+t.map(c=>c.id),s=X1[a];if(s)return s.id;let o=X1[a]=di.define({id:Y1.length,name:r,props:[u3({[r]:t})]});return Y1.push(o),o.id}wn.RTL,wn.LTR;const I3=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=uy(n.state,t.from);return r.line?P3(n):r.block?q3(n):!1};function oy(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let a=n(e,t);return a?(r(t.update(a)),!0):!1}}const P3=oy(V3,0),H3=oy(KS,0),q3=oy((n,e)=>KS(n,e,F3(e)),0);function uy(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const oc=50;function U3(n,{open:e,close:t},r,a){let s=n.sliceDoc(r-oc,r),o=n.sliceDoc(a,a+oc),c=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(o)[0].length,d=s.length-c;if(s.slice(d-e.length,d)==e&&o.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:a+h,margin:h&&1}};let p,g;a-r<=2*oc?p=g=n.sliceDoc(r,a):(p=n.sliceDoc(r,r+oc),g=n.sliceDoc(a-oc,a));let b=/^\s*/.exec(p)[0].length,w=/\s*$/.exec(g)[0].length,A=g.length-w-t.length;return p.slice(b,b+e.length)==e&&g.slice(A,A+t.length)==t?{open:{pos:r+b+e.length,margin:/\s/.test(p.charAt(b+e.length))?1:0},close:{pos:a-w-t.length,margin:/\s/.test(g.charAt(A-1))?1:0}}:null}function F3(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),a=t.to<=r.to?r:n.doc.lineAt(t.to);a.from>r.from&&a.from==t.to&&(a=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=a.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:a.to})}return e}function KS(n,e,t=e.selection.ranges){let r=t.map(s=>uy(e,s.from).block);if(!r.every(s=>s))return null;let a=t.map((s,o)=>U3(e,r[o],s.from,s.to));if(n!=2&&!a.every(s=>s))return{changes:e.changes(t.map((s,o)=>a[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&a.some(s=>s)){let s=[];for(let o=0,c;o<a.length;o++)if(c=a[o]){let h=r[o],{open:d,close:p}=c;s.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:s}}return null}function V3(n,e,t=e.selection.ranges){let r=[],a=-1;for(let{from:s,to:o}of t){let c=r.length,h=1e9,d=uy(e,s).line;if(d){for(let p=s;p<=o;){let g=e.doc.lineAt(p);if(g.from>a&&(s==o||o>g.from)){a=g.from;let b=/^\s*/.exec(g.text)[0].length,w=b==g.length,A=g.text.slice(b,b+d.length)==d?b:-1;b<g.text.length&&b<h&&(h=b),r.push({line:g,comment:A,token:d,indent:b,empty:w,single:!1})}p=g.to+1}if(h<1e9)for(let p=c;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:c,token:h,indent:d,empty:p,single:g}of r)(g||!p)&&s.push({from:c.from+d,insert:h+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:c,token:h}of r)if(c>=0){let d=o.from+c,p=d+h.length;o.text[p-o.from]==" "&&p++,s.push({from:d,to:p})}return{changes:s}}return null}const y0=Rl.define(),K3=Rl.define(),G3=ot.define(),GS=ot.define({combine(n){return V0(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,a)=>e(r,a)||t(r,a)})}}),YS=Ai.define({create(){return Wi.empty},update(n,e){let t=e.state.facet(GS),r=e.annotation(y0);if(r){let h=Dr.fromTransaction(e,r.selection),d=r.side,p=d==0?n.undone:n.done;return h?p=fd(p,p.length,t.minDepth,h):p=$S(p,e.startState.selection),new Wi(d==0?r.rest:p,d==0?p:r.rest)}let a=e.annotation(K3);if((a=="full"||a=="before")&&(n=n.isolate()),e.annotation(Kn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Dr.fromTransaction(e),o=e.annotation(Kn.time),c=e.annotation(Kn.userEvent);return s?n=n.addChanges(s,o,c,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,c,t.newGroupDelay)),(a=="full"||a=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Wi(n.done.map(Dr.fromJSON),n.undone.map(Dr.fromJSON))}});function Y3(n={}){return[YS,GS.of(n),rt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?QS:e.inputType=="historyRedo"?x0:null;return r?(e.preventDefault(),r(t)):!1}})]}function Bd(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let a=t.field(YS,!1);if(!a)return!1;let s=a.pop(n,t,e);return s?(r(s),!0):!1}}const QS=Bd(0,!1),x0=Bd(1,!1),Q3=Bd(0,!0),X3=Bd(1,!0);class Dr{constructor(e,t,r,a,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=a,this.selectionsAfter=s}setSelAfter(e){return new Dr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(a=>a.toJSON())}}static fromJSON(e){return new Dr(e.changes&&Fn.fromJSON(e.changes),[],e.mapped&&Ji.fromJSON(e.mapped),e.startSelection&&Oe.fromJSON(e.startSelection),e.selectionsAfter.map(Oe.fromJSON))}static fromTransaction(e,t){let r=ui;for(let a of e.startState.facet(G3)){let s=a(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Dr(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ui)}static selection(e){return new Dr(void 0,ui,void 0,void 0,e)}}function fd(n,e,t,r){let a=e+1>t+20?e-t-1:0,s=n.slice(a,e);return s.push(r),s}function $3(n,e){let t=[],r=!1;return n.iterChangedRanges((a,s)=>t.push(a,s)),e.iterChangedRanges((a,s,o,c)=>{for(let h=0;h<t.length;){let d=t[h++],p=t[h++];c>=d&&o<=p&&(r=!0)}}),r}function W3(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function XS(n,e){return n.length?e.length?n.concat(e):n:e}const ui=[],Z3=200;function $S(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Z3));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),fd(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Dr.selection([e])]}function J3(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function lg(n,e){if(!n.length)return n;let t=n.length,r=ui;for(;t;){let a=e5(n[t-1],e,r);if(a.changes&&!a.changes.empty||a.effects.length){let s=n.slice(0,t);return s[t-1]=a,s}else e=a.mapped,t--,r=a.selectionsAfter}return r.length?[Dr.selection(r)]:ui}function e5(n,e,t){let r=XS(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(e)):ui,t);if(!n.changes)return Dr.selection(r);let a=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Dr(a,dn.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const t5=/^(input\.type|delete)($|\.)/;class Wi{constructor(e,t,r=0,a=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=a}isolate(){return this.prevTime?new Wi(this.done,this.undone):this}addChanges(e,t,r,a,s){let o=this.done,c=o[o.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!r||t5.test(r))&&(!c.selectionsAfter.length&&t-this.prevTime<a.newGroupDelay&&a.joinToEvent(s,$3(c.changes,e.changes))||r=="input.type.compose")?o=fd(o,o.length-1,a.minDepth,new Dr(e.changes.compose(c.changes),XS(dn.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,ui)):o=fd(o,o.length,a.minDepth,e),new Wi(o,ui,t,r)}addSelection(e,t,r,a){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ui;return s.length>0&&t-this.prevTime<a&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&W3(s[s.length-1],e)?this:new Wi($S(this.done,e),this.undone,t,r)}addMapping(e){return new Wi(lg(this.done,e),lg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let a=e==0?this.done:this.undone;if(a.length==0)return null;let s=a[a.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:y0.of({side:e,rest:J3(a),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let c=a.length==1?ui:a.slice(0,a.length-1);return s.mapped&&(c=lg(c,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:y0.of({side:e,rest:c,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Wi.empty=new Wi(ui,ui);const n5=[{key:"Mod-z",run:QS,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:x0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:x0,preventDefault:!0},{key:"Mod-u",run:Q3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:X3,preventDefault:!0}];function Zo(n,e){return Oe.create(n.ranges.map(e),n.mainIndex)}function Ti(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ei({state:n,dispatch:e},t){let r=Zo(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Ti(n,r)),!0)}function Ld(n,e){return Oe.cursor(e?n.to:n.from)}function WS(n,e){return Ei(n,t=>t.empty?n.moveByChar(t,e):Ld(t,e))}function pr(n){return n.textDirectionAt(n.state.selection.main.head)==wn.LTR}const ZS=n=>WS(n,!pr(n)),JS=n=>WS(n,pr(n));function e2(n,e){return Ei(n,t=>t.empty?n.moveByGroup(t,e):Ld(t,e))}const r5=n=>e2(n,!pr(n)),i5=n=>e2(n,pr(n));function a5(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function zd(n,e,t){let r=ea(n).resolveInner(e.head),a=t?Bt.closedBy:Bt.openedBy;for(let h=e.head;;){let d=t?r.childAfter(h):r.childBefore(h);if(!d)break;a5(n,d,a)?r=d:h=t?d.to:d.from}let s=r.type.prop(a),o,c;return s&&(o=t?No(n,r.from,1):No(n,r.to,-1))&&o.matched?c=t?o.end.to:o.end.from:c=t?r.to:r.from,Oe.cursor(c,t?-1:1)}const l5=n=>Ei(n,e=>zd(n.state,e,!pr(n))),s5=n=>Ei(n,e=>zd(n.state,e,pr(n)));function t2(n,e){return Ei(n,t=>{if(!t.empty)return Ld(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const n2=n=>t2(n,!1),r2=n=>t2(n,!0);function i2(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,a;if(e){for(let s of n.state.facet(rt.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}a=n.scrollDOM.clientHeight-t-r}else a=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,a-5)}}function a2(n,e){let t=i2(n),{state:r}=n,a=Zo(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Ld(o,e));if(a.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,d=c.bottom-t.marginBottom;o&&o.top>h&&o.bottom<d&&(s=rt.scrollIntoView(a.main.head,{y:"start",yMargin:o.top-h}))}return n.dispatch(Ti(r,a),{effects:s}),!0}const $1=n=>a2(n,!1),v0=n=>a2(n,!0);function Bl(n,e,t){let r=n.lineBlockAt(e.head),a=n.moveToLineBoundary(e,t);if(a.head==e.head&&a.head!=(t?r.to:r.from)&&(a=n.moveToLineBoundary(e,t,!1)),!t&&a.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(a=Oe.cursor(r.from+s))}return a}const o5=n=>Ei(n,e=>Bl(n,e,!0)),u5=n=>Ei(n,e=>Bl(n,e,!1)),c5=n=>Ei(n,e=>Bl(n,e,!pr(n))),h5=n=>Ei(n,e=>Bl(n,e,pr(n))),f5=n=>Ei(n,e=>Oe.cursor(n.lineBlockAt(e.head).from,1)),d5=n=>Ei(n,e=>Oe.cursor(n.lineBlockAt(e.head).to,-1));function p5(n,e,t){let r=!1,a=Zo(n.selection,s=>{let o=No(n,s.head,-1)||No(n,s.head,1)||s.head>0&&No(n,s.head-1,1)||s.head<n.doc.length&&No(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let c=o.start.from==s.head?o.end.to:o.end.from;return Oe.cursor(c)});return r?(e(Ti(n,a)),!0):!1}const m5=({state:n,dispatch:e})=>p5(n,e);function pi(n,e){let t=Zo(n.state.selection,r=>{let a=e(r);return Oe.range(r.anchor,a.head,a.goalColumn,a.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ti(n.state,t)),!0)}function l2(n,e){return pi(n,t=>n.moveByChar(t,e))}const s2=n=>l2(n,!pr(n)),o2=n=>l2(n,pr(n));function u2(n,e){return pi(n,t=>n.moveByGroup(t,e))}const g5=n=>u2(n,!pr(n)),y5=n=>u2(n,pr(n)),x5=n=>pi(n,e=>zd(n.state,e,!pr(n))),v5=n=>pi(n,e=>zd(n.state,e,pr(n)));function c2(n,e){return pi(n,t=>n.moveVertically(t,e))}const h2=n=>c2(n,!1),f2=n=>c2(n,!0);function d2(n,e){return pi(n,t=>n.moveVertically(t,e,i2(n).height))}const W1=n=>d2(n,!1),Z1=n=>d2(n,!0),b5=n=>pi(n,e=>Bl(n,e,!0)),k5=n=>pi(n,e=>Bl(n,e,!1)),w5=n=>pi(n,e=>Bl(n,e,!pr(n))),S5=n=>pi(n,e=>Bl(n,e,pr(n))),C5=n=>pi(n,e=>Oe.cursor(n.lineBlockAt(e.head).from)),A5=n=>pi(n,e=>Oe.cursor(n.lineBlockAt(e.head).to)),J1=({state:n,dispatch:e})=>(e(Ti(n,{anchor:0})),!0),ek=({state:n,dispatch:e})=>(e(Ti(n,{anchor:n.doc.length})),!0),tk=({state:n,dispatch:e})=>(e(Ti(n,{anchor:n.selection.main.anchor,head:0})),!0),nk=({state:n,dispatch:e})=>(e(Ti(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),T5=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),E5=({state:n,dispatch:e})=>{let t=Id(n).map(({from:r,to:a})=>Oe.range(r,Math.min(a+1,n.doc.length)));return e(n.update({selection:Oe.create(t),userEvent:"select"})),!0},N5=({state:n,dispatch:e})=>{let t=Zo(n.selection,r=>{let a=ea(n),s=a.resolveStack(r.from,1);if(r.empty){let o=a.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:c}=o;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&o.next)return Oe.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(Ti(n,t)),!0)};function p2(n,e){let{state:t}=n,r=t.selection,a=t.selection.ranges.slice();for(let s of t.selection.ranges){let o=t.doc.lineAt(s.head);if(e?o.to<n.state.doc.length:o.from>0)for(let c=s;;){let h=n.moveVertically(c,e);if(h.head<o.from||h.head>o.to){a.some(d=>d.head==h.head)||a.push(h);break}else{if(h.head==c.head)break;c=h}}}return a.length==r.ranges.length?!1:(n.dispatch(Ti(t,Oe.create(a,a.length-1))),!0)}const M5=n=>p2(n,!1),_5=n=>p2(n,!0),D5=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Oe.create([t.main]):t.main.empty||(r=Oe.create([Oe.cursor(t.main.head)])),r?(e(Ti(n,r)),!0):!1};function Qc(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,a=r.changeByRange(s=>{let{from:o,to:c}=s;if(o==c){let h=e(s);h<o?(t="delete.backward",h=Mf(n,h,!1)):h>o&&(t="delete.forward",h=Mf(n,h,!0)),o=Math.min(o,h),c=Math.max(c,h)}else o=Mf(n,o,!1),c=Mf(n,c,!0);return o==c?{range:s}:{changes:{from:o,to:c},range:Oe.cursor(o,o<s.head?-1:1)}});return a.changes.empty?!1:(n.dispatch(r.update(a,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?rt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Mf(n,e,t){if(n instanceof rt)for(let r of n.state.facet(rt.atomicRanges).map(a=>a(n)))r.between(e,e,(a,s)=>{a<e&&s>e&&(e=t?s:a)});return e}const m2=(n,e,t)=>Qc(n,r=>{let a=r.from,{state:s}=n,o=s.doc.lineAt(a),c,h;if(t&&!e&&a>o.from&&a<o.from+200&&!/[^ \t]/.test(c=o.text.slice(0,a-o.from))){if(c[c.length-1]=="	")return a-1;let d=Td(c,s.tabSize),p=d%cd(s)||cd(s);for(let g=0;g<p&&c[c.length-1-g]==" ";g++)a--;h=a}else h=Vn(o.text,a-o.from,e,e)+o.from,h==a&&o.number!=(e?s.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,a-o.from))&&(h=Vn(o.text,h-o.from,!1,!1)+o.from);return h}),b0=n=>m2(n,!1,!0),g2=n=>m2(n,!0,!1),y2=(n,e)=>Qc(n,t=>{let r=t.head,{state:a}=n,s=a.doc.lineAt(r),o=a.charCategorizer(r);for(let c=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?a.doc.lines:1)&&(r+=e?1:-1);break}let h=Vn(s.text,r-s.from,e)+s.from,d=s.text.slice(Math.min(r,h)-s.from,Math.max(r,h)-s.from),p=o(d);if(c!=null&&p!=c)break;(d!=" "||r!=t.head)&&(c=p),r=h}return r}),x2=n=>y2(n,!1),j5=n=>y2(n,!0),O5=n=>Qc(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),R5=n=>Qc(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),B5=n=>Qc(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),L5=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ut.of(["",""])},range:Oe.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},z5=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let a=r.from,s=n.doc.lineAt(a),o=a==s.from?a-1:Vn(s.text,a-s.from,!1)+s.from,c=a==s.to?a+1:Vn(s.text,a-s.from,!0)+s.from;return{changes:{from:o,to:c,insert:n.doc.slice(a,c).append(n.doc.slice(o,a))},range:Oe.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Id(n){let e=[],t=-1;for(let r of n.selection.ranges){let a=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=a.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:a.from,to:s.to,ranges:[r]});t=s.number+1}return e}function v2(n,e,t){if(n.readOnly)return!1;let r=[],a=[];for(let s of Id(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),c=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let h of s.ranges)a.push(Oe.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let h of s.ranges)a.push(Oe.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:Oe.create(a,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const I5=({state:n,dispatch:e})=>v2(n,e,!1),P5=({state:n,dispatch:e})=>v2(n,e,!0);function b2(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of Id(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});let a=n.changes(r);return e(n.update({changes:a,selection:n.selection.map(a,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const H5=({state:n,dispatch:e})=>b2(n,e,!1),q5=({state:n,dispatch:e})=>b2(n,e,!0),U5=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Id(e).map(({from:a,to:s})=>(a>0?a--:s<e.doc.length&&s++,{from:a,to:s}))),r=Zo(e.selection,a=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(a.head),c=n.coordsAtPos(a.head,a.assoc||1);c&&(s=o.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(a,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function F5(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ea(n).resolveInner(e),r=t.childBefore(e),a=t.childAfter(e),s;return r&&a&&r.to<=e&&a.from>=e&&(s=r.type.prop(Bt.closedBy))&&s.indexOf(a.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(a.from).from&&!/\S/.test(n.sliceDoc(r.to,a.from))?{from:r.to,to:a.from}:null}const rk=k2(!1),V5=k2(!0);function k2(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(a=>{let{from:s,to:o}=a,c=e.doc.lineAt(s),h=!n&&s==o&&F5(e,s);n&&(s=o=(o<=c.to?c:e.doc.lineAt(o)).to);let d=new Od(e,{simulateBreak:s,simulateDoubleBreak:!!h}),p=FS(d,s);for(p==null&&(p=Td(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<c.to&&/\s/.test(c.text[o-c.from]);)o++;h?{from:s,to:o}=h:s>c.from&&s<c.from+100&&!/\S/.test(c.text.slice(0,s))&&(s=c.from);let g=["",hd(e,p)];return h&&g.push(hd(e,d.lineIndent(c.from,-1))),{changes:{from:s,to:o,insert:Ut.of(g)},range:Oe.cursor(s+1+g[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function cy(n,e){let t=-1;return n.changeByRange(r=>{let a=[];for(let o=r.from;o<=r.to;){let c=n.doc.lineAt(o);c.number>t&&(r.empty||r.to>c.from)&&(e(c,a,r),t=c.number),o=c.to+1}let s=n.changes(a);return{changes:a,range:Oe.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const K5=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Od(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),a=cy(n,(s,o,c)=>{let h=FS(r,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let d=/^\s*/.exec(s.text)[0],p=hd(n,h);(d!=p||c.from<s.from+d.length)&&(t[s.from]=h,o.push({from:s.from,to:s.from+d.length,insert:p}))});return a.changes.empty||e(n.update(a,{userEvent:"indent"})),!0},G5=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(cy(n,(t,r)=>{r.push({from:t.from,insert:n.facet(ly)})}),{userEvent:"input.indent"})),!0),Y5=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(cy(n,(t,r)=>{let a=/^\s*/.exec(t.text)[0];if(!a)return;let s=Td(a,n.tabSize),o=0,c=hd(n,Math.max(0,s-cd(n)));for(;o<a.length&&o<c.length&&a.charCodeAt(o)==c.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+a.length,insert:c.slice(o)})}),{userEvent:"delete.dedent"})),!0),Q5=n=>(n.setTabFocusMode(),!0),X5=[{key:"Ctrl-b",run:ZS,shift:s2,preventDefault:!0},{key:"Ctrl-f",run:JS,shift:o2},{key:"Ctrl-p",run:n2,shift:h2},{key:"Ctrl-n",run:r2,shift:f2},{key:"Ctrl-a",run:f5,shift:C5},{key:"Ctrl-e",run:d5,shift:A5},{key:"Ctrl-d",run:g2},{key:"Ctrl-h",run:b0},{key:"Ctrl-k",run:O5},{key:"Ctrl-Alt-h",run:x2},{key:"Ctrl-o",run:L5},{key:"Ctrl-t",run:z5},{key:"Ctrl-v",run:v0}],$5=[{key:"ArrowLeft",run:ZS,shift:s2,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:r5,shift:g5,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:c5,shift:w5,preventDefault:!0},{key:"ArrowRight",run:JS,shift:o2,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:i5,shift:y5,preventDefault:!0},{mac:"Cmd-ArrowRight",run:h5,shift:S5,preventDefault:!0},{key:"ArrowUp",run:n2,shift:h2,preventDefault:!0},{mac:"Cmd-ArrowUp",run:J1,shift:tk},{mac:"Ctrl-ArrowUp",run:$1,shift:W1},{key:"ArrowDown",run:r2,shift:f2,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ek,shift:nk},{mac:"Ctrl-ArrowDown",run:v0,shift:Z1},{key:"PageUp",run:$1,shift:W1},{key:"PageDown",run:v0,shift:Z1},{key:"Home",run:u5,shift:k5,preventDefault:!0},{key:"Mod-Home",run:J1,shift:tk},{key:"End",run:o5,shift:b5,preventDefault:!0},{key:"Mod-End",run:ek,shift:nk},{key:"Enter",run:rk,shift:rk},{key:"Mod-a",run:T5},{key:"Backspace",run:b0,shift:b0,preventDefault:!0},{key:"Delete",run:g2,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:x2,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:j5,preventDefault:!0},{mac:"Mod-Backspace",run:R5,preventDefault:!0},{mac:"Mod-Delete",run:B5,preventDefault:!0}].concat(X5.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),W5=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:l5,shift:x5},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:s5,shift:v5},{key:"Alt-ArrowUp",run:I5},{key:"Shift-Alt-ArrowUp",run:H5},{key:"Alt-ArrowDown",run:P5},{key:"Shift-Alt-ArrowDown",run:q5},{key:"Mod-Alt-ArrowUp",run:M5},{key:"Mod-Alt-ArrowDown",run:_5},{key:"Escape",run:D5},{key:"Mod-Enter",run:V5},{key:"Alt-l",mac:"Ctrl-l",run:E5},{key:"Mod-i",run:N5,preventDefault:!0},{key:"Mod-[",run:Y5},{key:"Mod-]",run:G5},{key:"Mod-Alt-\\",run:K5},{key:"Shift-Mod-k",run:U5},{key:"Shift-Mod-\\",run:m5},{key:"Mod-/",run:I3},{key:"Alt-A",run:H3},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Q5}].concat($5),Z5="#e5c07b",ik="#e06c75",J5="#56b6c2",e_="#ffffff",Vf="#abb2bf",k0="#7d8799",t_="#61afef",n_="#98c379",ak="#d19a66",r_="#c678dd",i_="#21252b",lk="#2c313a",sk="#282c34",sg="#353a42",a_="#3E4451",ok="#528bff",l_=rt.theme({"&":{color:Vf,backgroundColor:sk},".cm-content":{caretColor:ok},".cm-cursor, .cm-dropCursor":{borderLeftColor:ok},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:a_},".cm-panels":{backgroundColor:i_,color:Vf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:sk,color:k0,border:"none"},".cm-activeLineGutter":{backgroundColor:lk},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:sg},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:sg,borderBottomColor:sg},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:lk,color:Vf}}},{dark:!0}),s_=Rd.define([{tag:Le.keyword,color:r_},{tag:[Le.name,Le.deleted,Le.character,Le.propertyName,Le.macroName],color:ik},{tag:[Le.function(Le.variableName),Le.labelName],color:t_},{tag:[Le.color,Le.constant(Le.name),Le.standard(Le.name)],color:ak},{tag:[Le.definition(Le.name),Le.separator],color:Vf},{tag:[Le.typeName,Le.className,Le.number,Le.changed,Le.annotation,Le.modifier,Le.self,Le.namespace],color:Z5},{tag:[Le.operator,Le.operatorKeyword,Le.url,Le.escape,Le.regexp,Le.link,Le.special(Le.string)],color:J5},{tag:[Le.meta,Le.comment],color:k0},{tag:Le.strong,fontWeight:"bold"},{tag:Le.emphasis,fontStyle:"italic"},{tag:Le.strikethrough,textDecoration:"line-through"},{tag:Le.link,color:k0,textDecoration:"underline"},{tag:Le.heading,fontWeight:"bold",color:ik},{tag:[Le.atom,Le.bool,Le.special(Le.variableName)],color:ak},{tag:[Le.processingInstruction,Le.string,Le.inserted],color:n_},{tag:Le.invalid,color:e_}]),o_=[l_,E3(s_)],uk=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class w2{constructor(e,t,r=0,a=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,a),this.bufferStart=r,this.normalize=s?c=>s(uk(c)):uk,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ww(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=PE(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Sw(e);let a=this.normalize(t);if(a.length)for(let s=0,o=r;;s++){let c=a.charCodeAt(s),h=this.match(c,o,this.bufferPos+this.bufferStart);if(s==a.length-1){if(h)return this.value=h,this;break}o==r&&s<t.length&&t.charCodeAt(s)==c&&o++}}}match(e,t,r){let a=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],c=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?a={from:this.matches[s+1],to:r}:(this.matches[s]++,c=!0)),c||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?a={from:t,to:r}:this.matches.push(1,t)),a&&this.test&&!this.test(a.from,a.to,this.buffer,this.bufferStart)&&(a=null),a}}typeof Symbol<"u"&&(w2.prototype[Symbol.iterator]=function(){return this});const S2={from:-1,to:-1,match:/.*/.exec("")},hy="gm"+(/x/.unicode==null?"":"u");class C2{constructor(e,t,r,a=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=S2,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new A2(e,t,r,a,s);this.re=new RegExp(t,hy+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(a);this.curLineStart=o.from,this.matchPos=dd(e,a),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,a=r+t[0].length;if(this.matchPos=dd(this.text,a+(r==a?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<a||r>this.value.to)&&(!this.test||this.test(r,a,t)))return this.value={from:r,to:a,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const og=new WeakMap;class Lo{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let a=og.get(e);if(!a||a.from>=r||a.to<=t){let c=new Lo(t,e.sliceString(t,r));return og.set(e,c),c}if(a.from==t&&a.to==r)return a;let{text:s,from:o}=a;return o>t&&(s=e.sliceString(t,o)+s,o=t),a.to<r&&(s+=e.sliceString(a.to,r)),og.set(e,new Lo(o,s)),new Lo(t,s.slice(t-o,r-o))}}class A2{constructor(e,t,r,a,s){this.text=e,this.to=s,this.done=!1,this.value=S2,this.matchPos=dd(e,a),this.re=new RegExp(t,hy+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Lo.get(e,a,this.chunkEnd(a+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,a=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,a,t)))return this.value={from:r,to:a,match:t},this.matchPos=dd(this.text,a+(r==a?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Lo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(C2.prototype[Symbol.iterator]=A2.prototype[Symbol.iterator]=function(){return this});function u_(n){try{return new RegExp(n,hy),!0}catch{return!1}}function dd(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}const Jo=ot.define({combine(n){return V0(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new b_(e),scrollToMatch:e=>rt.scrollIntoView(e)})}});class Hc{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||u_(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new m_(this):new f_(this)}getCursor(e,t=0,r){let a=e.doc?e:Kt.create({doc:e});return r==null&&(r=a.doc.length),this.regexp?Co(this,a,t,r):So(this,a,t,r)}}class T2{constructor(e){this.spec=e}}function c_(n,e,t){return(r,a,s,o)=>{if(t&&!t(r,a,s,o))return!1;let c=r>=o&&a<=o+s.length?s.slice(r-o,a-o):e.doc.sliceString(r,a);return n(c,e,r,a)}}function So(n,e,t,r){let a;return n.wholeWord&&(a=h_(e.doc,e.charCategorizer(e.selection.main.head))),n.test&&(a=c_(n.test,e,a)),new w2(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:s=>s.toLowerCase(),a)}function h_(n,e){return(t,r,a,s)=>((s>t||s+a.length<r)&&(s=Math.max(0,t-2),a=n.sliceString(s,Math.min(n.length,r+2))),(e(pd(a,t-s))!=lr.Word||e(md(a,t-s))!=lr.Word)&&(e(md(a,r-s))!=lr.Word||e(pd(a,r-s))!=lr.Word))}class f_ extends T2{constructor(e){super(e)}nextMatch(e,t,r){let a=So(this.spec,e,r,e.doc.length).nextOverlapping();if(a.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);a=So(this.spec,e,0,s).nextOverlapping()}return a.done||a.value.from==t&&a.value.to==r?null:a.value}prevMatchInRange(e,t,r){for(let a=r;;){let s=Math.max(t,a-1e4-this.spec.unquoted.length),o=So(this.spec,e,s,a),c=null;for(;!o.nextOverlapping().done;)c=o.value;if(c)return c;if(s==t)return null;a-=1e4}}prevMatch(e,t,r){let a=this.prevMatchInRange(e,0,t);return a||(a=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),a&&(a.from!=t||a.to!=r)?a:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=So(this.spec,e,0,e.doc.length),a=[];for(;!r.next().done;){if(a.length>=t)return null;a.push(r.value)}return a}highlight(e,t,r,a){let s=So(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)a(s.value.from,s.value.to)}}function d_(n,e,t){return(r,a,s)=>(!t||t(r,a,s))&&n(s[0],e,r,a)}function Co(n,e,t,r){let a;return n.wholeWord&&(a=p_(e.charCategorizer(e.selection.main.head))),n.test&&(a=d_(n.test,e,a)),new C2(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:a},t,r)}function pd(n,e){return n.slice(Vn(n,e,!1),e)}function md(n,e){return n.slice(e,Vn(n,e))}function p_(n){return(e,t,r)=>!r[0].length||(n(pd(r.input,r.index))!=lr.Word||n(md(r.input,r.index))!=lr.Word)&&(n(md(r.input,r.index+r[0].length))!=lr.Word||n(pd(r.input,r.index+r[0].length))!=lr.Word)}class m_ extends T2{nextMatch(e,t,r){let a=Co(this.spec,e,r,e.doc.length).next();return a.done&&(a=Co(this.spec,e,0,t).next()),a.done?null:a.value}prevMatchInRange(e,t,r){for(let a=1;;a++){let s=Math.max(t,r-a*1e4),o=Co(this.spec,e,s,r),c=null;for(;!o.next().done;)c=o.value;if(c&&(s==t||c.from>s+10))return c;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let a=r.length;a>0;a--){let s=+r.slice(0,a);if(s>0&&s<e.match.length)return e.match[s]+r.slice(a)}return t})}matchAll(e,t){let r=Co(this.spec,e,0,e.doc.length),a=[];for(;!r.next().done;){if(a.length>=t)return null;a.push(r.value)}return a}highlight(e,t,r,a){let s=Co(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)a(s.value.from,s.value.to)}}const Ol=dn.define(),fy=dn.define(),Oa=Ai.define({create(n){return new ug(yd(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Ol)?n=new ug(t.value.create(),n.panel):t.is(fy)&&(n=new ug(n.query,t.value?dy:null));return n},provide:n=>sd.from(n,e=>e.panel)});function Qo(n){let e=n.field(Oa,!1);return e?e.query.spec:yd(n)}class ug{constructor(e,t){this.query=e,this.panel=t}}const g_=vn.mark({class:"cm-searchMatch"}),y_=vn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),x_=hi.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Oa))}update(n){let e=n.state.field(Oa);(e!=n.startState.field(Oa)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return vn.none;let{view:t}=this,r=new Ho;for(let a=0,s=t.visibleRanges,o=s.length;a<o;a++){let{from:c,to:h}=s[a];for(;a<o-1&&h>s[a+1].from-500;)h=s[++a].to;n.highlight(t.state,c,h,(d,p)=>{let g=t.state.selection.ranges.some(b=>b.from==d&&b.to==p);r.add(d,p,g?y_:g_)})}return r.finish()}},{decorations:n=>n.decorations});function Xc(n){return e=>{let t=e.state.field(Oa,!1);return t&&t.query.spec.valid?n(e,t):_2(e)}}const Cc=Xc((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let a=Oe.single(r.from,r.to),s=n.state.facet(Jo);return n.dispatch({selection:a,effects:[py(n,r),s.scrollToMatch(a.main,n)],userEvent:"select.search"}),M2(n),!0}),gd=Xc((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,a=e.prevMatch(t,r,r);if(!a)return!1;let s=Oe.single(a.from,a.to),o=n.state.facet(Jo);return n.dispatch({selection:s,effects:[py(n,a),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),M2(n),!0}),v_=Xc((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Oe.create(t.map(r=>Oe.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),w0=Xc((n,{query:e})=>{let{state:t}=n,{from:r,to:a}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,c=[],h,d,p=[];o.from==r&&o.to==a&&(d=t.toText(e.getReplacement(o)),c.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(t,o.from,o.to),p.push(rt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+".")));let g=n.state.changes(c);return o&&(h=Oe.single(o.from,o.to).map(g),p.push(py(n,o)),p.push(t.facet(Jo).scrollToMatch(h.main,n))),n.dispatch({changes:g,selection:h,effects:p,userEvent:"input.replace"}),!0}),E2=Xc((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(a=>{let{from:s,to:o}=a;return{from:s,to:o,insert:e.getReplacement(a)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:rt.announce.of(r),userEvent:"input.replace.all"}),!0});function dy(n){return n.state.facet(Jo).createPanel(n)}function yd(n,e){var t,r,a,s,o;let c=n.selection.main,h=c.empty||c.to>c.from+100?"":n.sliceDoc(c.from,c.to);if(e&&!h)return e;let d=n.facet(Jo);return new Hc({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:d.caseSensitive,literal:(a=e?.literal)!==null&&a!==void 0?a:d.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function N2(n){let e=BS(n,dy);return e&&e.dom.querySelector("[main-field]")}function M2(n){let e=N2(n);e&&e==n.root.activeElement&&e.select()}const _2=n=>{let e=n.state.field(Oa,!1);if(e&&e.panel){let t=N2(n);if(t&&t!=n.root.activeElement){let r=yd(n.state,e.query.spec);r.valid&&n.dispatch({effects:Ol.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[fy.of(!0),e?Ol.of(yd(n.state,e.query.spec)):dn.appendConfig.of(w_)]});return!0},D2=n=>{let e=n.state.field(Oa,!1);if(!e||!e.panel)return!1;let t=BS(n,dy);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:fy.of(!1)}),!0};class b_{constructor(e){this.view=e;let t=this.query=e.state.field(Oa).query.spec;this.commit=this.commit.bind(this),this.searchField=ai("input",{value:t.search,placeholder:Ur(e,"Find"),"aria-label":Ur(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ai("input",{value:t.replace,placeholder:Ur(e,"Replace"),"aria-label":Ur(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ai("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ai("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ai("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(a,s,o){return ai("button",{class:"cm-button",name:a,onclick:s,type:"button"},o)}this.dom=ai("div",{onkeydown:a=>this.keydown(a),class:"cm-search"},[this.searchField,r("next",()=>Cc(e),[Ur(e,"next")]),r("prev",()=>gd(e),[Ur(e,"previous")]),r("select",()=>v_(e),[Ur(e,"all")]),ai("label",null,[this.caseField,Ur(e,"match case")]),ai("label",null,[this.reField,Ur(e,"regexp")]),ai("label",null,[this.wordField,Ur(e,"by word")]),...e.state.readOnly?[]:[ai("br"),this.replaceField,r("replace",()=>w0(e),[Ur(e,"replace")]),r("replaceAll",()=>E2(e),[Ur(e,"replace all")])],ai("button",{name:"close",onclick:()=>D2(e),"aria-label":Ur(e,"close"),type:"button"},[""])])}commit(){let e=new Hc({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ol.of(e)}))}keydown(e){HM(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?gd:Cc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),w0(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Ol)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Jo).top}}function Ur(n,e){return n.state.phrase(e)}const _f=30,Df=/[\s\.,:;?!]/;function py(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),a=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-_f),o=Math.min(a,t+_f),c=n.state.sliceDoc(s,o);if(s!=r.from){for(let h=0;h<_f;h++)if(!Df.test(c[h+1])&&Df.test(c[h])){c=c.slice(h);break}}if(o!=a){for(let h=c.length-1;h>c.length-_f;h--)if(!Df.test(c[h-1])&&Df.test(c[h])){c=c.slice(0,h);break}}return rt.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${r.number}.`)}const k_=rt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),w_=[Oa,Fc.low(x_),k_],Ac=Ai.define({create:()=>!1,update:(n,e)=>{for(const t of e.effects)if(t.is(xd))return t.value;return n}}),xd=dn.define();function S_(n){const e=n.state.selection.main;return e.from===e.to?null:n.state.doc.sliceString(e.from,e.to)}function S0(n){const e=S_(n),t=Qo(n.state);if(e!==null){const r=new Hc({search:e,caseSensitive:t.caseSensitive,wholeWord:t.wholeWord,regexp:t.regexp,replace:t.replace});n.dispatch({effects:[Ol.of(r),xd.of(!0)]})}else n.dispatch({effects:xd.of(!0)});return _2(n),!0}function Tc(n){return n.dispatch({effects:xd.of(!1)}),D2(n),!0}function C_(n){return n.state.field(Ac)?Tc(n):S0(n)}function A_(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j2(n){if(!n.search)return null;let e=n.regexp?n.search:A_(n.search);n.wholeWord&&(e=`\\b(?:${e})\\b`);try{return new RegExp(e,n.caseSensitive?"g":"gi")}catch{return null}}function T_(n,e){if(!e.search)return 0;const t=n.state.doc.toString(),r=j2(e);if(!r)return 0;let a=0,s;for(;(s=r.exec(t))!==null;)a++,s[0].length===0&&r.lastIndex++;return a}function E_(n,e){if(!e.search)return 0;const t=n.state.selection.main,r=n.state.doc.toString(),a=t.from,s=j2(e);if(!s)return 0;let o=0,c;for(;(c=s.exec(r))!==null;){if(o++,c.index<=a&&a<c.index+c[0].length)return o;c[0].length===0&&s.lastIndex++}return 0}function N_(n,e){const t=Qo(n.state);if(!t.search){e.style.display="none",e.textContent="";return}const r=T_(n,t);if(r<=0){e.textContent="0/0",e.style.display="inline";return}const a=E_(n,t);e.textContent=`${a||1}/${r}`,e.style.display="inline"}function M_(n,e){return n.search===e.search&&n.replace===e.replace&&n.caseSensitive===e.caseSensitive&&n.wholeWord===e.wholeWord&&n.regexp===e.regexp}function O2(n,e){e.searchInput.value=n.search||"",e.replaceInput.value=n.replace||"",e.caseCb.checked=n.caseSensitive,e.wordCb.checked=n.wholeWord,e.regexpCb.checked=n.regexp}function __(n){const e=document.createElement("div");e.className="cm-toolbar-search-panel";const t=document.createElement("div");t.className="search-container",e.appendChild(t);const r=document.createElement("div");r.className="search-row",t.appendChild(r);const a=document.createElement("div");a.className="replace-row",t.appendChild(a);const s=document.createElement("input");s.type="text",s.className="search-input",s.placeholder="Find...",r.appendChild(s);const o=document.createElement("button");o.type="button",o.className="search-btn prev",o.textContent="^",o.title="Previous match (Shift+Enter)",o.setAttribute("aria-label","Previous match"),r.appendChild(o);const c=document.createElement("button");c.type="button",c.className="search-btn next",c.textContent="v",c.title="Next match (Enter)",c.setAttribute("aria-label","Next match"),r.appendChild(c);const h=document.createElement("span");h.className="search-match-count",r.appendChild(h);const d=(U,ye,fe,L)=>{const J=document.createElement("label");J.className="search-option",J.title=fe;const ne=document.createElement("input");ne.type="checkbox",ne.className=U,ne.setAttribute("aria-label",L),ne.title=fe;const me=document.createElement("span");return me.textContent=ye,J.appendChild(ne),J.appendChild(me),{label:J,input:ne}},p=d("case-sensitive","Aa","Match case","Match case"),g=d("whole-word","ab","Whole word only","Whole word only"),b=d("regexp",".*","Use regular expression","Use regular expression");r.appendChild(p.label),r.appendChild(g.label),r.appendChild(b.label);const w=document.createElement("button");w.type="button",w.className="search-btn close",w.textContent="x",w.title="Close search (Escape)",w.setAttribute("aria-label","Close search"),r.appendChild(w);const A=document.createElement("input");A.type="text",A.className="replace-input",A.placeholder="Replace...",a.appendChild(A);const N=document.createElement("button");N.type="button",N.className="search-btn replace",N.textContent="Replace",N.title="Replace current match",N.setAttribute("aria-label","Replace current match"),a.appendChild(N);const _=document.createElement("button");_.type="button",_.className="search-btn replace-all",_.textContent="Replace All",_.title="Replace all matches",_.setAttribute("aria-label","Replace all matches"),a.appendChild(_);const O=p.input,H=g.input,R=b.input,ee=()=>{N_(n,h)},Z=()=>{O2(Qo(n.state),{searchInput:s,replaceInput:A,caseCb:O,wordCb:H,regexpCb:R})};Z(),setTimeout(()=>s.focus(),0);const I=()=>{const U=new Hc({search:s.value,caseSensitive:O.checked,wholeWord:H.checked,regexp:R.checked,replace:A.value});n.dispatch({effects:Ol.of(U)}),ee()};return[s,A].forEach(U=>U.addEventListener("input",I)),[O,H,R].forEach(U=>U.addEventListener("change",I)),s.addEventListener("keydown",U=>{U.key==="Enter"?(U.preventDefault(),U.shiftKey?gd(n):Cc(n),ee()):U.key==="Escape"&&(Tc(n),n.focus())}),A.addEventListener("keydown",U=>{U.key==="Escape"&&(Tc(n),n.focus())}),o.addEventListener("click",()=>{gd(n),ee()}),c.addEventListener("click",()=>{Cc(n),ee()}),w.addEventListener("click",()=>{Tc(n),n.focus()}),N.addEventListener("click",()=>{w0(n),Cc(n),ee()}),_.addEventListener("click",()=>{E2(n);const U=Qo(n.state);n.dispatch({effects:Ol.of(new Hc({search:"",replace:U.replace,caseSensitive:U.caseSensitive,wholeWord:U.wholeWord,regexp:U.regexp}))}),Z(),ee()}),ee(),{dom:e,searchInput:s,replaceInput:A,caseCb:O,wordCb:H,regexpCb:R,countEl:h,refreshCount:ee}}const D_=hi.fromClass(class{panel=null;controls=null;parent=null;constructor(n){this.parent=n.dom.parentElement,n.state.field(Ac)&&this.openPanel(n)}update(n){const e=n.startState.field(Ac),t=n.state.field(Ac);if(t&&!e)this.openPanel(n.view);else if(!t&&e)this.closePanel();else if(t&&this.controls){const r=Qo(n.startState),a=Qo(n.state),s=!M_(r,a);s&&O2(a,this.controls),(s||n.docChanged||n.selectionSet)&&this.controls.refreshCount()}}openPanel(n){this.panel||(this.controls=__(n),this.panel=this.controls.dom,this.parent?.firstChild&&this.parent.insertBefore(this.panel,this.parent.firstChild))}closePanel(){this.panel?.remove(),this.panel=null,this.controls=null}destroy(){this.closePanel()}});function j_(){return[Ac,D_,ld.of([{key:"Mod-f",run:S0},{key:"Mod-h",run:S0},{key:"Escape",run:Tc}])]}function O_(){return rt.theme({"& .cm-search":{display:"none !important"},"& .cm-searchMatch":{backgroundColor:"var(--vault-search-match-bg, rgba(253, 224, 71, 0.4))",borderRadius:"2px",boxShadow:"inset 0 -1px 0 rgba(146, 64, 14, 0.2)"},"& .cm-searchMatch-selected":{backgroundColor:"var(--vault-search-match-selected, rgba(253, 224, 71, 0.8))",borderRadius:"2px",outline:"1px solid var(--vault-search-match-selected-ring, rgba(180, 83, 9, 0.65))",boxShadow:"0 0 0 1px var(--vault-search-match-selected-ring, rgba(180, 83, 9, 0.65))"}})}const wl={SEPARATE_FIELD:"separate_field",INLINE_TAGS:"inline_tags"};class Mo{buffer="";isInThinkBlock=!1;reasoningContent="";mainContent="";static THINK_START_VARIATIONS=["<think>","<thinking>","<reasoning>","<thought>"];static THINK_END_VARIATIONS=["</think>","</thinking>","</reasoning>","</thought>"];parseChunk(e,t){const r=t?R_(t):wl.INLINE_TAGS,a=e?.choices?.[0],s=a?.delta,o=s?.content??"",c=s?.reasoning_content??s?.reasoning??a?.reasoning?.content??"";return c||r===wl.SEPARATE_FIELD?(c&&(this.reasoningContent+=c),o&&(this.mainContent+=o),{content:this.mainContent,reasoning:this.reasoningContent,isInThinkBlock:!1}):this.parseInlineTagChunk(e)}findThinkTag(e,t=0){const r=e.toLowerCase();let a=null;for(const s of Mo.THINK_START_VARIATIONS){const o=r.indexOf(s,t);o!==-1&&(a===null||o<a.index)&&(a={index:o,tag:s})}return a}findCloseTag(e,t=0){const r=e.toLowerCase();let a=null;for(const s of Mo.THINK_END_VARIATIONS){const o=r.indexOf(s,t);o!==-1&&(a===null||o<a.index)&&(a={index:o,tag:s})}return a}parseInlineTagChunk(e){const r=e?.choices?.[0]?.delta?.content??"";return this.buffer+=r,this.processBuffer(),{content:this.mainContent,reasoning:this.reasoningContent,isInThinkBlock:this.isInThinkBlock}}processBuffer(){for(;this.buffer.length>0;)if(this.isInThinkBlock){const e=this.findCloseTag(this.buffer);if(e===null){const t=Math.max(...Mo.THINK_END_VARIATIONS.map(s=>s.length)),r=Math.min(this.buffer.length,t-1),a=this.buffer.slice(0,this.buffer.length-r);this.reasoningContent+=a,this.buffer=this.buffer.slice(this.buffer.length-r);break}this.reasoningContent+=this.buffer.slice(0,e.index),this.buffer=this.buffer.slice(e.index+e.tag.length),this.isInThinkBlock=!1}else{const e=this.findThinkTag(this.buffer);if(e===null){const t=Math.max(...Mo.THINK_START_VARIATIONS.map(s=>s.length)),r=Math.min(this.buffer.length,t-1),a=this.buffer.slice(0,this.buffer.length-r);this.mainContent+=a,this.buffer=this.buffer.slice(this.buffer.length-r);break}this.mainContent+=this.buffer.slice(0,e.index),this.buffer=this.buffer.slice(e.index+e.tag.length),this.isInThinkBlock=!0}}parseInlineTags(e){let t="",r="",a=e;for(;a.length>0;){const s=this.findThinkTag(a);if(s===null){t+=a;break}t+=a.slice(0,s.index);const o=this.findCloseTag(a,s.index+s.tag.length);if(o===null){r+=a.slice(s.index+s.tag.length);break}r+=a.slice(s.index+s.tag.length,o.index),a=a.slice(o.index+o.tag.length)}return{text:t,reasoning:r}}flush(){return this.buffer.length>0&&(this.isInThinkBlock?this.reasoningContent+=this.buffer:this.mainContent+=this.buffer,this.buffer=""),{content:this.mainContent,reasoning:this.reasoningContent,isInThinkBlock:this.isInThinkBlock}}reset(){this.buffer="",this.isInThinkBlock=!1,this.reasoningContent="",this.mainContent=""}}function R_(n){const e=n.toLowerCase();return e.includes("deepseek")||e.includes(":thinking")||e.includes("-thinking")||e.includes("reasoning")?wl.SEPARATE_FIELD:(e.includes("qwen")||e.includes("qwq"),wl.INLINE_TAGS)}const ck={expand:`Please expand and elaborate on the following text, adding more detail and depth while maintaining the same style and tone:

"""
\${text}
"""

Provide only the expanded text without any additional commentary.`,rewrite:`Please rewrite the following text to improve clarity, flow, and impact while preserving the original meaning:

"""
\${text}
"""

Provide only the rewritten text without any additional commentary.`,instruct:`Please apply the following instruction to the text below:

Instruction: \${instruction}

Text:
"""
\${text}
"""

Provide only the modified text without any additional commentary.`,shorten:`Please shorten and condense the following text, making it more concise while preserving the key meaning and essential details:

"""
\${text}
"""

Provide only the shortened text without any additional commentary.`,lengthen:`Please lengthen the following text by adding more detail, depth, and elaboration while maintaining the same style and tone:

"""
\${text}
"""

Provide only the lengthened text without any additional commentary.`,vivid:`Please rewrite the following text to make it more vivid and descriptive, adding sensory details, imagery, and evocative language:

"""
\${text}
"""

Provide only the enhanced text without any additional commentary.`,emotion:`Please rewrite the following text to add more emotional depth, feeling, and character voice while preserving the original meaning:

"""
\${text}
"""

Provide only the enhanced text without any additional commentary.`,grammar:`Please fix any grammar, spelling, and punctuation errors in the following text while preserving the original meaning and style:

"""
\${text}
"""

Provide only the corrected text without any additional commentary.`},B_=`You are Zoggy, a friendly and knowledgeable assistant built into CharacterVault.

# Your Role
You help users create, edit, and understand character cards for roleplay tools like SillyTavern. You answer questions about character card creation, best practices, and how to use CharacterVault's features.

# CharacterVault Features
Users can:
- Upload character cards (JSON or PNG) in v2 or v3 spec format
- Edit cards section by section OR create new cards from scratch
- Export finished cards as JSON or PNG (via top-right corner export)
- Add specific sections to context so you can see and help with their card content

# Available Editing Sections

## Core Character Sections:
- Image, Name, Description, Personality, Scenario, First Message, Examples, System Prompt, Post-History, Greetings, Appearance, Extensions
  - **Note**: Modern cards typically use Description for all character info. Personality/Appearance exist for legacy compatibility. NEVER suggest using them.

## Lorebook:
- Basic editing suite (entry name, trigger keys, priority, position, enabled, case sensitive, constant, content editor)
- Fine-tuning requires SillyTavern or similar tools

## Metadata (doesn't affect character behavior):
- Avatar URL (for Character Hub/Chub), Creator Notes, Creator, Version, Tags

# Your Approach
- Helpful and encouraging, especially for beginners
- Clear, concise explanations with minimal jargon (unless user shows familiarity)
- Non-judgmental about all content types (SFW to NSFW) - you're here to help with quality and functionality, not moderate content
- When users ask about adding themselves to cards, remind them to use {{user}} as the placeholder, not a hardcoded name
- If users ask vague questions about "their card" or need specific help, gently suggest adding relevant sections to context to the **Ai Context** panel (Left Side) so you can provide better assistance
- Offer concrete next steps when users seem stuck
- Explain section purposes and best practices when relevant`;class Dn extends Error{type;statusCode;constructor(e,t,r){super(e),this.name="AIError",this.type=t,this.statusCode=r}}class Mt{config;sampler;prompts;abortController=null;static SAFETY_MARGIN=100;constructor(e,t,r){this.config=e,this.sampler=t,this.prompts=r?{...ck,...r}:ck}static estimateTokens(e){return e?Math.ceil(e.length/4):0}fitContextToLimit(e,t){if(t<=0)return[];const r=[];let a=0;for(const s of e){const o=Mt.estimateTokens(s)+5;if(a+o<=t)r.push(s),a+=o;else break}return r}truncateTextToLimit(e,t){if(t<=0)return"...";const r=t*4;return e.length<=r?e:e.substring(0,Math.max(0,r-3))+"..."}abort(){this.abortController&&(this.abortController.abort(),console.log("[AIService] Request aborted by user"),this.abortController=null)}updateConfig(e){this.config=e}updateSampler(e){this.sampler=e}updatePrompts(e){this.prompts=e}interpolatePrompt(e,t){return e.replace(/\$\{text\}/g,t)}interpolateInstructPrompt(e,t,r){return e.replace(/\$\{text\}/g,t).replace(/\$\{instruction\}/g,r)}getBaseUrl(){return this.config.baseUrl.replace(/\/$/,"")}getHeaders(){const e={"Content-Type":"application/json"};return this.config.apiKey&&(e.Authorization=`Bearer ${this.config.apiKey}`),e}handleError(e){throw e instanceof Dn?e:e instanceof Error?e.message.includes("fetch")?new Dn("Network error. Please check your connection.","network"):new Dn(e.message,"unknown"):new Dn("An unknown error occurred","unknown")}async fetchModels(){try{const e=await fetch(`${this.getBaseUrl()}/models`,{method:"GET",headers:this.getHeaders()});if(!e.ok)throw e.status===401?new Dn("Invalid API key","auth",401):e.status===429?new Dn("Rate limit exceeded","rate_limit",429):new Dn(`Failed to fetch models: ${e.statusText}`,"server",e.status);return(await e.json()).data.map(a=>({id:a.id,name:this.formatModelName(a.id)})).sort((a,s)=>a.name.localeCompare(s.name))}catch(e){this.handleError(e)}}formatModelName(e){return e.replace(/^(openai|anthropic|google|meta|mistral)\//,"").replace(/-/g," ").replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}async chatCompletion(e,t,r){const a={...this.sampler,...t},s=this.config.enableStreaming&&r;this.abortController=new AbortController;const{signal:o}=this.abortController,c={model:this.config.modelId,messages:e,temperature:a.temperature,top_p:a.topP,min_p:a.minP,top_k:a.topK,repetition_penalty:a.repetitionPenalty,stream:!!s,max_tokens:a.maxTokens,include_reasoning:this.config.enableReasoning??!1,reasoning:this.config.enableReasoning?{enabled:!0}:{enabled:!1}};try{const h=await fetch(`${this.getBaseUrl()}/chat/completions`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(c),signal:o});if(!h.ok){if(h.status===401)throw new Dn("Invalid API key","auth",401);if(h.status===429)throw new Dn("Rate limit exceeded","rate_limit",429);if(h.status===400){const N=await h.json().catch(()=>({}));throw new Dn(N.error?.message||"Invalid request","invalid_request",400)}let A=h.statusText||`HTTP ${h.status}`;try{const N=await h.json().catch(()=>null);N?.error?.message?A=N.error.message:N?.message&&(A=N.message)}catch{}throw new Dn(`API error: ${A}`,"server",h.status)}if(s&&h.body)return await this.handleStreamingResponse(h.body,r);const d=await h.json();if(!d.choices||d.choices.length===0)throw new Dn("No response from AI","unknown");const g=d.choices[0].message,b=g.reasoning_content,w=g.reasoning;return{content:g.content,reasoning:b??w??void 0}}catch(h){if(h instanceof Error&&h.name==="AbortError")throw console.log("[AIService] Request aborted - operation cancelled by user"),new Dn("Request was cancelled","unknown");this.handleError(h)}finally{this.abortController=null}}async handleStreamingResponse(e,t){const r=e.getReader(),a=new TextDecoder;let s="",o="";const c=new Mo;try{for(;;){const{done:d,value:p}=await r.read();if(d)break;if(this.abortController?.signal.aborted)throw console.log("[AIService] Streaming aborted"),new Dn("Request was cancelled","unknown");const b=a.decode(p,{stream:!0}).split(`
`).filter(w=>w.trim()!=="");for(let w=0;w<b.length;w++){const A=b[w];if(A.startsWith("data: ")){const N=A.slice(6);if(N==="[DONE]")continue;try{const _=JSON.parse(N),O=c.parseChunk(_,this.config.modelId),H=O.content,R=O.reasoning;if(H!==s||R!==o){const ee=H.slice(s.length),Z=R.slice(o.length);s=H,o=R,(ee||Z)&&t({content:ee||void 0,reasoning:Z||void 0})}}catch(_){console.warn("[AIService] Failed to parse streaming chunk:",_),console.warn("[AIService] Problematic line:",A.slice(0,200))}}}}const h=c.flush();if(h.content.length>s.length){const d=h.content.slice(s.length);s=h.content,t({content:d})}if(h.reasoning.length>o.length){const d=h.reasoning.slice(o.length);o=h.reasoning,t({reasoning:d})}return{content:s,reasoning:o||void 0}}finally{r.releaseLock()}}async expandText(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.expand,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.expand,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async rewriteText(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.rewrite,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.rewrite,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async instructText(e,t,r,a,s){const o=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,c=this.buildSystemPrompt([]),h=this.interpolateInstructPrompt(this.prompts.instruct,"",t),d=Mt.estimateTokens(c+h);let p=o-d,g=e;const b=Mt.estimateTokens(e);b>p?(g=this.truncateTextToLimit(e,p),p=0):p-=b;const w=this.fitContextToLimit(r,p),A=this.buildSystemPrompt(w),N=this.interpolateInstructPrompt(this.prompts.instruct,g,t),_=[{role:"system",content:A},{role:"user",content:N}];return this.chatCompletion(_,a,s)}async shortenText(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.shorten,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.shorten,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async lengthenText(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.lengthen,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.lengthen,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async makeVivid(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.vivid,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.vivid,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async addEmotion(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.emotion,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.emotion,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async fixGrammar(e,t,r,a){const s=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,o=this.buildSystemPrompt([]),c=this.interpolatePrompt(this.prompts.grammar,""),h=Mt.estimateTokens(o+c);let d=s-h,p=e;const g=Mt.estimateTokens(e);g>d?(p=this.truncateTextToLimit(e,d),d=0):d-=g;const b=this.fitContextToLimit(t,d),w=this.buildSystemPrompt(b),A=this.interpolatePrompt(this.prompts.grammar,p),N=[{role:"system",content:w},{role:"user",content:A}];return this.chatCompletion(N,r,a)}async askAIWithConversation(e,t,r,a,s){const o=this.sampler.contextLength-this.sampler.maxTokens-Mt.SAFETY_MARGIN,c=B_,h=Mt.estimateTokens(e),p=Mt.estimateTokens(c)+h;let g=o-p;const b=this.fitContextToLimit(t,g),w=b.reduce((O,H)=>O+Mt.estimateTokens(H)+5,0);g-=w;const A=[];for(let O=r.length-1;O>=0;O--){const H=r[O],R=Mt.estimateTokens(H.content)+10;if(g>=R)A.unshift(H),g-=R;else break}let N=c;if(b.length>0){const O=b.map((H,R)=>`--- Context Entry ${R+1} ---
${H}`).join(`

`);N+=`

Use the following context entries to inform your responses:

${O}`}const _=[{role:"system",content:N}];return A.forEach(O=>{_.push({role:O.role==="user"?"user":"assistant",content:O.content})}),_.push({role:"user",content:e}),this.chatCompletion(_,a,s)}buildSystemPrompt(e){const t="You are a helpful AI assistant for a character editing application called CharacterVault. You help users create and edit character cards for roleplay programs.";if(e.length===0)return t;const r=e.map((a,s)=>`--- Context Entry ${s+1} ---
${a}`).join(`

`);return`${t}

Use the following context entries to inform your responses:

${r}`}isReady(){return!!(this.config.apiKey&&this.config.baseUrl&&this.config.modelId)}}const my=new WeakMap;function L_(n){return my.get(n)}function z_(n,e,t,r,a,s){const o=document.createElement("div");o.className="ai-toolbar-panel",o.style.cssText=`
    display: flex;
    flex-direction: column;
    background: var(--ai-toolbar-bg);
    border-bottom: 1px solid var(--ai-toolbar-border);
  `;const c={isProcessing:!1,isStreaming:!1,streamingContent:"",streamingReasoning:"",aiResult:null,aiReasoning:"",currentOperation:null,error:null,showReasoning:!1};let h=e;const d=100,p=document.createElement("div");p.className="ai-toolbar-controls",p.style.cssText=`
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    min-height: 44px;
  `,o.appendChild(p);const g=document.createElement("div");g.className="ai-result-container",g.style.cssText=`
    display: none;
    flex-direction: column;
    padding: 12px;
    border-top: 1px solid var(--ai-toolbar-border);
    background: var(--ai-toolbar-result-bg);
    max-height: 500px;
    overflow-y: auto;
  `,o.appendChild(g);const b=[{id:"expand",label:"Enhance",icon:"",color:"var(--ai-toolbar-accent-primary, #7c3aed)"},{id:"rewrite",label:"Rephrase",icon:"",color:"var(--ai-toolbar-accent-secondary, #2563eb)"},{id:"instruct",label:"Custom",icon:"",color:"var(--ai-toolbar-accent-success, #059669)"}],w=[{id:"shorten",label:"Shorten",icon:"",color:"var(--ai-toolbar-accent-warning, #d97706)"},{id:"lengthen",label:"Lengthen",icon:"",color:"var(--ai-toolbar-accent-info, #0891b2)"},{id:"vivid",label:"Vivid",icon:"",color:"var(--ai-toolbar-accent-pink, #db2777)"},{id:"emotion",label:"Emotion",icon:"",color:"var(--ai-toolbar-accent-rose, #e11d48)"},{id:"grammar",label:"Fix",icon:"",color:"var(--ai-toolbar-accent-neutral, #475569)"}];let A=!1,N=null,_="",O=!1;function H(je,bt){const Ot=document.createElement("button");return Ot.className=`ai-toolbar-btn ai-toolbar-btn-${je.id}`,Ot.innerHTML=`<span style="margin-right: 4px;">${je.icon}</span>${je.label}`,Ot.style.cssText=`
      display: flex;
      align-items: center;
      padding: ${bt?"6px 12px":"4px 8px"};
      font-size: ${bt?"13px":"12px"};
      font-weight: 500;
      color: white;
      background: ${je.color};
      border: none;
      border-radius: 6px;
      cursor: pointer;
      opacity: 0.5;
      pointer-events: none;
      transition: opacity 0.2s, transform 0.1s;
    `,Ot.addEventListener("click",()=>{A&&N&&(bt||(ne.style.display="none"),t(je.id,_,N))}),Ot.addEventListener("mousedown",Lt=>{Lt.preventDefault()}),Ot}const R=document.createElement("div");R.className="ai-toolbar-instruct",R.style.cssText="display: none; align-items: center; gap: 6px; flex: 1; min-width: 200px;";const ee=document.createElement("input");ee.className="ai-toolbar-instruct-input",ee.type="text",ee.placeholder="What would you like me to do?",ee.style.cssText=`
    flex: 1;
    padding: 6px 10px;
    font-size: 13px;
    background: var(--ai-toolbar-input-bg);
    border: 1px solid var(--ai-toolbar-input-border);
    border-radius: 6px;
    color: var(--ai-toolbar-text);
    outline: none;
  `;const Z=document.createElement("button");Z.className="ai-toolbar-instruct-send",Z.innerHTML="Send",Z.style.cssText=`
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: var(--ai-toolbar-accent-success, #059669);
    border: none;
    border-radius: 6px;
    cursor: pointer;
  `;const I=document.createElement("button");I.className="ai-toolbar-instruct-cancel",I.innerHTML="Cancel",I.style.cssText=`
    padding: 6px 10px;
    font-size: 12px;
    color: var(--ai-toolbar-text-secondary);
    background: transparent;
    border: 1px solid var(--ai-toolbar-input-border);
    border-radius: 6px;
    cursor: pointer;
  `,R.appendChild(ee),R.appendChild(Z),R.appendChild(I),p.appendChild(R);const U=document.createElement("div");U.className="ai-toolbar-primary",U.style.cssText="display: flex; flex-wrap: wrap; gap: 6px;";const ye=new Map;for(const je of b){if(je.id==="instruct")continue;const bt=H(je,!0);ye.set(je.id,bt),U.appendChild(bt)}const fe=document.createElement("button");fe.className="ai-toolbar-btn ai-toolbar-btn-instruct",fe.innerHTML='<span style="margin-right: 4px;"></span>Custom',fe.style.cssText=`
    display: flex;
    align-items: center;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: var(--ai-toolbar-accent-success, #059669);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    opacity: 0.5;
    pointer-events: none;
    transition: opacity 0.2s, transform 0.1s;
  `,fe.addEventListener("mousedown",je=>{je.preventDefault()}),fe.addEventListener("click",()=>{A&&(O=!0,vt(),ee.focus())}),ye.set("instruct",fe),U.appendChild(fe),p.appendChild(U);const L=()=>{const je=ee.value.trim();!je||!A||!N||(O=!1,t("instruct",_,N,je),ee.value="",vt())};Z.addEventListener("click",L),ee.addEventListener("keydown",je=>{je.key==="Enter"&&L(),je.key==="Escape"&&(O=!1,ee.value="",vt())}),I.addEventListener("click",()=>{O=!1,ee.value="",vt()});const J=document.createElement("button");J.className="ai-toolbar-btn-more",J.innerHTML=" More",J.style.cssText=`
    display: flex;
    align-items: center;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 500;
    color: var(--ai-toolbar-text-secondary);
    background: transparent;
    border: 1px solid var(--ai-toolbar-input-border);
    border-radius: 6px;
    cursor: pointer;
    opacity: 0.5;
    pointer-events: none;
  `;const ne=document.createElement("div");ne.style.cssText=`
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 4px;
    background: var(--ai-toolbar-bg);
    border: 1px solid var(--ai-toolbar-border);
    border-radius: 6px;
    padding: 4px;
    display: none;
    flex-direction: column;
    gap: 2px;
    z-index: 100;
    min-width: 120px;
  `;const me=new Map;for(const je of w){const bt=H(je,!1);me.set(je.id,bt),ne.appendChild(bt)}const he=document.createElement("div");he.className="ai-toolbar-more",he.style.cssText="position: relative;",he.appendChild(J),he.appendChild(ne),p.appendChild(he);const se=document.createElement("button");se.className="ai-toolbar-btn-search",se.innerHTML="",se.title="Search & Replace (Ctrl+F)",se.style.cssText=`
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px 10px;
    font-size: 14px;
    background: transparent;
    border: 1px solid var(--ai-toolbar-input-border);
    border-radius: 6px;
    cursor: pointer;
    color: var(--ai-toolbar-text-secondary);
    transition: all 0.15s ease;
    margin-left: 4px;
  `,se.addEventListener("click",()=>{C_(n)}),se.addEventListener("mousedown",je=>{je.preventDefault()}),p.appendChild(se);const te=document.createElement("button");te.className="ai-toolbar-btn-abort",te.innerHTML=" Stop",te.title="Stop AI operation",te.style.cssText=`
    display: none;
    align-items: center;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: #dc2626;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  `,te.addEventListener("click",()=>{s()}),te.addEventListener("mousedown",je=>{je.preventDefault()}),p.appendChild(te),J.addEventListener("click",()=>{if(!A)return;const je=ne.style.display==="flex";ne.style.display=je?"none":"flex"}),J.addEventListener("mousedown",je=>{je.preventDefault()}),document.addEventListener("click",je=>{he.contains(je.target)||(ne.style.display="none")});const xe=document.createElement("div");xe.className="ai-toolbar-separator",xe.style.cssText="width: 1px; height: 24px; background: var(--ai-toolbar-border); margin: 0 4px;",p.appendChild(xe);const Ce=document.createElement("span");Ce.className="ai-toolbar-info",Ce.textContent="Select text to use AI",Ce.style.cssText=`
    font-size: 12px;
    color: var(--ai-toolbar-text-muted);
    margin-left: auto;
  `,p.appendChild(Ce);const Ae=document.createElement("div");Ae.style.cssText=`
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
  `,g.appendChild(Ae);const D=document.createElement("span");D.style.cssText=`
    font-size: 12px;
    font-weight: 600;
    color: var(--ai-toolbar-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  `,Ae.appendChild(D);const Te=document.createElement("button");Te.innerHTML="",Te.style.cssText=`
    padding: 2px 6px;
    font-size: 14px;
    color: var(--ai-toolbar-text-muted);
    background: transparent;
    border: none;
    cursor: pointer;
    border-radius: 4px;
  `,Te.addEventListener("click",()=>{a()}),Ae.appendChild(Te);const Ee=document.createElement("div");Ee.style.cssText=`
    display: none;
    padding: 8px 12px;
    background: var(--ai-toolbar-error-bg);
    border: 1px solid var(--ai-toolbar-error-border);
    border-radius: 6px;
    color: var(--ai-toolbar-error-text);
    font-size: 13px;
    margin-bottom: 8px;
  `,g.appendChild(Ee);const P=document.createElement("div");P.style.cssText=`
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    gap: 12px;
  `,P.innerHTML=`
    <div style="
      width: 32px;
      height: 32px;
      border: 3px solid var(--ai-toolbar-input-border);
      border-top-color: var(--ai-toolbar-text-muted);
      border-radius: 50%;
      animation: ai-spin 1s linear infinite;
    "></div>
    <span style="font-size: 13px; color: var(--ai-toolbar-text-muted);">AI is working...</span>
    <style>
      @keyframes ai-spin {
        to { transform: rotate(360deg); }
      }
    </style>
  `,g.appendChild(P);const Qe=document.createElement("div");Qe.style.cssText=`
    display: none;
    margin-bottom: 8px;
    border: 1px solid var(--ai-toolbar-border);
    border-radius: 6px;
    overflow: hidden;
    flex-shrink: 0;
  `,g.appendChild(Qe);const ct=document.createElement("button");ct.style.cssText=`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 8px 12px;
    background: var(--ai-toolbar-reasoning-bg);
    border: none;
    color: var(--ai-toolbar-text-muted);
    font-size: 12px;
    cursor: pointer;
    text-align: left;
  `,ct.innerHTML=`
    <span style="display: flex; align-items: center; gap: 4px;">
      <span></span> Thinking process
    </span>
    <span class="reasoning-toggle">Show</span>
  `,Qe.appendChild(ct);const et=document.createElement("div");et.style.cssText=`
    display: none;
    max-height: 150px;
    overflow-y: auto;
    padding: 8px 12px;
    background: var(--ai-toolbar-reasoning-bg);
    border-top: 1px solid var(--ai-toolbar-border);
  `,Qe.appendChild(et);const jt=document.createElement("pre");jt.style.cssText=`
    margin: 0;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 11px;
    color: var(--ai-toolbar-text-muted);
    white-space: pre-wrap;
    word-break: break-word;
    line-height: 1.5;
  `,et.appendChild(jt),ct.addEventListener("click",()=>{const je=et.style.display==="block";et.style.display=je?"none":"block";const bt=ct.querySelector(".reasoning-toggle");bt&&(bt.textContent=je?"Show":"Hide"),c.showReasoning=!je});const ft=document.createElement("div");ft.style.cssText=`
    display: none;
    padding: 12px;
    background: var(--ai-toolbar-bg);
    border: 1px solid var(--ai-toolbar-border);
    border-radius: 6px;
    margin-bottom: 12px;
  `,g.appendChild(ft);const Qt=document.createElement("p");Qt.style.cssText=`
    margin: 0;
    font-size: 13px;
    color: var(--ai-toolbar-text);
    white-space: pre-wrap;
    line-height: 1.6;
  `,ft.appendChild(Qt);const Fe=document.createElement("span");Fe.style.cssText=`
    display: inline-block;
    width: 2px;
    height: 1.2em;
    background: var(--ai-toolbar-text-muted);
    margin-left: 2px;
    animation: ai-blink 1s step-end infinite;
    vertical-align: text-bottom;
  `,Fe.innerHTML=`
    <style>
      @keyframes ai-blink {
        50% { opacity: 0; }
      }
    </style>
  `;const Ye=document.createElement("div");Ye.style.cssText=`
    display: none;
    gap: 8px;
  `,g.appendChild(Ye);const Pe=document.createElement("button");Pe.innerHTML=" Accept",Pe.style.cssText=`
    flex: 1;
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 500;
    color: white;
    background: var(--ai-toolbar-accept-bg, #16a34a);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  `,Pe.addEventListener("click",()=>{r()}),Pe.addEventListener("mousedown",je=>{je.preventDefault()}),Ye.appendChild(Pe);const De=document.createElement("button");De.innerHTML=" Reject",De.style.cssText=`
    flex: 1;
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 500;
    color: var(--ai-toolbar-text);
    background: var(--ai-toolbar-btn-hover);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  `,De.addEventListener("click",()=>{a()}),De.addEventListener("mousedown",je=>{je.preventDefault()}),Ye.appendChild(De);let lt=0,tt=0,Tt=!1;g.addEventListener("scroll",()=>{Tt=!(g.scrollTop+g.clientHeight>=g.scrollHeight-10)}),et.addEventListener("scroll",()=>{et.scrollTop+et.clientHeight>=et.scrollHeight-5||(Tt=!0)});function kt(){if(!(c.isProcessing||c.isStreaming||c.aiResult||c.error)){g.style.display="none";return}g.style.display="flex";const bt=c.currentOperation?{expand:"Enhance",rewrite:"Rephrase",instruct:"Custom",shorten:"Shorten",lengthen:"Lengthen",vivid:"Vivid",emotion:"Emotion",grammar:"Fix"}[c.currentOperation]:"AI Result";if(D.textContent=c.isStreaming?`${bt}...`:bt,c.error){Ee.style.display="block",Ee.textContent=c.error,P.style.display="none",Qe.style.display="none",ft.style.display="none",Ye.style.display="none";return}else Ee.style.display="none";P.style.display=c.isProcessing&&!c.isStreaming?"flex":"none";const Ot=(c.streamingReasoning?.trim()?.length??0)>0||(c.aiReasoning?.trim()?.length??0)>0;if(Qe.style.display=Ot?"block":"none",Ot){if(jt.textContent=c.isStreaming?c.streamingReasoning:c.aiReasoning,c.isStreaming&&!c.showReasoning){et.style.display="block";const re=ct.querySelector(".reasoning-toggle");re&&(re.textContent="Hide"),c.showReasoning=!0}else if(!c.isStreaming&&c.aiReasoning&&c.showReasoning){et.style.display="block";const re=ct.querySelector(".reasoning-toggle");re&&(re.textContent="Hide")}if(c.isStreaming&&c.streamingReasoning){const re=c.streamingReasoning.length;re>lt&&!Tt&&requestAnimationFrame(()=>{et.scrollTop=et.scrollHeight}),lt=re}}const Lt=c.isStreaming?c.streamingContent:c.aiResult||"";if(Lt){if(ft.style.display="block",Qt.textContent=Lt,c.isStreaming&&Qt.appendChild(Fe),c.isStreaming&&c.streamingContent){const re=c.streamingContent.length;re>tt&&!Tt&&requestAnimationFrame(()=>{ft.scrollTop=ft.scrollHeight,g.scrollTop=g.scrollHeight}),tt=re}}else ft.style.display="none";const An=!c.isProcessing&&!c.isStreaming&&c.aiResult&&!c.error;Ye.style.display=An?"flex":"none",!c.isStreaming&&(c.aiResult||c.aiReasoning)&&(requestAnimationFrame(()=>{et.scrollTop=et.scrollHeight,ft.scrollTop=ft.scrollHeight,g.scrollTop=g.scrollHeight}),lt=0,tt=0,Tt=!1)}function vt(){const je=n.state.selection.main;if(A=je.from!==je.to,A){N=je,_=n.state.doc.sliceString(je.from,je.to);const An=_.length,re=Mt.estimateTokens(_),ve=Math.max(0,h.contextLength-h.maxTokens-d);h.maxTokens>=h.contextLength?(Ce.textContent=" Please adjust Max Tokens to be less than Context Length",Ce.style.color="var(--ai-toolbar-error-text, #ef4444)",Ce.classList.add("warning"),A=!1):re>ve?(ve<=0?Ce.textContent=" AI needs a larger context window":Ce.textContent=` Selection is too long (${re}/${ve} tokens)`,Ce.style.color="var(--ai-toolbar-error-text, #ef4444)",Ce.classList.add("warning"),A=!1):(Ce.textContent=`${An} chars selected`,Ce.style.color="var(--ai-toolbar-text-muted)",Ce.classList.remove("warning"))}else N=null,_="",O=!1,ee.value="",Ce.textContent="Select text to use AI",Ce.style.color="var(--ai-toolbar-text-muted)",Ce.classList.remove("warning"),ne.style.display="none";c.isProcessing?(te.style.display="flex",R.style.display="none",U.style.display="none",he.style.display="none",xe.style.display="none",Ce.style.display="none"):O?(te.style.display="none",R.style.display="flex",U.style.display="none",he.style.display="none",xe.style.display="none",Ce.style.display="none"):(te.style.display="none",R.style.display="none",U.style.display="flex",he.style.display="block",xe.style.display="block",Ce.style.display="block");const bt=!c.isProcessing&&O;p.classList.toggle("ai-toolbar-instruct-mode",bt),se.style.display=bt||c.isProcessing?"none":"flex";const Ot=A?"1":"0.5",Lt=A?"auto":"none";for(const An of ye.values())An.style.opacity=Ot,An.style.pointerEvents=Lt;for(const An of me.values())An.style.opacity=Ot,An.style.pointerEvents=Lt;J.style.opacity=Ot,J.style.pointerEvents=Lt}const kn=je=>{const bt=c.isProcessing;je.isProcessing!==void 0&&(c.isProcessing=je.isProcessing),je.isStreaming!==void 0&&(c.isStreaming=je.isStreaming),je.streamingContent!==void 0&&(c.streamingContent=je.streamingContent),je.streamingReasoning!==void 0&&(c.streamingReasoning=je.streamingReasoning),je.aiResult!==void 0&&(c.aiResult=je.aiResult),je.aiReasoning!==void 0&&(c.aiReasoning=je.aiReasoning),je.currentOperation!==void 0&&(c.currentOperation=je.currentOperation),je.error!==void 0&&(c.error=je.error),bt!==c.isProcessing&&vt(),kt()};vt(),my.set(n,kn);const rn={dom:o,top:!0,update:vt,updateState:vt,updateAIState:kn,updateSampler:je=>{h=je,vt()}};return o.__panel=rn,rn}function I_(n){return hi.fromClass(class{constructor(e){}update(e){e.selectionSet&&my.get(e.view)}})}function P_(n,e,t,r,a){return[sd.of(s=>z_(s,n,e,t,r,a)),I_()]}const C0=dn.define(),H_=Ai.define({create(){return vn.none},update(n,e){let t=n.map(e.changes);for(const r of e.effects){if(!r.is(C0))continue;const a=r.value;!a||a.from>=a.to?t=vn.none:t=vn.set([vn.mark({class:"cm-ai-accepted-highlight"}).range(a.from,a.to)])}return t},provide:n=>rt.decorations.from(n)});function gy(n){const{key:e,value:t,onChange:r,onImmediateChange:a,onPersistChange:s,saveMode:o="immediate",saveDebounceMs:c=250,setSelectedText:h,aiConfig:d,samplerSettings:p,promptSettings:g,getContextContent:b,contextSectionIds:w,minHeight:A="100px",maxHeight:N,editorStyles:_={},isActive:O=!0}=n,H=q.useRef(null),R=q.useRef(null),ee=q.useRef(null),Z=q.useRef(null),[I,U]=q.useState(!1),[ye,fe]=q.useState(!1),[L,J]=q.useState(null),[ne,me]=q.useState(null),[he,se]=q.useState(""),[te,xe]=q.useState(""),[Ce,Ae]=q.useState(""),[D,Te]=q.useState(null),[Ee,P]=q.useState(null),Qe=q.useRef(null),ct=q.useRef(null),et=q.useRef(w),jt=q.useRef(null),ft=q.useRef(null),Qt=q.useRef(null),Fe=q.useRef(!1),Ye=q.useRef(!1),Pe=q.useRef(!1);q.useEffect(()=>{Qe.current=ne},[ne]),q.useEffect(()=>{ct.current=Ee},[Ee]),q.useEffect(()=>{et.current=w},[w]);const De=q.useRef(d);q.useEffect(()=>{De.current=d},[d]);const lt=q.useRef(a),tt=q.useRef(s??r),Tt=q.useRef(o),kt=q.useRef(c);q.useEffect(()=>{lt.current=a},[a]),q.useEffect(()=>{tt.current=s??r},[s,r]),q.useEffect(()=>{Tt.current=o},[o]),q.useEffect(()=>{kt.current=c},[c]);const vt=q.useCallback(re=>{const ve=tt.current;ve&&Promise.resolve(ve(re))},[]),kn=q.useCallback(()=>{ft.current!==null&&(window.clearTimeout(ft.current),ft.current=null);const re=Qt.current;re!==null&&(Qt.current=null,vt(re))},[vt]),rn=q.useCallback(re=>{if(tt.current){if(Tt.current==="immediate"){Qt.current=null,ft.current!==null&&(window.clearTimeout(ft.current),ft.current=null),vt(re);return}Qt.current=re,ft.current!==null&&window.clearTimeout(ft.current),ft.current=window.setTimeout(()=>{ft.current=null;const ve=Qt.current;ve!==null&&(Qt.current=null,vt(ve))},kt.current)}},[vt]),je=q.useCallback(async(re,ve,Ve,Ze)=>{const at=De.current;Te(null),me(null),se(""),xe(""),Ae(""),J(re),U(!0),fe(at.enableStreaming),ee.current?.({isProcessing:!0,isStreaming:at.enableStreaming,streamingContent:"",streamingReasoning:"",aiResult:null,aiReasoning:"",currentOperation:re,error:null});const un={from:Ve.from,to:Ve.to,text:ve};ct.current=un,P(un),h(ve);try{console.log("[useAIEditor] Using model:",at.modelId,"Base URL:",at.baseUrl);const zt=new Mt(at,p,g);Z.current=zt;const It=b(et.current),Pt=at.enableStreaming?Re=>{Re.reasoning&&Ae(Gn=>{const pn=Gn+Re.reasoning;return ee.current?.({streamingReasoning:pn}),pn}),Re.content&&xe(Gn=>{const pn=Gn+Re.content;return ee.current?.({streamingContent:pn}),pn})}:void 0;let wt;switch(re){case"expand":wt=await zt.expandText(ve,It,void 0,Pt);break;case"rewrite":wt=await zt.rewriteText(ve,It,void 0,Pt);break;case"instruct":if(!Ze)throw new Error("No custom prompt provided");wt=await zt.instructText(ve,Ze,It,void 0,Pt);break;case"shorten":wt=await zt.shortenText(ve,It,void 0,Pt);break;case"lengthen":wt=await zt.lengthenText(ve,It,void 0,Pt);break;case"vivid":wt=await zt.makeVivid(ve,It,void 0,Pt);break;case"emotion":wt=await zt.addEmotion(ve,It,void 0,Pt);break;case"grammar":wt=await zt.fixGrammar(ve,It,void 0,Pt);break;default:throw new Error("Unknown operation")}Qe.current=wt.content,me(wt.content),se(wt.reasoning||""),U(!1),fe(!1),ee.current?.({isProcessing:!1,isStreaming:!1,aiResult:wt.content,aiReasoning:wt.reasoning||""})}catch(zt){if(zt instanceof Dn&&zt.message==="Request was cancelled")console.log("[useAIEditor] AI request cancelled by user"),U(!1),fe(!1),ee.current?.({isProcessing:!1,isStreaming:!1,streamingContent:"",streamingReasoning:"",aiResult:null,aiReasoning:"",currentOperation:null,error:null});else{console.error("AI operation failed:",zt);const It=zt instanceof Dn?zt.message:"AI operation failed. Please try again.";Te(It),U(!1),fe(!1),ee.current?.({isProcessing:!1,isStreaming:!1,error:It})}}finally{Z.current=null}},[d,p,g,b,h]),bt=q.useCallback(()=>{const re=Qe.current,ve=ct.current,Ve=R.current;if(!Ve||!re||!ve)return;const Ze=ve.from,at=Ze+re.length;Ve.dispatch({changes:{from:Ze,to:ve.to,insert:re},selection:{anchor:Ze,head:at},effects:C0.of({from:Ze,to:at})}),jt.current!==null&&window.clearTimeout(jt.current),jt.current=window.setTimeout(()=>{const un=R.current;un&&(un.dispatch({effects:C0.of(null)}),jt.current=null)},4e3),me(null),se(""),xe(""),Ae(""),J(null),Te(null),P(null),h(""),ee.current?.({isProcessing:!1,isStreaming:!1,streamingContent:"",streamingReasoning:"",aiResult:null,aiReasoning:"",currentOperation:null,error:null})},[h]),Ot=q.useCallback(()=>{me(null),se(""),xe(""),Ae(""),J(null),Te(null),U(!1),fe(!1),P(null),h(""),ee.current?.({isProcessing:!1,isStreaming:!1,streamingContent:"",streamingReasoning:"",aiResult:null,aiReasoning:"",currentOperation:null,error:null})},[h]),Lt=q.useCallback(()=>{Z.current&&Z.current.abort()},[]),An=q.useCallback(re=>{const ve=R.current;if(!ve)return;const Ve=ve.state.doc.toString();re!==Ve&&ve.dispatch({changes:{from:0,to:Ve.length,insert:re}})},[]);return q.useEffect(()=>{if(!H.current||!O)return;const re=Kt.create({doc:t,extensions:[ld.of(W5),ld.of(n5),Y3(),o_,GM(),rt.lineWrapping,rt.contentAttributes.of({spellcheck:"true"}),rt.theme({"&":{fontSize:"clamp(14px, 2.6vw, 16px)",height:"100%",overflow:"hidden",..._},".cm-scroller":{height:N?"auto":"100%",maxHeight:N??"100%",overflowY:"auto",overflowX:"hidden",overscrollBehaviorY:"contain",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},".cm-content":{fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",padding:"clamp(8px, 2vw, 12px)",minHeight:A},".cm-gutters":{backgroundColor:"transparent",border:"none"},".cm-activeLineGutter":{backgroundColor:"transparent"},".cm-line":{padding:"0 clamp(2px, 0.8vw, 4px)"}}),rt.baseTheme({".cm-ai-accepted-highlight":{backgroundColor:"rgba(22, 163, 74, 0.28)",outline:"1px solid rgba(22, 163, 74, 0.5)",borderRadius:"2px"}}),H_,rt.updateListener.of(Ve=>{if(Ve.docChanged){const at=Ve.state.doc.toString();Fe.current||(Pe.current=!0),lt.current?.(at),Fe.current||rn(at)}Ve.focusChanged&&(Ye.current=Ve.view.hasFocus,Ye.current||kn());const Ze=Ve.state.selection.main;if(Ze.from!==Ze.to){const at=Ve.state.doc.sliceString(Ze.from,Ze.to);P({from:Ze.from,to:Ze.to,text:at}),h(at)}else P(null),h("")}),P_(p,(Ve,Ze,at,un)=>{je(Ve,Ze,at,un)},bt,Ot,Lt),j_(),O_()]}),ve=new rt({state:re,parent:H.current});return R.current=ve,setTimeout(()=>{ve.focus()},50),setTimeout(()=>{const Ve=L_(ve);Ve&&(ee.current=Ve)},100),()=>{jt.current!==null&&(window.clearTimeout(jt.current),jt.current=null),kn(),ft.current!==null&&(window.clearTimeout(ft.current),ft.current=null),ve.destroy(),R.current=null,ee.current=null}},[e,O,A,N,JSON.stringify(_),kn,rn]),q.useEffect(()=>{const re=R.current;if(!re)return;const ve=re.state.doc.toString();if(t===ve){Pe.current=!1;return}if(Ye.current&&Pe.current)return;const Ve=re.state.selection.main,Ze=Math.min(Ve.anchor,t.length),at=Math.min(Ve.head,t.length);Fe.current=!0,re.dispatch({changes:{from:0,to:ve.length,insert:t},selection:{anchor:Ze,head:at}}),Fe.current=!1,Pe.current=!1},[t]),q.useEffect(()=>{const re=R.current;if(!re)return;const ve=re.dom.querySelector(".ai-toolbar-panel");ve?.__panel?.updateSampler&&ve.__panel.updateSampler(p)},[p]),{editorRef:H,view:R.current,selection:Ee,isProcessing:I,isStreaming:ye,currentOperation:L,aiResult:ne,accept:bt,reject:Ot,setContent:An}}function q_({greeting:n,index:e,isOpen:t,onToggle:r,onImmediateUpdate:a,onPersistUpdate:s,onDelete:o,aiConfig:c,samplerSettings:h,promptSettings:d,getContextContent:p,contextSectionIds:g,setSelectedText:b}){const{editorRef:w}=gy({value:n,onImmediateChange:a,onPersistChange:s,setSelectedText:b,aiConfig:c,samplerSettings:h,promptSettings:d,getContextContent:p,contextSectionIds:g,minHeight:"clamp(84px, 18vh, 140px)",maxHeight:"clamp(180px, 36vh, 300px)",isActive:t});return k.jsxs("div",{className:"border border-vault-200 dark:border-vault-700 rounded-lg overflow-hidden bg-white dark:bg-vault-800",children:[k.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-vault-50 dark:bg-vault-700/50 border-b border-vault-200 dark:border-vault-700",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("span",{className:"text-sm font-medium text-vault-700 dark:text-vault-300",children:["Greeting ",e+1]}),k.jsxs("span",{className:"text-xs text-vault-500 dark:text-vault-400",children:["(",n.length," chars)"]})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("button",{onClick:r,className:"p-1 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-700 rounded transition-colors",title:t?"Collapse":"Expand",children:t?k.jsx(Io,{className:"w-4 h-4"}):k.jsx(El,{className:"w-4 h-4"})}),k.jsx("button",{onClick:o,className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete greeting",children:k.jsx(Nl,{className:"w-4 h-4"})})]})]}),t&&k.jsx("div",{ref:w,className:"min-h-[clamp(84px,18vh,140px)]"}),!t&&k.jsx("div",{className:"px-4 py-3 text-sm text-vault-600 dark:text-vault-400 italic truncate",children:n||k.jsx("span",{className:"text-vault-400",children:"Empty greeting"})})]})}function U_({greetings:n,onChange:e,setSelectedText:t,contextSectionIds:r,aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c}){const[h,d]=q.useState(n),[p,g]=q.useState(new Set([0]));q.useEffect(()=>{const H=setTimeout(()=>{d(n)},0);return()=>clearTimeout(H)},[n]);const b=q.useCallback((H,R)=>{const ee=[...h];return ee[H]=R,ee},[h]),w=q.useCallback((H,R)=>{d(b(H,R))},[b]),A=q.useCallback((H,R)=>{e(b(H,R))},[b,e]),N=q.useCallback(()=>{const H=[...h,""],R=new Set(p);R.add(H.length-1),d(H),g(R),e(H)},[h,p,e]),_=q.useCallback(H=>{if(!window.confirm(`Delete greeting ${H+1}?`))return;const ee=h.filter((U,ye)=>ye!==H),Z=new Set(p);Z.delete(H);const I=new Set;Z.forEach(U=>{U>H?I.add(U-1):I.add(U)}),d(ee),g(I),e(ee)},[h,p,e]),O=q.useCallback(H=>{const R=new Set(p);R.has(H)?R.delete(H):R.add(H),g(R)},[p]);return k.jsxs("div",{className:"h-full flex flex-col min-h-0 overflow-hidden",children:[k.jsxs("div",{className:"mb-4 flex items-center justify-between shrink-0",children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-xl font-bold text-vault-900 dark:text-vault-50",children:"Greetings"}),k.jsxs("p",{className:"text-sm text-vault-500 dark:text-vault-400",children:["Alternate greetings for your character (",h.length," total)"]})]}),k.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-vault-600 hover:bg-vault-700 text-white text-sm rounded-lg transition-colors",children:[k.jsx(Wo,{className:"w-4 h-4"}),"Add Greeting"]})]}),k.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0",children:h.length===0?k.jsxs("div",{className:"text-center py-12 text-vault-400 dark:text-vault-500",children:[k.jsx("p",{className:"text-sm",children:"No alternate greetings yet"}),k.jsx("p",{className:"text-xs mt-1",children:'Click "Add Greeting" to create one'})]}):h.map((H,R)=>k.jsx(q_,{greeting:H,index:R,isOpen:p.has(R),onToggle:()=>O(R),onImmediateUpdate:ee=>w(R,ee),onPersistUpdate:ee=>A(R,ee),onDelete:()=>_(R),aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c,contextSectionIds:r,setSelectedText:t},R))})]})}const F_=[{value:"before_char",label:"Before Character"},{value:"after_char",label:"After Character"},{value:"before_example",label:"Before Example"},{value:"after_example",label:"After Example"}];function V_({entry:n,index:e,isOpen:t,onToggle:r,onUpdate:a,onDelete:s,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,contextSectionIds:p,setSelectedText:g}){const{editorRef:b}=gy({value:n.content,onChange:L=>a({...n,content:L}),setSelectedText:g,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,contextSectionIds:p,minHeight:"clamp(110px, 22vh, 180px)",maxHeight:"clamp(220px, 40vh, 360px)",isActive:t}),[w,A]=Zi.useState(n.keys.join(", "));Zi.useEffect(()=>{const L=n.keys.join(", ");A(J=>J!==L?L:J)},[n.keys]);const N=L=>a({...n,name:L}),_=L=>{A(L)},O=()=>{const L=w.split(",").map(J=>J.trim()).filter(J=>J);a({...n,keys:L})},H=L=>a({...n,comment:L}),R=L=>{const J=parseInt(L,10);a({...n,priority:isNaN(J)?0:J})},ee=L=>a({...n,position:L}),Z=L=>a({...n,enabled:L}),I=L=>a({...n,case_sensitive:L}),U=L=>a({...n,constant:L}),ye=n.keys.join(", ")||"No keys",fe=n.enabled?"Enabled":"Disabled";return k.jsxs("div",{className:"border border-vault-200 dark:border-vault-700 rounded-xl overflow-hidden bg-white dark:bg-vault-800 shadow-sm",children:[k.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-vault-50 dark:bg-vault-700/50 border-b border-vault-200 dark:border-vault-700",children:[k.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[k.jsxs("span",{className:"text-xs font-mono text-vault-400 dark:text-vault-500 shrink-0",children:["(UID: ",n.id,")"]}),k.jsx("span",{className:"text-sm font-medium text-vault-700 dark:text-vault-300 truncate",children:n.name||`Entry ${e+1}`}),k.jsxs("span",{className:"text-xs text-vault-500 dark:text-vault-400 shrink-0",children:["(",n.keys.length," keys)"]}),k.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full shrink-0 ${n.enabled?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:fe})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("button",{onClick:r,className:"p-1.5 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-700 rounded-lg transition-colors",title:t?"Collapse":"Expand",children:t?k.jsx(Io,{className:"w-4 h-4"}):k.jsx(El,{className:"w-4 h-4"})}),k.jsx("button",{onClick:s,className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete entry",children:k.jsx(Nl,{className:"w-4 h-4"})})]})]}),t&&k.jsxs("div",{className:"p-4 space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:"Entry Name"}),k.jsx("input",{type:"text",value:n.name||"",onChange:L=>N(L.target.value),placeholder:"Entry display name (optional)",className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                text-vault-900 dark:text-vault-100 placeholder:text-vault-400\r
                focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:["Trigger Keys ",k.jsx("span",{className:"text-vault-400",children:"(comma-separated)"})]}),k.jsx("input",{type:"text",value:w,onChange:L=>_(L.target.value),onBlur:O,placeholder:"castle, fortress, stronghold",className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                text-vault-900 dark:text-vault-100 placeholder:text-vault-400\r
                focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]}),k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:"Priority"}),k.jsx("input",{type:"number",value:n.priority??0,onChange:L=>R(L.target.value),className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                  text-vault-900 dark:text-vault-100\r
                  focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:"Position"}),k.jsx("select",{value:n.position||"before_char",onChange:L=>ee(L.target.value),className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                  text-vault-900 dark:text-vault-100\r
                  focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`,children:F_.map(L=>k.jsx("option",{value:L.value,children:L.label},L.value))})]}),k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"checkbox",checked:n.enabled,onChange:L=>Z(L.target.checked),className:"w-4 h-4 rounded border-vault-300 text-vault-600 focus:ring-vault-500"}),k.jsx("span",{className:"text-xs text-vault-600 dark:text-vault-400",children:"Enabled"})]}),k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"checkbox",checked:n.case_sensitive,onChange:L=>I(L.target.checked),className:"w-4 h-4 rounded border-vault-300 text-vault-600 focus:ring-vault-500"}),k.jsx("span",{className:"text-xs text-vault-600 dark:text-vault-400",children:"Case Sensitive"})]})]}),k.jsx("div",{className:"flex flex-col gap-2",children:k.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[k.jsx("input",{type:"checkbox",checked:n.constant??!1,onChange:L=>U(L.target.checked),className:"w-4 h-4 rounded border-vault-300 text-vault-600 focus:ring-vault-500"}),k.jsx("span",{className:"text-xs text-vault-600 dark:text-vault-400",children:"Constant"})]})})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:["Content ",k.jsx("span",{className:"text-vault-400",children:"(AI toolbar available when text is selected)"})]}),k.jsx("div",{ref:b,className:"border border-vault-200 dark:border-vault-700 rounded-xl overflow-hidden min-h-[clamp(110px,22vh,180px)]"})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:["Comment ",k.jsx("span",{className:"text-vault-400",children:"(internal notes, not included in output)"})]}),k.jsx("input",{type:"text",value:n.comment||"",onChange:L=>H(L.target.value),placeholder:"Internal notes about this entry",className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                text-vault-900 dark:text-vault-100 placeholder:text-vault-400\r
                focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]})]}),!t&&k.jsxs("div",{className:"px-4 py-3 bg-vault-50/50 dark:bg-vault-800/50",children:[k.jsxs("div",{className:"text-xs text-vault-600 dark:text-vault-400 mb-1",children:[k.jsx("strong",{children:"Keys:"})," ",ye]}),k.jsx("div",{className:"text-xs text-vault-500 dark:text-vault-500 truncate",children:n.content||k.jsx("span",{className:"italic",children:"No content"})})]})]})}function K_({lorebook:n,onChange:e,setSelectedText:t,contextSectionIds:r,aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c,activeSection:h}){return k.jsx(G_,{lorebook:n,onChange:e,setSelectedText:t,contextSectionIds:r,aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c,activeSection:h})}function G_({lorebook:n,onChange:e,setSelectedText:t,contextSectionIds:r,aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c}){const[h,d]=q.useState(new Set([0])),p=q.useRef(null),g=q.useRef(new Map),b=q.useMemo(()=>({name:n?.name||"",description:n?.description||"",entries:n?.entries||[],extensions:n?.extensions||{}}),[n]),[w,A]=q.useState(()=>({name:n?.name||"",description:n?.description||"",entries:n?.entries||[],extensions:n?.extensions||{}}));q.useEffect(()=>{const L=setTimeout(()=>{A(b)},0);return()=>clearTimeout(L)},[b]);const N=q.useMemo(()=>w.entries,[w.entries]),_=w.name??"",O=w.description??"",H=q.useCallback((L,J,ne)=>{const me={name:J,description:ne,entries:L,extensions:w.extensions||{}};A(me),e(me)},[w.extensions,e]),R=q.useCallback((L,J)=>{const ne=[...N];ne[L]=J,H(ne,_,O)},[N,_,O,H]),ee=q.useCallback(()=>{const L=new Set(N.map(ne=>ne.id));let J=0;for(;L.has(J);)J++;return J},[N]),Z=q.useCallback(()=>{const L=ee(),J={id:L,keys:[],content:"",extensions:{},enabled:!0,insertion_order:N.length,case_sensitive:!1,name:"",priority:0,position:"before_char"},ne=[...N,J],me=ne.length-1;p.current=L,d(he=>new Set([...he,me])),H(ne,_,O)},[N,_,O,H,ee]);q.useEffect(()=>{const L=p.current;if(L==null)return;const J=()=>{const me=g.current.get(L);return me?(me.scrollIntoView({behavior:"smooth",block:"start"}),p.current=null,!0):!1};if(J())return;const ne=window.requestAnimationFrame(()=>{J()});return()=>{window.cancelAnimationFrame(ne)}},[N.length,h]);const I=q.useCallback(L=>{if(!window.confirm(`Delete lorebook entry ${L+1}?`))return;const ne=N.filter((he,se)=>se!==L),me=new Set;h.forEach(he=>{he<L?me.add(he):he>L&&me.add(he-1)}),d(me),H(ne,_,O)},[N,h,_,O,H]),U=q.useCallback(L=>{const J=new Set(h);J.has(L)?J.delete(L):J.add(L),d(J)},[h]),ye=L=>{H(N,L,O)},fe=L=>{H(N,_,L)};return k.jsxs("div",{className:"h-full flex flex-col min-h-0 overflow-hidden",children:[k.jsxs("div",{className:"mb-4 flex items-center justify-between shrink-0",children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-xl font-bold text-vault-900 dark:text-vault-50",children:"Lorebook"}),k.jsxs("p",{className:"text-sm text-vault-500 dark:text-vault-400",children:[N.length," entr",N.length===1?"y":"ies"," total"]})]}),k.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-vault-600 hover:bg-vault-700 text-white text-sm rounded-lg transition-colors",children:[k.jsx(Wo,{className:"w-4 h-4"}),"Add Entry"]})]}),k.jsxs("div",{className:"mb-4 p-4 bg-vault-50 dark:bg-vault-800/50 border border-vault-200 dark:border-vault-700 rounded-xl shrink-0",children:[k.jsx("h3",{className:"text-sm font-semibold text-vault-700 dark:text-vault-300 mb-3",children:"Book Settings"}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:"Book Name"}),k.jsx("input",{type:"text",value:_,onChange:L=>ye(L.target.value),placeholder:"Character Lorebook",className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                text-vault-900 dark:text-vault-100 placeholder:text-vault-400\r
                focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-xs font-medium text-vault-600 dark:text-vault-400 mb-1.5",children:"Description"}),k.jsx("input",{type:"text",value:O,onChange:L=>fe(L.target.value),placeholder:"Brief description of this lorebook",className:`w-full px-3 py-2 text-sm bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-700 rounded-lg\r
                text-vault-900 dark:text-vault-100 placeholder:text-vault-400\r
                focus:outline-none focus:ring-2 focus:ring-vault-500 focus:border-transparent`})]})]})]}),k.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0",children:N.length===0?k.jsxs("div",{className:"text-center py-12 text-vault-400 dark:text-vault-500",children:[k.jsx(I0,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),k.jsx("p",{className:"text-sm",children:"No lore entries yet"}),k.jsx("p",{className:"text-xs mt-1",children:'Click "Add Entry" to create your first lore entry'})]}):N.map((L,J)=>k.jsx("div",{ref:ne=>{ne?g.current.set(L.id,ne):g.current.delete(L.id)},children:k.jsx(V_,{entry:L,index:J,isOpen:h.has(J),onToggle:()=>U(J),onUpdate:ne=>R(J,ne),onDelete:()=>I(J),aiConfig:a,samplerSettings:s,promptSettings:o,getContextContent:c,contextSectionIds:r,setSelectedText:t})},L.id))}),k.jsx("div",{className:"mt-4 p-3 bg-vault-50 dark:bg-vault-800/50 border border-vault-200 dark:border-vault-700 rounded-lg shrink-0",children:k.jsxs("p",{className:"text-xs text-vault-600 dark:text-vault-400",children:[k.jsx("strong",{children:"Note:"})," This editor provides essential lore management. For advanced logic or complex world-building features, power users may prefer using dedicated tools like SillyTavern's World Info."]})})]})}function Y_(n,e){const t=n.data.spec;switch(e){case"name":return String(t.name||"");case"description":return String(t.description||"");case"personality":return String(t.personality||"");case"scenario":return String(t.scenario||"");case"first_mes":return String(t.first_mes||"");case"mes_example":return String(t.mes_example||"");case"system_prompt":return String(t.system_prompt||"");case"post_history_instructions":return String(t.post_history_instructions||"");case"alternate_greetings":return Array.isArray(t.alternate_greetings)?t.alternate_greetings.join(`
---
`):"";case"physical_description":return String(t.physical_description||"");case"extensions":return JSON.stringify(n.data.extensions||{},null,2);case"avatar":return String(t.avatar||"");case"creator_notes":return String(t.creator_notes||"");case"creator":return String(t.creator||"");case"character_version":return String(t.character_version||"");case"tags":return Array.isArray(t.tags)?t.tags.join(", "):"";default:return""}}function Q_({section:n}){const{currentCharacter:e,updateCharacter:t,updateSpecField:r,setSelectedText:a,contextSectionIds:s,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,activeSection:p}=Cd(),g=Zi.useMemo(()=>e?Y_(e,n):"",[e,n]),b=q.useCallback(N=>{n==="image"||n==="extensions"||n==="lorebook"||(n==="alternate_greetings"?r(n,N.split(`
---
`).filter(_=>_.trim())):n==="tags"?r(n,N.split(",").map(_=>_.trim()).filter(_=>_)):r(n,N))},[n,r]),{editorRef:w}=gy({key:n,value:g,onPersistChange:b,setSelectedText:a,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,contextSectionIds:s,minHeight:"clamp(180px, 40vh, 400px)",editorStyles:{padding:"clamp(8px, 2vw, 16px)"},isActive:n!=="image"&&n!=="alternate_greetings"&&n!=="lorebook"&&!!e});if(!e)return k.jsx("div",{children:"No character selected"});const A=_o.find(N=>N.id===n);return n==="image"?k.jsx("div",{className:"h-full flex items-center justify-center text-vault-500 animate-fade-in-slow",children:k.jsx("p",{children:"Use the Image section in the left sidebar to upload a character image."})}):n==="extensions"?k.jsxs("div",{className:"h-full flex flex-col min-h-0 overflow-hidden animate-fade-in-slow",children:[k.jsxs("div",{className:"mb-4 shrink-0",children:[k.jsx("h2",{className:"text-xl font-bold text-vault-900 dark:text-vault-50",children:A?.label}),k.jsx("p",{className:"text-sm text-vault-500 dark:text-vault-400",children:"Extension data (JSON format)"})]}),k.jsx("div",{ref:w,className:"flex-1 min-h-0 border border-vault-200 dark:border-vault-700 rounded-xl overflow-hidden"})]}):n==="alternate_greetings"?k.jsx("div",{className:"h-full animate-fade-in-slow",children:k.jsx(U_,{greetings:e?.data?.spec?.alternate_greetings||[],onChange:N=>{r(n,N)},selectedText:"",setSelectedText:a,contextSectionIds:s,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,activeSection:p})}):n==="lorebook"?k.jsx("div",{className:"h-full animate-fade-in-slow",children:k.jsx(K_,{lorebook:e?.data?.characterBook,onChange:N=>{t({data:{...e.data,characterBook:N}})},setSelectedText:a,contextSectionIds:s,aiConfig:o,samplerSettings:c,promptSettings:h,getContextContent:d,activeSection:p})}):k.jsxs("div",{className:"h-full flex flex-col min-h-0 overflow-hidden animate-fade-in-slow",children:[k.jsxs("div",{className:"mb-4 shrink-0",children:[k.jsx("h2",{className:"text-xl font-bold text-vault-900 dark:text-vault-50",children:A?.label}),k.jsx("p",{className:"text-sm text-vault-500 dark:text-vault-400",children:A?.description})]}),k.jsx("div",{ref:w,className:"flex-1 min-h-0 border border-vault-200 dark:border-vault-700 rounded-xl overflow-hidden"})]})}function X_({onClose:n,isMobile:e=!1}){const{currentCharacter:t,contextSectionIds:r,setContextSectionIds:a,addContextSection:s,removeContextSection:o,samplerSettings:c}=Cd(),[h,d]=q.useState(""),[p,g]=q.useState(!0),[b,w]=q.useState(!0),A=c.contextLength,N=_o.filter(R=>{if(["image","extensions","avatar","character_version","tags"].includes(R.id)||r.includes(R.id)||R.id==="lorebook"&&!(t?.data.characterBook&&t.data.characterBook.entries.length>0))return!1;if(!h.trim())return!0;const Z=h.toLowerCase();return R.label.toLowerCase().includes(Z)||R.description.toLowerCase().includes(Z)}),_=_o.filter(R=>r.includes(R.id)),O=q.useCallback(()=>{if(!t)return 0;let R=0;return r.forEach(ee=>{const Z=t.data.spec;switch(ee){case"name":R+=Z.name.length;break;case"description":R+=Z.description.length;break;case"personality":R+=Z.personality.length;break;case"scenario":R+=Z.scenario.length;break;case"first_mes":R+=Z.first_mes.length;break;case"mes_example":R+=Z.mes_example.length;break;case"system_prompt":R+=Z.system_prompt.length;break;case"post_history_instructions":R+=Z.post_history_instructions.length;break;case"alternate_greetings":R+=Z.alternate_greetings.join(`
---
`).length;break;case"physical_description":R+=Z.physical_description.length;break;case"creator":R+=Z.creator?.length||0;break;case"creator_notes":R+=Z.creator_notes?.length||0;break;case"lorebook":{const I=t.data.characterBook;I&&(R+=I.name?.length||0,R+=I.description?.length||0,I.entries.forEach(U=>{U.enabled&&(R+=U.content.length,R+=U.keys.join(",").length,R+=U.name?.length||0,R+=U.comment?.length||0)}));break}}}),Math.ceil(R/4)},[t,r]),H=Zi.useMemo(()=>{const R=O(),ee=Math.min(100,R/A*100);let Z="good";return ee>80?Z="danger":ee>50&&(Z="warning"),{tokenCount:R,percentage:ee,status:Z}},[O,A]);return t?k.jsxs("div",{className:"h-full flex flex-col bg-vault-50 dark:bg-vault-900 border-r border-vault-200 dark:border-vault-800 animate-fade-in-slow",children:[k.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-vault-200 dark:border-vault-800 bg-vault-100 dark:bg-vault-800/50 shrink-0",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Ra,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("h2",{className:"font-semibold text-vault-900 dark:text-vault-100",children:"AI Context"})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("button",{onClick:()=>a([]),className:"p-1.5 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-800 rounded-lg transition-colors disabled:opacity-50",title:"Clear all context",disabled:r.length===0,children:k.jsx(cw,{className:"w-4 h-4"})}),e&&n&&k.jsx("button",{onClick:n,className:"p-1.5 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-800 rounded-lg transition-colors",title:"Close Context Panel",children:k.jsx(bs,{className:"w-4 h-4"})})]})]}),k.jsxs("div",{className:"border-b border-vault-200 dark:border-vault-800 shrink-0",children:[k.jsxs("button",{onClick:()=>g(!p),className:"w-full flex items-center justify-between px-4 py-2.5 hover:bg-vault-100 dark:hover:bg-vault-800/50 transition-colors",children:[k.jsxs("h3",{className:"text-xs font-medium text-vault-500 dark:text-vault-400 uppercase tracking-wide",children:["Selected Context (",_.length,")"]}),p?k.jsx(Io,{className:"w-4 h-4 text-vault-400"}):k.jsx(El,{className:"w-4 h-4 text-vault-400"})]}),p&&k.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[_.length>0&&k.jsxs("div",{className:"p-3 bg-white dark:bg-vault-800 rounded-lg border border-vault-200 dark:border-vault-700",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{className:"text-xs text-vault-600 dark:text-vault-400",children:"Context Usage"}),k.jsxs("span",{className:`text-xs font-medium ${H.status==="good"?"text-green-600 dark:text-green-400":H.status==="warning"?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[H.percentage.toFixed(0),"%"]})]}),k.jsx("div",{className:"h-2 bg-vault-200 dark:bg-vault-700 rounded-full overflow-hidden mb-2",children:k.jsx("div",{className:`h-full transition-all duration-300 ${H.status==="good"?"bg-green-500":H.status==="warning"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${H.percentage}%`}})}),k.jsxs("div",{className:"flex items-center justify-between text-xs",children:[k.jsxs("span",{className:"text-vault-500 dark:text-vault-400",children:[H.tokenCount.toLocaleString()," / ",A.toLocaleString()," tokens"]}),H.status==="danger"&&k.jsxs("span",{className:"flex items-center gap-1 text-red-600 dark:text-red-400",children:[k.jsx(Da,{className:"w-3 h-3"}),"Over limit"]})]})]}),k.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:k.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700 dark:text-blue-400",children:[k.jsx(fT,{className:"w-4 h-4 shrink-0"}),k.jsx("span",{children:"Current section is automatically included"})]})}),_.length===0?k.jsxs("div",{className:"text-center py-4 text-vault-400 dark:text-vault-500",children:[k.jsx(Yf,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),k.jsx("p",{className:"text-sm",children:"No context selected"}),k.jsx("p",{className:"text-xs mt-1",children:"Add sections to provide context for AI"})]}):k.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:_.map(R=>k.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-white dark:bg-vault-800 border-vault-200 dark:border-vault-700",children:[k.jsx("span",{className:"text-sm font-medium text-vault-900 dark:text-vault-100",children:R.label}),k.jsx("button",{onClick:()=>o(R.id),className:"p-1.5 text-vault-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors ml-2",title:"Remove from context",children:k.jsx(Nl,{className:"w-3.5 h-3.5"})})]},R.id))})]})]}),k.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[k.jsxs("button",{onClick:()=>w(!b),className:"w-full flex items-center justify-between px-4 py-2.5 border-b border-vault-200 dark:border-vault-800 hover:bg-vault-100 dark:hover:bg-vault-800/50 transition-colors shrink-0",children:[k.jsx("h3",{className:"text-xs font-medium text-vault-500 dark:text-vault-400 uppercase tracking-wide",children:"Add Context"}),b?k.jsx(Io,{className:"w-4 h-4 text-vault-400"}):k.jsx(El,{className:"w-4 h-4 text-vault-400"})]}),b&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"p-4 border-b border-vault-200 dark:border-vault-800 shrink-0",children:k.jsxs("div",{className:"relative",children:[k.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-vault-400"}),k.jsx("input",{type:"text",value:h,onChange:R=>d(R.target.value),placeholder:"Search sections...",className:"w-full pl-9 pr-4 py-2 text-sm border border-vault-300 dark:border-vault-700 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 placeholder-vault-400 focus:outline-none focus:ring-2 focus:ring-vault-500"})]})}),k.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:N.length===0?k.jsx("div",{className:"text-center py-8 text-vault-400 dark:text-vault-500",children:k.jsx("p",{className:"text-sm",children:h.trim()?"No matching sections found":"All sections are in context"})}):k.jsx("div",{className:"space-y-2",children:N.map(R=>k.jsx("button",{onClick:()=>{s(R.id),d("")},className:"w-full text-left p-3 bg-white dark:bg-vault-800 hover:bg-vault-100 dark:hover:bg-vault-700 border border-vault-200 dark:border-vault-700 rounded-lg transition-colors group",children:k.jsxs("div",{className:"flex items-start justify-between gap-2",children:[k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("p",{className:"text-sm font-medium text-vault-900 dark:text-vault-100 truncate group-hover:text-vault-600 dark:group-hover:text-vault-400",children:R.label}),k.jsx("p",{className:"text-xs text-vault-500 mt-1",children:R.description})]}),k.jsx(Wo,{className:"w-4 h-4 text-vault-400 group-hover:text-vault-600 dark:group-hover:text-vault-400 shrink-0 mt-0.5"})]})},R.id))})})]})]})]}):k.jsx(k.Fragment,{})}function $_(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const W_=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Z_=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,J_={};function hk(n,e){return(J_.jsx?Z_:W_).test(n)}const eD=/[ \t\n\f\r]/g;function tD(n){return typeof n=="object"?n.type==="text"?fk(n.value):!1:fk(n)}function fk(n){return n.replace(eD,"")===""}class $c{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}$c.prototype.normal={};$c.prototype.property={};$c.prototype.space=void 0;function R2(n,e){const t={},r={};for(const a of n)Object.assign(t,a.property),Object.assign(r,a.normal);return new $c(t,r,e)}function A0(n){return n.toLowerCase()}class jr{constructor(e,t){this.attribute=t,this.property=e}}jr.prototype.attribute="";jr.prototype.booleanish=!1;jr.prototype.boolean=!1;jr.prototype.commaOrSpaceSeparated=!1;jr.prototype.commaSeparated=!1;jr.prototype.defined=!1;jr.prototype.mustUseProperty=!1;jr.prototype.number=!1;jr.prototype.overloadedBoolean=!1;jr.prototype.property="";jr.prototype.spaceSeparated=!1;jr.prototype.space=void 0;let nD=0;const gt=Ts(),Hn=Ts(),T0=Ts(),Be=Ts(),hn=Ts(),zo=Ts(),Fr=Ts();function Ts(){return 2**++nD}const E0=Object.freeze(Object.defineProperty({__proto__:null,boolean:gt,booleanish:Hn,commaOrSpaceSeparated:Fr,commaSeparated:zo,number:Be,overloadedBoolean:T0,spaceSeparated:hn},Symbol.toStringTag,{value:"Module"})),cg=Object.keys(E0);class yy extends jr{constructor(e,t,r,a){let s=-1;if(super(e,t),dk(this,"space",a),typeof r=="number")for(;++s<cg.length;){const o=cg[s];dk(this,cg[s],(r&E0[o])===E0[o])}}}yy.prototype.defined=!0;function dk(n,e,t){t&&(n[e]=t)}function eu(n){const e={},t={};for(const[r,a]of Object.entries(n.properties)){const s=new yy(r,n.transform(n.attributes||{},r),a,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[A0(r)]=r,t[A0(s.attribute)]=r}return new $c(e,t,n.space)}const B2=eu({properties:{ariaActiveDescendant:null,ariaAtomic:Hn,ariaAutoComplete:null,ariaBusy:Hn,ariaChecked:Hn,ariaColCount:Be,ariaColIndex:Be,ariaColSpan:Be,ariaControls:hn,ariaCurrent:null,ariaDescribedBy:hn,ariaDetails:null,ariaDisabled:Hn,ariaDropEffect:hn,ariaErrorMessage:null,ariaExpanded:Hn,ariaFlowTo:hn,ariaGrabbed:Hn,ariaHasPopup:null,ariaHidden:Hn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hn,ariaLevel:Be,ariaLive:null,ariaModal:Hn,ariaMultiLine:Hn,ariaMultiSelectable:Hn,ariaOrientation:null,ariaOwns:hn,ariaPlaceholder:null,ariaPosInSet:Be,ariaPressed:Hn,ariaReadOnly:Hn,ariaRelevant:null,ariaRequired:Hn,ariaRoleDescription:hn,ariaRowCount:Be,ariaRowIndex:Be,ariaRowSpan:Be,ariaSelected:Hn,ariaSetSize:Be,ariaSort:null,ariaValueMax:Be,ariaValueMin:Be,ariaValueNow:Be,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function L2(n,e){return e in n?n[e]:e}function z2(n,e){return L2(n,e.toLowerCase())}const rD=eu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:zo,acceptCharset:hn,accessKey:hn,action:null,allow:null,allowFullScreen:gt,allowPaymentRequest:gt,allowUserMedia:gt,alt:null,as:null,async:gt,autoCapitalize:null,autoComplete:hn,autoFocus:gt,autoPlay:gt,blocking:hn,capture:null,charSet:null,checked:gt,cite:null,className:hn,cols:Be,colSpan:null,content:null,contentEditable:Hn,controls:gt,controlsList:hn,coords:Be|zo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gt,defer:gt,dir:null,dirName:null,disabled:gt,download:T0,draggable:Hn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gt,formTarget:null,headers:hn,height:Be,hidden:T0,high:Be,href:null,hrefLang:null,htmlFor:hn,httpEquiv:hn,id:null,imageSizes:null,imageSrcSet:null,inert:gt,inputMode:null,integrity:null,is:null,isMap:gt,itemId:null,itemProp:hn,itemRef:hn,itemScope:gt,itemType:hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gt,low:Be,manifest:null,max:null,maxLength:Be,media:null,method:null,min:null,minLength:Be,multiple:gt,muted:gt,name:null,nonce:null,noModule:gt,noValidate:gt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gt,optimum:Be,pattern:null,ping:hn,placeholder:null,playsInline:gt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gt,referrerPolicy:null,rel:hn,required:gt,reversed:gt,rows:Be,rowSpan:Be,sandbox:hn,scope:null,scoped:gt,seamless:gt,selected:gt,shadowRootClonable:gt,shadowRootDelegatesFocus:gt,shadowRootMode:null,shape:null,size:Be,sizes:null,slot:null,span:Be,spellCheck:Hn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Be,step:null,style:null,tabIndex:Be,target:null,title:null,translate:null,type:null,typeMustMatch:gt,useMap:null,value:Hn,width:Be,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hn,axis:null,background:null,bgColor:null,border:Be,borderColor:null,bottomMargin:Be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gt,declare:gt,event:null,face:null,frame:null,frameBorder:null,hSpace:Be,leftMargin:Be,link:null,longDesc:null,lowSrc:null,marginHeight:Be,marginWidth:Be,noResize:gt,noHref:gt,noShade:gt,noWrap:gt,object:null,profile:null,prompt:null,rev:null,rightMargin:Be,rules:null,scheme:null,scrolling:Hn,standby:null,summary:null,text:null,topMargin:Be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gt,disableRemotePlayback:gt,prefix:null,property:null,results:Be,security:null,unselectable:null},space:"html",transform:z2}),iD=eu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Fr,accentHeight:Be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Be,amplitude:Be,arabicForm:null,ascent:Be,attributeName:null,attributeType:null,azimuth:Be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Be,by:null,calcMode:null,capHeight:Be,className:hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Be,diffuseConstant:Be,direction:null,display:null,dur:null,divisor:Be,dominantBaseline:null,download:gt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Be,enableBackground:null,end:null,event:null,exponent:Be,externalResourcesRequired:null,fill:null,fillOpacity:Be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:zo,g2:zo,glyphName:zo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Be,horizOriginX:Be,horizOriginY:Be,id:null,ideographic:Be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Be,k:Be,k1:Be,k2:Be,k3:Be,k4:Be,kernelMatrix:Fr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Be,overlineThickness:Be,paintOrder:null,panose1:null,path:null,pathLength:Be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Be,pointsAtY:Be,pointsAtZ:Be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Fr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Fr,rev:Fr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Fr,requiredFeatures:Fr,requiredFonts:Fr,requiredFormats:Fr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Be,specularExponent:Be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Be,strikethroughThickness:Be,string:null,stroke:null,strokeDashArray:Fr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Be,strokeOpacity:Be,strokeWidth:null,style:null,surfaceScale:Be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Fr,tabIndex:Be,tableValues:null,target:null,targetX:Be,targetY:Be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Fr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Be,underlineThickness:Be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Be,values:null,vAlphabetic:Be,vMathematical:Be,vectorEffect:null,vHanging:Be,vIdeographic:Be,version:null,vertAdvY:Be,vertOriginX:Be,vertOriginY:Be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:L2}),I2=eu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),P2=eu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:z2}),H2=eu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),aD={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},lD=/[A-Z]/g,pk=/-[a-z]/g,sD=/^data[-\w.:]+$/i;function oD(n,e){const t=A0(e);let r=e,a=jr;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&sD.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(pk,cD);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!pk.test(s)){let o=s.replace(lD,uD);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}a=yy}return new a(r,e)}function uD(n){return"-"+n.toLowerCase()}function cD(n){return n.charAt(1).toUpperCase()}const hD=R2([B2,rD,I2,P2,H2],"html"),xy=R2([B2,iD,I2,P2,H2],"svg");function fD(n){return n.join(" ").trim()}var bo={},hg,mk;function dD(){if(mk)return hg;mk=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,d="/",p="*",g="",b="comment",w="declaration";function A(_,O){if(typeof _!="string")throw new TypeError("First argument must be a string");if(!_)return[];O=O||{};var H=1,R=1;function ee(he){var se=he.match(e);se&&(H+=se.length);var te=he.lastIndexOf(h);R=~te?he.length-te:R+he.length}function Z(){var he={line:H,column:R};return function(se){return se.position=new I(he),fe(),se}}function I(he){this.start=he,this.end={line:H,column:R},this.source=O.source}I.prototype.content=_;function U(he){var se=new Error(O.source+":"+H+":"+R+": "+he);if(se.reason=he,se.filename=O.source,se.line=H,se.column=R,se.source=_,!O.silent)throw se}function ye(he){var se=he.exec(_);if(se){var te=se[0];return ee(te),_=_.slice(te.length),se}}function fe(){ye(t)}function L(he){var se;for(he=he||[];se=J();)se!==!1&&he.push(se);return he}function J(){var he=Z();if(!(d!=_.charAt(0)||p!=_.charAt(1))){for(var se=2;g!=_.charAt(se)&&(p!=_.charAt(se)||d!=_.charAt(se+1));)++se;if(se+=2,g===_.charAt(se-1))return U("End of comment missing");var te=_.slice(2,se-2);return R+=2,ee(te),_=_.slice(se),R+=2,he({type:b,comment:te})}}function ne(){var he=Z(),se=ye(r);if(se){if(J(),!ye(a))return U("property missing ':'");var te=ye(s),xe=he({type:w,property:N(se[0].replace(n,g)),value:te?N(te[0].replace(n,g)):g});return ye(o),xe}}function me(){var he=[];L(he);for(var se;se=ne();)se!==!1&&(he.push(se),L(he));return he}return fe(),me()}function N(_){return _?_.replace(c,g):g}return hg=A,hg}var gk;function pD(){if(gk)return bo;gk=1;var n=bo&&bo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bo,"__esModule",{value:!0}),bo.default=t;const e=n(dD());function t(r,a){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),c=typeof a=="function";return o.forEach(h=>{if(h.type!=="declaration")return;const{property:d,value:p}=h;c?a(d,p,h):p&&(s=s||{},s[d]=p)}),s}return bo}var uc={},yk;function mD(){if(yk)return uc;yk=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(d){return!d||t.test(d)||n.test(d)},o=function(d,p){return p.toUpperCase()},c=function(d,p){return"".concat(p,"-")},h=function(d,p){return p===void 0&&(p={}),s(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(a,c):d=d.replace(r,c),d.replace(e,o))};return uc.camelCase=h,uc}var cc,xk;function gD(){if(xk)return cc;xk=1;var n=cc&&cc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},e=n(pD()),t=mD();function r(a,s){var o={};return!a||typeof a!="string"||(0,e.default)(a,function(c,h){c&&h&&(o[(0,t.camelCase)(c,s)]=h)}),o}return r.default=r,cc=r,cc}var yD=gD();const xD=Sd(yD),q2=U2("end"),vy=U2("start");function U2(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function vD(n){const e=vy(n),t=q2(n);if(e&&t)return{start:e,end:t}}function Ec(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?vk(n.position):"start"in n||"end"in n?vk(n):"line"in n||"column"in n?N0(n):""}function N0(n){return bk(n&&n.line)+":"+bk(n&&n.column)}function vk(n){return N0(n&&n.start)+"-"+N0(n&&n.end)}function bk(n){return n&&typeof n=="number"?n:1}class mr extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let a="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?a=e:!s.cause&&e&&(o=!0,a=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?s.ruleId=r:(s.source=r.slice(0,h),s.ruleId=r.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Ec(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}mr.prototype.file="";mr.prototype.name="";mr.prototype.reason="";mr.prototype.message="";mr.prototype.stack="";mr.prototype.column=void 0;mr.prototype.line=void 0;mr.prototype.ancestors=void 0;mr.prototype.cause=void 0;mr.prototype.fatal=void 0;mr.prototype.place=void 0;mr.prototype.ruleId=void 0;mr.prototype.source=void 0;const by={}.hasOwnProperty,bD=new Map,kD=/[A-Z]/g,wD=new Set(["table","tbody","thead","tfoot","tr"]),SD=new Set(["td","th"]),F2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function CD(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=jD(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=DD(t,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?xy:hD,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=V2(a,n,void 0);return s&&typeof s!="string"?s:a.create(n,a.Fragment,{children:s||void 0},void 0)}function V2(n,e,t){if(e.type==="element")return AD(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return TD(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return ND(n,e,t);if(e.type==="mdxjsEsm")return ED(n,e);if(e.type==="root")return MD(n,e,t);if(e.type==="text")return _D(n,e)}function AD(n,e,t){const r=n.schema;let a=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=xy,n.schema=a),n.ancestors.push(e);const s=G2(n,e.tagName,!1),o=OD(n,e);let c=wy(n,e);return wD.has(e.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!tD(h):!0})),K2(n,o,s,e),ky(o,c),n.ancestors.pop(),n.schema=r,n.create(e,s,o,t)}function TD(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}qc(n,e.position)}function ED(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);qc(n,e.position)}function ND(n,e,t){const r=n.schema;let a=r;e.name==="svg"&&r.space==="html"&&(a=xy,n.schema=a),n.ancestors.push(e);const s=e.name===null?n.Fragment:G2(n,e.name,!0),o=RD(n,e),c=wy(n,e);return K2(n,o,s,e),ky(o,c),n.ancestors.pop(),n.schema=r,n.create(e,s,o,t)}function MD(n,e,t){const r={};return ky(r,wy(n,e)),n.create(e,n.Fragment,r,t)}function _D(n,e){return e.value}function K2(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function ky(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function DD(n,e,t){return r;function r(a,s,o,c){const d=Array.isArray(o.children)?t:e;return c?d(s,o,c):d(s,o)}}function jD(n,e){return t;function t(r,a,s,o){const c=Array.isArray(s.children),h=vy(r);return e(a,s,o,c,{columnNumber:h?h.column-1:void 0,fileName:n,lineNumber:h?h.line:void 0},void 0)}}function OD(n,e){const t={};let r,a;for(a in e.properties)if(a!=="children"&&by.call(e.properties,a)){const s=BD(n,a,e.properties[a]);if(s){const[o,c]=s;n.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&SD.has(e.tagName)?r=c:t[o]=c}}if(r){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function RD(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const c=o.properties[0];c.type,Object.assign(t,n.evaluater.evaluateExpression(c.argument))}else qc(n,e.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const c=r.value.data.estree.body[0];c.type,s=n.evaluater.evaluateExpression(c.expression)}else qc(n,e.position);else s=r.value===null?!0:r.value;t[a]=s}return t}function wy(n,e){const t=[];let r=-1;const a=n.passKeys?new Map:bD;for(;++r<e.children.length;){const s=e.children[r];let o;if(n.passKeys){const h=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(h){const d=a.get(h)||0;o=h+"-"+d,a.set(h,d+1)}}const c=V2(n,s,o);c!==void 0&&t.push(c)}return t}function BD(n,e,t){const r=oD(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?$_(t):fD(t)),r.property==="style"){let a=typeof t=="object"?t:LD(n,String(t));return n.stylePropertyNameCase==="css"&&(a=zD(a)),["style",a]}return[n.elementAttributeNameCase==="react"&&r.space?aD[r.property]||r.property:r.attribute,t]}}function LD(n,e){try{return xD(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,a=new mr("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=n.filePath||void 0,a.url=F2+"#cannot-parse-style-attribute",a}}function G2(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let s=-1,o;for(;++s<a.length;){const c=hk(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(s&&c.type==="Literal"),optional:!1}:c}r=o}else r=hk(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const a=r.value;return by.call(n.components,a)?n.components[a]:a}if(n.evaluater)return n.evaluater.evaluateExpression(r);qc(n)}function qc(n,e){const t=new mr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=F2+"#cannot-handle-mdx-estrees-without-createevaluater",t}function zD(n){const e={};let t;for(t in n)by.call(n,t)&&(e[ID(t)]=n[t]);return e}function ID(n){let e=n.replace(kD,PD);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function PD(n){return"-"+n.toLowerCase()}const fg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},HD={};function Sy(n,e){const t=HD,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,a=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Y2(n,r,a)}function Y2(n,e,t){if(qD(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return kk(n.children,e,t)}return Array.isArray(n)?kk(n,e,t):""}function kk(n,e,t){const r=[];let a=-1;for(;++a<n.length;)r[a]=Y2(n[a],e,t);return r.join("")}function qD(n){return!!(n&&typeof n=="object")}const wk=document.createElement("i");function Cy(n){const e="&"+n+";";wk.innerHTML=e;const t=wk.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Gr(n,e,t,r){const a=n.length;let s=0,o;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function si(n,e){return n.length>0?(Gr(n,n.length,0,e),n):e}const Sk={}.hasOwnProperty;function Q2(n){const e={};let t=-1;for(;++t<n.length;)UD(e,n[t]);return e}function UD(n,e){let t;for(t in e){const a=(Sk.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){Sk.call(a,o)||(a[o]=[]);const c=s[o];FD(a[o],Array.isArray(c)?c:c?[c]:[])}}}function FD(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Gr(n,0,0,r)}function X2(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Si(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const br=Ll(/[A-Za-z]/),dr=Ll(/[\dA-Za-z]/),VD=Ll(/[#-'*+\--9=?A-Z^-~]/);function vd(n){return n!==null&&(n<32||n===127)}const M0=Ll(/\d/),KD=Ll(/[\dA-Fa-f]/),GD=Ll(/[!-/:-@[-`{-~]/);function st(n){return n!==null&&n<-2}function on(n){return n!==null&&(n<0||n===32)}function At(n){return n===-2||n===-1||n===32}const Pd=Ll(/\p{P}|\p{S}/u),As=Ll(/\s/);function Ll(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function tu(n){const e=[];let t=-1,r=0,a=0;for(;++t<n.length;){const s=n.charCodeAt(t);let o="";if(s===37&&dr(n.charCodeAt(t+1))&&dr(n.charCodeAt(t+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const c=n.charCodeAt(t+1);s<56320&&c>56319&&c<57344?(o=String.fromCharCode(s,c),a=1):o=""}else o=String.fromCharCode(s);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+a+1,o=""),a&&(t+=a,a=0)}return e.join("")+n.slice(r)}function Rt(n,e,t,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(h){return At(h)?(n.enter(t),c(h)):e(h)}function c(h){return At(h)&&s++<a?(n.consume(h),c):(n.exit(t),e(h))}}const YD={tokenize:QD};function QD(n){const e=n.attempt(this.parser.constructs.contentInitial,r,a);let t;return e;function r(c){if(c===null){n.consume(c);return}return n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),Rt(n,e,"linePrefix")}function a(c){return n.enter("paragraph"),s(c)}function s(c){const h=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=h),t=h,o(c)}function o(c){if(c===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(c);return}return st(c)?(n.consume(c),n.exit("chunkText"),s):(n.consume(c),o)}}const XD={tokenize:$D},Ck={tokenize:WD};function $D(n){const e=this,t=[];let r=0,a,s,o;return c;function c(R){if(r<t.length){const ee=t[r];return e.containerState=ee[1],n.attempt(ee[0].continuation,h,d)(R)}return d(R)}function h(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&H();const ee=e.events.length;let Z=ee,I;for(;Z--;)if(e.events[Z][0]==="exit"&&e.events[Z][1].type==="chunkFlow"){I=e.events[Z][1].end;break}O(r);let U=ee;for(;U<e.events.length;)e.events[U][1].end={...I},U++;return Gr(e.events,Z+1,0,e.events.slice(ee)),e.events.length=U,d(R)}return c(R)}function d(R){if(r===t.length){if(!a)return b(R);if(a.currentConstruct&&a.currentConstruct.concrete)return A(R);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(Ck,p,g)(R)}function p(R){return a&&H(),O(r),b(R)}function g(R){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,A(R)}function b(R){return e.containerState={},n.attempt(Ck,w,A)(R)}function w(R){return r++,t.push([e.currentConstruct,e.containerState]),b(R)}function A(R){if(R===null){a&&H(),O(0),n.consume(R);return}return a=a||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),N(R)}function N(R){if(R===null){_(n.exit("chunkFlow"),!0),O(0),n.consume(R);return}return st(R)?(n.consume(R),_(n.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(n.consume(R),N)}function _(R,ee){const Z=e.sliceStream(R);if(ee&&Z.push(null),R.previous=s,s&&(s.next=R),s=R,a.defineSkip(R.start),a.write(Z),e.parser.lazy[R.start.line]){let I=a.events.length;for(;I--;)if(a.events[I][1].start.offset<o&&(!a.events[I][1].end||a.events[I][1].end.offset>o))return;const U=e.events.length;let ye=U,fe,L;for(;ye--;)if(e.events[ye][0]==="exit"&&e.events[ye][1].type==="chunkFlow"){if(fe){L=e.events[ye][1].end;break}fe=!0}for(O(r),I=U;I<e.events.length;)e.events[I][1].end={...L},I++;Gr(e.events,ye+1,0,e.events.slice(U)),e.events.length=I}}function O(R){let ee=t.length;for(;ee-- >R;){const Z=t[ee];e.containerState=Z[1],Z[0].exit.call(e,n)}t.length=R}function H(){a.write([null]),s=void 0,a=void 0,e.containerState._closeFlow=void 0}}function WD(n,e,t){return Rt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Xo(n){if(n===null||on(n)||As(n))return 1;if(Pd(n))return 2}function Hd(n,e,t){const r=[];let a=-1;for(;++a<n.length;){const s=n[a].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const _0={name:"attention",resolveAll:ZD,tokenize:JD};function ZD(n,e){let t=-1,r,a,s,o,c,h,d,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;h=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const g={...n[r][1].end},b={...n[t][1].start};Ak(g,-h),Ak(b,h),o={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...n[r][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:b},s={type:h>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},a={type:h>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},n[r][1].end={...o.start},n[t][1].start={...c.end},d=[],n[r][1].end.offset-n[r][1].start.offset&&(d=si(d,[["enter",n[r][1],e],["exit",n[r][1],e]])),d=si(d,[["enter",a,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=si(d,Hd(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),d=si(d,[["exit",s,e],["enter",c,e],["exit",c,e],["exit",a,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,d=si(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,Gr(n,r-1,t-r+3,d),t=r+d.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function JD(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Xo(r);let s;return o;function o(h){return s=h,n.enter("attentionSequence"),c(h)}function c(h){if(h===s)return n.consume(h),c;const d=n.exit("attentionSequence"),p=Xo(h),g=!p||p===2&&a||t.includes(h),b=!a||a===2&&p||t.includes(r);return d._open=!!(s===42?g:g&&(a||!b)),d._close=!!(s===42?b:b&&(p||!g)),e(h)}}function Ak(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const ej={name:"autolink",tokenize:tj};function tj(n,e,t){let r=0;return a;function a(w){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(w),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(w){return br(w)?(n.consume(w),o):w===64?t(w):d(w)}function o(w){return w===43||w===45||w===46||dr(w)?(r=1,c(w)):d(w)}function c(w){return w===58?(n.consume(w),r=0,h):(w===43||w===45||w===46||dr(w))&&r++<32?(n.consume(w),c):(r=0,d(w))}function h(w){return w===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(w),n.exit("autolinkMarker"),n.exit("autolink"),e):w===null||w===32||w===60||vd(w)?t(w):(n.consume(w),h)}function d(w){return w===64?(n.consume(w),p):VD(w)?(n.consume(w),d):t(w)}function p(w){return dr(w)?g(w):t(w)}function g(w){return w===46?(n.consume(w),r=0,p):w===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(w),n.exit("autolinkMarker"),n.exit("autolink"),e):b(w)}function b(w){if((w===45||dr(w))&&r++<63){const A=w===45?b:g;return n.consume(w),A}return t(w)}}const Wc={partial:!0,tokenize:nj};function nj(n,e,t){return r;function r(s){return At(s)?Rt(n,a,"linePrefix")(s):a(s)}function a(s){return s===null||st(s)?e(s):t(s)}}const $2={continuation:{tokenize:ij},exit:aj,name:"blockQuote",tokenize:rj};function rj(n,e,t){const r=this;return a;function a(o){if(o===62){const c=r.containerState;return c.open||(n.enter("blockQuote",{_container:!0}),c.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return At(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function ij(n,e,t){const r=this;return a;function a(o){return At(o)?Rt(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt($2,e,t)(o)}}function aj(n){n.exit("blockQuote")}const W2={name:"characterEscape",tokenize:lj};function lj(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),a}function a(s){return GD(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const Z2={name:"characterReference",tokenize:sj};function sj(n,e,t){const r=this;let a=0,s,o;return c;function c(g){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),h}function h(g){return g===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(g),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),s=31,o=dr,p(g))}function d(g){return g===88||g===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(g),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=KD,p):(n.enter("characterReferenceValue"),s=7,o=M0,p(g))}function p(g){if(g===59&&a){const b=n.exit("characterReferenceValue");return o===dr&&!Cy(r.sliceSerialize(b))?t(g):(n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(g)&&a++<s?(n.consume(g),p):t(g)}}const Tk={partial:!0,tokenize:uj},Ek={concrete:!0,name:"codeFenced",tokenize:oj};function oj(n,e,t){const r=this,a={partial:!0,tokenize:Z};let s=0,o=0,c;return h;function h(I){return d(I)}function d(I){const U=r.events[r.events.length-1];return s=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,c=I,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(I)}function p(I){return I===c?(o++,n.consume(I),p):o<3?t(I):(n.exit("codeFencedFenceSequence"),At(I)?Rt(n,g,"whitespace")(I):g(I))}function g(I){return I===null||st(I)?(n.exit("codeFencedFence"),r.interrupt?e(I):n.check(Tk,N,ee)(I)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),b(I))}function b(I){return I===null||st(I)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),g(I)):At(I)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Rt(n,w,"whitespace")(I)):I===96&&I===c?t(I):(n.consume(I),b)}function w(I){return I===null||st(I)?g(I):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),A(I))}function A(I){return I===null||st(I)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),g(I)):I===96&&I===c?t(I):(n.consume(I),A)}function N(I){return n.attempt(a,ee,_)(I)}function _(I){return n.enter("lineEnding"),n.consume(I),n.exit("lineEnding"),O}function O(I){return s>0&&At(I)?Rt(n,H,"linePrefix",s+1)(I):H(I)}function H(I){return I===null||st(I)?n.check(Tk,N,ee)(I):(n.enter("codeFlowValue"),R(I))}function R(I){return I===null||st(I)?(n.exit("codeFlowValue"),H(I)):(n.consume(I),R)}function ee(I){return n.exit("codeFenced"),e(I)}function Z(I,U,ye){let fe=0;return L;function L(se){return I.enter("lineEnding"),I.consume(se),I.exit("lineEnding"),J}function J(se){return I.enter("codeFencedFence"),At(se)?Rt(I,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(se):ne(se)}function ne(se){return se===c?(I.enter("codeFencedFenceSequence"),me(se)):ye(se)}function me(se){return se===c?(fe++,I.consume(se),me):fe>=o?(I.exit("codeFencedFenceSequence"),At(se)?Rt(I,he,"whitespace")(se):he(se)):ye(se)}function he(se){return se===null||st(se)?(I.exit("codeFencedFence"),U(se)):ye(se)}}}function uj(n,e,t){const r=this;return a;function a(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const dg={name:"codeIndented",tokenize:hj},cj={partial:!0,tokenize:fj};function hj(n,e,t){const r=this;return a;function a(d){return n.enter("codeIndented"),Rt(n,s,"linePrefix",5)(d)}function s(d){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?o(d):t(d)}function o(d){return d===null?h(d):st(d)?n.attempt(cj,o,h)(d):(n.enter("codeFlowValue"),c(d))}function c(d){return d===null||st(d)?(n.exit("codeFlowValue"),o(d)):(n.consume(d),c)}function h(d){return n.exit("codeIndented"),e(d)}}function fj(n,e,t){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?t(o):st(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a):Rt(n,s,"linePrefix",5)(o)}function s(o){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):st(o)?a(o):t(o)}}const dj={name:"codeText",previous:mj,resolve:pj,tokenize:gj};function pj(n){let e=n.length-4,t=3,r,a;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)a===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(a=r):(r===e||n[r][1].type==="lineEnding")&&(n[a][1].type="codeTextData",r!==a+2&&(n[a][1].end=n[r-1][1].end,n.splice(a+2,r-a-2),e-=r-a-2,r=a+2),a=void 0);return n}function mj(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function gj(n,e,t){let r=0,a,s;return o;function o(g){return n.enter("codeText"),n.enter("codeTextSequence"),c(g)}function c(g){return g===96?(n.consume(g),r++,c):(n.exit("codeTextSequence"),h(g))}function h(g){return g===null?t(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),h):g===96?(s=n.enter("codeTextSequence"),a=0,p(g)):st(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),h):(n.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||st(g)?(n.exit("codeTextData"),h(g)):(n.consume(g),d)}function p(g){return g===96?(n.consume(g),a++,p):a===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(g)):(s.type="codeTextData",d(g))}}class yj{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const a=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&hc(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),hc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),hc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);hc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);hc(this.left,t.reverse())}}}function hc(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function J2(n){const e={};let t=-1,r,a,s,o,c,h,d;const p=new yj(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(r=p.get(t),t&&r[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,xj(p,t)),t=e[t],d=!0);else if(r[1]._container){for(s=t,a=void 0;s--;)if(o=p.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...p.get(a)[1].start},c=p.slice(a,t),c.unshift(r),p.splice(a,t-a+1,c))}}return Gr(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function xj(n,e){const t=n.get(e)[1],r=n.get(e)[2];let a=e-1;const s=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,h=[],d={};let p,g,b=-1,w=t,A=0,N=0;const _=[N];for(;w;){for(;n.get(++a)[1]!==w;);s.push(a),w._tokenizer||(p=r.sliceStream(w),w.next||p.push(null),g&&o.defineSkip(w.start),w._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(p),w._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),g=w,w=w.next}for(w=t;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(N=b+1,_.push(N),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(o.events=[],w?(w._tokenizer=void 0,w.previous=void 0):_.pop(),b=_.length;b--;){const O=c.slice(_[b],_[b+1]),H=s.pop();h.push([H,H+O.length-1]),n.splice(H,2,O)}for(h.reverse(),b=-1;++b<h.length;)d[A+h[b][0]]=A+h[b][1],A+=h[b][1]-h[b][0]-1;return d}const vj={resolve:kj,tokenize:wj},bj={partial:!0,tokenize:Sj};function kj(n){return J2(n),n}function wj(n,e){let t;return r;function r(c){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?s(c):st(c)?n.check(bj,o,s)(c):(n.consume(c),a)}function s(c){return n.exit("chunkContent"),n.exit("content"),e(c)}function o(c){return n.consume(c),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,a}}function Sj(n,e,t){const r=this;return a;function a(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Rt(n,s,"linePrefix")}function s(o){if(o===null||st(o))return t(o);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function eC(n,e,t,r,a,s,o,c,h){const d=h||Number.POSITIVE_INFINITY;let p=0;return g;function g(O){return O===60?(n.enter(r),n.enter(a),n.enter(s),n.consume(O),n.exit(s),b):O===null||O===32||O===41||vd(O)?t(O):(n.enter(r),n.enter(o),n.enter(c),n.enter("chunkString",{contentType:"string"}),N(O))}function b(O){return O===62?(n.enter(s),n.consume(O),n.exit(s),n.exit(a),n.exit(r),e):(n.enter(c),n.enter("chunkString",{contentType:"string"}),w(O))}function w(O){return O===62?(n.exit("chunkString"),n.exit(c),b(O)):O===null||O===60||st(O)?t(O):(n.consume(O),O===92?A:w)}function A(O){return O===60||O===62||O===92?(n.consume(O),w):w(O)}function N(O){return!p&&(O===null||O===41||on(O))?(n.exit("chunkString"),n.exit(c),n.exit(o),n.exit(r),e(O)):p<d&&O===40?(n.consume(O),p++,N):O===41?(n.consume(O),p--,N):O===null||O===32||O===40||vd(O)?t(O):(n.consume(O),O===92?_:N)}function _(O){return O===40||O===41||O===92?(n.consume(O),N):N(O)}}function tC(n,e,t,r,a,s){const o=this;let c=0,h;return d;function d(w){return n.enter(r),n.enter(a),n.consume(w),n.exit(a),n.enter(s),p}function p(w){return c>999||w===null||w===91||w===93&&!h||w===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?t(w):w===93?(n.exit(s),n.enter(a),n.consume(w),n.exit(a),n.exit(r),e):st(w)?(n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===null||w===91||w===93||st(w)||c++>999?(n.exit("chunkString"),p(w)):(n.consume(w),h||(h=!At(w)),w===92?b:g)}function b(w){return w===91||w===92||w===93?(n.consume(w),c++,g):g(w)}}function nC(n,e,t,r,a,s){let o;return c;function c(b){return b===34||b===39||b===40?(n.enter(r),n.enter(a),n.consume(b),n.exit(a),o=b===40?41:b,h):t(b)}function h(b){return b===o?(n.enter(a),n.consume(b),n.exit(a),n.exit(r),e):(n.enter(s),d(b))}function d(b){return b===o?(n.exit(s),h(o)):b===null?t(b):st(b)?(n.enter("lineEnding"),n.consume(b),n.exit("lineEnding"),Rt(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===o||b===null||st(b)?(n.exit("chunkString"),d(b)):(n.consume(b),b===92?g:p)}function g(b){return b===o||b===92?(n.consume(b),p):p(b)}}function Nc(n,e){let t;return r;function r(a){return st(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),t=!0,r):At(a)?Rt(n,r,t?"linePrefix":"lineSuffix")(a):e(a)}}const Cj={name:"definition",tokenize:Tj},Aj={partial:!0,tokenize:Ej};function Tj(n,e,t){const r=this;let a;return s;function s(w){return n.enter("definition"),o(w)}function o(w){return tC.call(r,n,c,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function c(w){return a=Si(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),w===58?(n.enter("definitionMarker"),n.consume(w),n.exit("definitionMarker"),h):t(w)}function h(w){return on(w)?Nc(n,d)(w):d(w)}function d(w){return eC(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function p(w){return n.attempt(Aj,g,g)(w)}function g(w){return At(w)?Rt(n,b,"whitespace")(w):b(w)}function b(w){return w===null||st(w)?(n.exit("definition"),r.parser.defined.push(a),e(w)):t(w)}}function Ej(n,e,t){return r;function r(c){return on(c)?Nc(n,a)(c):t(c)}function a(c){return nC(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return At(c)?Rt(n,o,"whitespace")(c):o(c)}function o(c){return c===null||st(c)?e(c):t(c)}}const Nj={name:"hardBreakEscape",tokenize:Mj};function Mj(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),a}function a(s){return st(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const _j={name:"headingAtx",resolve:Dj,tokenize:jj};function Dj(n,e){let t=n.length-2,r=3,a,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(a={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Gr(n,r,t-r+1,[["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e]])),n}function jj(n,e,t){let r=0;return a;function a(p){return n.enter("atxHeading"),s(p)}function s(p){return n.enter("atxHeadingSequence"),o(p)}function o(p){return p===35&&r++<6?(n.consume(p),o):p===null||on(p)?(n.exit("atxHeadingSequence"),c(p)):t(p)}function c(p){return p===35?(n.enter("atxHeadingSequence"),h(p)):p===null||st(p)?(n.exit("atxHeading"),e(p)):At(p)?Rt(n,c,"whitespace")(p):(n.enter("atxHeadingText"),d(p))}function h(p){return p===35?(n.consume(p),h):(n.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||on(p)?(n.exit("atxHeadingText"),c(p)):(n.consume(p),d)}}const Oj=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Nk=["pre","script","style","textarea"],Rj={concrete:!0,name:"htmlFlow",resolveTo:zj,tokenize:Ij},Bj={partial:!0,tokenize:Hj},Lj={partial:!0,tokenize:Pj};function zj(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function Ij(n,e,t){const r=this;let a,s,o,c,h;return d;function d(P){return p(P)}function p(P){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(P),g}function g(P){return P===33?(n.consume(P),b):P===47?(n.consume(P),s=!0,N):P===63?(n.consume(P),a=3,r.interrupt?e:D):br(P)?(n.consume(P),o=String.fromCharCode(P),_):t(P)}function b(P){return P===45?(n.consume(P),a=2,w):P===91?(n.consume(P),a=5,c=0,A):br(P)?(n.consume(P),a=4,r.interrupt?e:D):t(P)}function w(P){return P===45?(n.consume(P),r.interrupt?e:D):t(P)}function A(P){const Qe="CDATA[";return P===Qe.charCodeAt(c++)?(n.consume(P),c===Qe.length?r.interrupt?e:ne:A):t(P)}function N(P){return br(P)?(n.consume(P),o=String.fromCharCode(P),_):t(P)}function _(P){if(P===null||P===47||P===62||on(P)){const Qe=P===47,ct=o.toLowerCase();return!Qe&&!s&&Nk.includes(ct)?(a=1,r.interrupt?e(P):ne(P)):Oj.includes(o.toLowerCase())?(a=6,Qe?(n.consume(P),O):r.interrupt?e(P):ne(P)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(P):s?H(P):R(P))}return P===45||dr(P)?(n.consume(P),o+=String.fromCharCode(P),_):t(P)}function O(P){return P===62?(n.consume(P),r.interrupt?e:ne):t(P)}function H(P){return At(P)?(n.consume(P),H):L(P)}function R(P){return P===47?(n.consume(P),L):P===58||P===95||br(P)?(n.consume(P),ee):At(P)?(n.consume(P),R):L(P)}function ee(P){return P===45||P===46||P===58||P===95||dr(P)?(n.consume(P),ee):Z(P)}function Z(P){return P===61?(n.consume(P),I):At(P)?(n.consume(P),Z):R(P)}function I(P){return P===null||P===60||P===61||P===62||P===96?t(P):P===34||P===39?(n.consume(P),h=P,U):At(P)?(n.consume(P),I):ye(P)}function U(P){return P===h?(n.consume(P),h=null,fe):P===null||st(P)?t(P):(n.consume(P),U)}function ye(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||on(P)?Z(P):(n.consume(P),ye)}function fe(P){return P===47||P===62||At(P)?R(P):t(P)}function L(P){return P===62?(n.consume(P),J):t(P)}function J(P){return P===null||st(P)?ne(P):At(P)?(n.consume(P),J):t(P)}function ne(P){return P===45&&a===2?(n.consume(P),te):P===60&&a===1?(n.consume(P),xe):P===62&&a===4?(n.consume(P),Te):P===63&&a===3?(n.consume(P),D):P===93&&a===5?(n.consume(P),Ae):st(P)&&(a===6||a===7)?(n.exit("htmlFlowData"),n.check(Bj,Ee,me)(P)):P===null||st(P)?(n.exit("htmlFlowData"),me(P)):(n.consume(P),ne)}function me(P){return n.check(Lj,he,Ee)(P)}function he(P){return n.enter("lineEnding"),n.consume(P),n.exit("lineEnding"),se}function se(P){return P===null||st(P)?me(P):(n.enter("htmlFlowData"),ne(P))}function te(P){return P===45?(n.consume(P),D):ne(P)}function xe(P){return P===47?(n.consume(P),o="",Ce):ne(P)}function Ce(P){if(P===62){const Qe=o.toLowerCase();return Nk.includes(Qe)?(n.consume(P),Te):ne(P)}return br(P)&&o.length<8?(n.consume(P),o+=String.fromCharCode(P),Ce):ne(P)}function Ae(P){return P===93?(n.consume(P),D):ne(P)}function D(P){return P===62?(n.consume(P),Te):P===45&&a===2?(n.consume(P),D):ne(P)}function Te(P){return P===null||st(P)?(n.exit("htmlFlowData"),Ee(P)):(n.consume(P),Te)}function Ee(P){return n.exit("htmlFlow"),e(P)}}function Pj(n,e,t){const r=this;return a;function a(o){return st(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function Hj(n,e,t){return r;function r(a){return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),n.attempt(Wc,e,t)}}const qj={name:"htmlText",tokenize:Uj};function Uj(n,e,t){const r=this;let a,s,o;return c;function c(D){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(D),h}function h(D){return D===33?(n.consume(D),d):D===47?(n.consume(D),Z):D===63?(n.consume(D),R):br(D)?(n.consume(D),ye):t(D)}function d(D){return D===45?(n.consume(D),p):D===91?(n.consume(D),s=0,A):br(D)?(n.consume(D),H):t(D)}function p(D){return D===45?(n.consume(D),w):t(D)}function g(D){return D===null?t(D):D===45?(n.consume(D),b):st(D)?(o=g,xe(D)):(n.consume(D),g)}function b(D){return D===45?(n.consume(D),w):g(D)}function w(D){return D===62?te(D):D===45?b(D):g(D)}function A(D){const Te="CDATA[";return D===Te.charCodeAt(s++)?(n.consume(D),s===Te.length?N:A):t(D)}function N(D){return D===null?t(D):D===93?(n.consume(D),_):st(D)?(o=N,xe(D)):(n.consume(D),N)}function _(D){return D===93?(n.consume(D),O):N(D)}function O(D){return D===62?te(D):D===93?(n.consume(D),O):N(D)}function H(D){return D===null||D===62?te(D):st(D)?(o=H,xe(D)):(n.consume(D),H)}function R(D){return D===null?t(D):D===63?(n.consume(D),ee):st(D)?(o=R,xe(D)):(n.consume(D),R)}function ee(D){return D===62?te(D):R(D)}function Z(D){return br(D)?(n.consume(D),I):t(D)}function I(D){return D===45||dr(D)?(n.consume(D),I):U(D)}function U(D){return st(D)?(o=U,xe(D)):At(D)?(n.consume(D),U):te(D)}function ye(D){return D===45||dr(D)?(n.consume(D),ye):D===47||D===62||on(D)?fe(D):t(D)}function fe(D){return D===47?(n.consume(D),te):D===58||D===95||br(D)?(n.consume(D),L):st(D)?(o=fe,xe(D)):At(D)?(n.consume(D),fe):te(D)}function L(D){return D===45||D===46||D===58||D===95||dr(D)?(n.consume(D),L):J(D)}function J(D){return D===61?(n.consume(D),ne):st(D)?(o=J,xe(D)):At(D)?(n.consume(D),J):fe(D)}function ne(D){return D===null||D===60||D===61||D===62||D===96?t(D):D===34||D===39?(n.consume(D),a=D,me):st(D)?(o=ne,xe(D)):At(D)?(n.consume(D),ne):(n.consume(D),he)}function me(D){return D===a?(n.consume(D),a=void 0,se):D===null?t(D):st(D)?(o=me,xe(D)):(n.consume(D),me)}function he(D){return D===null||D===34||D===39||D===60||D===61||D===96?t(D):D===47||D===62||on(D)?fe(D):(n.consume(D),he)}function se(D){return D===47||D===62||on(D)?fe(D):t(D)}function te(D){return D===62?(n.consume(D),n.exit("htmlTextData"),n.exit("htmlText"),e):t(D)}function xe(D){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),Ce}function Ce(D){return At(D)?Rt(n,Ae,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):Ae(D)}function Ae(D){return n.enter("htmlTextData"),o(D)}}const Ay={name:"labelEnd",resolveAll:Gj,resolveTo:Yj,tokenize:Qj},Fj={tokenize:Xj},Vj={tokenize:$j},Kj={tokenize:Wj};function Gj(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",e+=a}}return n.length!==t.length&&Gr(n,0,n.length,t),n}function Yj(n,e){let t=n.length,r=0,a,s,o,c;for(;t--;)if(a=n[t][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;n[t][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=t,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=t);const h={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},p={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[o-2][1].start}};return c=[["enter",h,e],["enter",d,e]],c=si(c,n.slice(s+1,s+r+3)),c=si(c,[["enter",p,e]]),c=si(c,Hd(e.parser.constructs.insideSpan.null,n.slice(s+r+4,o-3),e)),c=si(c,[["exit",p,e],n[o-2],n[o-1],["exit",d,e]]),c=si(c,n.slice(o+1)),c=si(c,[["exit",h,e]]),Gr(n,s,n.length,c),n}function Qj(n,e,t){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return c;function c(b){return s?s._inactive?g(b):(o=r.parser.defined.includes(Si(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(b),n.exit("labelMarker"),n.exit("labelEnd"),h):t(b)}function h(b){return b===40?n.attempt(Fj,p,o?p:g)(b):b===91?n.attempt(Vj,p,o?d:g)(b):o?p(b):g(b)}function d(b){return n.attempt(Kj,p,g)(b)}function p(b){return e(b)}function g(b){return s._balanced=!0,t(b)}}function Xj(n,e,t){return r;function r(g){return n.enter("resource"),n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),a}function a(g){return on(g)?Nc(n,s)(g):s(g)}function s(g){return g===41?p(g):eC(n,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function o(g){return on(g)?Nc(n,h)(g):p(g)}function c(g){return t(g)}function h(g){return g===34||g===39||g===40?nC(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return on(g)?Nc(n,p)(g):p(g)}function p(g){return g===41?(n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),n.exit("resource"),e):t(g)}}function $j(n,e,t){const r=this;return a;function a(c){return tC.call(r,n,s,o,"reference","referenceMarker","referenceString")(c)}function s(c){return r.parser.defined.includes(Si(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):t(c)}function o(c){return t(c)}}function Wj(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),a}function a(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const Zj={name:"labelStartImage",resolveAll:Ay.resolveAll,tokenize:Jj};function Jj(n,e,t){const r=this;return a;function a(c){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(c),n.exit("labelImageMarker"),s}function s(c){return c===91?(n.enter("labelMarker"),n.consume(c),n.exit("labelMarker"),n.exit("labelImage"),o):t(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(c):e(c)}}const eO={name:"labelStartLink",resolveAll:Ay.resolveAll,tokenize:tO};function tO(n,e,t){const r=this;return a;function a(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const pg={name:"lineEnding",tokenize:nO};function nO(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Rt(n,e,"linePrefix")}}const Kf={name:"thematicBreak",tokenize:rO};function rO(n,e,t){let r=0,a;return s;function s(d){return n.enter("thematicBreak"),o(d)}function o(d){return a=d,c(d)}function c(d){return d===a?(n.enter("thematicBreakSequence"),h(d)):r>=3&&(d===null||st(d))?(n.exit("thematicBreak"),e(d)):t(d)}function h(d){return d===a?(n.consume(d),r++,h):(n.exit("thematicBreakSequence"),At(d)?Rt(n,c,"whitespace")(d):c(d))}}const Mr={continuation:{tokenize:sO},exit:uO,name:"list",tokenize:lO},iO={partial:!0,tokenize:cO},aO={partial:!0,tokenize:oO};function lO(n,e,t){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return c;function c(w){const A=r.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(A==="listUnordered"?!r.containerState.marker||w===r.containerState.marker:M0(w)){if(r.containerState.type||(r.containerState.type=A,n.enter(A,{_container:!0})),A==="listUnordered")return n.enter("listItemPrefix"),w===42||w===45?n.check(Kf,t,d)(w):d(w);if(!r.interrupt||w===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),h(w)}return t(w)}function h(w){return M0(w)&&++o<10?(n.consume(w),h):(!r.interrupt||o<2)&&(r.containerState.marker?w===r.containerState.marker:w===41||w===46)?(n.exit("listItemValue"),d(w)):t(w)}function d(w){return n.enter("listItemMarker"),n.consume(w),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||w,n.check(Wc,r.interrupt?t:p,n.attempt(iO,b,g))}function p(w){return r.containerState.initialBlankLine=!0,s++,b(w)}function g(w){return At(w)?(n.enter("listItemPrefixWhitespace"),n.consume(w),n.exit("listItemPrefixWhitespace"),b):t(w)}function b(w){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(w)}}function sO(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(Wc,a,s);function a(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Rt(n,e,"listItemIndent",r.containerState.size+1)(c)}function s(c){return r.containerState.furtherBlankLines||!At(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(aO,e,o)(c))}function o(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,Rt(n,n.attempt(Mr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function oO(n,e,t){const r=this;return Rt(n,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):t(s)}}function uO(n){n.exit(this.containerState.type)}function cO(n,e,t){const r=this;return Rt(n,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!At(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const Mk={name:"setextUnderline",resolveTo:hO,tokenize:fO};function hO(n,e){let t=n.length,r,a,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(a=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[a][1].type="setextHeadingText",s?(n.splice(a,0,["enter",o,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function fO(n,e,t){const r=this;let a;return s;function s(d){let p=r.events.length,g;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){g=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(n.enter("setextHeadingLine"),a=d,o(d)):t(d)}function o(d){return n.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===a?(n.consume(d),c):(n.exit("setextHeadingLineSequence"),At(d)?Rt(n,h,"lineSuffix")(d):h(d))}function h(d){return d===null||st(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const dO={tokenize:pO};function pO(n){const e=this,t=n.attempt(Wc,r,n.attempt(this.parser.constructs.flowInitial,a,Rt(n,n.attempt(this.parser.constructs.flow,a,n.attempt(vj,a)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function a(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const mO={resolveAll:iC()},gO=rC("string"),yO=rC("text");function rC(n){return{resolveAll:iC(n==="text"?xO:void 0),tokenize:e};function e(t){const r=this,a=this.parser.constructs[n],s=t.attempt(a,o,c);return o;function o(p){return d(p)?s(p):c(p)}function c(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),h}function h(p){return d(p)?(t.exit("data"),s(p)):(t.consume(p),h)}function d(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const w=g[b];if(!w.previous||w.previous.call(r,r.previous))return!0}return!1}}}function iC(n){return e;function e(t,r){let a=-1,s;for(;++a<=t.length;)s===void 0?t[a]&&t[a][1].type==="data"&&(s=a,a++):(!t[a]||t[a][1].type!=="data")&&(a!==s+2&&(t[s][1].end=t[a-1][1].end,t.splice(s+2,a-s-2),a=s+2),s=void 0);return n?n(t,r):t}}function xO(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],a=e.sliceStream(r);let s=a.length,o=-1,c=0,h;for(;s--;){const d=a[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(d===-2)h=!0,c++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(c=0),c){const d={type:t===n.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const vO={42:Mr,43:Mr,45:Mr,48:Mr,49:Mr,50:Mr,51:Mr,52:Mr,53:Mr,54:Mr,55:Mr,56:Mr,57:Mr,62:$2},bO={91:Cj},kO={[-2]:dg,[-1]:dg,32:dg},wO={35:_j,42:Kf,45:[Mk,Kf],60:Rj,61:Mk,95:Kf,96:Ek,126:Ek},SO={38:Z2,92:W2},CO={[-5]:pg,[-4]:pg,[-3]:pg,33:Zj,38:Z2,42:_0,60:[ej,qj],91:eO,92:[Nj,W2],93:Ay,95:_0,96:dj},AO={null:[_0,mO]},TO={null:[42,95]},EO={null:[]},NO=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:TO,contentInitial:bO,disable:EO,document:vO,flow:wO,flowInitial:kO,insideSpan:AO,string:SO,text:CO},Symbol.toStringTag,{value:"Module"}));function MO(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const a={},s=[];let o=[],c=[];const h={attempt:U(Z),check:U(I),consume:H,enter:R,exit:ee,interrupt:U(I,{interrupt:!0})},d={code:null,containerState:{},defineSkip:N,events:[],now:A,parser:n,previous:null,sliceSerialize:b,sliceStream:w,write:g};let p=e.tokenize.call(d,h);return e.resolveAll&&s.push(e),d;function g(J){return o=si(o,J),_(),o[o.length-1]!==null?[]:(ye(e,0),d.events=Hd(s,d.events,d),d.events)}function b(J,ne){return DO(w(J),ne)}function w(J){return _O(o,J)}function A(){const{_bufferIndex:J,_index:ne,line:me,column:he,offset:se}=r;return{_bufferIndex:J,_index:ne,line:me,column:he,offset:se}}function N(J){a[J.line]=J.column,L()}function _(){let J;for(;r._index<o.length;){const ne=o[r._index];if(typeof ne=="string")for(J=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===J&&r._bufferIndex<ne.length;)O(ne.charCodeAt(r._bufferIndex));else O(ne)}}function O(J){p=p(J)}function H(J){st(J)?(r.line++,r.column=1,r.offset+=J===-3?2:1,L()):J!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=J}function R(J,ne){const me=ne||{};return me.type=J,me.start=A(),d.events.push(["enter",me,d]),c.push(me),me}function ee(J){const ne=c.pop();return ne.end=A(),d.events.push(["exit",ne,d]),ne}function Z(J,ne){ye(J,ne.from)}function I(J,ne){ne.restore()}function U(J,ne){return me;function me(he,se,te){let xe,Ce,Ae,D;return Array.isArray(he)?Ee(he):"tokenize"in he?Ee([he]):Te(he);function Te(et){return jt;function jt(ft){const Qt=ft!==null&&et[ft],Fe=ft!==null&&et.null,Ye=[...Array.isArray(Qt)?Qt:Qt?[Qt]:[],...Array.isArray(Fe)?Fe:Fe?[Fe]:[]];return Ee(Ye)(ft)}}function Ee(et){return xe=et,Ce=0,et.length===0?te:P(et[Ce])}function P(et){return jt;function jt(ft){return D=fe(),Ae=et,et.partial||(d.currentConstruct=et),et.name&&d.parser.constructs.disable.null.includes(et.name)?ct():et.tokenize.call(ne?Object.assign(Object.create(d),ne):d,h,Qe,ct)(ft)}}function Qe(et){return J(Ae,D),se}function ct(et){return D.restore(),++Ce<xe.length?P(xe[Ce]):te}}}function ye(J,ne){J.resolveAll&&!s.includes(J)&&s.push(J),J.resolve&&Gr(d.events,ne,d.events.length-ne,J.resolve(d.events.slice(ne),d)),J.resolveTo&&(d.events=J.resolveTo(d.events,d))}function fe(){const J=A(),ne=d.previous,me=d.currentConstruct,he=d.events.length,se=Array.from(c);return{from:he,restore:te};function te(){r=J,d.previous=ne,d.currentConstruct=me,d.events.length=he,c=se,L()}}function L(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function _O(n,e){const t=e.start._index,r=e.start._bufferIndex,a=e.end._index,s=e.end._bufferIndex;let o;if(t===a)o=[n[t].slice(r,s)];else{if(o=n.slice(t,a),r>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(r):o.shift()}s>0&&o.push(n[a].slice(0,s))}return o}function DO(n,e){let t=-1;const r=[];let a;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function jO(n){const r={constructs:Q2([NO,...(n||{}).extensions||[]]),content:a(YD),defined:[],document:a(XD),flow:a(dO),lazy:{},string:a(gO),text:a(yO)};return r;function a(s){return o;function o(c){return MO(r,s,c)}}}function OO(n){for(;!J2(n););return n}const _k=/[\0\t\n\r]/g;function RO(){let n=1,e="",t=!0,r;return a;function a(s,o,c){const h=[];let d,p,g,b,w;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),g=0,e="",t&&(s.charCodeAt(0)===65279&&g++,t=void 0);g<s.length;){if(_k.lastIndex=g,d=_k.exec(s),b=d&&d.index!==void 0?d.index:s.length,w=s.charCodeAt(b),!d){e=s.slice(g);break}if(w===10&&g===b&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),g<b&&(h.push(s.slice(g,b)),n+=b-g),w){case 0:{h.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,h.push(-2);n++<p;)h.push(-1);break}case 10:{h.push(-4),n=1;break}default:r=!0,n=1}g=b+1}return c&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const BO=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LO(n){return n.replace(BO,zO)}function zO(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const a=t.charCodeAt(1),s=a===120||a===88;return X2(t.slice(s?2:1),s?16:10)}return Cy(t)||n}const aC={}.hasOwnProperty;function IO(n,e,t){return typeof e!="string"&&(t=e,e=void 0),PO(t)(OO(jO(t).document().write(RO()(n,e,!0))))}function PO(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(kn),autolinkProtocol:fe,autolinkEmail:fe,atxHeading:s(tt),blockQuote:s(Fe),characterEscape:fe,characterReference:fe,codeFenced:s(Ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ye,o),codeText:s(Pe,o),codeTextData:fe,data:fe,codeFlowValue:fe,definition:s(De),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(lt),hardBreakEscape:s(Tt),hardBreakTrailing:s(Tt),htmlFlow:s(kt,o),htmlFlowData:fe,htmlText:s(kt,o),htmlTextData:fe,image:s(vt),label:o,link:s(kn),listItem:s(je),listItemValue:b,listOrdered:s(rn,g),listUnordered:s(rn),paragraph:s(bt),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(tt),strong:s(Ot),thematicBreak:s(An)},exit:{atxHeading:h(),atxHeadingSequence:Z,autolink:h(),autolinkEmail:Qt,autolinkProtocol:ft,blockQuote:h(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ct,characterReferenceMarkerNumeric:ct,characterReferenceValue:et,characterReference:jt,codeFenced:h(_),codeFencedFence:N,codeFencedFenceInfo:w,codeFencedFenceMeta:A,codeFlowValue:L,codeIndented:h(O),codeText:h(se),codeTextData:L,data:L,definition:h(),definitionDestinationString:ee,definitionLabelString:H,definitionTitleString:R,emphasis:h(),hardBreakEscape:h(ne),hardBreakTrailing:h(ne),htmlFlow:h(me),htmlFlowData:L,htmlText:h(he),htmlTextData:L,image:h(xe),label:Ae,labelText:Ce,lineEnding:J,link:h(te),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:Qe,resourceDestinationString:D,resourceTitleString:Te,resource:Ee,setextHeading:h(ye),setextHeadingLineSequence:U,setextHeadingText:I,strong:h(),thematicBreak:h()}};lC(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(re){let ve={type:"root",children:[]};const Ve={stack:[ve],tokenStack:[],config:e,enter:c,exit:d,buffer:o,resume:p,data:t},Ze=[];let at=-1;for(;++at<re.length;)if(re[at][1].type==="listOrdered"||re[at][1].type==="listUnordered")if(re[at][0]==="enter")Ze.push(at);else{const un=Ze.pop();at=a(re,un,at)}for(at=-1;++at<re.length;){const un=e[re[at][0]];aC.call(un,re[at][1].type)&&un[re[at][1].type].call(Object.assign({sliceSerialize:re[at][2].sliceSerialize},Ve),re[at][1])}if(Ve.tokenStack.length>0){const un=Ve.tokenStack[Ve.tokenStack.length-1];(un[1]||Dk).call(Ve,void 0,un[0])}for(ve.position={start:vl(re.length>0?re[0][1].start:{line:1,column:1,offset:0}),end:vl(re.length>0?re[re.length-2][1].end:{line:1,column:1,offset:0})},at=-1;++at<e.transforms.length;)ve=e.transforms[at](ve)||ve;return ve}function a(re,ve,Ve){let Ze=ve-1,at=-1,un=!1,zt,It,Pt,wt;for(;++Ze<=Ve;){const Re=re[Ze];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?at++:at--,wt=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(zt&&!wt&&!at&&!Pt&&(Pt=Ze),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!at&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||at===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(zt){let Gn=Ze;for(It=void 0;Gn--;){const pn=re[Gn];if(pn[1].type==="lineEnding"||pn[1].type==="lineEndingBlank"){if(pn[0]==="exit")continue;It&&(re[It][1].type="lineEndingBlank",un=!0),pn[1].type="lineEnding",It=Gn}else if(!(pn[1].type==="linePrefix"||pn[1].type==="blockQuotePrefix"||pn[1].type==="blockQuotePrefixWhitespace"||pn[1].type==="blockQuoteMarker"||pn[1].type==="listItemIndent"))break}Pt&&(!It||Pt<It)&&(zt._spread=!0),zt.end=Object.assign({},It?re[It][1].start:Re[1].end),re.splice(It||Ze,0,["exit",zt,Re[2]]),Ze++,Ve++}if(Re[1].type==="listItemPrefix"){const Gn={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};zt=Gn,re.splice(Ze,0,["enter",Gn,Re[2]]),Ze++,Ve++,Pt=void 0,wt=!0}}}return re[ve][1]._spread=un,Ve}function s(re,ve){return Ve;function Ve(Ze){c.call(this,re(Ze),Ze),ve&&ve.call(this,Ze)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(re,ve,Ve){this.stack[this.stack.length-1].children.push(re),this.stack.push(re),this.tokenStack.push([ve,Ve||void 0]),re.position={start:vl(ve.start),end:void 0}}function h(re){return ve;function ve(Ve){re&&re.call(this,Ve),d.call(this,Ve)}}function d(re,ve){const Ve=this.stack.pop(),Ze=this.tokenStack.pop();if(Ze)Ze[0].type!==re.type&&(ve?ve.call(this,re,Ze[0]):(Ze[1]||Dk).call(this,re,Ze[0]));else throw new Error("Cannot close `"+re.type+"` ("+Ec({start:re.start,end:re.end})+"): its not open");Ve.position.end=vl(re.end)}function p(){return Sy(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(re){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(re),10),this.data.expectingFirstListItemValue=void 0}}function w(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=re}function A(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=re}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.value=re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function O(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.value=re.replace(/(\r?\n|\r)$/g,"")}function H(re){const ve=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=ve,Ve.identifier=Si(this.sliceSerialize(re)).toLowerCase()}function R(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.title=re}function ee(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.url=re}function Z(re){const ve=this.stack[this.stack.length-1];if(!ve.depth){const Ve=this.sliceSerialize(re).length;ve.depth=Ve}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function U(re){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(re).codePointAt(0)===61?1:2}function ye(){this.data.setextHeadingSlurpLineEnding=void 0}function fe(re){const Ve=this.stack[this.stack.length-1].children;let Ze=Ve[Ve.length-1];(!Ze||Ze.type!=="text")&&(Ze=Lt(),Ze.position={start:vl(re.start),end:void 0},Ve.push(Ze)),this.stack.push(Ze)}function L(re){const ve=this.stack.pop();ve.value+=this.sliceSerialize(re),ve.position.end=vl(re.end)}function J(re){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=ve.children[ve.children.length-1];Ve.position.end=vl(re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ve.type)&&(fe.call(this,re),L.call(this,re))}function ne(){this.data.atHardBreak=!0}function me(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.value=re}function he(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.value=re}function se(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.value=re}function te(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=ve,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function xe(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=ve,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function Ce(re){const ve=this.sliceSerialize(re),Ve=this.stack[this.stack.length-2];Ve.label=LO(ve),Ve.identifier=Si(ve).toLowerCase()}function Ae(){const re=this.stack[this.stack.length-1],ve=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const Ze=re.children;Ve.children=Ze}else Ve.alt=ve}function D(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.url=re}function Te(){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.title=re}function Ee(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Qe(re){const ve=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=ve,Ve.identifier=Si(this.sliceSerialize(re)).toLowerCase(),this.data.referenceType="full"}function ct(re){this.data.characterReferenceType=re.type}function et(re){const ve=this.sliceSerialize(re),Ve=this.data.characterReferenceType;let Ze;Ve?(Ze=X2(ve,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ze=Cy(ve);const at=this.stack[this.stack.length-1];at.value+=Ze}function jt(re){const ve=this.stack.pop();ve.position.end=vl(re.end)}function ft(re){L.call(this,re);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(re)}function Qt(re){L.call(this,re);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(re)}function Fe(){return{type:"blockquote",children:[]}}function Ye(){return{type:"code",lang:null,meta:null,value:""}}function Pe(){return{type:"inlineCode",value:""}}function De(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function Tt(){return{type:"break"}}function kt(){return{type:"html",value:""}}function vt(){return{type:"image",title:null,url:"",alt:null}}function kn(){return{type:"link",title:null,url:"",children:[]}}function rn(re){return{type:"list",ordered:re.type==="listOrdered",start:null,spread:re._spread,children:[]}}function je(re){return{type:"listItem",spread:re._spread,checked:null,children:[]}}function bt(){return{type:"paragraph",children:[]}}function Ot(){return{type:"strong",children:[]}}function Lt(){return{type:"text",value:""}}function An(){return{type:"thematicBreak"}}}function vl(n){return{line:n.line,column:n.column,offset:n.offset}}function lC(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?lC(n,r):HO(n,r)}}function HO(n,e){let t;for(t in e)if(aC.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Dk(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Ec({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Ec({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ec({start:e.start,end:e.end})+") is still open")}function qO(n){const e=this;e.parser=t;function t(r){return IO(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function UO(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function FO(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function VO(n,e){const t=e.value?e.value+`
`:"",r={},a=e.lang?e.lang.split(/\s+/):[];a.length>0&&(r.className=["language-"+a[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),n.patch(e,s),s=n.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},n.patch(e,s),s}function KO(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function GO(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function YO(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),a=tu(r.toLowerCase()),s=n.footnoteOrder.indexOf(r);let o,c=n.footnoteCounts.get(r);c===void 0?(c=0,n.footnoteOrder.push(r),o=n.footnoteOrder.length):o=s+1,c+=1,n.footnoteCounts.set(r,c);const h={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+a,id:t+"fnref-"+a+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return n.patch(e,d),n.applyData(e,d)}function QO(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function XO(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function sC(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const a=n.all(e),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function $O(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return sC(n,e);const a={src:tu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return n.patch(e,s),n.applyData(e,s)}function WO(n,e){const t={src:tu(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function ZO(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function JO(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return sC(n,e);const a={href:tu(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function e6(n,e){const t={href:tu(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function t6(n,e,t){const r=n.all(e),a=t?n6(t):oC(e),s={},o=[];if(typeof e.checked=="boolean"){const p=r[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},r.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const p=r[c];(a||c!==0||p.type!=="element"||p.tagName!=="p")&&o.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?o.push(...p.children):o.push(p)}const h=r[r.length-1];h&&(a||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return n.patch(e,d),n.applyData(e,d)}function n6(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=oC(t[r])}return e}function oC(n){const e=n.spread;return e??n.children.length>1}function r6(n,e){const t={},r=n.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function i6(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function a6(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function l6(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function s6(n,e){const t=n.all(e),r=t.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),a.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},c=vy(e.children[1]),h=q2(e.children[e.children.length-1]);c&&h&&(o.position={start:c,end:h}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(a,!0)};return n.patch(e,s),n.applyData(e,s)}function o6(n,e,t){const r=t?t.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,c=o?o.length:e.children.length;let h=-1;const d=[];for(;++h<c;){const g=e.children[h],b={},w=o?o[h]:void 0;w&&(b.align=w);let A={type:"element",tagName:s,properties:b,children:[]};g&&(A.children=n.all(g),n.patch(g,A),A=n.applyData(g,A)),d.push(A)}const p={type:"element",tagName:"tr",properties:{},children:n.wrap(d,!0)};return n.patch(e,p),n.applyData(e,p)}function u6(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const jk=9,Ok=32;function c6(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),a=0;const s=[];for(;r;)s.push(Rk(e.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=t.exec(e);return s.push(Rk(e.slice(a),a>0,!1)),s.join("")}function Rk(n,e,t){let r=0,a=n.length;if(e){let s=n.codePointAt(r);for(;s===jk||s===Ok;)r++,s=n.codePointAt(r)}if(t){let s=n.codePointAt(a-1);for(;s===jk||s===Ok;)a--,s=n.codePointAt(a-1)}return a>r?n.slice(r,a):""}function h6(n,e){const t={type:"text",value:c6(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function f6(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const d6={blockquote:UO,break:FO,code:VO,delete:KO,emphasis:GO,footnoteReference:YO,heading:QO,html:XO,imageReference:$O,image:WO,inlineCode:ZO,linkReference:JO,link:e6,listItem:t6,list:r6,paragraph:i6,root:a6,strong:l6,table:s6,tableCell:u6,tableRow:o6,text:h6,thematicBreak:f6,toml:jf,yaml:jf,definition:jf,footnoteDefinition:jf};function jf(){}const uC=-1,qd=0,Mc=1,bd=2,Ty=3,Ey=4,Ny=5,My=6,cC=7,hC=8,Bk=typeof self=="object"?self:globalThis,p6=(n,e)=>{const t=(a,s)=>(n.set(s,a),a),r=a=>{if(n.has(a))return n.get(a);const[s,o]=e[a];switch(s){case qd:case uC:return t(o,a);case Mc:{const c=t([],a);for(const h of o)c.push(r(h));return c}case bd:{const c=t({},a);for(const[h,d]of o)c[r(h)]=r(d);return c}case Ty:return t(new Date(o),a);case Ey:{const{source:c,flags:h}=o;return t(new RegExp(c,h),a)}case Ny:{const c=t(new Map,a);for(const[h,d]of o)c.set(r(h),r(d));return c}case My:{const c=t(new Set,a);for(const h of o)c.add(r(h));return c}case cC:{const{name:c,message:h}=o;return t(new Bk[c](h),a)}case hC:return t(BigInt(o),a);case"BigInt":return t(Object(BigInt(o)),a);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return t(new DataView(c),o)}}return t(new Bk[s](o),a)};return r},Lk=n=>p6(new Map,n)(0),ko="",{toString:m6}={},{keys:g6}=Object,fc=n=>{const e=typeof n;if(e!=="object"||!n)return[qd,e];const t=m6.call(n).slice(8,-1);switch(t){case"Array":return[Mc,ko];case"Object":return[bd,ko];case"Date":return[Ty,ko];case"RegExp":return[Ey,ko];case"Map":return[Ny,ko];case"Set":return[My,ko];case"DataView":return[Mc,t]}return t.includes("Array")?[Mc,t]:t.includes("Error")?[cC,t]:[bd,t]},Of=([n,e])=>n===qd&&(e==="function"||e==="symbol"),y6=(n,e,t,r)=>{const a=(o,c)=>{const h=r.push(o)-1;return t.set(c,h),h},s=o=>{if(t.has(o))return t.get(o);let[c,h]=fc(o);switch(c){case qd:{let p=o;switch(h){case"bigint":c=hC,p=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+h);p=null;break;case"undefined":return a([uC],o)}return a([c,p],o)}case Mc:{if(h){let b=o;return h==="DataView"?b=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(b=new Uint8Array(o)),a([h,[...b]],o)}const p=[],g=a([c,p],o);for(const b of o)p.push(s(b));return g}case bd:{if(h)switch(h){case"BigInt":return a([h,o.toString()],o);case"Boolean":case"Number":case"String":return a([h,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const p=[],g=a([c,p],o);for(const b of g6(o))(n||!Of(fc(o[b])))&&p.push([s(b),s(o[b])]);return g}case Ty:return a([c,o.toISOString()],o);case Ey:{const{source:p,flags:g}=o;return a([c,{source:p,flags:g}],o)}case Ny:{const p=[],g=a([c,p],o);for(const[b,w]of o)(n||!(Of(fc(b))||Of(fc(w))))&&p.push([s(b),s(w)]);return g}case My:{const p=[],g=a([c,p],o);for(const b of o)(n||!Of(fc(b)))&&p.push(s(b));return g}}const{message:d}=o;return a([c,{name:h,message:d}],o)};return s},zk=(n,{json:e,lossy:t}={})=>{const r=[];return y6(!(e||t),!!e,new Map,r)(n),r},kd=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Lk(zk(n,e)):structuredClone(n):(n,e)=>Lk(zk(n,e));function x6(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function v6(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function b6(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||x6,r=n.options.footnoteBackLabel||v6,a=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<n.footnoteOrder.length;){const d=n.footnoteById.get(n.footnoteOrder[h]);if(!d)continue;const p=n.all(d),g=String(d.identifier).toUpperCase(),b=tu(g.toLowerCase());let w=0;const A=[],N=n.footnoteCounts.get(g);for(;N!==void 0&&++w<=N;){A.length>0&&A.push({type:"text",value:" "});let H=typeof t=="string"?t:t(h,w);typeof H=="string"&&(H={type:"text",value:H}),A.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,w),className:["data-footnote-backref"]},children:Array.isArray(H)?H:[H]})}const _=p[p.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const H=_.children[_.children.length-1];H&&H.type==="text"?H.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...A)}else p.push(...A);const O={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:n.wrap(p,!0)};n.patch(d,O),c.push(O)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...kd(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(c,!0)},{type:"text",value:`
`}]}}const Ud=(function(n){if(n==null)return C6;if(typeof n=="function")return Fd(n);if(typeof n=="object")return Array.isArray(n)?k6(n):w6(n);if(typeof n=="string")return S6(n);throw new Error("Expected function, string, or object as test")});function k6(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Ud(n[t]);return Fd(r);function r(...a){let s=-1;for(;++s<e.length;)if(e[s].apply(this,a))return!0;return!1}}function w6(n){const e=n;return Fd(t);function t(r){const a=r;let s;for(s in n)if(a[s]!==e[s])return!1;return!0}}function S6(n){return Fd(e);function e(t){return t&&t.type===n}}function Fd(n){return e;function e(t,r,a){return!!(A6(t)&&n.call(this,t,typeof r=="number"?r:void 0,a||void 0))}}function C6(){return!0}function A6(n){return n!==null&&typeof n=="object"&&"type"in n}const fC=[],T6=!0,D0=!1,E6="skip";function dC(n,e,t,r){let a;typeof e=="function"&&typeof t!="function"?(r=t,t=e):a=e;const s=Ud(a),o=r?-1:1;c(n,void 0,[])();function c(h,d,p){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const w=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(h.type+(w?"<"+w+">":""))+")"})}return b;function b(){let w=fC,A,N,_;if((!e||s(h,d,p[p.length-1]||void 0))&&(w=N6(t(h,p)),w[0]===D0))return w;if("children"in h&&h.children){const O=h;if(O.children&&w[0]!==E6)for(N=(r?O.children.length:-1)+o,_=p.concat(O);N>-1&&N<O.children.length;){const H=O.children[N];if(A=c(H,N,_)(),A[0]===D0)return A;N=typeof A[1]=="number"?A[1]:N+o}}return w}}}function N6(n){return Array.isArray(n)?n:typeof n=="number"?[T6,n]:n==null?fC:[n]}function _y(n,e,t,r){let a,s,o;typeof e=="function"&&typeof t!="function"?(s=void 0,o=e,a=t):(s=e,o=t,a=r),dC(n,s,c,a);function c(h,d){const p=d[d.length-1],g=p?p.children.indexOf(h):void 0;return o(h,g,p)}}const j0={}.hasOwnProperty,M6={};function _6(n,e){const t=e||M6,r=new Map,a=new Map,s=new Map,o={...d6,...t.handlers},c={all:d,applyData:j6,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:h,options:t,patch:D6,wrap:R6};return _y(n,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?r:a,b=String(p.identifier).toUpperCase();g.has(b)||g.set(b,p)}}),c;function h(p,g){const b=p.type,w=c.handlers[b];if(j0.call(c.handlers,b)&&w)return w(c,p,g);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in p){const{children:N,..._}=p,O=kd(_);return O.children=c.all(p),O}return kd(p)}return(c.options.unknownHandler||O6)(c,p,g)}function d(p){const g=[];if("children"in p){const b=p.children;let w=-1;for(;++w<b.length;){const A=c.one(b[w],p);if(A){if(w&&b[w-1].type==="break"&&(!Array.isArray(A)&&A.type==="text"&&(A.value=Ik(A.value)),!Array.isArray(A)&&A.type==="element")){const N=A.children[0];N&&N.type==="text"&&(N.value=Ik(N.value))}Array.isArray(A)?g.push(...A):g.push(A)}}}return g}}function D6(n,e){n.position&&(e.position=vD(n))}function j6(n,e){let t=e;if(n&&n.data){const r=n.data.hName,a=n.data.hChildren,s=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const o="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:o}}t.type==="element"&&s&&Object.assign(t.properties,kd(s)),"children"in t&&t.children&&a!==null&&a!==void 0&&(t.children=a)}return t}function O6(n,e){const t=e.data||{},r="value"in e&&!(j0.call(t,"hProperties")||j0.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function R6(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function Ik(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Pk(n,e){const t=_6(n,e),r=t.one(n,void 0),a=b6(t),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function B6(n,e){return n&&"run"in n?async function(t,r){const a=Pk(t,{file:r,...e});await n.run(a,r)}:function(t,r){return Pk(t,{file:r,...n||e})}}function Hk(n){if(n)throw n}var mg,qk;function L6(){if(qk)return mg;qk=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=n.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||n.call(d,b)},o=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(n.call(d,p)){if(r)return r(d,p).value}else return;return d[p]};return mg=function h(){var d,p,g,b,w,A,N=arguments[0],_=1,O=arguments.length,H=!1;for(typeof N=="boolean"&&(H=N,N=arguments[1]||{},_=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});_<O;++_)if(d=arguments[_],d!=null)for(p in d)g=c(N,p),b=c(d,p),N!==b&&(H&&b&&(s(b)||(w=a(b)))?(w?(w=!1,A=g&&a(g)?g:[]):A=g&&s(g)?g:{},o(N,{name:p,newValue:h(H,A,b)})):typeof b<"u"&&o(N,{name:p,newValue:b}));return N},mg}var z6=L6();const gg=Sd(z6);function O0(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function I6(){const n=[],e={run:t,use:r};return e;function t(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...a);function c(h,...d){const p=n[++s];let g=-1;if(h){o(h);return}for(;++g<a.length;)(d[g]===null||d[g]===void 0)&&(d[g]=a[g]);a=d,p?P6(p,c)(...d):o(null,...d)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return n.push(a),e}}function P6(n,e){let t;return r;function r(...o){const c=n.length>o.length;let h;c&&o.push(a);try{h=n.apply(this,o)}catch(d){const p=d;if(c&&t)throw p;return a(p)}c||(h&&h.then&&typeof h.then=="function"?h.then(s,a):h instanceof Error?a(h):s(h))}function a(o,...c){t||(t=!0,e(o,...c))}function s(o){a(null,o)}}const Gi={basename:H6,dirname:q6,extname:U6,join:F6,sep:"/"};function H6(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Zc(n);let t=0,r=-1,a=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;a--;)if(n.codePointAt(a)===47){if(s){t=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,c=e.length-1;for(;a--;)if(n.codePointAt(a)===47){if(s){t=a+1;break}}else o<0&&(s=!0,o=a+1),c>-1&&(n.codePointAt(a)===e.codePointAt(c--)?c<0&&(r=a):(c=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function q6(n){if(Zc(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function U6(n){Zc(n);let e=n.length,t=-1,r=0,a=-1,s=0,o;for(;e--;){const c=n.codePointAt(e);if(c===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),c===46?a<0?a=e:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||t<0||s===0||s===1&&a===t-1&&a===r+1?"":n.slice(a,t)}function F6(...n){let e=-1,t;for(;++e<n.length;)Zc(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":V6(t)}function V6(n){Zc(n);const e=n.codePointAt(0)===47;let t=K6(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function K6(n,e){let t="",r=0,a=-1,s=0,o=-1,c,h;for(;++o<=n.length;){if(o<n.length)c=n.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(h=t.lastIndexOf("/"),h!==t.length-1){h<0?(t="",r=0):(t=t.slice(0,h),r=t.length-1-t.lastIndexOf("/")),a=o,s=0;continue}}else if(t.length>0){t="",r=0,a=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(a+1,o):t=n.slice(a+1,o),r=o-a-1;a=o,s=0}else c===46&&s>-1?s++:s=-1}return t}function Zc(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const G6={cwd:Y6};function Y6(){return"/"}function R0(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function Q6(n){if(typeof n=="string")n=new URL(n);else if(!R0(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return X6(n)}function X6(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const yg=["history","path","basename","stem","extname","dirname"];class pC{constructor(e){let t;e?R0(e)?t={path:e}:typeof e=="string"||$6(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":G6.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yg.length;){const s=yg[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let a;for(a in t)yg.includes(a)||(this[a]=t[a])}get basename(){return typeof this.path=="string"?Gi.basename(this.path):void 0}set basename(e){vg(e,"basename"),xg(e,"basename"),this.path=Gi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Gi.dirname(this.path):void 0}set dirname(e){Uk(this.basename,"dirname"),this.path=Gi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Gi.extname(this.path):void 0}set extname(e){if(xg(e,"extname"),Uk(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){R0(e)&&(e=Q6(e)),vg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Gi.basename(this.path,this.extname):void 0}set stem(e){vg(e,"stem"),xg(e,"stem"),this.path=Gi.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const a=this.message(e,t,r);throw a.fatal=!0,a}info(e,t,r){const a=this.message(e,t,r);return a.fatal=void 0,a}message(e,t,r){const a=new mr(e,t,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function xg(n,e){if(n&&n.includes(Gi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Gi.sep+"`")}function vg(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Uk(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function $6(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const W6=(function(n){const r=this.constructor.prototype,a=r[n],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),Z6={}.hasOwnProperty;class Dy extends W6{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=I6()}copy(){const e=new Dy;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(gg(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(wg("data",this.frozen),this.namespace[e]=t,this):Z6.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wg("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=t.call(e,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Rf(e),r=this.parser||this.Parser;return bg("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),bg("process",this.parser||this.Parser),kg("process",this.compiler||this.Compiler),t?a(void 0,t):new Promise(a);function a(s,o){const c=Rf(e),h=r.parse(c);r.run(h,c,function(p,g,b){if(p||!g||!b)return d(p);const w=g,A=r.stringify(w,b);tR(A)?b.value=A:b.result=A,d(p,b)});function d(p,g){p||!g?o(p):s?s(g):t(void 0,g)}}}processSync(e){let t=!1,r;return this.freeze(),bg("processSync",this.parser||this.Parser),kg("processSync",this.compiler||this.Compiler),this.process(e,a),Vk("processSync","process",t),r;function a(s,o){t=!0,Hk(s),r=o}}run(e,t,r){Fk(e),this.freeze();const a=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(o,c){const h=Rf(t);a.run(e,h,d);function d(p,g,b){const w=g||e;p?c(p):o?o(w):r(void 0,w,b)}}}runSync(e,t){let r=!1,a;return this.run(e,t,s),Vk("runSync","run",r),a;function s(o,c){Hk(o),a=c,r=!0}}stringify(e,t){this.freeze();const r=Rf(t),a=this.compiler||this.Compiler;return kg("stringify",a),Fk(e),a(e,r)}use(e,...t){const r=this.attachers,a=this.namespace;if(wg("use",this.frozen),e!=null)if(typeof e=="function")h(e,t);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;h(p,g)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(a.settings=gg(!0,a.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];s(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,p){let g=-1,b=-1;for(;++g<r.length;)if(r[g][0]===d){b=g;break}if(b===-1)r.push([d,...p]);else if(p.length>0){let[w,...A]=p;const N=r[b][1];O0(N)&&O0(w)&&(w=gg(!0,N,w)),r[b]=[d,w,...A]}}}}const J6=new Dy().freeze();function bg(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function kg(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function wg(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Fk(n){if(!O0(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Vk(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Rf(n){return eR(n)?n:new pC(n)}function eR(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function tR(n){return typeof n=="string"||nR(n)}function nR(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const rR="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Kk=[],Gk={allowDangerousHtml:!0},iR=/^(https?|ircs?|mailto|xmpp)$/i,aR=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function B0(n){const e=lR(n),t=sR(n);return oR(e.runSync(e.parse(t),t),n)}function lR(n){const e=n.rehypePlugins||Kk,t=n.remarkPlugins||Kk,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Gk}:Gk;return J6().use(qO).use(t).use(B6,r).use(e)}function sR(n){const e=n.children||"",t=new pC;return typeof e=="string"&&(t.value=e),t}function oR(n,e){const t=e.allowedElements,r=e.allowElement,a=e.components,s=e.disallowedElements,o=e.skipHtml,c=e.unwrapDisallowed,h=e.urlTransform||uR;for(const p of aR)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+rR+p.id,void 0);return _y(n,d),CD(n,{Fragment:k.Fragment,components:a,ignoreInvalidStyle:!0,jsx:k.jsx,jsxs:k.jsxs,passKeys:!0,passNode:!0});function d(p,g,b){if(p.type==="raw"&&b&&typeof g=="number")return o?b.children.splice(g,1):b.children[g]={type:"text",value:p.value},g;if(p.type==="element"){let w;for(w in fg)if(Object.hasOwn(fg,w)&&Object.hasOwn(p.properties,w)){const A=p.properties[w],N=fg[w];(N===null||N.includes(p.tagName))&&(p.properties[w]=h(String(A||""),w,p))}}if(p.type==="element"){let w=t?!t.includes(p.tagName):s?s.includes(p.tagName):!1;if(!w&&r&&typeof g=="number"&&(w=!r(p,g,b)),w&&b&&typeof g=="number")return c&&p.children?b.children.splice(g,1,...p.children):b.children.splice(g,1),g}}}function uR(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),a=n.indexOf("/");return e===-1||a!==-1&&e>a||t!==-1&&e>t||r!==-1&&e>r||iR.test(n.slice(0,e))?n:""}function Yk(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,a=t.indexOf(e);for(;a!==-1;)r++,a=t.indexOf(e,a+e.length);return r}function cR(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function hR(n,e,t){const a=Ud((t||{}).ignore||[]),s=fR(e);let o=-1;for(;++o<s.length;)dC(n,"text",c);function c(d,p){let g=-1,b;for(;++g<p.length;){const w=p[g],A=b?b.children:void 0;if(a(w,A?A.indexOf(w):void 0,b))return;b=w}if(b)return h(d,p)}function h(d,p){const g=p[p.length-1],b=s[o][0],w=s[o][1];let A=0;const _=g.children.indexOf(d);let O=!1,H=[];b.lastIndex=0;let R=b.exec(d.value);for(;R;){const ee=R.index,Z={index:R.index,input:R.input,stack:[...p,d]};let I=w(...R,Z);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?b.lastIndex=ee+1:(A!==ee&&H.push({type:"text",value:d.value.slice(A,ee)}),Array.isArray(I)?H.push(...I):I&&H.push(I),A=ee+R[0].length,O=!0),!b.global)break;R=b.exec(d.value)}return O?(A<d.value.length&&H.push({type:"text",value:d.value.slice(A)}),g.children.splice(_,1,...H)):H=[d],_+H.length}}function fR(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const a=t[r];e.push([dR(a[0]),pR(a[1])])}return e}function dR(n){return typeof n=="string"?new RegExp(cR(n),"g"):n}function pR(n){return typeof n=="function"?n:function(){return n}}const Sg="phrasing",Cg=["autolink","link","image","label"];function mR(){return{transforms:[wR],enter:{literalAutolink:yR,literalAutolinkEmail:Ag,literalAutolinkHttp:Ag,literalAutolinkWww:Ag},exit:{literalAutolink:kR,literalAutolinkEmail:bR,literalAutolinkHttp:xR,literalAutolinkWww:vR}}}function gR(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Sg,notInConstruct:Cg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Sg,notInConstruct:Cg},{character:":",before:"[ps]",after:"\\/",inConstruct:Sg,notInConstruct:Cg}]}}function yR(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function Ag(n){this.config.enter.autolinkProtocol.call(this,n)}function xR(n){this.config.exit.autolinkProtocol.call(this,n)}function vR(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function bR(n){this.config.exit.autolinkEmail.call(this,n)}function kR(n){this.exit(n)}function wR(n){hR(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,SR],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,CR]],{ignore:["link","linkReference"]})}function SR(n,e,t,r,a){let s="";if(!mC(a)||(/^w/i.test(e)&&(t=e+t,e="",s="http://"),!AR(t)))return!1;const o=TR(t+r);if(!o[0])return!1;const c={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function CR(n,e,t,r){return!mC(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function AR(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function TR(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const a=Yk(n,"(");let s=Yk(n,")");for(;r!==-1&&a>s;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),s++;return[n,t]}function mC(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||As(t)||Pd(t))&&(!e||t!==47)}gC.peek=BR;function ER(){this.buffer()}function NR(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function MR(){this.buffer()}function _R(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function DR(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Si(this.sliceSerialize(n)).toLowerCase(),t.label=e}function jR(n){this.exit(n)}function OR(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Si(this.sliceSerialize(n)).toLowerCase(),t.label=e}function RR(n){this.exit(n)}function BR(){return"["}function gC(n,e,t,r){const a=t.createTracker(r);let s=a.move("[^");const o=t.enter("footnoteReference"),c=t.enter("reference");return s+=a.move(t.safe(t.associationId(n),{after:"]",before:s})),c(),o(),s+=a.move("]"),s}function LR(){return{enter:{gfmFootnoteCallString:ER,gfmFootnoteCall:NR,gfmFootnoteDefinitionLabelString:MR,gfmFootnoteDefinition:_R},exit:{gfmFootnoteCallString:DR,gfmFootnoteCall:jR,gfmFootnoteDefinitionLabelString:OR,gfmFootnoteDefinition:RR}}}function zR(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:gC},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,a,s,o){const c=s.createTracker(o);let h=c.move("[^");const d=s.enter("footnoteDefinition"),p=s.enter("label");return h+=c.move(s.safe(s.associationId(r),{before:h,after:"]"})),p(),h+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),h+=c.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,c.current()),e?yC:IR))),d(),h}}function IR(n,e,t){return e===0?n:yC(n,e,t)}function yC(n,e,t){return(t?"":"    ")+n}const PR=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];xC.peek=VR;function HR(){return{canContainEols:["delete"],enter:{strikethrough:UR},exit:{strikethrough:FR}}}function qR(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:PR}],handlers:{delete:xC}}}function UR(n){this.enter({type:"delete",children:[]},n)}function FR(n){this.exit(n)}function xC(n,e,t,r){const a=t.createTracker(r),s=t.enter("strikethrough");let o=a.move("~~");return o+=t.containerPhrasing(n,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function VR(){return"~"}function KR(n){return n.length}function GR(n,e){const t=e||{},r=(t.align||[]).concat(),a=t.stringLength||KR,s=[],o=[],c=[],h=[];let d=0,p=-1;for(;++p<n.length;){const N=[],_=[];let O=-1;for(n[p].length>d&&(d=n[p].length);++O<n[p].length;){const H=YR(n[p][O]);if(t.alignDelimiters!==!1){const R=a(H);_[O]=R,(h[O]===void 0||R>h[O])&&(h[O]=R)}N.push(H)}o[p]=N,c[p]=_}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<d;)s[g]=Qk(r[g]);else{const N=Qk(r);for(;++g<d;)s[g]=N}g=-1;const b=[],w=[];for(;++g<d;){const N=s[g];let _="",O="";N===99?(_=":",O=":"):N===108?_=":":N===114&&(O=":");let H=t.alignDelimiters===!1?1:Math.max(1,h[g]-_.length-O.length);const R=_+"-".repeat(H)+O;t.alignDelimiters!==!1&&(H=_.length+H+O.length,H>h[g]&&(h[g]=H),w[g]=H),b[g]=R}o.splice(1,0,b),c.splice(1,0,w),p=-1;const A=[];for(;++p<o.length;){const N=o[p],_=c[p];g=-1;const O=[];for(;++g<d;){const H=N[g]||"";let R="",ee="";if(t.alignDelimiters!==!1){const Z=h[g]-(_[g]||0),I=s[g];I===114?R=" ".repeat(Z):I===99?Z%2?(R=" ".repeat(Z/2+.5),ee=" ".repeat(Z/2-.5)):(R=" ".repeat(Z/2),ee=R):ee=" ".repeat(Z)}t.delimiterStart!==!1&&!g&&O.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&H==="")&&(t.delimiterStart!==!1||g)&&O.push(" "),t.alignDelimiters!==!1&&O.push(R),O.push(H),t.alignDelimiters!==!1&&O.push(ee),t.padding!==!1&&O.push(" "),(t.delimiterEnd!==!1||g!==d-1)&&O.push("|")}A.push(t.delimiterEnd===!1?O.join("").replace(/ +$/,""):O.join(""))}return A.join(`
`)}function YR(n){return n==null?"":String(n)}function Qk(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function QR(n,e,t,r){const a=t.enter("blockquote"),s=t.createTracker(r);s.move("> "),s.shift(2);const o=t.indentLines(t.containerFlow(n,s.current()),XR);return a(),o}function XR(n,e,t){return">"+(t?"":" ")+n}function $R(n,e){return Xk(n,e.inConstruct,!0)&&!Xk(n,e.notInConstruct,!1)}function Xk(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function $k(n,e,t,r){let a=-1;for(;++a<t.unsafe.length;)if(t.unsafe[a].character===`
`&&$R(t.stack,t.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function WR(n,e){const t=String(n);let r=t.indexOf(e),a=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+e.length,r=t.indexOf(e,a);return o}function ZR(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function JR(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function e8(n,e,t,r){const a=JR(t),s=n.value||"",o=a==="`"?"GraveAccent":"Tilde";if(ZR(n,t)){const g=t.enter("codeIndented"),b=t.indentLines(s,t8);return g(),b}const c=t.createTracker(r),h=a.repeat(Math.max(WR(s,a)+1,3)),d=t.enter("codeFenced");let p=c.move(h);if(n.lang){const g=t.enter(`codeFencedLang${o}`);p+=c.move(t.safe(n.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(n.lang&&n.meta){const g=t.enter(`codeFencedMeta${o}`);p+=c.move(" "),p+=c.move(t.safe(n.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),s&&(p+=c.move(s+`
`)),p+=c.move(h),d(),p}function t8(n,e,t){return(t?"":"    ")+n}function jy(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function n8(n,e,t,r){const a=jy(t),s=a==='"'?"Quote":"Apostrophe",o=t.enter("definition");let c=t.enter("label");const h=t.createTracker(r);let d=h.move("[");return d+=h.move(t.safe(t.associationId(n),{before:d,after:"]",...h.current()})),d+=h.move("]: "),c(),!n.url||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(t.safe(n.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=t.enter("destinationRaw"),d+=h.move(t.safe(n.url,{before:d,after:n.title?" ":`
`,...h.current()}))),c(),n.title&&(c=t.enter(`title${s}`),d+=h.move(" "+a),d+=h.move(t.safe(n.title,{before:d,after:a,...h.current()})),d+=h.move(a),c()),o(),d}function r8(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Uc(n){return"&#x"+n.toString(16).toUpperCase()+";"}function wd(n,e,t){const r=Xo(n),a=Xo(e);return r===void 0?a===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}vC.peek=i8;function vC(n,e,t,r){const a=r8(t),s=t.enter("emphasis"),o=t.createTracker(r),c=o.move(a);let h=o.move(t.containerPhrasing(n,{after:a,before:c,...o.current()}));const d=h.charCodeAt(0),p=wd(r.before.charCodeAt(r.before.length-1),d,a);p.inside&&(h=Uc(d)+h.slice(1));const g=h.charCodeAt(h.length-1),b=wd(r.after.charCodeAt(0),g,a);b.inside&&(h=h.slice(0,-1)+Uc(g));const w=o.move(a);return s(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+h+w}function i8(n,e,t){return t.options.emphasis||"*"}function a8(n,e){let t=!1;return _y(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,D0}),!!((!n.depth||n.depth<3)&&Sy(n)&&(e.options.setext||t))}function l8(n,e,t,r){const a=Math.max(Math.min(6,n.depth||1),1),s=t.createTracker(r);if(a8(n,t)){const p=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const o="#".repeat(a),c=t.enter("headingAtx"),h=t.enter("phrasing");s.move(o+" ");let d=t.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Uc(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,t.options.closeAtx&&(d+=" "+o),h(),c(),d}bC.peek=s8;function bC(n){return n.value||""}function s8(){return"<"}kC.peek=o8;function kC(n,e,t,r){const a=jy(t),s=a==='"'?"Quote":"Apostrophe",o=t.enter("image");let c=t.enter("label");const h=t.createTracker(r);let d=h.move("![");return d+=h.move(t.safe(n.alt,{before:d,after:"]",...h.current()})),d+=h.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(t.safe(n.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=t.enter("destinationRaw"),d+=h.move(t.safe(n.url,{before:d,after:n.title?" ":")",...h.current()}))),c(),n.title&&(c=t.enter(`title${s}`),d+=h.move(" "+a),d+=h.move(t.safe(n.title,{before:d,after:a,...h.current()})),d+=h.move(a),c()),d+=h.move(")"),o(),d}function o8(){return"!"}wC.peek=u8;function wC(n,e,t,r){const a=n.referenceType,s=t.enter("imageReference");let o=t.enter("label");const c=t.createTracker(r);let h=c.move("![");const d=t.safe(n.alt,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const p=t.stack;t.stack=[],o=t.enter("reference");const g=t.safe(t.associationId(n),{before:h,after:"]",...c.current()});return o(),t.stack=p,s(),a==="full"||!d||d!==g?h+=c.move(g+"]"):a==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function u8(){return"!"}SC.peek=c8;function SC(n,e,t){let r=n.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<t.unsafe.length;){const o=t.unsafe[s],c=t.compilePattern(o);let h;if(o.atBreak)for(;h=c.exec(r);){let d=h.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(h.index+1)}}return a+r+a}function c8(){return"`"}function CC(n,e){const t=Sy(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}AC.peek=h8;function AC(n,e,t,r){const a=jy(t),s=a==='"'?"Quote":"Apostrophe",o=t.createTracker(r);let c,h;if(CC(n,t)){const p=t.stack;t.stack=[],c=t.enter("autolink");let g=o.move("<");return g+=o.move(t.containerPhrasing(n,{before:g,after:">",...o.current()})),g+=o.move(">"),c(),t.stack=p,g}c=t.enter("link"),h=t.enter("label");let d=o.move("[");return d+=o.move(t.containerPhrasing(n,{before:d,after:"](",...o.current()})),d+=o.move("]("),h(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(h=t.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(t.safe(n.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(h=t.enter("destinationRaw"),d+=o.move(t.safe(n.url,{before:d,after:n.title?" ":")",...o.current()}))),h(),n.title&&(h=t.enter(`title${s}`),d+=o.move(" "+a),d+=o.move(t.safe(n.title,{before:d,after:a,...o.current()})),d+=o.move(a),h()),d+=o.move(")"),c(),d}function h8(n,e,t){return CC(n,t)?"<":"["}TC.peek=f8;function TC(n,e,t,r){const a=n.referenceType,s=t.enter("linkReference");let o=t.enter("label");const c=t.createTracker(r);let h=c.move("[");const d=t.containerPhrasing(n,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const p=t.stack;t.stack=[],o=t.enter("reference");const g=t.safe(t.associationId(n),{before:h,after:"]",...c.current()});return o(),t.stack=p,s(),a==="full"||!d||d!==g?h+=c.move(g+"]"):a==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function f8(){return"["}function Oy(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function d8(n){const e=Oy(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function p8(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function EC(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function m8(n,e,t,r){const a=t.enter("list"),s=t.bulletCurrent;let o=n.ordered?p8(t):Oy(t);const c=n.ordered?o==="."?")":".":d8(t);let h=e&&t.bulletLastUsed?o===t.bulletLastUsed:!1;if(!n.ordered){const p=n.children?n.children[0]:void 0;if((o==="*"||o==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(h=!0),EC(t)===o&&p){let g=-1;for(;++g<n.children.length;){const b=n.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(o=c),t.bulletCurrent=o;const d=t.containerFlow(n,r);return t.bulletLastUsed=o,t.bulletCurrent=s,a(),d}function g8(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function y8(n,e,t,r){const a=g8(t);let s=t.bulletCurrent||Oy(t);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(o=Math.ceil(o/4)*4);const c=t.createTracker(r);c.move(s+" ".repeat(o-s.length)),c.shift(o);const h=t.enter("listItem"),d=t.indentLines(t.containerFlow(n,c.current()),p);return h(),d;function p(g,b,w){return b?(w?"":" ".repeat(o))+g:(w?s:s+" ".repeat(o-s.length))+g}}function x8(n,e,t,r){const a=t.enter("paragraph"),s=t.enter("phrasing"),o=t.containerPhrasing(n,r);return s(),a(),o}const v8=Ud(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function b8(n,e,t,r){return(n.children.some(function(o){return v8(o)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function k8(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}NC.peek=w8;function NC(n,e,t,r){const a=k8(t),s=t.enter("strong"),o=t.createTracker(r),c=o.move(a+a);let h=o.move(t.containerPhrasing(n,{after:a,before:c,...o.current()}));const d=h.charCodeAt(0),p=wd(r.before.charCodeAt(r.before.length-1),d,a);p.inside&&(h=Uc(d)+h.slice(1));const g=h.charCodeAt(h.length-1),b=wd(r.after.charCodeAt(0),g,a);b.inside&&(h=h.slice(0,-1)+Uc(g));const w=o.move(a+a);return s(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+h+w}function w8(n,e,t){return t.options.strong||"*"}function S8(n,e,t,r){return t.safe(n.value,r)}function C8(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function A8(n,e,t){const r=(EC(t)+(t.options.ruleSpaces?" ":"")).repeat(C8(t));return t.options.ruleSpaces?r.slice(0,-1):r}const MC={blockquote:QR,break:$k,code:e8,definition:n8,emphasis:vC,hardBreak:$k,heading:l8,html:bC,image:kC,imageReference:wC,inlineCode:SC,link:AC,linkReference:TC,list:m8,listItem:y8,paragraph:x8,root:b8,strong:NC,text:S8,thematicBreak:A8};function T8(){return{enter:{table:E8,tableData:Wk,tableHeader:Wk,tableRow:M8},exit:{codeText:_8,table:N8,tableData:Tg,tableHeader:Tg,tableRow:Tg}}}function E8(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function N8(n){this.exit(n),this.data.inTable=void 0}function M8(n){this.enter({type:"tableRow",children:[]},n)}function Tg(n){this.exit(n)}function Wk(n){this.enter({type:"tableCell",children:[]},n)}function _8(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,D8));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function D8(n,e){return e==="|"?e:n}function j8(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,a=e.stringLength,s=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:o,tableCell:h,tableRow:c}};function o(w,A,N,_){return d(p(w,N,_),w.align)}function c(w,A,N,_){const O=g(w,N,_),H=d([O]);return H.slice(0,H.indexOf(`
`))}function h(w,A,N,_){const O=N.enter("tableCell"),H=N.enter("phrasing"),R=N.containerPhrasing(w,{..._,before:s,after:s});return H(),O(),R}function d(w,A){return GR(w,{align:A,alignDelimiters:r,padding:t,stringLength:a})}function p(w,A,N){const _=w.children;let O=-1;const H=[],R=A.enter("table");for(;++O<_.length;)H[O]=g(_[O],A,N);return R(),H}function g(w,A,N){const _=w.children;let O=-1;const H=[],R=A.enter("tableRow");for(;++O<_.length;)H[O]=h(_[O],w,A,N);return R(),H}function b(w,A,N){let _=MC.inlineCode(w,A,N);return N.stack.includes("tableCell")&&(_=_.replace(/\|/g,"\\$&")),_}}function O8(){return{exit:{taskListCheckValueChecked:Zk,taskListCheckValueUnchecked:Zk,paragraph:B8}}}function R8(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:L8}}}function Zk(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function B8(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const a=e.children;let s=-1,o;for(;++s<a.length;){const c=a[s];if(c.type==="paragraph"){o=c;break}}o===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function L8(n,e,t,r){const a=n.children[0],s=typeof n.checked=="boolean"&&a&&a.type==="paragraph",o="["+(n.checked?"x":" ")+"] ",c=t.createTracker(r);s&&c.move(o);let h=MC.listItem(n,e,t,{...r,...c.current()});return s&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),h;function d(p){return p+o}}function z8(){return[mR(),LR(),HR(),T8(),O8()]}function I8(n){return{extensions:[gR(),zR(n),qR(),j8(n),R8()]}}const P8={tokenize:K8,partial:!0},_C={tokenize:G8,partial:!0},DC={tokenize:Y8,partial:!0},jC={tokenize:Q8,partial:!0},H8={tokenize:X8,partial:!0},OC={name:"wwwAutolink",tokenize:F8,previous:BC},RC={name:"protocolAutolink",tokenize:V8,previous:LC},La={name:"emailAutolink",tokenize:U8,previous:zC},ta={};function q8(){return{text:ta}}let ps=48;for(;ps<123;)ta[ps]=La,ps++,ps===58?ps=65:ps===91&&(ps=97);ta[43]=La;ta[45]=La;ta[46]=La;ta[95]=La;ta[72]=[La,RC];ta[104]=[La,RC];ta[87]=[La,OC];ta[119]=[La,OC];function U8(n,e,t){const r=this;let a,s;return o;function o(g){return!L0(g)||!zC.call(r,r.previous)||Ry(r.events)?t(g):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),c(g))}function c(g){return L0(g)?(n.consume(g),c):g===64?(n.consume(g),h):t(g)}function h(g){return g===46?n.check(H8,p,d)(g):g===45||g===95||dr(g)?(s=!0,n.consume(g),h):p(g)}function d(g){return n.consume(g),a=!0,h}function p(g){return s&&a&&br(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(g)):t(g)}}function F8(n,e,t){const r=this;return a;function a(o){return o!==87&&o!==119||!BC.call(r,r.previous)||Ry(r.events)?t(o):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(P8,n.attempt(_C,n.attempt(DC,s),t),t)(o))}function s(o){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(o)}}function V8(n,e,t){const r=this;let a="",s=!1;return o;function o(g){return(g===72||g===104)&&LC.call(r,r.previous)&&!Ry(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),a+=String.fromCodePoint(g),n.consume(g),c):t(g)}function c(g){if(br(g)&&a.length<5)return a+=String.fromCodePoint(g),n.consume(g),c;if(g===58){const b=a.toLowerCase();if(b==="http"||b==="https")return n.consume(g),h}return t(g)}function h(g){return g===47?(n.consume(g),s?d:(s=!0,h)):t(g)}function d(g){return g===null||vd(g)||on(g)||As(g)||Pd(g)?t(g):n.attempt(_C,n.attempt(DC,p),t)(g)}function p(g){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(g)}}function K8(n,e,t){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,n.consume(o),a):o===46&&r===3?(n.consume(o),s):t(o)}function s(o){return o===null?t(o):e(o)}}function G8(n,e,t){let r,a,s;return o;function o(d){return d===46||d===95?n.check(jC,h,c)(d):d===null||on(d)||As(d)||d!==45&&Pd(d)?h(d):(s=!0,n.consume(d),o)}function c(d){return d===95?r=!0:(a=r,r=void 0),n.consume(d),o}function h(d){return a||r||!s?t(d):e(d)}}function Y8(n,e){let t=0,r=0;return a;function a(o){return o===40?(t++,n.consume(o),a):o===41&&r<t?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?n.check(jC,e,s)(o):o===null||on(o)||As(o)?e(o):(n.consume(o),a)}function s(o){return o===41&&r++,n.consume(o),a}}function Q8(n,e,t){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(n.consume(c),r):c===38?(n.consume(c),s):c===93?(n.consume(c),a):c===60||c===null||on(c)||As(c)?e(c):t(c)}function a(c){return c===null||c===40||c===91||on(c)||As(c)?e(c):r(c)}function s(c){return br(c)?o(c):t(c)}function o(c){return c===59?(n.consume(c),r):br(c)?(n.consume(c),o):t(c)}}function X8(n,e,t){return r;function r(s){return n.consume(s),a}function a(s){return dr(s)?t(s):e(s)}}function BC(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||on(n)}function LC(n){return!br(n)}function zC(n){return!(n===47||L0(n))}function L0(n){return n===43||n===45||n===46||n===95||dr(n)}function Ry(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const $8={tokenize:iB,partial:!0};function W8(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tB,continuation:{tokenize:nB},exit:rB}},text:{91:{name:"gfmFootnoteCall",tokenize:eB},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Z8,resolveTo:J8}}}}function Z8(n,e,t){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const h=r.events[a][1];if(h.type==="labelImage"){o=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return c;function c(h){if(!o||!o._balanced)return t(h);const d=Si(r.sliceSerialize({start:o.end,end:r.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?t(h):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),e(h))}}function J8(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},n[n.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},c=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",a,e],["exit",a,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...c),n}function eB(n,e,t){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return c;function c(g){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?t(g):(n.enter("gfmFootnoteCallMarker"),n.consume(g),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",d)}function d(g){if(s>999||g===93&&!o||g===null||g===91||on(g))return t(g);if(g===93){n.exit("chunkString");const b=n.exit("gfmFootnoteCallString");return a.includes(Si(r.sliceSerialize(b)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(g)}return on(g)||(o=!0),s++,n.consume(g),g===92?p:d}function p(g){return g===91||g===92||g===93?(n.consume(g),s++,d):d(g)}}function tB(n,e,t){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,c;return h;function h(A){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(A),n.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(A){return A===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(A),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",p):t(A)}function p(A){if(o>999||A===93&&!c||A===null||A===91||on(A))return t(A);if(A===93){n.exit("chunkString");const N=n.exit("gfmFootnoteDefinitionLabelString");return s=Si(r.sliceSerialize(N)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(A),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),b}return on(A)||(c=!0),o++,n.consume(A),A===92?g:p}function g(A){return A===91||A===92||A===93?(n.consume(A),o++,p):p(A)}function b(A){return A===58?(n.enter("definitionMarker"),n.consume(A),n.exit("definitionMarker"),a.includes(s)||a.push(s),Rt(n,w,"gfmFootnoteDefinitionWhitespace")):t(A)}function w(A){return e(A)}}function nB(n,e,t){return n.check(Wc,e,n.attempt($8,e,t))}function rB(n){n.exit("gfmFootnoteDefinition")}function iB(n,e,t){const r=this;return Rt(n,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):t(s)}}function aB(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,c){let h=-1;for(;++h<o.length;)if(o[h][0]==="enter"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._close){let d=h;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[h][1].end.offset-o[h][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[h][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[h][1].end)},g={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[h][1].start)},b=[["enter",p,c],["enter",o[d][1],c],["exit",o[d][1],c],["enter",g,c]],w=c.parser.constructs.insideSpan.null;w&&Gr(b,b.length,0,Hd(w,o.slice(d+1,h),c)),Gr(b,b.length,0,[["exit",g,c],["enter",o[h][1],c],["exit",o[h][1],c],["exit",p,c]]),Gr(o,d-1,h-d+3,b),h=d+b.length-2;break}}for(h=-1;++h<o.length;)o[h][1].type==="strikethroughSequenceTemporary"&&(o[h][1].type="data");return o}function s(o,c,h){const d=this.previous,p=this.events;let g=0;return b;function b(A){return d===126&&p[p.length-1][1].type!=="characterEscape"?h(A):(o.enter("strikethroughSequenceTemporary"),w(A))}function w(A){const N=Xo(d);if(A===126)return g>1?h(A):(o.consume(A),g++,w);if(g<2&&!t)return h(A);const _=o.exit("strikethroughSequenceTemporary"),O=Xo(A);return _._open=!O||O===2&&!!N,_._close=!N||N===2&&!!O,c(A)}}}class lB{constructor(){this.map=[]}add(e,t,r){sB(this,e,t,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let a=r.pop();for(;a;){for(const s of a)e.push(s);a=r.pop()}this.map.length=0}}function sB(n,e,t,r){let a=0;if(!(t===0&&r.length===0)){for(;a<n.map.length;){if(n.map[a][0]===e){n.map[a][1]+=t,n.map[a][2].push(...r);return}a+=1}n.map.push([e,t,r])}}function oB(n,e){let t=!1;const r=[];for(;e<n.length;){const a=n[e];if(t){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function uB(){return{flow:{null:{name:"table",tokenize:cB,resolveAll:hB}}}}function cB(n,e,t){const r=this;let a=0,s=0,o;return c;function c(L){let J=r.events.length-1;for(;J>-1;){const he=r.events[J][1].type;if(he==="lineEnding"||he==="linePrefix")J--;else break}const ne=J>-1?r.events[J][1].type:null,me=ne==="tableHead"||ne==="tableRow"?I:h;return me===I&&r.parser.lazy[r.now().line]?t(L):me(L)}function h(L){return n.enter("tableHead"),n.enter("tableRow"),d(L)}function d(L){return L===124||(o=!0,s+=1),p(L)}function p(L){return L===null?t(L):st(L)?s>1?(s=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(L),n.exit("lineEnding"),w):t(L):At(L)?Rt(n,p,"whitespace")(L):(s+=1,o&&(o=!1,a+=1),L===124?(n.enter("tableCellDivider"),n.consume(L),n.exit("tableCellDivider"),o=!0,p):(n.enter("data"),g(L)))}function g(L){return L===null||L===124||on(L)?(n.exit("data"),p(L)):(n.consume(L),L===92?b:g)}function b(L){return L===92||L===124?(n.consume(L),g):g(L)}function w(L){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(L):(n.enter("tableDelimiterRow"),o=!1,At(L)?Rt(n,A,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):A(L))}function A(L){return L===45||L===58?_(L):L===124?(o=!0,n.enter("tableCellDivider"),n.consume(L),n.exit("tableCellDivider"),N):Z(L)}function N(L){return At(L)?Rt(n,_,"whitespace")(L):_(L)}function _(L){return L===58?(s+=1,o=!0,n.enter("tableDelimiterMarker"),n.consume(L),n.exit("tableDelimiterMarker"),O):L===45?(s+=1,O(L)):L===null||st(L)?ee(L):Z(L)}function O(L){return L===45?(n.enter("tableDelimiterFiller"),H(L)):Z(L)}function H(L){return L===45?(n.consume(L),H):L===58?(o=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(L),n.exit("tableDelimiterMarker"),R):(n.exit("tableDelimiterFiller"),R(L))}function R(L){return At(L)?Rt(n,ee,"whitespace")(L):ee(L)}function ee(L){return L===124?A(L):L===null||st(L)?!o||a!==s?Z(L):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(L)):Z(L)}function Z(L){return t(L)}function I(L){return n.enter("tableRow"),U(L)}function U(L){return L===124?(n.enter("tableCellDivider"),n.consume(L),n.exit("tableCellDivider"),U):L===null||st(L)?(n.exit("tableRow"),e(L)):At(L)?Rt(n,U,"whitespace")(L):(n.enter("data"),ye(L))}function ye(L){return L===null||L===124||on(L)?(n.exit("data"),U(L)):(n.consume(L),L===92?fe:ye)}function fe(L){return L===92||L===124?(n.consume(L),ye):ye(L)}}function hB(n,e){let t=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],c=!1,h=0,d,p,g;const b=new lB;for(;++t<n.length;){const w=n[t],A=w[1];w[0]==="enter"?A.type==="tableHead"?(c=!1,h!==0&&(Jk(b,e,h,d,p),p=void 0,h=0),d={type:"table",start:Object.assign({},A.start),end:Object.assign({},A.end)},b.add(t,0,[["enter",d,e]])):A.type==="tableRow"||A.type==="tableDelimiterRow"?(r=!0,g=void 0,s=[0,0,0,0],o=[0,t+1,0,0],c&&(c=!1,p={type:"tableBody",start:Object.assign({},A.start),end:Object.assign({},A.end)},b.add(t,0,[["enter",p,e]])),a=A.type==="tableDelimiterRow"?2:p?3:1):a&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],g=Bf(b,e,s,a,void 0,g),s=[0,0,0,0]),o[2]=t)):A.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],g=Bf(b,e,s,a,void 0,g)),s=o,o=[s[1],t,0,0])):A.type==="tableHead"?(c=!0,h=t):A.type==="tableRow"||A.type==="tableDelimiterRow"?(h=t,s[1]!==0?(o[0]=o[1],g=Bf(b,e,s,a,t,g)):o[1]!==0&&(g=Bf(b,e,o,a,t,g)),a=0):a&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")&&(o[3]=t)}for(h!==0&&Jk(b,e,h,d,p),b.consume(e.events),t=-1;++t<e.events.length;){const w=e.events[t];w[0]==="enter"&&w[1].type==="table"&&(w[1]._align=oB(e.events,t))}return n}function Bf(n,e,t,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";t[0]!==0&&(s.end=Object.assign({},Ao(e.events,t[0])),n.add(t[0],0,[["exit",s,e]]));const h=Ao(e.events,t[1]);if(s={type:o,start:Object.assign({},h),end:Object.assign({},h)},n.add(t[1],0,[["enter",s,e]]),t[2]!==0){const d=Ao(e.events,t[2]),p=Ao(e.events,t[3]),g={type:c,start:Object.assign({},d),end:Object.assign({},p)};if(n.add(t[2],0,[["enter",g,e]]),r!==2){const b=e.events[t[2]],w=e.events[t[3]];if(b[1].end=Object.assign({},w[1].end),b[1].type="chunkText",b[1].contentType="text",t[3]>t[2]+1){const A=t[2]+1,N=t[3]-t[2]-1;n.add(A,N,[])}}n.add(t[3]+1,0,[["exit",g,e]])}return a!==void 0&&(s.end=Object.assign({},Ao(e.events,a)),n.add(a,0,[["exit",s,e]]),s=void 0),s}function Jk(n,e,t,r,a){const s=[],o=Ao(e.events,t);a&&(a.end=Object.assign({},o),s.push(["exit",a,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),n.add(t+1,0,s)}function Ao(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const fB={name:"tasklistCheck",tokenize:pB};function dB(){return{text:{91:fB}}}function pB(n,e,t){const r=this;return a;function a(h){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(h):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(h),n.exit("taskListCheckMarker"),s)}function s(h){return on(h)?(n.enter("taskListCheckValueUnchecked"),n.consume(h),n.exit("taskListCheckValueUnchecked"),o):h===88||h===120?(n.enter("taskListCheckValueChecked"),n.consume(h),n.exit("taskListCheckValueChecked"),o):t(h)}function o(h){return h===93?(n.enter("taskListCheckMarker"),n.consume(h),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),c):t(h)}function c(h){return st(h)?e(h):At(h)?n.check({tokenize:mB},e,t)(h):t(h)}}function mB(n,e,t){return Rt(n,r,"whitespace");function r(a){return a===null?t(a):e(a)}}function gB(n){return Q2([q8(),W8(),aB(n),uB(),dB()])}const yB={};function z0(n){const e=this,t=n||yB,r=e.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(gB(t)),s.push(z8()),o.push(I8(t))}const IC={code({className:n,children:e,...t}){const r=!n?.includes("language-");return k.jsx("code",{className:`${n||""} ${r?"bg-vault-100 dark:bg-vault-700 px-1 py-0.5 rounded text-vault-800 dark:text-vault-200":"block bg-vault-900 text-vault-100 p-3 rounded-lg overflow-x-auto"} font-mono text-sm`,...t,children:e})},pre({children:n}){return k.jsx("pre",{className:"bg-vault-900 text-vault-100 p-3 rounded-lg overflow-x-auto my-2",children:n})},a({href:n,children:e,...t}){return k.jsx("a",{href:n,className:"text-vault-600 dark:text-vault-400 hover:underline",target:"_blank",rel:"noopener noreferrer",...t,children:e})},ul({children:n}){return k.jsx("ul",{className:"list-disc pl-5 my-2",children:n})},ol({children:n}){return k.jsx("ol",{className:"list-decimal pl-5 my-2",children:n})},blockquote({children:n}){return k.jsx("blockquote",{className:"border-l-4 border-vault-300 dark:border-vault-600 pl-4 italic my-2 text-vault-600 dark:text-vault-400",children:n})},hr(){return k.jsx("hr",{className:"border-vault-200 dark:border-vault-700 my-4"})},h1({children:n}){return k.jsx("h1",{className:"text-lg font-bold my-3",children:n})},h2({children:n}){return k.jsx("h2",{className:"text-base font-bold my-2",children:n})},h3({children:n}){return k.jsx("h3",{className:"text-sm font-bold my-2",children:n})},p({children:n}){return k.jsx("p",{className:"my-1.5",children:n})},table({children:n}){return k.jsx("div",{className:"overflow-x-auto my-4 rounded-lg border border-vault-200 dark:border-vault-700",children:k.jsx("table",{className:"min-w-full divide-y divide-vault-200 dark:divide-vault-700",children:n})})},thead({children:n}){return k.jsx("thead",{className:"bg-vault-100 dark:bg-vault-800",children:n})},tbody({children:n}){return k.jsx("tbody",{className:"divide-y divide-vault-200 dark:divide-vault-700",children:n})},tr({children:n}){return k.jsx("tr",{children:n})},th({children:n}){return k.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-vault-500 dark:text-vault-400 uppercase tracking-wider bg-vault-50 dark:bg-vault-900/50",children:n})},td({children:n}){return k.jsx("td",{className:"px-3 py-2 text-sm text-vault-700 dark:text-vault-300",children:n})}};function xB({content:n,isStreaming:e,showCursor:t=!1,className:r="",renderMarkdown:a=!1,components:s={}}){const[o,c]=q.useState({previous:"",new:n,key:0}),h=q.useRef(n),d=q.useRef(0);q.useEffect(()=>{const g=h.current;if(n!==g){const b=n.startsWith(g);if(e&&b&&g.length>0){const w=n.slice(g.length);d.current+=1,c({previous:g,new:w,key:d.current})}else c({previous:"",new:n,key:d.current});h.current=n}},[n,e]),q.useEffect(()=>{e&&(h.current="",c({previous:"",new:n,key:d.current}))},[e,n]);const p=t&&e?k.jsx("span",{className:"inline-block w-2 h-4 ml-1 bg-vault-600 animate-pulse"}):null;return a?k.jsxs("div",{className:r,children:[o.previous&&k.jsx(B0,{remarkPlugins:[z0],components:s,children:o.previous}),o.new&&k.jsx("span",{className:"animate-fade-in-fast",children:k.jsx(B0,{remarkPlugins:[z0],components:s,children:o.new})},o.key),p]}):k.jsxs("span",{className:r,children:[o.previous,o.new&&k.jsx("span",{className:"animate-fade-in-fast",children:o.new},o.key),p]})}function vB({content:n,isStreaming:e,showCursor:t=!1,className:r=""}){return k.jsx(xB,{content:n,isStreaming:e,showCursor:t,className:r,renderMarkdown:!0,components:IC})}const PC=q.memo(({reasoning:n,defaultExpanded:e=!1})=>{const[t,r]=q.useState(e),a=q.useRef(null);return q.useEffect(()=>{if(a.current&&n){const s=a.current;s.scrollHeight-s.scrollTop-s.clientHeight<50&&(s.scrollTop=s.scrollHeight)}},[n]),!n||n.trim().length===0?null:k.jsxs("div",{className:"mb-2 border border-vault-300 dark:border-vault-600 rounded-md overflow-hidden",children:[k.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center justify-between px-2 py-1.5 bg-vault-100 dark:bg-vault-700/50 hover:bg-vault-200 dark:hover:bg-vault-700 transition-colors text-left",children:[k.jsxs("span",{className:"text-xs font-medium text-vault-600 dark:text-vault-400 flex items-center gap-1",children:[k.jsx(Ra,{className:"w-3 h-3"}),"Thinking process"]}),k.jsx("span",{className:"text-xs text-vault-500 dark:text-vault-500",children:t?"Hide":"Show"})]}),t&&k.jsx("div",{ref:a,className:"max-h-40 overflow-y-auto px-2 py-2 bg-vault-50 dark:bg-vault-800/50 border-t border-vault-200 dark:border-vault-700",children:k.jsx("pre",{className:"text-xs font-mono text-vault-700 dark:text-vault-300 whitespace-pre-wrap wrap-break-word leading-relaxed",children:n})})]})});PC.displayName="ReasoningSection";const HC=q.memo(({content:n})=>{const[e,t]=q.useState(!1),r=q.useCallback(async()=>{try{await navigator.clipboard.writeText(n),t(!0),setTimeout(()=>t(!1),2e3)}catch(a){console.error("Failed to copy:",a)}},[n]);return k.jsx("button",{onClick:r,className:"p-1.5 rounded-md text-vault-400 hover:text-vault-600 dark:hover:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-700/50 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:e?"Copied!":"Copy to clipboard",children:e?k.jsx(ow,{className:"w-3.5 h-3.5 text-green-500"}):k.jsx(P0,{className:"w-3.5 h-3.5"})})});HC.displayName="CopyButton";const qC=q.memo(({messageIndex:n,chatHistoryLength:e,onRegenerate:t,isProcessing:r})=>n===e-1?k.jsx("button",{onClick:()=>{t()},disabled:r,className:"p-1.5 rounded-md text-vault-400 hover:text-vault-600 dark:hover:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-700/50 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100 disabled:opacity-50",title:"Regenerate response",children:k.jsx(XT,{className:"w-3.5 h-3.5"})}):null);qC.displayName="RegenerateButton";function bB(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Eg(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const UC=q.memo(({message:n,messageIndex:e,chatHistoryLength:t,showReasoning:r=!0,isProcessing:a,onRegenerate:s})=>{const o=n.role==="user";return k.jsx("div",{className:`flex ${o?"justify-end":"justify-start"}`,children:k.jsxs("div",{className:`relative max-w-[90%] rounded-lg px-3 py-2 group message-animate ${o?"bg-vault-600 text-white rounded-br-none":"bg-white dark:bg-vault-800 border border-vault-200 dark:border-vault-700 text-vault-900 dark:text-vault-100 rounded-bl-none"}`,children:[o?k.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.content}):k.jsxs("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none pb-6",children:[n.reasoning&&r!==!1&&k.jsx(PC,{reasoning:n.reasoning}),k.jsx(B0,{remarkPlugins:[z0],components:IC,children:n.content}),k.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-1",children:[k.jsx(HC,{content:n.content}),k.jsx(qC,{messageIndex:e,chatHistoryLength:t,onRegenerate:s,isProcessing:a})]})]}),k.jsx("span",{className:`text-xs mt-1 block ${o?"text-vault-200":"text-vault-500 dark:text-vault-400"}`,children:bB(n.timestamp)})]})})});UC.displayName="ChatMessage";function kB(){const[n,e]=q.useState([]),[t,r]=q.useState([]),[a,s]=q.useState(""),[o,c]=q.useState(""),[h,d]=q.useState(!1),[p,g]=q.useState(!1),[b,w]=q.useState(!1),[A,N]=q.useState(""),[_,O]=q.useState(""),H=q.useRef([]),R=q.useRef([]),ee=q.useRef(!1),Z=q.useRef(!1),I=q.useRef(!1);q.useEffect(()=>{H.current=n},[n]),q.useEffect(()=>{R.current=t},[t]),q.useEffect(()=>{ee.current=p},[p]),q.useEffect(()=>{Z.current=b},[b]),q.useEffect(()=>{I.current=h},[h]),q.useEffect(()=>{const me=setInterval(()=>{const he=H.current.length>0,se=R.current.length>0;if(!Z.current&&!he&&!se){I.current&&d(!1);return}if((he||se)&&!I.current&&d(!0),R.current.length>0){const xe=R.current[0],Ce=R.current.slice(1);R.current=Ce,r(Ce),c(Ae=>Ae+xe)}if(ee.current&&R.current.length===0&&H.current.length>0){const xe=H.current[0],Ce=H.current.slice(1);H.current=Ce,e(Ce),s(Ae=>Ae+xe)}},30);return()=>clearInterval(me)},[]);const U=q.useCallback(me=>{const he=[...H.current,me];H.current=he,e(he),N(se=>se+me)},[]),ye=q.useCallback(me=>{const he=[...R.current,me];R.current=he,r(he),O(se=>se+me)},[]),fe=q.useCallback(()=>{ee.current=!0,g(!0)},[]),L=q.useCallback(()=>{s(""),c(""),e([]),r([]),g(!1),N(""),O(""),d(!1),H.current=[],R.current=[],ee.current=!1,w(!0)},[]),J=q.useCallback(()=>{w(!1)},[]),ne=q.useCallback(()=>{const me=o,he=A,se=_;if((me||R.current.length>0)&&(ee.current=!0,g(!0)),R.current.length>0){const te=R.current.join("");c(xe=>xe+te),R.current=[],r([])}if(H.current.length>0){const te=H.current.join("");s(xe=>xe+te),H.current=[],e([])}s(te=>te.length<he.length?he:te),c(te=>te.length<se.length?se:te),d(!1)},[o,A,_]);return{displayedContent:a,displayedReasoning:o,isTyping:h,isReasoningComplete:p,queueContentChunk:U,queueReasoningChunk:ye,markReasoningComplete:fe,startStreaming:L,stopStreaming:J,flushQueues:ne,streamingContent:A,streamingReasoning:_}}const wB=150;function SB(n){const{isStreaming:e,isTyping:t=!1,dependencies:r=[]}=n,a=q.useRef(null),s=q.useCallback((o="smooth")=>{a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:o})},[]);return q.useEffect(()=>{if(a.current){const o=a.current;o.scrollHeight-o.scrollTop-o.clientHeight<wB&&o.scrollTo({top:o.scrollHeight,behavior:"smooth"})}},[e,t,...r]),{containerRef:a,scrollToBottom:s}}function CB(n){const{aiConfig:e,samplerSettings:t,promptSettings:r,resolvedContext:a,enableStreaming:s,typewriter:o}=n,[c,h]=q.useState([]),[d,p]=q.useState(!1),[g,b]=q.useState(null),[w,A]=q.useState(!1),N=q.useRef(null),_=q.useMemo(()=>typeof e.modelId=="string"&&e.modelId.trim().length>0,[e.modelId]),O=q.useCallback(()=>{b(null)},[]),H=q.useCallback(()=>{h([])},[]),R=q.useCallback(()=>{N.current&&N.current.abort()},[]),ee=q.useCallback(async()=>{if(c.length===0)return;if(!_){b("Please configure AI settings first");return}const I=c.map((fe,L)=>({...fe,originalIndex:L})).reverse().find(fe=>fe.role==="user");if(!I)return;const U=c.slice(0,I.originalIndex+1),ye=I.content;h(U),p(!0),b(null),await new Promise(fe=>setTimeout(fe,600)),A(s),o.startStreaming();try{const fe=new Mt(e,t,r);N.current=fe;const L=U.map(se=>({role:se.role,content:se.content})),J=[];a.length>0&&J.push(...a);const ne=s?se=>{se.reasoning&&o.queueReasoningChunk(se.reasoning),se.content&&(o.markReasoningComplete(),o.queueContentChunk(se.content))}:void 0,me=await fe.askAIWithConversation(ye,J,L,void 0,ne),he={id:Eg(),role:"assistant",content:me.content,reasoning:me.reasoning,timestamp:Date.now()};h(se=>[...se,he])}catch(fe){fe instanceof Dn&&fe.message==="Request was cancelled"?console.log("[useAIChat] AI request cancelled by user"):(console.error("AI regenerate failed:",fe),fe instanceof Dn?b(fe.message):b("Failed to get AI response. Please try again."))}finally{o.flushQueues(),o.stopStreaming(),p(!1),A(!1),N.current=null}},[c,a,e,t,r,_,s,o]),Z=q.useCallback(async I=>{if(!I.trim()){if(c[c.length-1]?.role==="user"){await ee();return}return}if(!_){b("Please configure AI settings first");return}const U=I.trim(),ye={id:Eg(),role:"user",content:U,timestamp:Date.now()};h(fe=>[...fe,ye]),p(!0),b(null),await new Promise(fe=>setTimeout(fe,600)),A(s),o.startStreaming();try{const fe=new Mt(e,t,r);N.current=fe;const L=c.map(se=>({role:se.role,content:se.content})),J=[];a.length>0&&J.push(...a);const ne=s?se=>{se.reasoning&&o.queueReasoningChunk(se.reasoning),se.content&&(o.markReasoningComplete(),o.queueContentChunk(se.content))}:void 0,me=await fe.askAIWithConversation(U,J,L,void 0,ne),he={id:Eg(),role:"assistant",content:me.content,reasoning:me.reasoning,timestamp:Date.now()};h(se=>[...se,he])}catch(fe){fe instanceof Dn&&fe.message==="Request was cancelled"?console.log("[useAIChat] AI request cancelled by user"):(console.error("AI ask failed:",fe),fe instanceof Dn?b(fe.message):b("Failed to get AI response. Please try again."))}finally{o.flushQueues(),o.stopStreaming(),p(!1),A(!1),N.current=null}},[c,a,e,t,r,_,s,ee,o]);return{chatHistory:c,isProcessing:d,error:g,isStreaming:w,handleAsk:Z,handleRegenerate:ee,handleNewChat:H,handleAbort:R,clearError:O,isAIConfigured:_}}function AB({contextEntryIds:n,aiConfig:e,samplerSettings:t,promptSettings:r,getContextContent:a,onClose:s,isMobile:o=!1}){const[c,h]=q.useState(""),[d,p]=q.useState([]),[g,b]=q.useState(!1),w=q.useRef(null),A=q.useRef(null),N=q.useRef(!1),_=kB(),{chatHistory:O,isProcessing:H,error:R,isStreaming:ee,handleAsk:Z,handleRegenerate:I,handleNewChat:U,handleAbort:ye,clearError:fe}=CB({aiConfig:e,samplerSettings:t,promptSettings:r,resolvedContext:d,enableStreaming:e.enableStreaming??!0,showReasoning:e.showReasoning??!0,typewriter:_}),{containerRef:L,scrollToBottom:J}=SB({isStreaming:ee,isTyping:_.isTyping,dependencies:[O,_.displayedContent,_.displayedReasoning]});q.useEffect(()=>{(async()=>{if(a&&n.length>0)try{const he=await a(n);p(he)}catch(he){console.error("Failed to resolve context:",he),p([])}else p([])})()},[n,a]),q.useEffect(()=>{if(_.isReasoningComplete){const me=L.current;me&&me.scrollHeight-me.scrollTop-me.clientHeight<150&&J("smooth")}},[_.isReasoningComplete,J,L]),q.useEffect(()=>{if(!_.isTyping&&N.current){const me=L.current;me&&me.scrollHeight-me.scrollTop-me.clientHeight<150&&J("auto")}N.current=_.isTyping},[_.isTyping,J,L]),q.useEffect(()=>{if(A.current&&_.displayedReasoning){const me=A.current;me.scrollHeight-me.scrollTop-me.clientHeight<50&&me.scrollTo({top:me.scrollHeight,behavior:"smooth"})}},[_.displayedReasoning]);const ne=async()=>{if(!c.trim()){if(O[O.length-1]?.role==="user"){await I();return}return}const me=c.trim();h(""),await Z(me)};return k.jsxs("div",{className:"h-full flex flex-col bg-vault-50 dark:bg-vault-900 border-l border-vault-200 dark:border-vault-800 animate-fade-in-slow",children:[k.jsx("style",{children:`
        @keyframes message-appear {
          0% {
            opacity: 0;
            transform: translateY(8px) scale(0.98);
          }
          100% {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .message-animate {
          animation: message-appear 0.25s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
      `}),k.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-vault-200 dark:border-vault-800 bg-vault-100 dark:bg-vault-800/50 shrink-0",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Do,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("h2",{className:"font-semibold text-vault-900 dark:text-vault-100",children:"Ask Zoggy"})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[O.length>0&&k.jsx("button",{onClick:U,className:"p-1.5 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-800 rounded-lg transition-colors",title:"New Chat",children:k.jsx(Wo,{className:"w-4 h-4"})}),o&&s&&k.jsx("button",{onClick:s,className:"p-1.5 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-200 dark:hover:bg-vault-800 rounded-lg transition-colors ml-1",title:"Close AI Chat Panel",children:k.jsx(bs,{className:"w-4 h-4"})})]})]}),R&&k.jsxs("div",{className:"mx-3 mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm shrink-0",children:[k.jsx(Da,{className:"w-4 h-4 shrink-0 mt-0.5"}),k.jsx("span",{className:"flex-1",children:R}),k.jsx("button",{onClick:fe,className:"p-0.5 text-red-400 hover:text-red-600 dark:hover:text-red-300",children:k.jsx(bs,{className:"w-3.5 h-3.5"})})]}),k.jsx("div",{className:"border-b border-vault-200 dark:border-vault-800 flex-1 flex flex-col min-h-0",children:k.jsxs("div",{ref:L,className:"px-4 pt-2 pb-4 space-y-4 overflow-y-auto flex-1 min-h-0",children:[O.length===0&&k.jsxs("div",{className:"text-center py-8 text-vault-400 dark:text-vault-500",children:[k.jsx(Do,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),k.jsx("p",{className:"text-sm",children:"Hi, I'm Zoggy!"}),k.jsx("p",{className:"text-xs mt-1",children:"Ask me anything about your character card, or just chat with me! Don't forget to add your context!"})]}),O.map((me,he)=>k.jsx(UC,{message:me,messageIndex:he,chatHistoryLength:O.length,showReasoning:e.showReasoning,isProcessing:H,onRegenerate:I},me.id)),ee&&(_.displayedContent||_.displayedReasoning)&&k.jsx("div",{className:"flex justify-start",children:k.jsxs("div",{className:"max-w-[90%] bg-white dark:bg-vault-800 border border-vault-200 dark:border-vault-700 rounded-lg rounded-bl-none px-3 py-2 message-animate",children:[_.displayedReasoning&&e.showReasoning!==!1&&k.jsxs("div",{className:"mb-2 border border-vault-300 dark:border-vault-600 rounded-md overflow-hidden",children:[k.jsxs("button",{onClick:()=>b(!g),className:"w-full flex items-center justify-between px-2 py-1.5 bg-vault-100 dark:bg-vault-700/50 hover:bg-vault-200 dark:hover:bg-vault-700 transition-colors text-left",children:[k.jsxs("span",{className:"text-xs font-medium text-vault-600 dark:text-vault-400 flex items-center gap-1",children:[k.jsx(Ra,{className:"w-3 h-3"}),"Thinking process"]}),k.jsx("span",{className:"text-xs text-vault-500 dark:text-vault-500",children:g?"Hide":"Show"})]}),g&&k.jsx("div",{ref:A,className:"max-h-40 overflow-y-auto px-2 py-2 bg-vault-50 dark:bg-vault-800/50 border-t border-vault-200 dark:border-vault-700",children:k.jsx("pre",{className:"text-xs font-mono text-vault-700 dark:text-vault-300 whitespace-pre-wrap wrap-break-word leading-relaxed",children:_.displayedReasoning})})]}),_.displayedContent&&k.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none text-vault-900 dark:text-vault-100",children:k.jsx(vB,{content:_.displayedContent,isStreaming:_.isTyping,showCursor:!0})})]})}),H&&(!ee||!_.displayedContent&&!_.displayedReasoning)&&k.jsx("div",{className:"flex justify-start",children:k.jsxs("div",{className:"bg-white dark:bg-vault-800 border border-vault-200 dark:border-vault-700 rounded-lg rounded-bl-none px-3 py-2 flex items-center gap-2 message-animate",children:[k.jsx(yc,{className:"w-4 h-4 animate-spin text-vault-600 dark:text-vault-400"}),k.jsx("span",{className:"text-sm text-vault-600 dark:text-vault-400",children:"AI is thinking..."})]})})]})}),k.jsx("div",{className:"p-3 space-y-3 bg-vault-100 dark:bg-vault-800/50 shrink-0",children:k.jsxs("div",{className:"flex gap-2",children:[k.jsx("input",{ref:w,type:"text",value:c,onChange:me=>h(me.target.value),placeholder:"Ask a question...",className:"flex-1 px-3 py-2 text-sm border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-700 text-vault-900 dark:text-vault-100 placeholder-vault-400 focus:outline-none focus:ring-2 focus:ring-vault-500",onKeyDown:me=>{me.key==="Enter"&&!H&&c.trim()&&ne()},disabled:H}),k.jsx("button",{onClick:()=>{H?ye():ne()},disabled:!H&&!c.trim()&&(!O.length||O[O.length-1]?.role!=="user"),className:`px-3 py-2 text-white text-sm rounded-lg transition-colors flex items-center gap-1.5 ${H?"bg-red-600 hover:bg-red-700":"bg-vault-600 hover:bg-vault-700 disabled:opacity-50"}`,children:H?k.jsx(hE,{className:"w-4 h-4"}):k.jsx(Ra,{className:"w-4 h-4"})})]})})]})}const wo=({id:n,label:e,icon:t,value:r,min:a,max:s,step:o,onChange:c,formatValue:h=g=>g.toString(),showWarning:d=!1,warningMessage:p=""})=>{const g=(r-a)/(s-a)*100;return k.jsxs("div",{className:"space-y-2",children:[k.jsxs("label",{htmlFor:n,className:"flex items-center gap-2 text-sm font-medium text-vault-700 dark:text-vault-300",children:[k.jsx("span",{className:"p-1.5 rounded-md bg-vault-100 dark:bg-vault-800 text-vault-600 dark:text-vault-400",children:t}),e]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{id:n,type:"range",min:a,max:s,step:o,value:r,onChange:b=>c(parseFloat(b.target.value)),className:"w-full h-2 bg-vault-200 dark:bg-vault-700 rounded-lg appearance-none cursor-pointer accent-vault-600 dark:accent-vault-400 focus:outline-none focus:ring-2 focus:ring-vault-500/50",style:{background:`linear-gradient(to right, var(--color-vault-600) 0%, var(--color-vault-600) ${g}%, var(--color-vault-200) ${g}%, var(--color-vault-200) 100%)`}}),k.jsxs("div",{className:"flex justify-between items-center mt-1.5",children:[k.jsx("span",{className:"text-xs text-vault-500",children:h(a)}),k.jsx("span",{className:`text-sm font-semibold ${d?"text-amber-600 dark:text-amber-400":"text-vault-700 dark:text-vault-300"}`,children:h(r)}),k.jsx("span",{className:"text-xs text-vault-500",children:h(s)})]}),d&&p&&k.jsxs("div",{className:"mt-2 flex items-center gap-1.5 text-xs text-amber-600 dark:text-amber-400",children:[k.jsx(Da,{className:"w-3.5 h-3.5"}),k.jsx("span",{children:p})]})]})]})},TB=({settings:n,onChange:e})=>{const t=a=>{e({...n,...{creative:{temperature:.9,minP:.05,topK:50,repetitionPenalty:1.05,topP:.95,contextLength:4096,maxTokens:2048},balanced:{temperature:.7,minP:.05,topK:40,repetitionPenalty:1.1,topP:1,contextLength:4096,maxTokens:2048},factual:{temperature:.3,minP:.1,topK:20,repetitionPenalty:1.2,topP:.5,contextLength:4096,maxTokens:1024}}[a]})},r=(a,s)=>{e({...n,[a]:s})};return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-linear-to-br from-vault-50 to-vault-100 dark:from-vault-800/50 dark:to-vault-800 rounded-xl p-4 border border-vault-200 dark:border-vault-700",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[k.jsx(mw,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("span",{className:"text-sm font-semibold text-vault-700 dark:text-vault-300",children:"Quick Presets"})]}),k.jsx("div",{className:"flex gap-2",children:["creative","balanced","factual"].map(a=>k.jsx("button",{onClick:()=>t(a),className:"flex-1 px-3 py-2 text-sm font-medium bg-white dark:bg-vault-700 hover:bg-vault-50 dark:hover:bg-vault-600 text-vault-700 dark:text-vault-300 rounded-lg transition-all duration-200 border border-vault-200 dark:border-vault-600 hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50",children:k.jsx("span",{className:"capitalize",children:a})},a))})]}),k.jsxs("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-4 border border-vault-200 dark:border-vault-700 shadow-sm",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(fw,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("span",{className:"text-sm font-semibold text-vault-700 dark:text-vault-300",children:"Primary Samplers"})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[k.jsx(wo,{id:"temperature",label:"Temperature",icon:k.jsx(wE,{className:"w-4 h-4"}),value:n.temperature,min:0,max:2,step:.1,onChange:a=>r("temperature",a),formatValue:a=>a.toFixed(1)}),k.jsx(wo,{id:"topP",label:"Top P",icon:k.jsx(IT,{className:"w-4 h-4"}),value:n.topP,min:0,max:1,step:.05,onChange:a=>r("topP",a),formatValue:a=>a.toFixed(2)}),k.jsx(wo,{id:"minP",label:"Min P",icon:k.jsx(aT,{className:"w-4 h-4"}),value:n.minP,min:0,max:1,step:.01,onChange:a=>r("minP",a),formatValue:a=>a.toFixed(2)}),k.jsx(wo,{id:"topK",label:"Top K",icon:k.jsx(gT,{className:"w-4 h-4"}),value:n.topK,min:1,max:100,step:1,onChange:a=>r("topK",a),formatValue:a=>Math.round(a).toString()})]})]}),k.jsxs("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-4 border border-vault-200 dark:border-vault-700 shadow-sm",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(dw,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("span",{className:"text-sm font-semibold text-vault-700 dark:text-vault-300",children:"Secondary Samplers"})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[k.jsx(wo,{id:"repetitionPenalty",label:"Repetition Penalty",icon:k.jsx(GT,{className:"w-4 h-4"}),value:n.repetitionPenalty,min:1,max:2,step:.05,onChange:a=>r("repetitionPenalty",a),formatValue:a=>a.toFixed(2)}),k.jsx(wo,{id:"maxTokens",label:"Max Tokens",icon:k.jsx(sT,{className:"w-4 h-4"}),value:n.maxTokens,min:100,max:8192,step:100,onChange:a=>r("maxTokens",Math.round(a)),formatValue:a=>Math.round(a).toString()}),k.jsxs("div",{className:"sm:col-span-2",children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-vault-700 dark:text-vault-300 mb-2",children:[k.jsx("span",{className:"p-1.5 rounded-md bg-vault-100 dark:bg-vault-800 text-vault-600 dark:text-vault-400",children:k.jsx(Yf,{className:"w-4 h-4"})}),"Context Length"]}),k.jsxs("select",{value:n.contextLength,onChange:a=>r("contextLength",parseInt(a.target.value)),className:"w-full px-3 py-2.5 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-vault-500/50 transition-all duration-200",children:[k.jsx("option",{value:2048,children:"2K tokens"}),k.jsx("option",{value:4096,children:"4K tokens"}),k.jsx("option",{value:8192,children:"8K tokens"}),k.jsx("option",{value:16384,children:"16K tokens"}),k.jsx("option",{value:32768,children:"32K tokens"}),k.jsx("option",{value:65536,children:"64K tokens"}),k.jsx("option",{value:128e3,children:"128K tokens"})]}),k.jsx("p",{className:"mt-2 text-xs text-vault-500",children:"Maximum context window for AI requests"})]})]})]})]})},EB=({models:n,selectedModelId:e,onSelect:t,onFetch:r,isFetching:a,disabled:s=!1})=>{const[o,c]=q.useState(!1),[h,d]=q.useState(""),p=q.useRef(null),g=q.useRef(null),b=n.find(_=>_.id===e),w=n.filter(_=>_.name.toLowerCase().includes(h.toLowerCase())||_.id.toLowerCase().includes(h.toLowerCase()));q.useEffect(()=>{const _=O=>{p.current&&!p.current.contains(O.target)&&c(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),q.useEffect(()=>{if(o&&g.current){g.current.focus();const _=p.current?.closest(".overflow-y-auto");if(_&&p.current){const O=p.current.getBoundingClientRect(),H=_.getBoundingClientRect(),R=256,ee=H.bottom-O.bottom;if(ee<R){const Z=R-ee+16;_.scrollTo({top:_.scrollTop+Z,behavior:"smooth"})}}}},[o]);const A=_=>{t(_),c(!1),d("")},N=_=>{_.key==="Enter"&&w.length>0?A(w[0].id):_.key==="Escape"&&c(!1)};return k.jsxs("div",{className:"space-y-2",ref:p,children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-vault-800 dark:text-vault-200",children:[k.jsx("span",{className:"p-1.5 rounded-md bg-vault-100 dark:bg-vault-800 text-vault-600 dark:text-vault-400",children:k.jsx(sw,{className:"w-4 h-4"})}),"Model"]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs("div",{className:"flex-1 relative",children:[k.jsxs("button",{onClick:()=>!s&&c(!o),disabled:s,className:`w-full px-3 py-2.5 border rounded-lg text-left transition-all duration-200 flex items-center justify-between ${s?"bg-vault-100 dark:bg-vault-800 text-vault-400 cursor-not-allowed border-vault-200 dark:border-vault-700":"bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 border-vault-300 dark:border-vault-600 hover:border-vault-400 dark:hover:border-vault-500 focus:outline-none focus:ring-2 focus:ring-vault-500/50"}`,children:[k.jsx("span",{className:e?"font-medium":"text-vault-400",children:b?.name||"Select or type to search models..."}),k.jsx(El,{className:`w-4 h-4 text-vault-400 transition-transform duration-200 ${o?"rotate-180":""}`})]}),o&&k.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-vault-800 border border-vault-300 dark:border-vault-600 rounded-lg shadow-xl z-50 max-h-64 overflow-hidden",children:[k.jsx("div",{className:"p-2 border-b border-vault-200 dark:border-vault-700",children:k.jsxs("div",{className:"relative",children:[k.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-vault-400"}),k.jsx("input",{ref:g,type:"text",value:h,onChange:_=>d(_.target.value),onKeyDown:N,placeholder:"Type to filter models...",className:"w-full pl-9 pr-3 py-2 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50"})]})}),k.jsx("div",{className:"overflow-y-auto max-h-48",children:w.length===0?k.jsxs("div",{className:"px-3 py-4 text-sm text-vault-500 text-center",children:['No models found matching "',h,'"']}):w.map(_=>k.jsxs("button",{onClick:()=>A(_.id),className:`w-full px-3 py-2 text-left text-sm transition-colors duration-150 ${_.id===e?"bg-vault-100 dark:bg-vault-700 text-vault-900 dark:text-vault-100 font-medium":"text-vault-700 dark:text-vault-300 hover:bg-vault-50 dark:hover:bg-vault-700/50"}`,children:[k.jsx("div",{className:"font-medium",children:_.name}),k.jsx("div",{className:"text-xs text-vault-500 truncate",children:_.id})]},_.id))})]})]}),k.jsxs("button",{onClick:r,disabled:a||s,className:"px-4 py-2 bg-vault-100 dark:bg-vault-800 hover:bg-vault-200 dark:hover:bg-vault-700 disabled:opacity-50 disabled:cursor-not-allowed text-vault-700 dark:text-vault-300 rounded-lg transition-all duration-200 flex items-center gap-2 font-medium focus:outline-none focus:ring-2 focus:ring-vault-500/50",children:[a?k.jsx(yc,{className:"w-4 h-4 animate-spin"}):k.jsx(cw,{className:"w-4 h-4"}),"Fetch"]})]})]})},NB=({toasts:n,onRemove:e})=>k.jsx("div",{className:"fixed top-4 right-4 z-100 space-y-2",children:n.map(t=>k.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 animate-in slide-in-from-right ${t.type==="success"?"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400":t.type==="error"?"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400":"bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-400"}`,children:[t.type==="success"?k.jsx(ow,{className:"w-4 h-4"}):t.type==="error"?k.jsx(Da,{className:"w-4 h-4"}):k.jsx(Da,{className:"w-4 h-4"}),k.jsx("span",{className:"text-sm font-medium",children:t.message}),k.jsx("button",{onClick:()=>e(t.id),className:"ml-2 p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded",children:k.jsx(bs,{className:"w-3 h-3"})})]},t.id))});function MB({isOpen:n,onClose:e}){const{reloadSettings:t}=Cd(),[r,a]=q.useState(!1),[s,o]=q.useState(!1),[c,h]=q.useState({baseUrl:"https://nano-gpt.com/api/v1",apiKey:"",modelId:"",availableModels:[],enableStreaming:!1,enableReasoning:!1,showReasoning:!1}),[d,p]=q.useState({temperature:.7,minP:.05,topK:40,repetitionPenalty:1.1,topP:1,contextLength:4096,maxTokens:2048}),[g,b]=q.useState(Pn.prompts),[w,A]=q.useState(!1),[N,_]=q.useState(!1),[O,H]=q.useState(!1),[R,ee]=q.useState([]),[Z,I]=q.useState("ai"),[U,ye]=q.useState({}),[fe,L]=q.useState(!1),[J,ne]=q.useState(!1),me=q.useRef(null),he=q.useCallback((D,Te)=>{const Ee=Math.random().toString(36).substring(7);ee(P=>[...P,{id:Ee,type:D,message:Te}]),setTimeout(()=>{ee(P=>P.filter(Qe=>Qe.id!==Ee))},5e3)},[]),se=q.useCallback(D=>{ee(Te=>Te.filter(Ee=>Ee.id!==D))},[]);q.useEffect(()=>{if(!n)return;(async()=>{A(!0);try{const[Te,Ee,P]=await Promise.all([rr.getAISettings(),rr.getSamplerSettings(),rr.getPromptSettings()]);h(Qe=>({...Qe,...Te})),p({temperature:Ee?.temperature??.7,minP:Ee?.minP??.05,topK:Ee?.topK??40,repetitionPenalty:Ee?.repetitionPenalty??1.1,topP:Ee?.topP??1,contextLength:Ee?.contextLength??4096,maxTokens:Math.min(Ee?.maxTokens??2048,8192)}),b(P)}catch(Te){console.error("Failed to load settings:",Te),he("error","Failed to load settings")}finally{A(!1)}})()},[n,he]),q.useEffect(()=>{const D=Te=>{if(n&&(Te.key==="Escape"&&e(),Te.key==="ArrowLeft"||Te.key==="ArrowRight")){const Ee=["ai","sampler","prompts"],P=Ee.indexOf(Z);let Qe;Te.key==="ArrowLeft"?Qe=P>0?P-1:Ee.length-1:Qe=P<Ee.length-1?P+1:0,I(Ee[Qe])}};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,Z,e,he]),q.useEffect(()=>{if(!n||!me.current)return;const Te=me.current.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])'),Ee=Te[0],P=Te[Te.length-1],Qe=ct=>{ct.key==="Tab"&&(ct.shiftKey?document.activeElement===Ee&&(ct.preventDefault(),P?.focus()):document.activeElement===P&&(ct.preventDefault(),Ee?.focus()))};return document.addEventListener("keydown",Qe),Ee?.focus(),()=>document.removeEventListener("keydown",Qe)},[n,Z]),q.useEffect(()=>{n?(o(!0),requestAnimationFrame(()=>a(!0))):(a(!1),setTimeout(()=>o(!1),300))},[n]);const te=async()=>{H(!0);try{const Te=await new Mt(c,d).fetchModels();h(Ee=>({...Ee,availableModels:Te})),he("success",`Fetched ${Te.length} models`)}catch(D){D instanceof Dn?he("error",D.message):he("error","Failed to fetch models")}finally{H(!1)}},xe=()=>{const D=[];g.expand.includes("${text}")||D.push("Expand prompt must contain ${text}"),g.rewrite.includes("${text}")||D.push("Rewrite prompt must contain ${text}"),g.instruct.includes("${text}")||D.push("Instruct prompt must contain ${text}"),g.instruct.includes("${instruction}")||D.push("Instruct prompt must contain ${instruction}");const Te=["shorten","lengthen","vivid","emotion","grammar"];for(const Ee of Te)g[Ee].includes("${text}")||D.push(`${Ee.charAt(0).toUpperCase()+Ee.slice(1)} prompt must contain \${text}`);return D.length>0?D.join(`
`):null},Ce=async()=>{_(!0);const D=xe();if(D){he("error",D),_(!1);return}try{const Te={...d,maxTokens:Math.min(d.maxTokens,8192)};await rr.saveAllAISettings(c,Te,g),await t(),he("success","Settings saved successfully!")}catch{he("error","Failed to save settings")}finally{_(!1)}},Ae=async()=>{ne(!0);try{await rr.clearAISettings(),h({baseUrl:"https://nano-gpt.com/api/v1",apiKey:"",modelId:"",availableModels:[],enableStreaming:!1,enableReasoning:!1,showReasoning:!1}),await t(),he("success","AI settings cleared. Your characters are safe."),L(!1)}catch{he("error","Failed to clear AI settings")}finally{ne(!1)}};return s?k.jsxs(k.Fragment,{children:[k.jsx(NB,{toasts:R,onRemove:se}),k.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 transition-opacity duration-300 ${r?"opacity-100":"opacity-0"}`,children:k.jsxs("div",{ref:me,className:`bg-vault-50 dark:bg-vault-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden ring-1 ring-vault-200 dark:ring-vault-800 transition-transform duration-300 scale-100 ${r?"scale-100":"scale-95"}`,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:[k.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-vault-200 dark:border-vault-800 bg-white dark:bg-vault-900",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"p-2 rounded-xl bg-linear-to-br from-vault-500 to-vault-600",children:k.jsx(rE,{className:"w-5 h-5 text-white"})}),k.jsxs("div",{children:[k.jsx("h2",{id:"settings-title",className:"text-lg font-bold text-vault-900 dark:text-vault-100",children:"AI Settings"}),k.jsx("p",{className:"text-xs text-vault-500",children:"Configure your AI generation preferences"})]})]}),k.jsx("button",{onClick:e,className:"p-2 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-vault-500/50","aria-label":"Close settings panel",children:k.jsx(bs,{className:"w-5 h-5"})})]}),k.jsx("div",{className:"flex border-b border-vault-200 dark:border-vault-800 px-6 bg-vault-50 dark:bg-vault-900/50",children:["ai","sampler","prompts"].map(D=>k.jsx("button",{onClick:()=>I(D),className:`px-4 py-3 text-sm font-medium capitalize transition-all duration-200 border-b-2 -mb-px focus:outline-none focus:ring-2 focus:ring-vault-500/50 focus:ring-inset ${Z===D?"border-vault-600 text-vault-600 dark:border-vault-400 dark:text-vault-400":"border-transparent text-vault-500 dark:text-vault-400 hover:text-vault-700 dark:hover:text-vault-300 hover:bg-vault-100/50 dark:hover:bg-vault-800/50"}`,"aria-selected":Z===D,role:"tab",children:k.jsxs("span",{className:"flex items-center gap-2",children:[D==="ai"&&k.jsx(sw,{className:"w-4 h-4"}),D==="sampler"&&k.jsx(fw,{className:"w-4 h-4"}),D==="prompts"&&k.jsx(Do,{className:"w-4 h-4"}),D==="ai"?"AI Config":D]})},D))}),k.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-vault-50/50 dark:bg-vault-900/50",children:[w&&Z!=="sampler"&&k.jsx("div",{className:"flex items-center justify-center py-12",children:k.jsxs("div",{className:"flex flex-col items-center gap-3",children:[k.jsx(yc,{className:"w-8 h-8 animate-spin text-vault-600"}),k.jsx("span",{className:"text-sm text-vault-500",children:"Loading settings..."})]})}),Z==="ai"&&!w&&k.jsxs("div",{className:"space-y-5",children:[k.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-800",children:k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx("div",{className:"p-1.5 rounded-md bg-amber-100 dark:bg-amber-800/50 text-amber-600 dark:text-amber-400 shrink-0",children:k.jsx(sE,{className:"w-4 h-4"})}),k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-1",children:"Security Notice"}),k.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 leading-relaxed",children:"Your API key is stored locally in your browser's IndexedDB. This is convenient but means the key could be accessed by malicious browser extensions or if someone gains physical access to your unlocked computer."}),k.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[k.jsxs("button",{onClick:()=>L(!0),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-amber-700 dark:text-amber-300 bg-amber-100 dark:bg-amber-800/50 hover:bg-amber-200 dark:hover:bg-amber-800 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500/50",children:[k.jsx(Nl,{className:"w-3.5 h-3.5"}),"Clear AI Settings"]}),k.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-500",children:"(Your characters will not be affected)"})]})]})]})}),fe&&k.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx("div",{className:"p-1.5 rounded-md bg-red-100 dark:bg-red-800/50 text-red-600 dark:text-red-400 shrink-0",children:k.jsx(Da,{className:"w-4 h-4"})}),k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Clear AI Settings?"}),k.jsx("p",{className:"text-xs text-red-700 dark:text-red-400 mb-3",children:"This will remove your API key, base URL, and model selection. Your characters and other data will remain untouched."}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("button",{onClick:Ae,disabled:J,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500/50",children:[J?k.jsx(yc,{className:"w-3.5 h-3.5 animate-spin"}):k.jsx(Nl,{className:"w-3.5 h-3.5"}),J?"Clearing...":"Yes, Clear Settings"]}),k.jsx("button",{onClick:()=>L(!1),disabled:J,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-800/50 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500/50",children:"Cancel"})]})]})]})}),k.jsx("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-5 border border-vault-200 dark:border-vault-700 shadow-sm",children:k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-vault-800 dark:text-vault-200 mb-2",children:[k.jsx("span",{className:"p-1.5 rounded-md bg-vault-100 dark:bg-vault-800 text-vault-600 dark:text-vault-400",children:k.jsx(tE,{className:"w-4 h-4"})}),"API Base URL"]}),k.jsx("input",{type:"text",value:c.baseUrl,onChange:D=>h(Te=>({...Te,baseUrl:D.target.value})),className:"w-full px-3 py-2.5 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50 transition-all duration-200",placeholder:"https://nano-gpt.com/api/v1"})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-vault-800 dark:text-vault-200 mb-2",children:[k.jsx("span",{className:"p-1.5 rounded-md bg-vault-100 dark:bg-vault-800 text-vault-600 dark:text-vault-400",children:k.jsx(pT,{className:"w-4 h-4"})}),"API Key"]}),k.jsx("input",{type:"password",value:c.apiKey,onChange:D=>h(Te=>({...Te,apiKey:D.target.value})),className:"w-full px-3 py-2.5 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50 transition-all duration-200",placeholder:"Enter your API key"})]}),k.jsx(EB,{models:c.availableModels||[],selectedModelId:c.modelId,onSelect:D=>h(Te=>({...Te,modelId:D})),onFetch:te,isFetching:O,disabled:!1})]})}),k.jsxs("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-5 border border-vault-200 dark:border-vault-700 shadow-sm",children:[k.jsxs("h3",{className:"text-sm font-semibold text-vault-800 dark:text-vault-200 mb-4 flex items-center gap-2",children:[k.jsx(Ra,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),"Advanced Options"]}),k.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[k.jsxs("label",{className:"flex items-center gap-3 text-sm text-vault-700 dark:text-vault-300 cursor-pointer group",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"checkbox",checked:c.enableStreaming,onChange:D=>h(Te=>({...Te,enableStreaming:D.target.checked})),className:"peer sr-only"}),k.jsx("div",{className:"w-10 h-6 bg-vault-300 dark:bg-vault-700 rounded-full peer-checked:bg-vault-600 dark:peer-checked:bg-vault-500 transition-colors duration-200"}),k.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 peer-checked:translate-x-4"})]}),k.jsx("span",{className:"group-hover:text-vault-900 dark:group-hover:text-vault-100 transition-colors",children:"Enable streaming"})]}),k.jsxs("label",{className:"flex items-center gap-3 text-sm text-vault-700 dark:text-vault-300 cursor-pointer group",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"checkbox",checked:c.enableReasoning,onChange:D=>h(Te=>({...Te,enableReasoning:D.target.checked})),className:"peer sr-only"}),k.jsx("div",{className:"w-10 h-6 bg-vault-300 dark:bg-vault-700 rounded-full peer-checked:bg-vault-600 dark:peer-checked:bg-vault-500 transition-colors duration-200"}),k.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 peer-checked:translate-x-4"})]}),k.jsx("span",{className:"group-hover:text-vault-900 dark:group-hover:text-vault-100 transition-colors",children:"Enable reasoning"})]}),k.jsxs("label",{className:"flex items-center gap-3 text-sm text-vault-700 dark:text-vault-300 cursor-pointer group",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"checkbox",checked:c.showReasoning!==!1,onChange:D=>h(Te=>({...Te,showReasoning:D.target.checked})),className:"peer sr-only"}),k.jsx("div",{className:"w-10 h-6 bg-vault-300 dark:bg-vault-700 rounded-full peer-checked:bg-vault-600 dark:peer-checked:bg-vault-500 transition-colors duration-200"}),k.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 peer-checked:translate-x-4"})]}),k.jsx("span",{className:"group-hover:text-vault-900 dark:group-hover:text-vault-100 transition-colors",children:"Show reasoning"})]})]})]})]}),Z==="sampler"&&k.jsx(TB,{settings:d,onChange:p}),Z==="prompts"&&!w&&k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-4 border border-vault-200 dark:border-vault-700 shadow-sm",children:[k.jsxs("h3",{className:"text-xs font-bold text-vault-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[k.jsx(dw,{className:"w-4 h-4"}),"Primary Operations"]}),["expand","rewrite","instruct"].map(D=>k.jsxs("div",{className:"border border-vault-200 dark:border-vault-700 rounded-lg overflow-hidden mb-3 last:mb-0",children:[k.jsxs("button",{onClick:()=>ye(Te=>({...Te,[D]:!Te[D]})),className:"w-full flex items-center justify-between px-4 py-3 bg-vault-50 dark:bg-vault-800/50 hover:bg-vault-100 dark:hover:bg-vault-800 transition-colors",children:[k.jsxs("span",{className:"flex items-center gap-2 text-sm font-semibold text-vault-700 dark:text-vault-300 capitalize",children:[k.jsx(Do,{className:"w-4 h-4 text-vault-500"}),D==="expand"?"Enhance":D==="rewrite"?"Rephrase":"Custom"," Prompt"]}),U[D]?k.jsx(Io,{className:"w-4 h-4 text-vault-500"}):k.jsx(El,{className:"w-4 h-4 text-vault-500"})]}),U[D]&&k.jsxs("div",{className:"p-4",children:[k.jsx("textarea",{value:g[D],onChange:Te=>b(Ee=>({...Ee,[D]:Te.target.value})),className:"w-full h-32 px-3 py-2 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50 resize-none transition-all duration-200",placeholder:`Enter ${D} prompt...`}),k.jsx("div",{className:"mt-2 text-xs space-y-1",children:D==="instruct"?k.jsxs("span",{className:"text-vault-600 dark:text-vault-400",children:[k.jsx("span",{className:"font-semibold text-red-500",children:"Required:"})," Must contain $","{text}"," and $","{instruction}"]}):k.jsxs("span",{className:"text-vault-600 dark:text-vault-400",children:[k.jsx("span",{className:"font-semibold text-red-500",children:"Required:"})," Must contain $","{text}"]})}),!g[D].includes("${text}")&&k.jsxs("p",{className:"mt-2 text-xs text-red-500 flex items-center gap-1",children:[k.jsx(Da,{className:"w-3 h-3"}),"Missing required $","{text}"," placeholder!"]}),D==="instruct"&&!g[D].includes("${instruction}")&&k.jsxs("p",{className:"mt-2 text-xs text-red-500 flex items-center gap-1",children:[k.jsx(Da,{className:"w-3 h-3"}),"Missing required $","{instruction}"," placeholder!"]})]})]},D))]}),k.jsxs("div",{className:"bg-white dark:bg-vault-800/50 rounded-xl p-4 border border-vault-200 dark:border-vault-700 shadow-sm",children:[k.jsxs("h3",{className:"text-xs font-bold text-vault-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[k.jsx(Ra,{className:"w-4 h-4"}),"Polish Operations (More Menu)"]}),["shorten","lengthen","vivid","emotion","grammar"].map(D=>k.jsxs("div",{className:"border border-vault-200 dark:border-vault-700 rounded-lg overflow-hidden mb-3 last:mb-0",children:[k.jsxs("button",{onClick:()=>ye(Te=>({...Te,[D]:!Te[D]})),className:"w-full flex items-center justify-between px-4 py-3 bg-vault-50 dark:bg-vault-800/50 hover:bg-vault-100 dark:hover:bg-vault-800 transition-colors",children:[k.jsxs("span",{className:"flex items-center gap-2 text-sm font-semibold text-vault-700 dark:text-vault-300 capitalize",children:[k.jsx(Do,{className:"w-4 h-4 text-vault-500"}),D==="grammar"?"Fix":D," Prompt"]}),U[D]?k.jsx(Io,{className:"w-4 h-4 text-vault-500"}):k.jsx(El,{className:"w-4 h-4 text-vault-500"})]}),U[D]&&k.jsxs("div",{className:"p-4",children:[k.jsx("textarea",{value:g[D],onChange:Te=>b(Ee=>({...Ee,[D]:Te.target.value})),className:"w-full h-32 px-3 py-2 border border-vault-300 dark:border-vault-600 rounded-lg bg-white dark:bg-vault-800 text-vault-900 dark:text-vault-100 text-sm focus:outline-none focus:ring-2 focus:ring-vault-500/50 resize-none transition-all duration-200",placeholder:`Enter ${D} prompt...`}),k.jsx("div",{className:"mt-2 text-xs",children:k.jsxs("span",{className:"text-vault-600 dark:text-vault-400",children:[k.jsx("span",{className:"font-semibold text-red-500",children:"Required:"})," Must contain $","{text}"]})}),!g[D].includes("${text}")&&k.jsxs("p",{className:"mt-2 text-xs text-red-500 flex items-center gap-1",children:[k.jsx(Da,{className:"w-3 h-3"}),"Missing required $","{text}"," placeholder!"]})]})]},D))]})]})]}),k.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-vault-200 dark:border-vault-800 bg-white dark:bg-vault-900",children:[k.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-vault-700 dark:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-vault-500/50",children:"Cancel"}),k.jsxs("button",{onClick:Ce,disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-vault-600 to-vault-700 hover:from-vault-700 hover:to-vault-800 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-vault-500/50",children:[N?k.jsx(yc,{className:"w-4 h-4 animate-spin"}):k.jsx(hw,{className:"w-4 h-4"}),"Save Settings"]})]})]})})]}):null}class _B{async exportAsJSON(e){try{const t=this.characterToV3(e),r=JSON.stringify(t,null,2);return{success:!0,blob:new Blob([r],{type:"application/json"}),filename:`${this.sanitizeFilename(e.name)}.json`}}catch(t){return console.error("JSON export error:",t),{success:!1,error:t instanceof Error?t.message:"Error exporting character"}}}async exportAsV2(e){try{const t=this.characterToV2Full(e),r=JSON.stringify(t,null,2);return{success:!0,blob:new Blob([r],{type:"application/json"}),filename:`${this.sanitizeFilename(e.name)}_v2.json`}}catch(t){return console.error("V2 JSON export error:",t),{success:!1,error:t instanceof Error?t.message:"Error exporting character"}}}async exportAsPNG(e){try{if(!e.imageData)return{success:!1,error:"Character has no image. Please add an image before exporting as PNG."};const t=this.characterToV2Full(e),r=this.unicodeToBase64(JSON.stringify(t)),s=await(await this.dataURLToBlob(e.imageData)).arrayBuffer(),o=await this.embedCharaInPNG(s,r);return{success:!0,blob:new Blob([o],{type:"image/png"}),filename:`${this.sanitizeFilename(e.name)}.png`}}catch(t){return console.error("PNG export error:",t),{success:!1,error:t instanceof Error?t.message:"Error exporting character"}}}async exportAsCharacterVault(e){try{const t={...e,id:e.id,name:e.name,imageData:e.imageData,data:e.data,version:e.version,createdAt:e.createdAt,updatedAt:e.updatedAt,lastOpenedAt:e.lastOpenedAt},r=JSON.stringify(t,null,2);return{success:!0,blob:new Blob([r],{type:"application/json"}),filename:`${this.sanitizeFilename(e.name)}.charactervault.json`}}catch(t){return console.error("CharacterVault export error:",t),{success:!1,error:t instanceof Error?t.message:"Error exporting character"}}}characterToV3(e){return{spec:"chara_card_v3",spec_version:"3.0",data:this.characterDataToV2(e)}}characterToV2Full(e){return{spec:"chara_card_v2",spec_version:"2.0",data:this.characterDataToV2(e)}}characterDataToV2(e){const t=e.data.spec;return{name:this.normalizeCardName(t.name||e.name),description:t.description,personality:t.personality,scenario:t.scenario,first_mes:t.first_mes,mes_example:t.mes_example,system_prompt:t.system_prompt,post_history_instructions:t.post_history_instructions,alternate_greetings:t.alternate_greetings,character_book:e.data.characterBook,extensions:e.data.extensions||{},creator:t.creator||"",character_version:t.character_version||"1.0",tags:t.tags||[],creator_notes:t.creator_notes||"",avatar:t.avatar||""}}normalizeCardName(e){return Array.from(e).map(a=>{const s=a.charCodeAt(0);return s<32||s===127?" ":a}).join("").replace(/\s+/g," ").trim()||"Character"}async embedCharaInPNG(e,t){const r=new DataView(e);let a=0;const s=new Uint8Array(e,0,8),o=[137,80,78,71,13,10,26,10];for(let w=0;w<8;w++)if(s[w]!==o[w])throw new Error("Invalid PNG file signature");a=8;const c=[new Uint8Array(s)],h=this.createTextChunk("chara",t);let d=!1;for(;a<e.byteLength;){const w=r.getUint32(a),A=r.getUint32(a+4),N=new Uint8Array(e,a+8,w),_=new Uint8Array(e,a,12+w);if(this.isCardMetadataChunk(A,N)){a+=12+w;continue}if(c.push(_),A===1229472850&&!d&&(c.push(h),d=!0),A===1229278788)break;a+=12+w}const p=c.reduce((w,A)=>w+A.length,0),g=new Uint8Array(p);let b=0;for(const w of c)g.set(w,b),b+=w.length;return g.buffer}isCardMetadataChunk(e,t){return e===1950701684?this.isCardKeyword(this.readKeyword(t)):e===1767135348?this.isCardKeyword(this.readKeyword(t)):e===2052348020?this.isCardKeyword(this.readKeyword(t)):!1}isCardKeyword(e){const t=e.toLowerCase();return t==="chara"||t==="ccv3"}readKeyword(e){let t=e.length;for(let r=0;r<e.length;r++)if(e[r]===0){t=r;break}return new TextDecoder("utf-8").decode(e.slice(0,t))}createTextChunk(e,t){const r=new TextEncoder().encode(e),a=new TextEncoder().encode(t),s=new Uint8Array(r.length+1+a.length);s.set(r),s[r.length]=0,s.set(a,r.length+1);const o=new Uint8Array(12+s.length),c=new DataView(o.buffer);c.setUint32(0,s.length),o[4]=116,o[5]=69,o[6]=88,o[7]=116,o.set(s,8);const h=this.calculateCRC(o.slice(4,8+s.length));return c.setUint32(8+s.length,h),o}calculateCRC(e){const t=this.getCRCTable();let r=4294967295;for(let a=0;a<e.length;a++)r=t[(r^e[a])&255]^r>>>8;return(r^4294967295)>>>0}getCRCTable(){if(this.crcTable)return this.crcTable;const e=new Uint32Array(256);for(let t=0;t<256;t++){let r=t;for(let a=0;a<8;a++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return this.crcTable=e,e}crcTable=null;async dataURLToBlob(e){return(await fetch(e)).blob()}sanitizeFilename(e){return e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}unicodeToBase64(e){const t=new TextEncoder().encode(e);let r="";const a=t.byteLength;for(let s=0;s<a;s++)r+=String.fromCharCode(t[s]);return btoa(r)}}const ew=new _B,Ng={Image:H0,Type:pw,FileText:To,User:q0,Map:kT,MessageCircle:Dg,MessagesSquare:AT,Terminal:bE,History:uT,Eye:nT,Puzzle:FT,Link:xT,NotebookPen:MT,UserCircle:$4,Tag:mE,Tags:yE,Book:I0};function DB({activeSection:n,onSectionChange:e}){const[t,r]=q.useState(!1),a=Zi.useRef(null),s=Zi.useRef(null),o=Zi.useRef(null);q.useEffect(()=>{const d=o.current;if(!d)return;const p=g=>{if(d.scrollWidth<=d.clientWidth)return;const b=Math.abs(g.deltaX)>Math.abs(g.deltaY)?g.deltaX:g.deltaY;b!==0&&(g.preventDefault(),d.scrollLeft+=b)};return d.addEventListener("wheel",p,{passive:!1}),()=>d.removeEventListener("wheel",p)},[]),q.useEffect(()=>{const d=p=>{const g=p.target,b=a.current?.contains(g),w=s.current?.contains(g);!b&&!w&&r(!1)};return t&&document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[t]);const c=_o.find(d=>d.id===n),h=c&&Ng[c.icon]||To;return k.jsxs("div",{className:"border-b border-vault-200 dark:border-vault-800 bg-white/60 dark:bg-vault-900/60 backdrop-blur-xl shrink-0",children:[k.jsx("div",{ref:o,className:"hidden md:flex items-center gap-1 px-4 py-2 overflow-x-auto scrollbar-thin",children:_o.map(d=>{const p=Ng[d.icon]||To,g=n===d.id;return k.jsxs("button",{onClick:()=>e(d.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap
                ${g?"bg-vault-600 text-white shadow-sm":"text-vault-600 dark:text-vault-400 hover:bg-vault-100 dark:hover:bg-vault-800/50"}`,children:[k.jsx(p,{className:"w-4 h-4"}),d.label]},d.id)})}),k.jsxs("div",{className:"md:hidden relative",ref:a,children:[k.jsxs("button",{onClick:()=>r(!t),className:"flex items-center justify-between w-full px-4 py-3 text-left hover:bg-vault-50 dark:hover:bg-vault-800/50 transition-colors",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(h,{className:"w-4 h-4 text-vault-600 dark:text-vault-400"}),k.jsx("span",{className:"font-medium text-vault-900 dark:text-vault-100",children:c?.label||"Select Section"})]}),k.jsx(El,{className:`w-4 h-4 text-vault-500 transition-transform ${t?"rotate-180":""}`})]}),t&&N4.createPortal(k.jsx("div",{ref:s,className:"fixed inset-x-0 top-26.25 z-9999 bg-white dark:bg-vault-900 border-b border-vault-200 dark:border-vault-800 shadow-lg max-h-[50vh] overflow-y-auto md:hidden",children:_o.map(d=>{const p=Ng[d.icon]||To,g=n===d.id;return k.jsxs("button",{type:"button",onClick:b=>{b.preventDefault(),b.stopPropagation(),e(d.id),r(!1)},className:`flex items-center gap-2 w-full px-4 py-3 text-sm transition-colors
                    ${g?"bg-vault-100 dark:bg-vault-800 text-vault-900 dark:text-vault-100 font-medium":"text-vault-600 dark:text-vault-400 hover:bg-vault-50 dark:hover:bg-vault-800/50"}`,children:[k.jsx(p,{className:`w-4 h-4 ${g?"text-vault-600 dark:text-vault-400":""}`}),d.label]},d.id)})}),document.body)]})]})}function jB(){const{currentCharacter:n,updateCharacter:e}=$o(),[t,r]=Zi.useState(!1),a=async d=>{if(!d.type.startsWith("image/")){alert("Please select an image file");return}const p=new FileReader;p.onload=g=>{const b=g.target?.result;n&&b&&e(n.id,{imageData:b})},p.readAsDataURL(d)},s=d=>{d.preventDefault(),r(!1);const p=d.dataTransfer.files[0];p&&a(p)},o=d=>{d.preventDefault(),r(!0)},c=()=>{r(!1)},h=d=>{const p=d.target.files?.[0];p&&a(p)};return k.jsxs("div",{className:"space-y-6",children:[k.jsx("h2",{className:"text-xl font-bold text-vault-900 dark:text-vault-50",children:"Character Image"}),k.jsx("div",{className:"flex justify-center",children:n?.imageData?k.jsxs("div",{className:"relative group",children:[k.jsx("img",{src:n.imageData,alt:n.name,className:"w-96 h-96 max-w-full max-h-[60vh] object-contain rounded-2xl border-2 border-vault-200 dark:border-vault-700 shadow-lg"}),k.jsx("button",{onClick:()=>n&&void e(n.id,{imageData:""}),className:`absolute top-2 right-2 p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg\r
                opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-lg`,children:k.jsx(Nl,{className:"w-4 h-4"})})]}):k.jsxs("div",{onDrop:s,onDragOver:o,onDragLeave:c,className:`w-96 h-96 max-w-full max-h-[60vh] rounded-2xl border-2 border-dashed 
              ${t?"border-vault-500 bg-vault-100 dark:bg-vault-800/50":"border-vault-300 dark:border-vault-700 bg-vault-50 dark:bg-vault-900/30"}
              flex flex-col items-center justify-center gap-3 transition-colors duration-200`,children:[k.jsx(H0,{className:"w-16 h-16 text-vault-400 dark:text-vault-600"}),k.jsxs("p",{className:"text-sm text-vault-500 dark:text-vault-400 text-center px-4",children:["Drag and drop an image here",k.jsx("br",{}),"or click to browse"]})]})}),k.jsx("div",{className:"flex justify-center",children:k.jsxs("label",{className:"cursor-pointer",children:[k.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"hidden"}),k.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 bg-vault-600 hover:bg-vault-700 \r
            text-white rounded-xl font-medium transition-colors duration-200 cursor-pointer`,children:[k.jsx(Dc,{className:"w-4 h-4"}),n?.imageData?"Change Image":"Upload Image"]})]})})]})}function OB({onOpenSettings:n,isContextOpen:e,isChatOpen:t,onToggleContext:r,onToggleChat:a,isMobile:s}){const{currentCharacter:o,closeCharacter:c}=$o();if(!o)return k.jsx(k.Fragment,{});const h=async()=>{if(!o)return;const p=await ew.exportAsJSON(o);if(p.success&&p.blob){const g=URL.createObjectURL(p.blob),b=document.createElement("a");b.href=g,b.download=p.filename||`${o.name}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(g)}else alert(p.error||"Failed to export character")},d=async()=>{if(!o)return;const p=await ew.exportAsPNG(o);if(p.success&&p.blob){const g=URL.createObjectURL(p.blob),b=document.createElement("a");b.href=g,b.download=p.filename||`${o.name}.png`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(g)}else alert(p.error||"Failed to export character")};return k.jsxs("header",{className:`h-16 flex items-center justify-between px-4 md:px-6\r
      bg-white/60 dark:bg-vault-900/60 backdrop-blur-xl\r
      border-b border-vault-200/60 dark:border-vault-800/50 shrink-0`,children:[k.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[k.jsx("button",{onClick:c,className:`p-2 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200\r
            hover:bg-vault-100 dark:hover:bg-vault-800/50 rounded-xl transition-all duration-200\r
            focus:outline-none focus:ring-2 focus:ring-vault-500 active:scale-95 shrink-0`,title:"Back to characters",children:k.jsx(B4,{className:"w-5 h-5"})}),k.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[o.imageData?k.jsx("img",{src:o.imageData,alt:o.name,className:"w-8 h-8 md:w-10 md:h-10 rounded-lg object-cover border border-vault-200 dark:border-vault-700 shrink-0"}):k.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-vault-200 dark:bg-vault-800 flex items-center justify-center shrink-0",children:k.jsx(q0,{className:"w-4 h-4 md:w-5 md:h-5 text-vault-500 dark:text-vault-400"})}),k.jsxs("div",{className:"min-w-0",children:[k.jsx("h1",{className:"font-semibold text-vault-900 dark:text-vault-50 text-sm md:text-base truncate",children:o.name}),k.jsx("p",{className:"text-xs text-vault-500 dark:text-vault-400 hidden sm:block",children:"Editing character"})]})]})]}),k.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[s&&k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${e?"bg-vault-600 text-white":"text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-100 dark:hover:bg-vault-800/50"}`,title:"Toggle AI Context Panel",children:k.jsx(Ra,{className:"w-4 h-4 md:w-5 md:h-5"})}),k.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-colors ${t?"bg-vault-600 text-white":"text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-100 dark:hover:bg-vault-800/50"}`,title:"Toggle Ask AI Panel",children:k.jsx(Do,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),!s&&k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:r,className:`hidden lg:flex p-2 rounded-lg transition-colors ${e?"bg-vault-200 dark:bg-vault-700 text-vault-700 dark:text-vault-200":"text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-100 dark:hover:bg-vault-800/50"}`,title:e?"Hide AI Context Panel":"Show AI Context Panel",children:k.jsx(OT,{className:"w-5 h-5"})}),k.jsx("button",{onClick:a,className:`hidden lg:flex p-2 rounded-lg transition-colors ${t?"bg-vault-200 dark:bg-vault-700 text-vault-700 dark:text-vault-200":"text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200 hover:bg-vault-100 dark:hover:bg-vault-800/50"}`,title:t?"Hide Ask AI Panel":"Show Ask AI Panel",children:k.jsx(BT,{className:"w-5 h-5"})})]}),k.jsx("div",{className:"h-6 w-px bg-vault-200 dark:bg-vault-800 mx-1 hidden sm:block"}),k.jsx("button",{onClick:n,className:`p-2 text-vault-500 hover:text-vault-700 dark:text-vault-400 dark:hover:text-vault-200\r
            hover:bg-vault-100 dark:hover:bg-vault-800/50 rounded-xl transition-colors`,title:"AI Settings",children:k.jsx(aE,{className:"w-5 h-5"})}),k.jsxs("button",{onClick:h,className:`hidden sm:flex items-center gap-2 px-3 py-2 text-sm font-medium\r
            text-vault-700 dark:text-vault-300\r
            hover:bg-vault-100 dark:hover:bg-vault-800/50 rounded-xl\r
            transition-colors duration-200`,children:[k.jsx(hw,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden md:inline",children:"Export JSON"})]}),k.jsxs("button",{onClick:d,className:`flex items-center gap-2 px-3 py-2 text-sm font-medium\r
            bg-vault-600 hover:bg-vault-700 text-white rounded-xl\r
            transition-colors duration-200`,children:[k.jsx(uw,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden md:inline",children:"Export PNG"})]})]})]})}function RB({isOpen:n,onClick:e}){return n?k.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 lg:hidden",onClick:e}):k.jsx(k.Fragment,{})}function BB(){const{currentCharacter:n}=$o(),[e,t]=q.useState(!1),[r,a]=q.useState(!0),[s,o]=q.useState(!0),[c,h]=q.useState(!1);return q.useEffect(()=>{const d=()=>{const p=window.innerWidth<1024;h(p),p?(a(!1),o(!1)):(a(!0),o(!0))};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),n?k.jsx(E4,{children:k.jsx(LB,{isSettingsOpen:e,setIsSettingsOpen:t,isContextOpen:r,isChatOpen:s,setIsContextOpen:a,setIsChatOpen:o,isMobile:c})}):k.jsx("div",{className:"h-screen w-full flex items-center justify-center",children:k.jsx("div",{className:"text-center",children:k.jsx("p",{className:"text-vault-500",children:"No character selected"})})})}function LB({isSettingsOpen:n,setIsSettingsOpen:e,isContextOpen:t,isChatOpen:r,setIsContextOpen:a,setIsChatOpen:s,isMobile:o}){const{activeSection:c,setActiveSection:h,selectedText:d,contextSectionIds:p,aiConfig:g,samplerSettings:b,promptSettings:w,handleAIOperation:A,getContextContent:N}=Cd(),_=()=>a(!t),O=()=>s(!r),H=!o,R=H&&t&&r,ee=H&&(!t||!r),Z=()=>{o&&(a(!1),s(!1))};return k.jsxs("div",{className:`h-screen w-full flex flex-col bg-linear-to-br from-vault-50 via-vault-50 to-vault-100/50 \r
      dark:from-vault-950 dark:via-vault-950 dark:to-vault-900/50 overflow-hidden`,children:[k.jsx(OB,{onOpenSettings:()=>e(!0),isContextOpen:t,isChatOpen:r,onToggleContext:_,onToggleChat:O,isMobile:o}),k.jsx(RB,{isOpen:o&&(t||r),onClick:Z}),k.jsx(DB,{activeSection:c,onSectionChange:h}),k.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[k.jsx("aside",{className:`
            ${t&&o?"fixed inset-y-0 left-0 z-40 w-80 shadow-2xl translate-x-0":""}
            ${!t&&o?"fixed inset-y-0 left-0 z-40 w-80 shadow-2xl -translate-x-full":""}
            ${t&&!o?"lg:w-72 xl:w-80 translate-x-0":""}
            ${!t&&!o?"lg:w-0 lg:opacity-0 lg:overflow-hidden":""}
            transition-all duration-300 ease-in-out
            bg-vault-50 dark:bg-vault-900
            border-r border-vault-200 dark:border-vault-800
            flex flex-col
            shrink-0
          `,children:k.jsx(X_,{onClose:()=>a(!1),isMobile:o})}),k.jsx("main",{className:"flex-1 flex flex-col min-w-0 relative z-0 overflow-hidden",children:k.jsx("div",{className:`flex-1 min-h-0 ${R||ee?"p-0":"p-3 md:p-4 lg:p-6"}`,children:k.jsx("div",{className:`h-full w-full bg-white/60 dark:bg-vault-900/60 backdrop-blur-xl
              border border-vault-200/60 dark:border-vault-800/50 shadow-lg overflow-hidden
              ${R?"rounded-none p-2 md:p-3 border-l-0 border-r-0":ee?`rounded-none p-3 md:p-4 ${t?"":"border-l-0"} ${r?"":"border-r-0"}`:"rounded-2xl p-4 md:p-6"}`,children:c==="image"?k.jsx(jB,{}):k.jsx(Q_,{section:c})})})}),k.jsx("aside",{className:`
            ${r&&o?"fixed inset-y-0 right-0 z-40 w-80 shadow-2xl translate-x-0":""}
            ${!r&&o?"fixed inset-y-0 right-0 z-40 w-80 shadow-2xl translate-x-full":""}
            ${r&&!o?"lg:w-80 xl:w-96 translate-x-0":""}
            ${!r&&!o?"lg:w-0 lg:opacity-0 lg:overflow-hidden":""}
            transition-all duration-300 ease-in-out
            bg-vault-50 dark:bg-vault-900
            border-l border-vault-200 dark:border-vault-800
            flex flex-col
            shrink-0
          `,children:k.jsx(AB,{selectedText:d,contextEntryIds:p,aiConfig:g,samplerSettings:b,promptSettings:w,onComplete:I=>A(I,"ask",d),getContextContent:async I=>N(I),activeSection:c,onClose:()=>s(!1),isMobile:o})})]}),k.jsx(MB,{isOpen:n,onClose:()=>e(!1)})]})}function zB(){return k.jsx(BB,{})}const Lf=[{id:0,title:"Welcome to CharacterVault",subtitle:"Your distraction-free character card workshop",description:"CharacterVault is your all-in-one workspace for creating, editing, and managing character spec cards. Built for SillyTavern and compatible platforms  supporting both V2 and V3 card formats out of the box.",features:[{icon:Og,label:"Your Library",detail:"Manage your entire character collection in one place, stored locally in your browser"},{icon:Qb,label:"Full-Featured Editor",detail:"Section-based editing with dedicated tabs for every card field"},{icon:Ra,label:"AI-Powered Tools",detail:"Built-in AI toolbar and chat assistant to help craft your characters"}],accentIcon:Yf},{id:1,title:"Import or Create",subtitle:"Start with what you have  or from scratch",description:'Bring in your existing character cards or start fresh. CharacterVault reads V2 and V3 PNG cards with embedded metadata, as well as raw JSON files. Click "Import" in the header or the "+ New" button to get started.',features:[{icon:Dc,label:"Import Cards",detail:"Import PNG cards with embedded data or raw JSON character files"},{icon:Wo,label:"Create New",detail:"Start fresh with a blank character template and build from scratch"},{icon:To,label:"V2 & V3 Support",detail:"Full compatibility with both character card specifications"}],accentIcon:Dc},{id:2,title:"Edit Your Character",subtitle:"Every field organized in dedicated sections",description:"Navigate through tabs for each part of your character card. Every section has a focused CodeMirror editor with search & replace so you can work without distractions.",features:[{icon:pw,label:"Core Sections",detail:"Name, Description, Personality, Scenario, First Message, Example Messages, System Prompt, and more"},{icon:H0,label:"Image",detail:"Upload or drag & drop your character's portrait image directly"},{icon:I0,label:"Lorebook",detail:"Built-in lorebook editor  manage entries with trigger keys, priority, position, and AI-assisted content"}],accentIcon:Qb},{id:3,title:"AI Writing Tools",subtitle:"Your editing suite, supercharged",description:"Select any text in the editor to reveal the AI toolbar. Use one-click operations to transform your writing, or give custom instructions. All AI results stream in real-time and can be accepted or rejected.",features:[{icon:DE,label:"Enhance & Rephrase",detail:"Expand your text with more depth, or rephrase for better clarity and flow"},{icon:DT,label:"Style Polish",detail:"Make text more Vivid, add Emotion, Shorten, Lengthen, or Fix Grammar  all one click"},{icon:mw,label:"Custom Instructions",detail:"Type any instruction and the AI applies it to your selected text"}],accentIcon:Ra},{id:4,title:"Zoggy & Export",subtitle:"Chat with your AI assistant  and ship your cards",description:"Zoggy is CharacterVault's built-in chat assistant. Add sections to the AI Context panel so Zoggy can read your card and give tailored advice. When you're done, export as PNG with embedded data or raw JSON.",features:[{icon:Dg,label:"Ask Zoggy",detail:"Chat about best practices, get help writing sections, or brainstorm character ideas"},{icon:ZT,label:"AI Context",detail:"Pin card sections to context so the AI has full awareness of your character"},{icon:uw,label:"Export",detail:"Save as a PNG with embedded card data, or export the raw JSON file"}],accentIcon:Dg},{id:5,title:"You're All Set!",subtitle:"Start building your characters",description:"That's everything you need to know. Your characters are stored locally in your browser  private and always available. You can replay this tutorial anytime by clicking the help icon in the header bar.",features:[{icon:jg,label:"Get Started",detail:"Create your first character or import an existing card"},{icon:Yf,label:"Replay Tutorial",detail:"Click the help icon (?) in the header bar anytime"},{icon:Og,label:"Your Data, Your Control",detail:"Everything stays local in your browser  no servers, no sign-up required"}],accentIcon:jg}],By="charactervault-tutorial-completed";function _c({onComplete:n}){const[e,t]=q.useState(0),[r,a]=q.useState("next"),[s,o]=q.useState(!1),[c,h]=q.useState(!1);q.useEffect(()=>{const R=setTimeout(()=>h(!0),50);return()=>clearTimeout(R)},[]);const d=Lf[e],p=e===0,g=e===Lf.length-1,b=q.useCallback((R,ee)=>{s||(o(!0),a(ee),setTimeout(()=>{t(R),o(!1)},250))},[s]),w=q.useCallback(()=>{g||b(e+1,"next")},[e,g,b]),A=q.useCallback(()=>{p||b(e-1,"prev")},[e,p,b]),N=q.useCallback(()=>{localStorage.setItem(By,"true"),h(!1),setTimeout(n,400)},[n]),_=q.useCallback(()=>{N()},[N]);q.useEffect(()=>{const R=ee=>{(ee.key==="ArrowRight"||ee.key==="Enter")&&(g?N():w()),ee.key==="ArrowLeft"&&A(),ee.key==="Escape"&&_()};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[w,A,N,_,g]);const O=d.accentIcon,H=s?r==="next"?"tutorial-step-exiting-next":"tutorial-step-exiting-prev":"tutorial-step-entering";return k.jsxs("div",{className:`fixed inset-0 z-100 flex items-center justify-center transition-all duration-500
        ${c?"opacity-100":"opacity-0 pointer-events-none"}`,children:[k.jsx("div",{className:"absolute inset-0 bg-vault-950/80 dark:bg-black/85 tutorial-backdrop",onClick:_}),k.jsxs("div",{className:`relative z-10 w-full max-w-2xl mx-4 transition-all duration-500 ease-out
          ${c?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-8 opacity-0"}`,children:[!g&&k.jsxs("button",{onClick:_,className:`absolute -top-10 sm:-top-12 right-0 flex items-center gap-1.5 px-3 py-1.5 text-xs sm:text-sm font-medium\r
              text-vault-400 hover:text-white transition-colors rounded-lg hover:bg-white/10`,children:[k.jsx("span",{children:"Skip tutorial"}),k.jsx(bs,{className:"w-3.5 h-3.5"})]}),k.jsxs("div",{className:"bg-white dark:bg-vault-900 rounded-2xl shadow-2xl border border-vault-200 dark:border-vault-800 overflow-hidden tutorial-card-enter",children:[k.jsxs("div",{className:"relative px-5 pt-6 pb-4 sm:px-8 sm:pt-8 sm:pb-6 overflow-hidden",children:[k.jsx("div",{className:"absolute -top-2 -right-1 w-24 h-24 sm:w-40 sm:h-40 opacity-[0.06] dark:opacity-[0.08] tutorial-float rotate-15 pointer-events-none",style:{animationDelay:"1.2s"},children:k.jsx(O,{className:"w-full h-full",strokeWidth:1.5})}),k.jsx("div",{className:"absolute inset-0 tutorial-shimmer pointer-events-none"}),k.jsxs("div",{className:"flex items-center gap-1.5 mb-6 relative",children:[Lf.map((R,ee)=>k.jsx("div",{className:`h-1.5 rounded-full tutorial-dot
                    ${ee===e?"w-8 bg-vault-900 dark:bg-vault-100":ee<e?"w-3 bg-vault-400 dark:bg-vault-500":"w-3 bg-vault-200 dark:bg-vault-700"}`},ee)),k.jsxs("span",{className:"ml-auto text-xs font-medium text-vault-400 dark:text-vault-500 tabular-nums",children:[e+1," / ",Lf.length]})]}),k.jsxs("div",{className:`tutorial-step-content ${H}`,children:[k.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-vault-400 dark:text-vault-500 mb-2",children:d.subtitle}),k.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-vault-900 dark:text-vault-50 tracking-tight",children:d.title})]})]}),k.jsx("div",{className:"px-5 pb-5 sm:px-8 sm:pb-6",children:k.jsxs("div",{className:`tutorial-step-content ${H}`,children:[k.jsx("p",{className:"text-vault-600 dark:text-vault-400 text-[15px] leading-relaxed mb-6",children:d.description}),k.jsx("div",{className:"grid gap-3",children:d.features.map((R,ee)=>{const Z=R.icon;return k.jsxs("div",{className:`tutorial-feature-card group flex items-start gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl\r
                        bg-vault-50 dark:bg-vault-800/60\r
                        border border-vault-100 dark:border-vault-800\r
                        hover:border-vault-300 dark:hover:border-vault-600`,style:{opacity:s?0:1,transform:s?"translateY(8px)":"translateY(0)"},children:[k.jsx("div",{className:`shrink-0 p-2.5 rounded-lg bg-vault-200/70 dark:bg-vault-700/50\r
                        group-hover:bg-vault-900 dark:group-hover:bg-vault-100\r
                        transition-colors duration-200`,children:k.jsx(Z,{className:`w-4 h-4 text-vault-600 dark:text-vault-300\r
                          group-hover:text-white dark:group-hover:text-vault-900\r
                          transition-colors duration-200`})}),k.jsxs("div",{className:"min-w-0",children:[k.jsx("h4",{className:"text-sm font-semibold text-vault-900 dark:text-vault-100 mb-0.5",children:R.label}),k.jsx("p",{className:"text-xs text-vault-500 dark:text-vault-400 leading-relaxed",children:R.detail})]})]},`${d.id}-${ee}`)})})]})}),k.jsxs("div",{className:"px-5 py-4 sm:px-8 sm:py-5 border-t border-vault-100 dark:border-vault-800 bg-vault-50/50 dark:bg-vault-800/30 flex items-center justify-between",children:[k.jsxs("button",{onClick:A,disabled:p,className:`flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200
                ${p?"text-vault-300 dark:text-vault-700 cursor-not-allowed":"text-vault-600 dark:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-800 active:scale-95"}`,children:[k.jsx(U4,{className:"w-4 h-4"}),"Back"]}),k.jsx("button",{onClick:g?N:w,className:`flex items-center gap-2 px-6 py-2.5 text-sm font-semibold rounded-lg\r
                bg-vault-900 dark:bg-vault-100 text-white dark:text-vault-900\r
                hover:opacity-90 active:scale-95\r
                shadow-sm hover:shadow-md transition-all duration-200`,children:g?k.jsxs(k.Fragment,{children:["Get Started",k.jsx(jg,{className:"w-4 h-4"})]}):k.jsxs(k.Fragment,{children:["Next",k.jsx(V4,{className:"w-4 h-4"})]})})]})]})]})]})}_c.isCompleted=()=>localStorage.getItem(By)==="true";_c.reset=()=>{localStorage.removeItem(By)};class IB{async importFromFile(e){try{return console.log("Importing file:",e.name,"type:",e.type),e.type==="application/json"||e.name.endsWith(".json")?await this.importFromJSON(e):e.type.startsWith("image/")||e.name.endsWith(".png")?await this.importFromPNG(e):{success:!1,error:"Unsupported file type. Please upload a PNG or JSON file."}}catch(t){return console.error("Import error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error during import"}}}async importFromJSON(e){const t=await e.text();let r;try{r=JSON.parse(t)}catch{return{success:!1,error:"Invalid JSON file"}}if(this.isCharacterVaultExport(r))return{success:!0,character:await this.createCharacterFromExport(r)};const a=this.extractV3Data(r);if(a)return{success:!0,character:await this.createCharacterFromV2(a,"")};if(this.isCharacterCardV2(r)){const s=r,o={name:String(s.name||""),description:String(s.description||""),personality:String(s.personality||""),scenario:String(s.scenario||""),first_mes:String(s.first_mes||""),mes_example:String(s.mes_example||""),system_prompt:String(s.system_prompt||""),post_history_instructions:String(s.post_history_instructions||""),alternate_greetings:Array.isArray(s.alternate_greetings)?s.alternate_greetings:[],extensions:s.extensions||{},character_book:s.character_book,creator:typeof s.creator=="string"?s.creator:void 0,character_version:typeof s.character_version=="string"?s.character_version:void 0,tags:Array.isArray(s.tags)?s.tags:void 0,creator_notes:typeof s.creator_notes=="string"?s.creator_notes:void 0,avatar:typeof s.avatar=="string"?s.avatar:void 0};return{success:!0,character:await this.createCharacterFromV2(o,"")}}return{success:!1,error:"Unrecognized JSON format. Expected Character Card V2, V3, or CharacterVault export."}}extractV3Data(e){if(!e||typeof e!="object")return null;const t=e,r=t.data&&typeof t.data=="object"?t.data:null,a=r&&typeof r.name=="string"?r.name:typeof t.name=="string"?t.name:null;if(!a)return null;const s=(h,d)=>{const p=r&&typeof r[h]=="string"?r[h]:typeof t[h]=="string"?t[h]:d&&r&&typeof r[d]=="string"?r[d]:d&&typeof t[d]=="string"?t[d]:"";return String(p||"")},o=h=>r&&Array.isArray(r[h])?r[h]:Array.isArray(t[h])?t[h]:void 0;return{name:a,description:s("description"),personality:s("personality"),scenario:s("scenario"),first_mes:s("first_mes"),mes_example:s("mes_example"),system_prompt:s("system_prompt"),post_history_instructions:s("post_history_instructions"),alternate_greetings:o("alternate_greetings")||[],extensions:r&&r.extensions||t.extensions||{},character_book:r&&r.character_book||t.character_book,creator:s("creator")||void 0,character_version:s("character_version","create_date")||void 0,tags:o("tags"),creator_notes:s("creator_notes","creatorcomment")||void 0,avatar:s("avatar")||void 0}}async importFromPNG(e){try{const t=await e.arrayBuffer(),r=this.extractCharaFromPNG(t);if(!r)return{success:!1,error:"No character data found in PNG. Make sure this is a valid character card."};let a;try{const h=atob(r),d=new Uint8Array(h.length);for(let g=0;g<h.length;g++)d[g]=h.charCodeAt(g);const p=new TextDecoder("utf-8").decode(d);a=JSON.parse(p)}catch(h){return console.error("Failed to decode/parse character data:",h),{success:!1,error:"Invalid character data in PNG file"}}const s=await this.fileToDataURL(e),o=this.extractV3Data(a);if(o)return{success:!0,character:await this.createCharacterFromV2(o,s)};let c=a;if(a&&typeof a=="object"){const h=a;h.data&&typeof h.data=="object"&&(c=h.data)}if(this.isCharacterCardV2(c)){const h=c,d={name:String(h.name||""),description:String(h.description||""),personality:String(h.personality||""),scenario:String(h.scenario||""),first_mes:String(h.first_mes||""),mes_example:String(h.mes_example||""),system_prompt:String(h.system_prompt||""),post_history_instructions:String(h.post_history_instructions||""),alternate_greetings:Array.isArray(h.alternate_greetings)?h.alternate_greetings:[],extensions:h.extensions||{},character_book:h.character_book,creator:typeof h.creator=="string"?h.creator:void 0,character_version:typeof h.character_version=="string"?h.character_version:void 0,tags:Array.isArray(h.tags)?h.tags:void 0,creator_notes:typeof h.creator_notes=="string"?h.creator_notes:void 0,avatar:typeof h.avatar=="string"?h.avatar:void 0};return{success:!0,character:await this.createCharacterFromV2(d,s)}}if(c&&typeof c=="object"){const h=c,d=typeof h.name=="string"?h.name:typeof h.char_name=="string"?h.char_name:"Imported Character",p={name:d,description:String(h.description||h.char_persona||""),personality:String(h.personality||""),scenario:String(h.scenario||h.world_scenario||""),first_mes:String(h.first_mes||h.first_message||""),mes_example:String(h.mes_example||""),system_prompt:String(h.system_prompt||""),post_history_instructions:String(h.post_history_instructions||""),alternate_greetings:Array.isArray(h.alternate_greetings)?h.alternate_greetings:[],physical_description:String(h.physical_description||""),creator:typeof h.creator=="string"?h.creator:void 0,character_version:typeof h.character_version=="string"?h.character_version:void 0,tags:Array.isArray(h.tags)?h.tags:void 0,creator_notes:typeof h.creator_notes=="string"?h.creator_notes:void 0,avatar:typeof h.avatar=="string"?h.avatar:void 0};return{success:!0,character:await Yt.createCharacter({name:d,imageData:s,data:{spec:p,characterBook:h.character_book,extensions:h.extensions}})}}return{success:!1,error:"Invalid character card format in PNG"}}catch(t){return console.error("PNG import error:",t),{success:!1,error:t instanceof Error?t.message:"Error reading PNG file"}}}extractCharaFromPNG(e){const t=new DataView(e);let r=0;const a=new Uint8Array(e,0,8),s=[137,80,78,71,13,10,26,10];for(let o=0;o<8;o++)if(a[o]!==s[o])throw console.error("Invalid PNG signature"),new Error("Invalid PNG file signature");for(r=8;r<e.byteLength&&!(r+8>e.byteLength);){const o=t.getUint32(r),c=this.readChunkType(t,r+4);if(o>10*1024*1024){console.error("Chunk too large:",o);break}if(r+12+o>e.byteLength){console.error("Incomplete chunk at offset:",r);break}const h=new Uint8Array(e,r+8,o);if(c==="tEXt"){const d=this.readNullTerminatedString(h);if(d==="chara"){const p=new TextEncoder().encode(d),g=h.slice(p.length+1);return new TextDecoder().decode(g)}}if(c==="iTXt"){const d=this.parseITXtChunk(h);if(d.keyword==="chara")return d.text}if(c==="IEND")break;r+=12+o}return null}readChunkType(e,t){const r=[e.getUint8(t),e.getUint8(t+1),e.getUint8(t+2),e.getUint8(t+3)];return String.fromCharCode(...r)}readNullTerminatedString(e){let t=0;for(let r=0;r<e.length;r++)if(e[r]===0){t=r;break}return new TextDecoder("utf-8").decode(e.slice(0,t))}parseITXtChunk(e){let t=0,r=t;for(;r<e.length&&e[r]!==0;)r++;const a=new TextDecoder("utf-8").decode(e.slice(t,r));if(t=r+1,t>=e.length)return{keyword:a,text:""};const s=e[t];for(t++,t++;t<e.length&&e[t]!==0;)t++;for(t++;t<e.length&&e[t]!==0;)t++;t++;const o=new TextDecoder("utf-8").decode(e.slice(t));if(s===1)try{const c=new Uint8Array(e.slice(t)),h=this.inflate(c);return{keyword:a,text:new TextDecoder().decode(h)}}catch(c){return console.warn("Failed to decompress iTXt chunk:",c),{keyword:a,text:o}}return{keyword:a,text:o}}inflate(e){return e}fileToDataURL(e){return new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=r,a.readAsDataURL(e)})}isCharacterCardV2(e){return!e||typeof e!="object"?!1:typeof e.name=="string"}isCharacterVaultExport(e){if(!e||typeof e!="object")return!1;const t=e;return typeof t.id=="string"&&typeof t.name=="string"&&t.data!==void 0}async createCharacterFromV2(e,t){const r={name:e.name||"",description:e.description||"",personality:e.personality||"",scenario:e.scenario||"",first_mes:e.first_mes||"",mes_example:e.mes_example||"",system_prompt:e.system_prompt||"",post_history_instructions:e.post_history_instructions||"",alternate_greetings:e.alternate_greetings||[],physical_description:"",avatar:e.avatar,creator_notes:e.creator_notes,creator:e.creator,character_version:e.character_version,tags:e.tags};return await Yt.createCharacter({name:e.name||"Imported Character",imageData:t,data:{spec:r,characterBook:e.character_book,extensions:e.extensions}})}async createCharacterFromExport(e){return await Yt.createCharacter({name:e.name,imageData:e.imageData,data:e.data})}}const PB=new IB,Mg=({icon:n,onClick:e,title:t,variant:r="ghost",className:a="",type:s="button"})=>{const o="p-2 rounded-lg transition-all duration-200 active:scale-95",c={ghost:"text-vault-500 hover:text-vault-900 dark:text-vault-400 dark:hover:text-vault-100 hover:bg-vault-100 dark:hover:bg-vault-800",primary:"bg-vault-900 dark:bg-vault-50 text-white dark:text-vault-900 hover:opacity-90 shadow-sm",danger:"text-vault-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"};return k.jsx("button",{type:s,onClick:e,title:t,className:`${o} ${c[r]} ${a}`,children:k.jsx(n,{className:"w-4 h-4"})})};function HB({character:n,onOpen:e,onDuplicate:t,onDelete:r}){const a=s=>{if(!s)return"New";const o=new Date().getTime()-new Date(s).getTime(),c=Math.floor(o/(1e3*60*60*24));return c===0?"Today":c===1?"Yesterday":`${c}d ago`};return k.jsxs("div",{className:`group relative flex flex-col bg-white dark:bg-vault-900 rounded-xl border border-vault-200 dark:border-vault-800 \r
      hover:border-vault-300 dark:hover:border-vault-700 shadow-xs hover:shadow-lg\r
      transition-all duration-300 overflow-hidden cursor-pointer`,onClick:()=>e(n.id),children:[k.jsxs("div",{className:"relative aspect-3/4 w-full overflow-hidden bg-vault-100 dark:bg-vault-800",children:[n.imageData?k.jsx("img",{src:n.imageData,alt:n.name,className:"w-full h-full object-cover transition-transform duration-500 ease-out group-hover:scale-105 will-change-transform",loading:"lazy"}):k.jsx("div",{className:"flex items-center justify-center w-full h-full text-vault-300 dark:text-vault-700",children:k.jsx(q0,{className:"w-16 h-16"})}),k.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),k.jsxs("div",{className:`absolute top-2 right-2 flex gap-1 transition-all duration-200 \r
          opacity-100 translate-y-0 \r
          sm:opacity-0 sm:-translate-y-2 \r
          sm:group-hover:opacity-100 sm:group-hover:translate-y-0`,children:[k.jsx("button",{onClick:s=>{s.stopPropagation(),t(n.id,n.name)},className:"p-1.5 bg-white/90 dark:bg-vault-900/90 backdrop-blur-sm rounded-md text-vault-600 dark:text-vault-300 hover:text-vault-900 hover:bg-white shadow-sm",title:"Duplicate",children:k.jsx(P0,{className:"w-3.5 h-3.5"})}),k.jsx("button",{onClick:s=>{s.stopPropagation(),r(n.id,n.name)},className:"p-1.5 bg-white/90 dark:bg-vault-900/90 backdrop-blur-sm rounded-md text-red-500 hover:text-red-600 hover:bg-white shadow-sm",title:"Delete",children:k.jsx(Nl,{className:"w-3.5 h-3.5"})})]})]}),k.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[k.jsx("div",{className:"flex items-start justify-between gap-2",children:k.jsx("h3",{className:"font-semibold text-vault-900 dark:text-vault-50 truncate text-sm leading-tight",children:n.name})}),k.jsx("div",{className:"flex items-center justify-between mt-2",children:k.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-vault-500 dark:text-vault-400",children:[k.jsx(Z4,{className:"w-3 h-3"}),k.jsx("span",{children:a(n.lastOpenedAt)})]})})]})]})}function qB({onReplayTutorial:n}){const{characters:e,isLoading:t,createCharacter:r,openCharacter:a,deleteCharacter:s,duplicateCharacter:o,refreshCharacters:c}=$o(),[h,d]=q.useState(""),[p,g]=q.useState(!1),[b,w]=q.useState(""),[A,N]=q.useState(null),[_,O]=q.useState(null),H=q.useRef(null),R=()=>typeof window<"u"&&window.innerWidth<640?12:18,[ee,Z]=q.useState(R);q.useEffect(()=>{const Ae=setTimeout(()=>{Z(R())},0);return()=>clearTimeout(Ae)},[h]);const[I,U]=Zi.useState(()=>typeof document>"u"?!0:document.documentElement.classList.contains("dark")),ye=()=>{const Ae=!I;U(Ae),document.documentElement.classList.toggle("dark",Ae),localStorage.setItem("theme",Ae?"dark":"light")},fe=q.useMemo(()=>{let Ae=[...e];return h&&(Ae=Ae.filter(D=>D.name.toLowerCase().includes(h.toLowerCase()))),Ae.sort((D,Te)=>{const Ee=D.lastOpenedAt?new Date(D.lastOpenedAt).getTime():0;return(Te.lastOpenedAt?new Date(Te.lastOpenedAt).getTime():0)-Ee})},[e,h]),L=fe[0],J=async Ae=>{if(Ae.preventDefault(),!!b.trim())try{await r({name:b.trim()}),w(""),g(!1)}catch{alert("Failed to create character")}},ne=async Ae=>{const D=Ae.target.files?.[0];if(D){try{const Te=await PB.importFromFile(D);Te.success&&Te.character?await c():alert(Te.error)}catch{alert("Import failed")}Ae.target.value=""}},me=(Ae,D)=>{N({id:Ae,name:D})},he=async()=>{A&&(await s(A.id),N(null))},se=()=>{N(null)},te=(Ae,D)=>{O({id:Ae,name:D})},xe=async()=>{_&&(await o(_.id,`${_.name} (Copy)`),O(null))},Ce=()=>{O(null)};return k.jsxs("div",{className:"h-screen overflow-y-auto bg-vault-50 dark:bg-vault-950 text-vault-900 dark:text-vault-100 transition-colors duration-500 animate-fade-in-slow",children:[k.jsx("header",{className:"sticky top-0 z-30 w-full backdrop-blur-xl bg-white/80 dark:bg-vault-950/80 border-b border-vault-200 dark:border-vault-800",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between gap-4",children:[k.jsx("div",{className:"flex items-center gap-2",children:k.jsx("img",{src:"/CharacterVaultLogo.svg",alt:"Character Vault Logo",className:"shrink-0 h-8 w-auto sm:h-10 md:h-12 lg:h-14"})}),k.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:k.jsxs("div",{className:"relative group",children:[k.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-vault-400 group-focus-within:text-vault-600 dark:group-focus-within:text-vault-300 transition-colors"}),k.jsx("input",{type:"text",placeholder:"Search characters...",value:h,onChange:Ae=>d(Ae.target.value),className:"w-full bg-vault-100 dark:bg-vault-900 border border-transparent focus:bg-white dark:focus:bg-vault-800 focus:border-vault-300 dark:focus:border-vault-700 rounded-full py-1.5 pl-9 pr-4 text-sm transition-all outline-none"})]})}),k.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[k.jsx("input",{ref:H,type:"file",accept:".png,.json,image/png,application/json",onChange:ne,className:"hidden"}),k.jsxs("button",{onClick:()=>H.current?.click(),className:"hidden sm:flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-vault-600 dark:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-colors",children:[k.jsx(Dc,{className:"w-4 h-4"}),"Import"]}),k.jsx("button",{onClick:()=>H.current?.click(),className:"sm:hidden p-2 text-vault-600 dark:text-vault-300 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-colors",title:"Import",children:k.jsx(Dc,{className:"w-4 h-4"})}),k.jsx("div",{className:"h-6 w-px bg-vault-200 dark:bg-vault-800 mx-1 hidden sm:block"}),k.jsx(Mg,{icon:I?dE:ET,onClick:ye,title:"Toggle Theme"}),k.jsx(Mg,{icon:Q4,onClick:n,title:"Replay Tutorial"}),k.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-vault-900 dark:bg-vault-700 text-white dark:text-vault-100 text-sm font-medium rounded-lg hover:opacity-90 transition-opacity ml-2",children:[k.jsx(Wo,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden sm:inline",children:"New"})]})]})]})}),k.jsx("div",{className:"sm:hidden px-4 pt-3",children:k.jsxs("div",{className:"relative group",children:[k.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-vault-400 group-focus-within:text-vault-600 dark:group-focus-within:text-vault-300 transition-colors"}),k.jsx("input",{type:"text",placeholder:"Search characters...",value:h,onChange:Ae=>d(Ae.target.value),className:"w-full bg-vault-100 dark:bg-vault-900 border border-transparent focus:bg-white dark:focus:bg-vault-800 focus:border-vault-300 dark:focus:border-vault-700 rounded-full py-2 pl-9 pr-4 text-sm transition-all outline-none"})]})}),k.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&k.jsx("div",{className:"mb-8 animate-in fade-in slide-in-from-top-2",children:k.jsxs("form",{onSubmit:J,className:"bg-white dark:bg-vault-900 p-4 rounded-2xl border border-vault-200 dark:border-vault-800 shadow-lg max-w-lg mx-auto flex gap-2 items-center",children:[k.jsx("input",{autoFocus:!0,type:"text",placeholder:"Character Name...",value:b,onChange:Ae=>w(Ae.target.value),className:"flex-1 bg-transparent border-none focus:ring-0 text-lg font-medium placeholder:text-vault-300 dark:placeholder:text-vault-700"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx(Mg,{icon:bs,onClick:()=>g(!1),title:"Cancel"}),k.jsx("button",{type:"submit",disabled:!b.trim(),className:"px-4 py-2 bg-vault-900 dark:bg-vault-50 text-white dark:text-vault-900 rounded-lg text-sm font-medium disabled:opacity-50",children:"Create"})]})]})}),e.length>0&&!h&&k.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center justify-between gap-4 mb-8",children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Library"}),k.jsxs("p",{className:"text-vault-500 dark:text-vault-400 text-sm mt-1",children:[e.length," ",e.length===1?"character":"characters"," stored locally"]})]}),L&&k.jsxs("button",{onClick:()=>a(L.id),className:"group flex items-center gap-3 pl-4 pr-3 py-2 bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-800 rounded-full hover:border-vault-300 dark:hover:border-vault-700 hover:shadow-md transition-all",children:[k.jsxs("div",{className:"text-right",children:[k.jsx("p",{className:"text-[10px] font-bold text-vault-400 uppercase tracking-wider",children:"Continue"}),k.jsx("p",{className:"text-sm font-semibold max-w-37.5 truncate",children:L.name})]}),k.jsx("div",{className:"w-8 h-8 rounded-full bg-vault-100 dark:bg-vault-800 flex items-center justify-center group-hover:bg-vault-900 group-hover:text-white dark:group-hover:bg-vault-50 dark:group-hover:text-vault-900 transition-colors",children:k.jsx(HT,{className:"w-4 h-4 fill-current"})})]})]}),t?k.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:[...Array(5)].map((Ae,D)=>k.jsx("div",{className:"aspect-3/4 rounded-xl bg-vault-100 dark:bg-vault-800/50 animate-pulse"},D))}):fe.length===0?k.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[k.jsx("div",{className:"w-24 h-24 bg-vault-100 dark:bg-vault-900 rounded-full flex items-center justify-center mb-6",children:k.jsx(Og,{className:"w-10 h-10 text-vault-300 dark:text-vault-700"})}),k.jsx("h3",{className:"text-lg font-medium",children:"No characters found"}),k.jsx("p",{className:"text-vault-500 dark:text-vault-400 mt-2 mb-8 max-w-sm",children:h?`No results for "${h}"`:"Get started by creating a new character or importing a card."}),!h&&k.jsx("button",{onClick:()=>H.current?.click(),className:"px-6 py-2.5 border border-vault-300 dark:border-vault-700 rounded-xl hover:bg-vault-50 dark:hover:bg-vault-900 transition-colors font-medium",children:"Import Card"})]}):k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-6",children:fe.slice(0,ee).map(Ae=>k.jsx(HB,{character:Ae,onOpen:a,onDuplicate:te,onDelete:me},Ae.id))}),ee<fe.length&&k.jsx("div",{className:"flex justify-center pt-8 pb-20",children:k.jsxs("button",{onClick:()=>Z(Ae=>Ae+R()),className:"group flex items-center gap-2 px-8 py-3 bg-white dark:bg-vault-900 border border-vault-200 dark:border-vault-800 rounded-full hover:border-vault-400 dark:hover:border-vault-600 hover:shadow-md transition-all text-sm font-medium text-vault-600 dark:text-vault-300",children:["Load More",k.jsxs("span",{className:"text-xs text-vault-400 dark:text-vault-500",children:["(",fe.length-ee," remaining)"]})]})}),ee>=fe.length&&k.jsx("div",{className:"pb-20"})]})]}),A&&k.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 dark:bg-black/70 backdrop-blur-sm animate-in fade-in",children:k.jsxs("div",{className:"bg-white dark:bg-vault-900 rounded-2xl shadow-2xl max-w-sm w-full p-6 animate-in zoom-in-95",children:[k.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[k.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:k.jsx(Nl,{className:"w-6 h-6 text-red-500"})}),k.jsx("h3",{className:"text-lg font-semibold text-vault-900 dark:text-vault-100",children:"Delete Character?"})]}),k.jsxs("p",{className:"text-vault-600 dark:text-vault-400 mb-6",children:["Are you sure you want to delete ",k.jsx("span",{className:"font-medium text-vault-900 dark:text-vault-100",children:A.name}),"? This action cannot be undone."]}),k.jsxs("div",{className:"flex gap-3 justify-end",children:[k.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-vault-600 dark:text-vault-400 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-colors",children:"Cancel"}),k.jsx("button",{onClick:he,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Delete"})]})]})}),_&&k.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 dark:bg-black/70 backdrop-blur-sm animate-in fade-in",children:k.jsxs("div",{className:"bg-white dark:bg-vault-900 rounded-2xl shadow-2xl max-w-sm w-full p-6 animate-in zoom-in-95",children:[k.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[k.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:k.jsx(P0,{className:"w-6 h-6 text-blue-500"})}),k.jsx("h3",{className:"text-lg font-semibold text-vault-900 dark:text-vault-100",children:"Copy Character?"})]}),k.jsxs("p",{className:"text-vault-600 dark:text-vault-400 mb-6",children:["Are you sure you want to create a copy of ",k.jsx("span",{className:"font-medium text-vault-900 dark:text-vault-100",children:_.name}),"?"]}),k.jsxs("div",{className:"flex gap-3 justify-end",children:[k.jsx("button",{onClick:Ce,className:"px-4 py-2 text-sm font-medium text-vault-600 dark:text-vault-400 hover:bg-vault-100 dark:hover:bg-vault-800 rounded-lg transition-colors",children:"Cancel"}),k.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Copy"})]})]})})]})}function UB(){const{isCharacterOpen:n}=$o(),[e,t]=q.useState(()=>!(_c.isCompleted?.()??!1)),r=q.useCallback(()=>{t(!1)},[]),a=q.useCallback(()=>{_c.reset?.(),t(!0)},[]);return k.jsxs(k.Fragment,{children:[e&&k.jsx(_c,{onComplete:r}),n?k.jsx(zB,{}):k.jsx(qB,{onReplayTutorial:a})]})}function FB(){return k.jsx(A4,{children:k.jsx(UB,{})})}const FC=document.getElementById("root");if(!FC)throw new Error("Root element not found");p4.createRoot(FC).render(k.jsx(q.StrictMode,{children:k.jsx(FB,{})}));
//# sourceMappingURL=index-BMtHRTds.js.map
